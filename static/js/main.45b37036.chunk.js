(this["webpackJsonplobby-portal"]=this["webpackJsonplobby-portal"]||[]).push([[0],{172:function(e,t,a){e.exports=a.p+"static/media/logo.7f12e1c7.png"},343:function(e,t,a){e.exports=a(501)},469:function(e,t,a){e.exports=a.p+"static/media/slack-integration.9c4865bb.png"},470:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAADcCAYAAACs2N87AAAXdUlEQVR4AezBgQAAAAACoDH2Jx3kKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAL86dusQEaMoisLohSwBjECUZDCNv0DSNU18BYAogVHI5mIGz2k3AeByVlh11/2NHMyHtcbATCgA8Fs+O3AaemjMIBQAEFggsACoBBYILAAQWAgsABBY7UFgAYDAQmABgMACgQWAwAKBBQACC4EFAAILBBYAAgsEFgACS2AhsABAYIHAAkBgXYaLV8CDwHorAATW6MFEKC+CkYNdgQWAwBJYCCwAEFgILAAQWLRBYAGAwEJgAYDAAoEFgMASWAgsABBYCCwAEFg0Q2ABgMBCYAGAwAKBBYDAElgILAAQWAgsABBYtE9gAYDAQmABgMCibQILAAQWAgsABBZtE1gAILAQWAAgsGiSwAIAgYXAAgCBhcASWIuh+4DlUFJgELoPmAslsb3QvdN2KCCwEFh/30boP2AnlBS4Dv0HLISS2GPo3+k+FBBYCCyB9e8hsILAQmCBwBJYCKwfJLAQWCCwBBYCS2AhsAQWAktgIbAEFggsBJbAohJYCQgsBBYILIGFwBJYCCyBhcASWAgsgQUCC4ElsKgEVgICC4EFAktgIbAEFgJLYCGwBBYCS2CBwEJgCSwqgZWAwEJggcASWAgsgYXAElgILIGFwBJYILAQWAKLSmAlILAQWCCwBBYCS2AhsAQWAktgIbAEFggsBJbAohJYCQgsBBYILIGFwBJYCCyBhcASWAgsgQUCC4ElsKgEVgICC4EFAktgIbAEFgJLYCGwBBYCq0UCC4EFAktgIbAEFgJrK9y8012c55iAQGAJLASWwEJg/TwQWAILgSWwEFggsAQWAktggcBCYAmsJ/buOcqSLGvY+K5q20hna8207cK4bay2bdu2Mtu2bdsufG132Xbu77n5xqtaneude3bgROb+47diWH2T96lzIvYJ5zyw6tAT//oD66LOA2sms7bMx3UZ/KsDy/K/WQRSbi7SF+ZcZIHlgeU8sGqxE25AP0yA/hvG43Ncjl352V4IEpVsA2s1nICH8TOmQf8PMzAEz+Bs9K6ZrWU2SHm4aF+Ycx5YHlhZq5+ntTvXGvTCPjgYJ+K6xLE4GHuiV+UJ6No5WmaBRCj9wOLj5XoEPkEbNAXT8RYONTzwFHtgrYVrMAiakuG4Bf+sm7ulO8TFLdoX5pwHlgdW2urmbOnOdQOchZcD31jH4GWchg0MwRVzYK2GuzANmqFJuAXLln2LsHb2llm5boOPoRn7BYfUzN4yG8TFKdoX5pwHlgdWitbA1fgNmrIhuBordIItwkY8Cc3ZNNyJurIFVsN8rd2SsOoHzdnvOKQSd5C08GcujxcNHmYXYo5IdkK2M34sq3W+m9yd88DywLLbCG9Cc/IKNixhYK2HczAVWqCJOKFxgdZukLwYAmt5vAktWF+sBUnR01CDIyFFqqzwcf0RGqiPYTvWtwidbxF6YHVKq+F9aEFexkolCqyB0Ih8gWUiX8EahUnQSLThYqJi1pR2EFbFDGigwUWvYiX3VarBdvAxDc5XsDywPLBqZm2Zi+tFmAqNwAXB2zcBDIEVo5HYOuLAitUHaIak4DaowekFr179YFkVrNyzCQmV/AvnYuOB5YFVtT+jHzQyX2HFaFew4neSB1bVBmADiEXyFOl4aKAx/BkLQ3JnX73a3geNuvLzFSwPLLutMQ4aqYnYzgMr2F2VkRqQDBgCK2oT0RtidAnU4BxIniqrxsbVqzd8krsrPw8sDyy7E6ElcbwHVrA7rVs2Hek4sDyykm33Yca5Z42QHO0NNehVeGDJ5A9bMalKU7pN/nAxCJzriAeWB5YhrqJ2qQdWsJN9i7BqE1J44OJAqMENkDxU5tKlsXoVQ2DdAK1W+QPLeWB5YHlcmVzogRVsdw+sqg3kvqQFISGSaPneOOdseUgOtspt9coDy3lgeWD55yI6M7C3B1aQqVjZA6tqb1ieaE1myqnBo5AcfBzD6pUHlvPA8sAqo16YBi25yejRSQJrBibgP2nGvmTO0ZwQu0IDawomJCZDM3YKJMRSi7RPrH8darAKJEObG+eI9fbAciXmgeWBZTBryxJcR2Z8ZMuUmUyHZuR3PqaFIHa5BtbvuBo7YWX+2YtC/lPydVoDu+MWDIGm7NySrWDNwCs4Hf9C3UyDOGev/Gf4J07BS5iRftSbjnRaE2rwDiRDH0EDPQzxwHKl5oHlgWXwODRF43Ev9sKqlSemIDOZN4mF/fBoBisN95doBeuBkL/l187Zfg/PRvgg5dWf5UoQWGNxJhoC/kKxCNfj8Cs0Ja9DDO6DGvwDkoHNoAYremA5Aw+sUvPA2gWakm+xX8g2UxJcB6X8prdV5IH1PtaHpGBjfAVNwcMRB9YUXEUkLQCxqKx0JStf9ri3HwGzjHGL/i1ImpZatH378sMYVq88sJwHVql4YFVCiOuAlFasjqybq6U7xCLZ0jkqpTe9nyp/HsQig8Bqwxn82bNB0pLMVroWmoKVIgysAegJSdmK6Ac16mP4GUhj+OjOkBRtGsH3kAeW88DywCql86BGX2I5SMqWRl+o0WGRrWBNwBY5fE9Pt65iRRZYfbBkhvchzs/1BajRZobXsDDXwcbjoyQNjQu2r159EMHqlQeW88DywCrl6tU4qMGTrJrMA8lCspr1HNRgkG0VK9XAmoBekBzskEJk1UcSWG/z/TAnJFNsGdojyzyS4ASowQGQFGwSwX18HljOA8sDq5QOgho82DBfazdIhtKKrN0jWMFqw9aQHB0HNTgngsD6GktC8pBE1ifGpxobgleOFmjtZhw+OuA/n6IM1WRfvboOYuCB5TywSs0D6wtooHcrN6VDckFkGR8VfyeCwLoAUoB7oIG+b2ZOEySELbAMw0/tao3nBJ4BMdgVanA4xGBj49es0QOrS3IeWPDAWg4aaCjqCpjVtaRhVlcbli4wsD6vmb1lNkje+LzNxz9/eEGP2VsD6zhIQXazfL0Lnj011nKEj3H16nqIB1aX5Dyw4IF1BjTQ9pCC7FrQze7WwPobpEB7QwOdVFBg9TdsdZklIwo+hgaYQagsZhxu26OggbEbGQcKN3hgdVnOA8sDyzDb5kNIUZoXNs3lebGgwHoLUqTkUOHfoQGeKiiwdoMYFH2j904Qo6eggcZUnkoMCLsPratXHljl5TywPLDsN/FOhQbYtMRvehMLCqztIRE4ExpgUNNCrd0g1TIE1qjUZoTZb/b+ERrg4pRGlbRBA90AqcK/LEGHJT2wujLngeUrWGtAA/wGKVpyPMyAPAcfGgJr/H8eE1S05GPXIIH38xgC63ZIDAzDP5+BpOB64w3n9YaVbcMTpx5YXY/zwPLA2gMa4BJIJC6HBtgx58B6ARILw2rMOjlvEe4EicSG0AC/pPRwx+Jcx+dwJudG+WxH2hn+zx5YmXIeWB5Y50AD9IBEYnPDDdt5BtZZkIg8DA2wb86B1QSJQWUFMnBLfTIkJacZ53KtkvHq1bkQX8Hq6pwHlgfWVdAqTbcfrpuqBQK/Zq05B9bukIicBA2wT46BNb5+7tbukFjwmoYEjgapSTHyBkADPVr+1StfwXIeWB5Y8XsZWqVxkFg08TQh10HQKt2dc2BtAInI/tAAV+QYWGMhkXk1gpW4PaEGf81o9eo8iK9gOeeBlfDAqtJHkMh8B63SXTkH1uqQiGxZgsB6BxKZV4oOrMqgWq6fWs5zzGD1amAOK9u+guU8sErsr5bHsAvjgfUstEqfemBFH1hfeWBlcIQNsAUECfPU9iMgvoLlnAdWR9aFBrjTA6tQz0Cr9DEkwNXQAJtBIrJXXkfWGAJrjAfWH6ucC8n1Bct0/Mb5W7tBYF69KmrSvu3/7IHlPLDytHbsE7ojeLPoB4nM93ltERqGdO5Z/pvcTU8RhpwdOYn3wTkhseA1/RBybAw3p88DSVOyKjoNmsKokteggY6E+AqWcx5YHar8MueqAUZDSuhaaJWmQGLRuGDuN7kf2Em2ke+ABtgGEuAtaIDlI/v9MCkkFKP7OgI/Jqc5rGZcvZoT4itYznlgdajySDjXYdAAK3SJMQ1APSQKTBYP/BhuMs3dKv8q5zd5TsA3zN3aFRIDQ4h8AMlIDSYaDz5/vAyrV76C5Tywyu9taIATSvnUZPnf9LbMedDo0tAAE9nWmTeSo3LqoAGmh50LaNpavQcSiZOh9u3o1F0KDTQMGugbiAeWcx5YWf+y+hhSMhtZV38icCU0wA6QnKeS7wyJwFHQAF9CAm0BDTA2lvuweC1fQAMclfGE+bmDBqDa7eqB5ZwHVjU2gwbqBSkNpi4HfpwjamdvmRVSqDnaD3v+CRpgRetYiACvQCLQBxrgRsP32hJc26ABdoMUbD1ooPUgGTsSahfp6pUHlvPAKr/KNg7XifY30PhVHtPm+luJtwlD74eaADE4AhpoTUiBtoMG2hZi8FXom3klpiHFMN1DNrp2zpZZIFlqmK+1W8ATjha7emA554FlPw7Dvg0Us3tC5+gUuYqVvKF8DA3wPMRgGWiRNzwbJoD/XNQ9ZPwZZ0MDHQwpyD+hge6NdPXdvnrlgeWcB1aAfaCBBqEGEj37uWYHlfR1HwMx+gQa6FhIAa6GBnoMYrQ8NNBYNBX0lOpP0EBbRveQjt2O8MByzgMreJtwNDTQ5/xing9SAgsks600wHgsBclZLUZBA7ShueB7XqagJyRHO6Itgi2hPtBAH+b5c1U/T/vYlqcsT+jlfYN+6LDkKrwHgQeWcx5Ywa6AGjxh30LLR9hRMwA+4c1ofkgeKm9YxoNuP4JYJWE61fh4/IqQHPTGBMswybTugUrmLqnBk3VztXSHZKlh3vYt6DuhBpdBCvAQNCMbQeCB5ZwHVrAmtEENPq5sMUCilsySMnimbs6W7pAsJXH1MtRgb0hKroMaI2tlSIY2NsUVcErK09AHQg0ezXKmWPJ06h1Qg+lohhRgGbRBU/Y+JOGB5ZwHlsm1UKNfsA4kctYnkF7NcvsmuRfmJajB77zBz57idkw9pkENpmTxYETjAu0rMCel8EY7Mu1z9P5zDpfRpxndk1WPt6BGd0EKdHHGq1ceWM55YJksiYnQFFyLOkikDoUa9cefISlbGV9BjQ7ObNCp3V1E5JIprUiugnehBoYHAnJYxQLG4LA0Vk/r/2NL8GCMghpNQl3BM+4W5zocahDw9KsHlnMeWIbwMJiMW7AGJCbJoa/9oEYTcXwa9+yw2lF5Iz4dU6FGAzo45sUkGdY6BJqC8TjfsLW0Bh6EpuSrymgHSNqSmVqakk+xd8j3XDIFfS/8CE3J6ZAIHA9NQRvW98DywHIeWGmHx+xcP4SmbBgexinYEdtgpUBLpX50jt2POLTyBgapRjL1+3QMgKZku4yf0NOUvY3j0aOj+/j47xqwMa7Ed9CU/TXXeXN2o3Eb9u7oAYLk/qrVcDDuxihoir6y34SfjspDNrye76FGT0Fi5IHlPLDKrwmToJF6A5KSu6EpmoincTh6dDAjbDlshFPxJtQu9zeI+6AZasOX6IPfoRm7MKct+OHQDI1BHyDzn+HpWAkSkb1S+L5b0wPLA8t5YGVp6y4RWIxcMByfE6NBlRUxSMbmNw6kjMlHAQ8DBDAddxSjgyAR6gMN9DSkKh5YznlgBTilFIFltyamQEtuBjbM+fH48dASG0wsLpLzmJCToCV3S6QHui/EdUwOq1ceWM55YJldU4rAstsDWnK7QXLWo8SRNQTLQ/LUvEj7E3y3Qkvq1crZmJDY8NrOscy3g8TMA8t5YHlklS+wgKOhJXUe5N/mkTXUEFdmTQu2R9Zt0JJ51zD0NFO8tkaMgwaYZhi54oHlnAeWyTloizKwPLLOhwAeWfa4ykfD/KWLrGdijasksK6HBroVUhQPLOeB5XbC5OgDy+4YaAm04UhIJNbG79CI9YtppaJu7pbuXE/ADGjEWgzjGDKXrF5NNaxeLQUpkgeW88Byq+Dr6APLbqfIb3wfhy0jvMl4UcP5iVm7PzkGJ8bVl79jRKTfZ3tDYmY8S/E2SOE8sJwHlqtMCOd6ESbFH1jmmPwhxrECMf+Nu4aBj8kq4ARoBEaV4Wc4Oe7lMWgkPsXykMitDA00FUtDYuKB5Tyw3J/wUvSBZT9H7kpoBCbgbPuxPPlIxjg8DS3QbaiFlMg2GAAtyCAcVDmvEBI7XusjnXX1ygPLeWC5Hngm6sCyWxNvQgvyMJaBlNDaeAWao/vwJ0gZJWdlHm6/py3gbEjOm4SUAa93LWigCWWJbw8s54HlmnE+vok2sOw2yTG0puNerAPpBNbGvZgIzcBY3Bjd4/b2FdQ98QE0I31wcOWwcUiZGH8WL4aUhwcW4Dyw3Ko4Hs9hWMyBZYiFazI6W+4LnF65YRzS2VRuNE8eIrgXQ6EGv+BObMm9X7NBOqvkDMvT8C6mQg0+xZlYFVJSfzOtXiUrdWVi+D97YHVGHliufp72eT+N6IG9cQIuMzgEEoPKRGuuPXEKng0Ihun4FnfgSDRAuooG7vPhugz2wmV4DG/h1z/wKh7EBdgVTc0Lt3aDdDXJFuJfcAyuxfPoj19n8v/wPG7DsdjYHhaR4C9aXWT1ylewnAeWc40Mj2SFZm7+9frYCvt3YEMsV3mj/P/t3QPM9eYfx+H7PPobs20EsxnOthfOthXOthljtrfOtm2j09P9Zqt333en3ZXkyomOwk++VUi/H/D1ApqzXo0XkgVLYCGwAPjuDvj3t+DJBxas1kBgAbBWRly9GgvzP0Jqo4w3C6xfhMACcJPjkcx7hG0fUgYLVucgsADYvFXrlQWLFhBYAB7R9cJYXq8sWGH2kH4NCCyA1tonI65eq7leWbDCkiF1DAILgKEjxonXtzICa4uQ6rFgrRASdC6wANg7I64em3TkiKGQ2i7vzWWxe6hq2DYk6FRgATB5eCcjsDYI8TkWrA1DVcNZIUGnAguAozLi6vHv1isL1jyhquGZkKAzgQXAZJkPtt4wJAtW6JXFv1JZfBSqGuYLCToRWACcar36Tv4HlMV9oarhhJCg9YEFwGyhyrBSSF2S/wFlcWioavgwTBIStDqwADgvI65unfL/R/ZC6pL8DyiLJUJV07EhQWsDC4AFQ5Vh6ZAsWD8yWBZDqSxeyoiseUKCVgYWAFflrFdT/OfIXkhd08iHZNxw9AtP98pi/JCgVc8iBGDxUGVYNqQuauZDymLOUGW4bqAsRkIKAVoQWADcmHXu1X+P7IXURc19UFlcHqoMF/TK4t8hQd8vWACsHqoMi4TUVc19UFksGKpM94SpQwKBBdDX7suIq4tCEli/U+6K9bU3wjoh0ZcEFgBrhyrDvCH9fgJrrjAaqgZcHeYPif4gsACYZPiI4Xh91nqVGVg1IuvgUDXonrBLmG2oLAZD4q9BYAH0pU1DlWE+gVVDryz+ncriwVCNAW+FW8IF4fAM8/3hNWXoiP/F/zsiHD7WcLPA6h8Ak4wcMWS9yg2s/EOF74eqT21Y43DVpKFqAQTWmAKwd6hqGg2zCqz8yFpHYHWDwALg6yM5b4aqptNDEljNRNYBAqsTBBYAe4YqwwwCq9nIOkhgtZ7AAmCqMEtN04QksPo7sgQWAgsAgfV1ZG0XRgUWAgsAgdVsZC0dXhZYCCwABFazkTVpuFhgIbAAEFjNh9bG4VWBhcACQGA1qFcW4319K4d3BBYCCwCB1Xxo7RFeFFgILAAEVoOGy2IglcWy4fTwksBCYAEgsBr0j7LopbKYO2weTg13hDKMCiwEFgACq0GDZTGcymLGHL2y+G9If8SkXz1BfMYWYOiI/4b0ZwGAP/oGAAAEFgCAwAIAEFgAAAgsAACBBQAgsAAABBYAAAILAEBgAQAILAAABBYAgMACABBYAAAILAAAgQUAILAAABBYAAACCwBAYAEACCwAAAQWAIDAAgAQWAAACCwAAIEFACCwAAAQWAAAAgsAQGABAPA5vJFvdTUb5IYAAAAASUVORK5CYII="},473:function(e,t,a){},501:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"Signin",(function(){return $e})),a.d(n,"Signup",(function(){return vt})),a.d(n,"CreatePassword",(function(){return Ct})),a.d(n,"ResetPassword",(function(){return wt})),a.d(n,"Slack",(function(){return Qa})),a.d(n,"Spaces",(function(){return cn})),a.d(n,"SpaceCalendar",(function(){return Vn})),a.d(n,"Visitors",(function(){return hr})),a.d(n,"Members",(function(){return Rc})),a.d(n,"Locations",(function(){return ol})),a.d(n,"MyProfile",(function(){return ll})),a.d(n,"ChangePassword",(function(){return ul})),a.d(n,"Tickets",(function(){return ui})),a.d(n,"NewTicket",(function(){return Ci})),a.d(n,"PublicNewTicket",(function(){return Mi})),a.d(n,"TicketCategories",(function(){return Al})),a.d(n,"Services",(function(){return fc})),a.d(n,"ServicesOnDemand",(function(){return wl})),a.d(n,"ServicesSubscription",(function(){return Tl})),a.d(n,"NewServiceRequest",(function(){return xl}));var r=a(10),o=a.n(r),i=a(15),c=a(44),l=a(45),s=a(54),m=a(53),u=a(5),d=(a(345),a(0)),b=a.n(d),p=a(19),g=a.n(p),f=a(35),h=a(22),E=a(8),v=a.n(E),O=a(40),j=a.n(O),k=a(283),y=a.n(k),C=a(14),A=a.n(C),w=a(607),T=a(606),x=a(284),S=a.n(x),N=a(2),D={save:function(e,t){return localStorage.setItem(e,JSON.stringify(t))},get:function(e){try{var t=localStorage.getItem(e);return JSON.parse(t)}catch(a){return console.log(a),{}}},delete:function(e){return localStorage.removeItem(e)}},M={setUserToken:function(e){return D.save("userToken",e)},getUserToken:function(){return D.get("userToken")||""},setUserData:function(e){return D.save("userData",e)},getUserData:function(){return D.get("userData")||{}},clear:function(){D.delete("userToken"),D.delete("userData")},getAuthToken:function(){var e=D.get("userToken");if(e)return e;throw new Error("No authToken")},getBearerToken:function(){var e=D.get("userToken");return"Bearer: ".concat(e)},isLoggedIn:function(){var e=D.get("userToken");return!!e},isAuthorized:function(e){return e&&"unauthorized"!==e.error}},I=a(285),B="production",L={companyName:"Lobby",appName:"Lobby Portal",appNamespace:a.n(I)()("Lobby Portal"),apiURL:"https://api.lobby.tech",wsURL:"wss://api.lobby.tech",env:B,isDevelopment:!1,isStaging:!1,isProduction:!0,livechatId:12113223,slackClientId:"760439175683.1126241376992",slackOAuthURL:"https://slack.com/oauth/v2/authorize",slackOAuthScope:"commands,users:read,users:read.email,chat:write",slackOAuthUserScope:"users:read,users:read.email,chat:write",slackRedirectURL:"".concat("https://api.lobby.tech","/lobby_portal/slack/integrate"),apiRequestTimeout:12500,googleAnalyticsId:"UA-121056366-6",sentryDsn:Object({NODE_ENV:"production",PUBLIC_URL:"https://portal.lobby.tech",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_SERVER_URL:"https://api.lobby.tech",REACT_APP_WS_URL:"wss://api.lobby.tech",REACT_APP_SENTRY_DSN:"https://2748b8ba3ed240008b5c6b1494dca6e4@o280883.ingest.sentry.io/1505434",REACT_APP_SLACK_CLIENT_ID:"760439175683.1126241376992",REACT_APP_TITLE:"Lobby Portal"}).SENTRY_DSN,locale:"pt-br",isiOS:!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)},F=function(e){var t=Object(N.get)(e,"response.data")||{};return t.response=Object(N.get)(e,"response"),t||(t={error:Object(N.get)(e,"message")}),t},R={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return new Promise(function(){var c=Object(i.a)(o.a.mark((function i(c,l){var s,m,u,d;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,s=M.getBearerToken(),m=S.a.create({baseURL:"".concat(L.apiURL,"/").concat(L.appNamespace),timeout:L.apiRequestTimeout,headers:{"Content-Type":"application/json",Authorization:s},responseType:"json",onUploadProgress:Object(N.get)(r,"onUploadProgress")}),o.next=5,m[e](t,a,n);case 5:return u=o.sent,d=u.data,o.abrupt("return",c(d));case 10:return o.prev=10,o.t0=o.catch(0),o.abrupt("return",l(F(o.t0)));case 13:case"end":return o.stop()}}),i,null,[[0,10]])})));return function(e,t){return c.apply(this,arguments)}}())},get:function(e,t,a){return this.request("get",e,{params:t},a)},post:function(e,t,a,n){return this.request("post",e,t,a,n)},put:function(e,t,a,n){return this.request("put",e,t,a,n)},delete:function(e,t,a,n){return this.request("delete",e,t,a,n)}},P={getEnterpriseUser:function(){return R.get("/enterprise_user")},setCurrentBuilding:function(e){return R.put("/enterprise_user",{building_id:e})}},_=a(106),W=a(286),q=a.n(W);_.a.initialize(L.googleAnalyticsId);var U={prepareTrackUser:function(){var e=M.getUserData();return e&&v()(e,"member.id")?{userId:v()(e,"member.id"),userEmail:v()(e,"member.email"),userFullname:"".concat(v()(e,"member.name")," ").concat(v()(e,"member.lastname")),userCompany:v()(e,"member.company.name")}:{}},hit:function(e,t){var a=window.location.hash.replace("#","");if(e&&L.isProduction){var n=this.prepareTrackUser(),r=q()(t,n);_.a.set(r),_.a.event({category:"User",action:e}),_.a.pageview(a)}else console.log("hit: ".concat(a))},trackPageView:function(e){var t=window.location.hash.replace("#","");if(console.log("hit: ".concat(t)),e&&L.isProduction){var a=this.prepareTrackUser();_.a.set(a),_.a.event({category:"User",action:"".concat(e," - Viewed")}),_.a.pageview(t)}else console.log("track: ".concat(t))}},z=function(e,t){return function(a){return Object(d.useEffect)((function(){U.trackPageView(t)})),b.a.createElement(e,a)}},V=a(608),H=a(59),Y=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"setup",value:function(){L.isProduction&&(V.a({dsn:L.sentryDsn,environment:L.env}),H.b("server",L.apiUrl))}},{key:"capture",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.length>1&&void 0!==r[1]?r[1]:{},t&&(L.isProduction?(n=this.getViewerData(),H.c(n),Object.keys(a).forEach((function(e){H.b(e,a[e])})),H.a(t)):console.warn(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getViewerData",value:function(){try{var e=M.getUserData();if(e&&e.id){var t=e.member||e;return{id:t.id,email:t.email}}return{}}catch(a){return{}}}}]),e}(),Q=a(3),G=a(9),J=a(63),K=a.n(J),X=a(4),Z=a.n(X),$=a(29),ee=function(e){var t;return{container:(t={width:"auto",height:"100%",maxHeight:"100%",marginBottom:20},Object($.a)(t,e.breakpoints.up("md"),{paddingLeft:e.menuWidth,width:"calc(100%-".concat(2*e.menuWidth,"px)"),minWidth:"calc(100%-".concat(2*e.menuWidth,"px)"),maxWidth:"calc(100%-".concat(2*e.menuWidth,"px)"),marginLeft:"auto",marginRight:"auto"}),Object($.a)(t,e.breakpoints.up("xl"),{width:e.maxContainerWidth,minWidth:e.maxContainerWidth,maxWidth:e.maxContainerWidth,marginLeft:"auto",marginRight:"auto"}),t),root:Object($.a)({flexGrow:1,marginRight:10,marginLeft:10},e.breakpoints.up("md"),{marginRight:40,marginLeft:40}),fab:{position:"fixed",zIndex:1e3,bottom:e.spacing(2),right:e.spacing(2)},headerView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"flex-start",whiteSpace:"nowrap"},centerHeaderView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center",alignItems:"center",marginTop:120},tableCell:{color:"#003f54",fontSize:14,height:"auto",wordBreak:"break-word"},tableExtraSmallCell:{color:"#003f54",fontSize:14,height:"auto",width:120,maxWidth:120,minWidth:120,wordBreak:"break-word"},tableSmallCell:{color:"#003f54",fontSize:14,height:"auto",width:160,maxWidth:160,minWidth:160,wordBreak:"break-word"},tableMediumCell:{color:"#003f54",fontSize:14,height:"auto",width:180,maxWidth:180,minWidth:180,wordBreak:"break-word"},bgGray:{backgroundColor:"#e7ebec"},bgWhite:{backgroundColor:"#FFF"},roleSelect:{fontSize:14},inputBox:{marginTop:10},selectBox:{width:200,marginTop:10},center:{display:"flex",justifyContent:"center",textAlign:"center"},textCenter:{textAlign:"center"},emptyHeaderIcon:{fontSize:32},emptyHeaderTitle:{marginLeft:10},paper:{padding:20,paddingBottom:30,overflowX:"auto",marginRight:"auto",marginLeft:"auto"},tablePaper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},input:{marginTop:20},actions:{marginTop:20,display:"flex",width:"100%",justifyContent:"flex-end"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}},te=Object(d.memo)((function(e){var t=e.classes;return b.a.createElement("div",{className:t.outterContainer},b.a.createElement(K.a,{className:t.emptyHeaderIcon}),b.a.createElement("b",{className:t.emptyHeaderTitle},"Ocorreu um problema, por favor, tente mais tarde"))}));te.propTypes={classes:Z.a.object};var ae=Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{outterContainer:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center",alignItems:"center"}})}),{withTheme:!0})(te),ne=Object(Q.a)(Object(Q.f)("hasError","setHasError",!1),Object(Q.b)({componentDidCatch:function(e,t){Y.capture(e,{extra:t}),(0,this.props.setHasError)(!0)}}),(function(e){return function(t){return t.hasError?b.a.createElement(ae,null):b.a.createElement(e,t)}})),re=a(566),oe=a(565),ie=a(202),ce=function(e){return{progress:{margin:e.spacing(2)},middle:{marginTop:20},center:{justifyContent:"center",textAlign:"center"}}},le=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={slowConnection:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.hasRefreshMsg&&(this.timeoutConnection=setTimeout((function(){e.setState({slowConnection:!0})}),L.apiRequestTimeout))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutConnection)}},{key:"render",value:function(){var e=this.props,t=e.hasRefreshMsg,a=e.classes,n=e.theme.mainColor,r=this.state.slowConnection;return b.a.createElement(oe.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:a.middle},b.a.createElement(re.a,{color:n,className:a.progress,variant:"indeterminate",disableShrink:!0,thickness:5}),b.a.createElement("b",null,"Carregando..."),t&&r?b.a.createElement("div",{className:a.center},b.a.createElement("br",null),b.a.createElement("b",null,"H\xe1 problemas de conex\xe3o com a internet"),b.a.createElement(ie.a,{onClick:function(){return window.location.reload()},size:"large",color:"primary",variant:"contained"},b.a.createElement("b",null,"Recarregar"))):null)}}]),a}(d.PureComponent),se=Object(G.a)(ce,{withTheme:!0})(le),me=a(317),ue=a(197),de=Object(me.a)({palette:{primary:{main:"#1177FF"},secondary:{main:ue.a[500]},background:{default:"#F5F5F5"}},typography:{useNextVariants:!0},maxContainerWidth:1440,menuWidth:200}),be=a(290),pe=a.n(be),ge=a(291),fe=a.n(ge),he=a(128);function Ee(){return(Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ve(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Oe=b.a.createElement("path",{d:"M240,144h-5.336V133.336A5.328,5.328,0,0,0,229.336,128H224a5.34,5.34,0,0,0-5.336,5.336V144H165.328V133.336A5.323,5.323,0,0,0,160,128h-5.336a5.34,5.34,0,0,0-5.336,5.336V144H144a16.016,16.016,0,0,0-16,16v80a16.016,16.016,0,0,0,16,16h96a16.016,16.016,0,0,0,16-16V160A16.016,16.016,0,0,0,240,144Zm0,101.338H144A5.34,5.34,0,0,1,138.664,240V176.217H245.328V240A5.328,5.328,0,0,1,240,245.339Z",transform:"translate(-128 -128)",fill:"#4adaa4"}),je=b.a.createElement("g",{transform:"translate(37.331 55.999)"},b.a.createElement("path",{d:"M10.339,52.621A4.008,4.008,0,0,1,8.7,48.706L11.051,34.3,1.131,24.121A4,4,0,0,1,3.4,17.37L16.946,15.3l6.1-12.987A3.992,3.992,0,0,1,30.278,2.3l6.093,13,13.556,2.073a4,4,0,0,1,2.264,6.75L42.27,34.294l2.352,14.4a4,4,0,0,1-5.879,4.143L26.67,46.17l-12.09,6.683a4.038,4.038,0,0,1-1.937.5A4,4,0,0,1,10.339,52.621ZM24.731,45.1l1.939-3.506Z",transform:"translate(0 0)",fill:"#00d18d",stroke:"rgba(0,0,0,0)",strokeMiterlimit:10,strokeWidth:1})),ke=function(e){var t=e.svgRef,a=e.title,n=ve(e,["svgRef","title"]);return b.a.createElement("svg",Ee({width:128,height:128.002,viewBox:"0 0 128 128.002",ref:t},n),a?b.a.createElement("title",null,a):null,Oe,je)},ye=b.a.forwardRef((function(e,t){return b.a.createElement(ke,Ee({svgRef:t},e))})),Ce=(a.p,Object(d.memo)((function(){return b.a.createElement(he.a,{component:ye,viewBox:"0 0 128 128",style:{width:20,height:20}})})));function Ae(){return(Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function we(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Te=b.a.createElement("path",{d:"M177.534,128H137.373A9.378,9.378,0,0,0,128,137.374v24.1a9.383,9.383,0,0,0,9.373,9.374h40.161a9.383,9.383,0,0,0,9.374-9.374v-24.1A9.389,9.389,0,0,0,177.534,128Z",transform:"translate(-128 -128)",fill:"#a4b6fc"}),xe=b.a.createElement("path",{d:"M177.534,234.672H137.373A9.377,9.377,0,0,0,128,244.038v56.226a9.378,9.378,0,0,0,9.373,9.374h40.161a9.383,9.383,0,0,0,9.374-9.374V244.038A9.387,9.387,0,0,0,177.534,234.672Z",transform:"translate(-128 -181.645)",fill:"#365df0"}),Se=b.a.createElement("path",{d:"M316.19,298.672H276.029a9.383,9.383,0,0,0-9.373,9.374v24.1a9.383,9.383,0,0,0,9.373,9.374H316.19a9.39,9.39,0,0,0,9.374-9.382v-24.1A9.377,9.377,0,0,0,316.19,298.672Z",transform:"translate(-197.564 -213.516)",fill:"#a4b6fc"}),Ne=b.a.createElement("path",{d:"M316.19,128H276.029a9.383,9.383,0,0,0-9.373,9.374V193.6a9.383,9.383,0,0,0,9.373,9.374H316.19a9.383,9.383,0,0,0,9.374-9.374V137.374A9.378,9.378,0,0,0,316.19,128Z",transform:"translate(-197.564 -128)",fill:"#365df0"}),De=function(e){var t=e.svgRef,a=e.title,n=we(e,["svgRef","title"]);return b.a.createElement("svg",Ae({ref:t},n),a?b.a.createElement("title",null,a):null,Te,xe,Se,Ne)},Me=b.a.forwardRef((function(e,t){return b.a.createElement(De,Ae({svgRef:t},e))})),Ie=(a.p,Object(d.memo)((function(){return b.a.createElement(he.a,{component:Me,viewBox:"0 0 128 128",style:{width:20,height:20}})}))),Be={Signin:{label:"Signin",trackPage:"Signin",path:"/",exact:!0,hideMenu:!0,private:!1},Signup:{label:"Signup",trackPage:"Signup",path:"/signup",exact:!0,hideMenu:!0,private:!1},ResetPassword:{label:"Recuperar senha",trackPage:"ResetPassword",path:"/recuperar-senha",hideMenu:!0,private:!1},CreatePassword:{label:"Criar senha",trackPage:"CreatePassword",path:"/criar-senha",hideMenu:!0,private:!1},PublicNewTicket:{label:"Novo ticket",trackPage:"PublicNewTicket",path:"/public/tickets/novo",hideMenu:!0,private:!1},NewTicket:{label:"Novo ticket",trackPage:"NewTicket",path:"/tickets/novo",hideMenu:!0,private:!0},Tickets:{label:"Tickets",trackPage:"Tickets",path:"/tickets/:id*",icon:b.a.createElement(Ie,null),private:!0},Services:{label:"Servi\xe7os",trackPage:"Services",path:"/servicos",icon:b.a.createElement(Ce,null),private:!0,exact:!0},ServicesOnDemand:{trackPage:"ServicesOnDemand",path:"/servicos/sobdemanda",private:!0,hideMenu:!0},ServicesSubscription:{trackPage:"ServicesSubscription",path:"/servicos/recorrentes",private:!0,hideMenu:!0},NewServiceRequest:{trackPage:"NewServiceRequest",path:"/servicos/:serviceId/solicitar-servico",private:!0,hideMenu:!0},Visitors:{label:"Visitantes",trackPage:"Visitors",path:"/visitantes",icon:b.a.createElement(pe.a,null),private:!0,buildingFeature:!0},SpaceCalendar:{label:"Espa\xe7os",trackPage:"SpaceCalendar",path:"/espacos/:id",hideMenu:!0,private:!0},Spaces:{label:"Reservas",trackPage:"Spaces",path:"/espacos",icon:b.a.createElement(fe.a,null),private:!0,buildingFeature:!0},MyProfile:{label:"Meu perfil",trackPage:"MyProfile",path:"/configuracoes/meu-perfil",settingsMenu:!0,private:!0},ChangePassword:{label:"Mudar senha",trackPage:"ChangePassword",path:"/configuracoes/mudar-senha",settingsMenu:!0,private:!0},Members:{label:"Usu\xe1rios",trackPage:"Members",path:"/configuracoes/usuarios",settingsMenu:!0,private:!0},Slack:{label:"Slack",trackPage:"Slack",path:"/configuracoes/slack",settingsMenu:!0,private:!0},TicketCategories:{label:"Categorias",trackPage:"TicketCategories",path:"/configuracoes/categorias",settingsMenu:!0,private:!0},Locations:{label:"Locais",trackPage:"Locations",path:"/configuracoes/locais",settingsMenu:!0,private:!0}},Le=a(569),Fe=a(66),Re={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center",textAlign:"center",paddingLeft:5,paddingRight:5},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},Pe={postSignin:function(e,t){var a={email:e,password:t};return R.post("/auth/signin",a)},postSignup:function(e){var t={member_name:e.memberName,member_lastname:e.memberLastname,member_email:e.memberEmail,member_phone:e.memberPhone,company_name:e.companyName,password:e.password};return R.post("/auth/signup",t)}},_e=a(617),We=a(568),qe=a(31),Ue=a.n(qe),ze=a(230),Ve=a(199),He=a(567),Ye=function(e){return{success:{backgroundColor:Ve.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:"#1177FF"},warning:{backgroundColor:He.a[700]},closeIcon:{fontSize:20,opacity:.9,justifyContent:"center"},message:{fontSize:20,display:"flex",alignItems:"center"}}},Qe=Object(d.memo)((function(e){var t=e.message,a=e.type,n=e.actionButton,r=e.onClickAction,o=e.onClose,i=e.classes,c=[];return n&&c.push(b.a.createElement(ie.a,{key:"action",color:"inherit",variant:"outlined",className:i[a||"info"]||i.info,onClick:r},n)),o&&c.push(b.a.createElement(ze.a,{key:"close",color:"inherit",onClick:o},b.a.createElement(Ue.a,{className:i.closeIcon}))),b.a.createElement(_e.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!0,autoHideDuration:o?3e3:null,onClose:function(){return o&&o()}},b.a.createElement(We.a,{className:i[a||"info"]||i.info,message:b.a.createElement("span",{className:i.message},t),action:Array.from(new Set(c))}))})),Ge=Object(G.a)(Ye,{withTheme:!0})(Qe),Je=Object(d.memo)((function(){return b.a.createElement("p",null,"Acessando portal voc\xea concorda com ",b.a.createElement("a",{href:"https://lobby.tech/termos-de-uso/",target:"_blank",rel:"noopener noreferrer"},"termos de uso"))})),Ke=[{label:"Usu\xe1rio",value:"MEMBER"},{label:"Administrador",value:"ADMIN"}],Xe=["ADMIN","OWNER"],Ze=["USER","ADMIN","OWNER"],$e=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",errorMsg:"",submit:!1},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password,c=e.props.history;e.setState({submit:!0},Object(i.a)(o.a.mark((function t(){var a,i,l,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!n||!r){t.next=14;break}return t.next=4,Pe.postSignin(n,r);case 4:return a=t.sent,i=a.token,M.setUserToken(i),t.next=9,P.getEnterpriseUser();case 9:return l=t.sent,s=v()(l,"enterprise_user"),M.setUserData(s),setTimeout((function(){e.setState({submit:!1});var t=D.get("redirectUrl");if(t)D.delete("redirectUrl"),c.push(t);else{var a=v()(s,"member.company.has_ticket_support",!1);c.push(a?"/tickets":"/servicos")}}),10),t.abrupt("return",!0);case 14:throw new Error("Blank fields");case 17:return t.prev=17,t.t0=t.catch(0),401===v()(t.t0,"response.status")?e.setState({submit:!1,errorMsg:"Credencial inv\xe1lida, tente novamente."}):e.setState({submit:!1,errorMsg:"Ocorreu um erro inesperado."}),t.abrupt("return",!0);case 21:case"end":return t.stop()}}),t,null,[[0,17]])}))))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.history;try{if(M.isLoggedIn()){var t=M.getUserData(),a="MEMBER"===v()(t,"member.role","MEMBER"),n=v()(t,"member.company.has_ticket_support",!1);if(a&&n)return e.push("/tickets"),!0;if(a&&!n)return e.push("/visitantes"),!0;e.push("/servicos")}}catch(r){401===v()(r,"response.status")?(this.setState({submit:!1,errorMsg:"Sess\xe3o expirada."}),M.clear()):this.setState({submit:!1,errorMsg:"Ocorreu um erro inesperado."})}return!0}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,r=t.password,o=t.submit,i=t.errorMsg;return b.a.createElement("div",{style:Re.container},b.a.createElement("div",{style:Re.content},i&&b.a.createElement(Ge,{message:i,type:"warning",onClose:function(){return e.setState({errorMsg:""})}}),b.a.createElement("img",{src:a(172),width:150,alt:L.appName,style:Re.logo}),b.a.createElement(Fe.a,{component:"h1",variant:"h5"},"Portal da empresa"),b.a.createElement("form",{onSubmit:this.onSubmit,style:Re.form},b.a.createElement(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Email",type:"text",disabled:o,value:n,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({username:t.target.value.toLowerCase()})}}),b.a.createElement(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Senha",type:"password",disabled:o,value:r,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({password:t.target.value})}}),b.a.createElement(ie.a,{disabled:o,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:Re.button,type:"submit"},o?"Carregando...":"Entrar")),b.a.createElement("p",null,b.a.createElement(f.b,{to:"/recuperar-senha"},"Esqueci minha senha")),b.a.createElement("p",null,"N\xe3o possui cadastro? ",b.a.createElement(f.b,{to:"/signup"},"Criar conta")),b.a.createElement(Je,null)))}}]),n}(d.PureComponent),et=a(511),tt={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:400,marginTop:40,alignItems:"center",justifyContent:"center",textAlign:"center",paddingLeft:5,paddingRight:5},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60,marginBottom:15},logo:{marginBottom:30},gridItem:{paddingTop:0,paddingBottom:0},title:{marginBottom:10},textFieldMarginBottom:{marginBottom:0},errorMessage:{marginTop:-5}},at=a(39),nt=a(507),rt={errors:{paddingTop:8}},ot=function(e){var t=e.errors,a=e.variant,n=void 0===a?"outlined":a,r=e.InputLabelProps,o=void 0===r?{shrink:!0}:r,i=e.maskFunction,c=e.value,l=e.onChangeText,s=void 0===l?function(){}:l,m=Object(at.a)(e,["errors","variant","InputLabelProps","maskFunction","value","onChangeText"]);return b.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!Object(N.isEmpty)(t)},b.a.createElement(Le.a,Object.assign({error:!Object(N.isEmpty)(t),InputLabelProps:o,variant:n,value:c,onChange:function(e){var t=e.target.value;if(!i||c&&t.length<c.length)return s(t);var a=i(t);return s(a),null}},m)),!Object(N.isEmpty)(t)&&b.a.createElement(et.a,{style:rt.errors},Object(N.isArray)(t)?t.join(", "):t))},it=a(127),ct=function(e){var t=e.value,a=e.placeholder,n=void 0===a?"00000-000":a,r=Object(at.a)(e,["value","placeholder"]);return b.a.createElement(ot,Object.assign({value:t||"",maxLength:9,maskFunction:function(e){return function(e){if(null==e)return null;var t=/(\d{0,5})-?(\d{0,3})/.exec(e),a=Object(it.a)(t,3),n=(a[0],a[1]),r=a[2];return""===r?n:"".concat(n,"-").concat(r)}(e)},type:"tel",placeholder:n},r))},lt=/(\d{0,2})(\d{0,5})(\d{0,4})/,st=/(\d{0,2})(\d{0,4})(\d{0,4})/,mt=function(e){var t=e.value,a=e.phoneType,n=void 0===a?"cellphone":a,r=e.placeholder,o=void 0===r?"(00) 00000-0000":r,i=Object(at.a)(e,["value","phoneType","placeholder"]);return b.a.createElement(ot,Object.assign({value:t||"",maxLength:9,maskFunction:function(e){return function(e,t){var a=t.phoneType;if(null==e)return null;var n=e.replace(/\D/g,""),r=("cellphone"===a?lt:st).exec(n),o=Object(it.a)(r,4),i=(o[0],o[1]),c=o[2],l=o[3];return""===i?null:""===l?""===c?"(".concat(i,")"):"(".concat(i,") ").concat(c):"(".concat(i,") ").concat(c,"-").concat(l)}(e,{phoneType:n})},type:"tel",placeholder:o},i))},ut=function(e){var t=e.label,a=e.options,n=e.errors,r=e.emptyOptionLabel,o=void 0!==r&&r,i=e.optionValueField,c=void 0===i?"value":i,l=e.optionLabelField,s=void 0===l?"label":l,m=e.SelectProps,u=void 0===m?{native:!0}:m,d=Object(at.a)(e,["label","options","errors","emptyOptionLabel","optionValueField","optionLabelField","SelectProps"]);return b.a.createElement(ot,Object.assign({select:!0,errors:n,SelectProps:u,label:t},d),o?b.a.createElement("option",{value:null},o):"",a.map((function(e){return b.a.createElement("option",{value:Object(N.get)(e,c),key:Object(N.get)(e,c)},Object(N.get)(e,s))})))},dt=a(62),bt=a(37),pt=a(571),gt=function(e){var t=e.label,a=e.disabled,n=e.value,r=e.onChangeValue,o=e.minDate,i=e.disableFuture,c=e.disablePast,l=Object(at.a)(e,["label","disabled","value","onChangeValue","minDate","disableFuture","disablePast"]);return a?b.a.createElement(ot,Object.assign({disabled:!0,label:t},l)):b.a.createElement(bt.a,{libInstance:A.a,utils:dt.a,locale:L.locale},b.a.createElement(pt.a,{label:t,value:n,onChange:r,minDate:o,autoOk:!0,clearable:!0,animateYearScrolling:!0,invalidDateMessage:"Formato inv\xe1lido",minDateMessage:"",variant:"outlined",inputVariant:"outlined",InputLabelProps:{shrink:!0},format:"DD/MM/YYYY",cancelLabel:"Cancelar",clearLabel:"Limpar",disableFuture:i,disablePast:c}))},ft=function(e,t){var a=t.name,n=void 0===a?null:a,r=t.init,p=void 0===r||r,g=t.options,f=void 0===g?function(){return{}}:g;return function(t){return function(a){Object(s.a)(d,a);var r=Object(m.a)(d);function d(){var t;Object(c.a)(this,d);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return(t=r.call.apply(r,[this].concat(l))).state={loading:!0,reloadedMsg:"",error:null,data:null},t.loadingProperty=n?"".concat(n,"Loading"):"loading",t.reloadedMsgProperty=n?"".concat(n,"ReloadedMsg"):"reloadedMsg",t.errorProperty=n?"".concat(n,"Error"):"error",t.dataProperty=n?"".concat(n,"Data"):"data",t.clearProperty=n?"".concat(n,"Clear"):"clear",t.fetchProperty=n?"".concat(n,"Fetch"):"fetch",t.resolveOptions=function(e){return Object(u.a)(Object(u.a)({},f(t.props)),e)},t.loadDataSource=function(){var a=Object(i.a)(o.a.mark((function a(n,r){var i,c,l,s,m;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=t.resolveOptions(r),c=v()(i,"variables"),l=v()(i,"onRequestFinished"),s=v()(i,"onRequestError"),m=null,a.prev=5,a.next=8,e(c);case 8:m=a.sent,a.next=26;break;case 11:if(a.prev=11,a.t0=a.catch(5),!s){a.next=25;break}return a.prev=14,a.next=17,s(a.t0);case 17:return a.abrupt("return",n(null,null));case 20:return a.prev=20,a.t1=a.catch(14),a.abrupt("return",n(a.t1,null));case 23:a.next=26;break;case 25:return a.abrupt("return",n(a.t0,null));case 26:if(!l){a.next=29;break}return a.next=29,l(m);case 29:return a.abrupt("return",n(null,m));case 30:case"end":return a.stop()}}),a,null,[[5,11],[14,20]])})));return function(e,t){return a.apply(this,arguments)}}(),t.fetch=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(o,i){t.setState({loading:e},(function(){t.loadDataSource((function(e,r){t.setState({data:r,error:e,loading:!1,reloadedMsg:a},(function(){return e?i(e):o(r),n&&n()}))}),r)}))}))},t.clear=function(e){return t.setState({data:null,error:null,loading:!1},e)},t}return Object(l.a)(d,[{key:"componentDidMount",value:function(){p?this.fetch(!0):this.setState({loading:!1,data:{}})}},{key:"render",value:function(){var e,a=Object(u.a)(Object(u.a)({},this.props),{},(e={},Object($.a)(e,this.errorProperty,this.state.error),Object($.a)(e,this.dataProperty,this.state.data),Object($.a)(e,this.loadingProperty,this.state.loading),Object($.a)(e,this.reloadedMsgProperty,this.state.reloadedMsg),Object($.a)(e,this.fetchProperty,this.fetch),Object($.a)(e,this.clearProperty,this.clear),e));return b.a.createElement(t,a)}}]),d}(d.PureComponent)}},ht=Object(d.memo)((function(e){var t=e.formData,n=e.setAlert,r=e.alert,o=e.errors,i=e.setFormData,c=e.submitFormDataFetch,l=e.submitFormDataLoading,s=function(e){return i(Object(u.a)(Object(u.a)({},t),e))},m=function(){return c(!0)},d=t.memberName,p=t.memberLastname,g=t.memberEmail,h=t.memberPhone,E=t.companyName,v=t.password,O=r.showAlert,j=r.alertMsg,k=r.alertType,y=Object(N.includes)(Object(N.values)(t),"")||l;return b.a.createElement("div",{style:tt.container},b.a.createElement("div",{style:tt.content},O&&b.a.createElement(Ge,{message:j,type:k,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}}),b.a.createElement("img",{src:a(172),width:150,alt:L.appName,style:tt.logo}),b.a.createElement(Fe.a,{component:"h1",variant:"h5",style:tt.title},"Crie sua conta"),b.a.createElement("form",{onSubmit:m,style:tt.form},b.a.createElement(oe.a,{container:!0,spacing:2},b.a.createElement(oe.a,{item:!0,xs:12,md:6,style:tt.gridItem},b.a.createElement(ot,{label:"Seu nome*",disabled:l,value:d,onChange:function(e){return s({memberName:e.target.value})}})),b.a.createElement(oe.a,{item:!0,xs:12,md:6,style:tt.gridItem},b.a.createElement(ot,{label:"Sobrenome*",disabled:l,value:p,onChange:function(e){return s({memberLastname:e.target.value})}})),b.a.createElement(oe.a,{item:!0,xs:12,style:tt.gridItem},b.a.createElement(ot,{error:o.email,label:"Email do trabalho*",disabled:l,value:g,onChange:function(e){return s({memberEmail:e.target.value})}}),o.email&&b.a.createElement(et.a,{style:tt.errorMessage},o.email)),b.a.createElement(oe.a,{item:!0,xs:12,style:tt.gridItem},b.a.createElement(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Telefone com DDD*",placeholder:"Somente n\xfameros, ex: 11988884444",type:"tel",disabled:l,value:h,InputLabelProps:{shrink:!0},onChange:function(e){var t=(e.target.value||"").replace(/[\D]+/g,"").slice(0,15);s({memberPhone:t})}})),b.a.createElement(oe.a,{item:!0,xs:12,style:tt.gridItem},b.a.createElement(ot,{label:"Nome da empresa*",disabled:l,value:E,onChange:function(e){return s({companyName:e.target.value})}})),b.a.createElement(oe.a,{item:!0,xs:12,style:tt.gridItem},b.a.createElement(ot,{label:"Definir senha*",placeholder:"Informe 6 ou mais d\xedgitos",style:tt.textFieldMarginBottom,error:o.password,disabled:l,value:v,type:"password",onChange:function(e){return s({password:e.target.value})}})),b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(ie.a,{disabled:y,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:tt.button,onClick:m},l?b.a.createElement(re.a,{color:"primary",variant:"indeterminate",disableShrink:!0,thickness:5}):"CRIAR CONTA")))),b.a.createElement("p",null,"J\xe1 possui conta? ",b.a.createElement(f.b,{to:"/"},"Fazer login")),b.a.createElement(Je,null)))})),Et=ft(Pe.postSignup,{name:"submitFormData",init:!1,options:function(e){var t=e.formData,a=e.setAlert,n=e.history,r=e.setErrors,c=e.errors;return{variables:Object(u.a)(Object(u.a)({},t),{},{setErrors:r,errors:c}),onRequestFinished:function(){var e=Object(i.a)(o.a.mark((function e(){var r,i,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({alertMsg:"Conta criada com sucesso, bem-vindo a Lobby",alertType:"success",showAlert:!0}),e.next=3,Pe.postSignin(t.memberEmail,t.password);case 3:return r=e.sent,i=r.token,e.next=7,M.setUserToken(i);case 7:return e.next=9,P.getEnterpriseUser();case 9:c=e.sent,l=Object(N.get)(c,"enterprise_user"),M.setUserData(l),setTimeout((function(){return n.push("/servicos")}),100);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRequestError:function(e){r(Object(N.mapValues)(Object(N.get)(e,"errors",{}),(function(e){return e[0]}))),a({alertMsg:"Erro ao criar conta",alertType:"error",showAlert:!0})}}}}),vt=Object(Q.a)(d.memo,h.g,Object(Q.f)("formData","setFormData",{memberName:"",memberLastname:"",memberEmail:"",memberPhone:"",companyName:"",password:""}),Object(Q.f)("errors","setErrors",{}),Object(Q.f)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Et)(ht),Ot=a(26),jt=a.n(Ot),kt={verifyIfCanResetPassword:function(e,t){var a={id:e,code:t};return R.post("/password/verify",a)},changePassword:function(e,t,a){var n={id:e,code:t,password:a};return R.put("/password/change",n)},resetPassword:function(e){var t={email:e};return R.post("/password/reset",t)}},yt={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center",textAlign:"center",paddingLeft:5,paddingRight:5},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},Ct=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={memberId:"",recoveryCode:"",password:"",confirmPassword:"",msg:"",msgType:"",hideForm:!0,loading:!0,submit:!1,email:""},e.onSubmit=function(t){t.preventDefault();var a=e.props.history,n=e.state,r=n.confirmPassword,c=n.password,l=n.memberId,s=n.recoveryCode;e.setState({submit:!0},Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!r||!c||r!==c){t.next=9;break}if(!(jt()(c)>=6)){t.next=7;break}return t.next=5,kt.changePassword(l,s,c);case 5:return e.setState({msg:"Senha atualizada, redirecionando para tela de login...",msgType:"success",memberId:"",recoveryCode:"",confirmPassword:"",password:""},(function(){M.clear(),setTimeout((function(){a.replace("/")}),2e3)})),t.abrupt("return",!0);case 7:return e.sendAlert("Informe uma senha com m\xednimo de ".concat(6," caracteres."),"warning"),t.abrupt("return",!0);case 9:e.sendAlert("As senhas est\xe3o em branco ou diferentes.","warning"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e.sendAlert("N\xe3o foi poss\xedvel alterar senha.","warning");case 15:return t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])}))))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.history,n=t.location;this.setState({submit:!0,loading:!0,memberId:"",recoveryCode:""},Object(i.a)(o.a.mark((function t(){var r,i,c,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=new URLSearchParams(n.search),i=r.get("id"),c=r.get("code"),l=r.get("email"),!i||!c){t.next=10;break}return t.next=8,kt.verifyIfCanResetPassword(i,c);case 8:return e.setState({submit:!1,loading:!1,hideForm:!1,memberId:i,recoveryCode:c,email:l}),t.abrupt("return",!0);case 10:throw new Error("Invalid URL query");case 13:t.prev=13,t.t0=t.catch(0),a.replace("/recuperar-senha");case 16:return t.abrupt("return",!0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])}))))}},{key:"sendAlert",value:function(e,t){this.setState({submit:!1,msg:e,msgType:t})}},{key:"clearAlert",value:function(){this.setState({submit:!1,msg:"",msgType:""})}},{key:"render",value:function(){var e=this,t=this.state,n=t.email,r=t.confirmPassword,o=t.password,i=t.submit,c=t.loading,l=t.hideForm,s=t.msg,m=t.msgType;return b.a.createElement("div",{style:yt.container},b.a.createElement("div",{style:yt.content},s&&m&&b.a.createElement(Ge,{message:s,type:m,onClose:function(){return e.clearAlert}}),c?b.a.createElement(se,null):b.a.createElement(b.a.Fragment,null,b.a.createElement("img",{src:a(172),width:150,alt:L.appName,style:yt.logo}),b.a.createElement(Fe.a,{component:"h1",variant:"h5"},l?"Link inv\xe1lido para definir senha":"Definir senha"),b.a.createElement(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Email",disabled:!0,value:n,InputLabelProps:{shrink:!0}}),!l&&b.a.createElement("form",{onSubmit:this.onSubmit,style:yt.form},b.a.createElement(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Senha",type:"password",disabled:i,value:o,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({password:t.target.value})}}),b.a.createElement(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Confirmar senha",type:"password",disabled:i,value:r,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({confirmPassword:t.target.value})}}),b.a.createElement(ie.a,{disabled:i,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:yt.button,type:"submit"},i?"Carregando...":"Entrar"))),b.a.createElement("p",null,b.a.createElement(f.b,{to:"/"},"Voltar para home")),b.a.createElement(Je,null)))}}]),n}(d.PureComponent),At={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center",textAlign:"center",paddingLeft:5,paddingRight:5},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},wt=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",msg:"",msgType:"",submit:!1},e.onSubmit=function(t){t.preventDefault();var a=e.state.email;e.setState({submit:!0},Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!a){t.next=6;break}return t.next=4,kt.resetPassword(a);case 4:return e.setState({submit:!1,email:"",msgType:"success",msg:"Enviamos para seu email um link de recupera\xe7\xe3o de senha."}),t.abrupt("return",!0);case 6:throw new Error("Blank fields");case 9:return t.prev=9,t.t0=t.catch(0),e.setState({submit:!1,msg:"Email inv\xe1lido ou inexistente.",msgType:"warning"}),t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])}))))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.email,r=t.submit,o=t.msg,i=t.msgType;return b.a.createElement("div",{style:At.container},b.a.createElement("div",{style:At.content},o&&b.a.createElement(Ge,{message:o,type:i,onClose:function(){return e.setState({msg:"",msgType:""})}}),b.a.createElement("img",{src:a(172),width:150,alt:L.appName,style:At.logo}),b.a.createElement(Fe.a,{component:"h1",variant:"h5"},"Informe o seu email e receba instru\xe7\xf5es para criar nova senha"),b.a.createElement("form",{onSubmit:this.onSubmit,style:At.form},b.a.createElement(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,placeholder:"Seu email de acesso",label:"Email",type:"email",disabled:r,value:n,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({email:t.target.value.toLowerCase()})}}),b.a.createElement(ie.a,{disabled:r,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:At.button,type:"submit"},r?"Carregando...":"Enviar")),b.a.createElement("p",null,b.a.createElement(f.b,{to:"/"},"Voltar para home")),b.a.createElement(Je,null)))}}]),n}(d.PureComponent),Tt=a(294),xt=a.n(Tt),St=a(87),Nt=a.n(St),Dt=a(131),Mt=a.n(Dt),It=a(578),Bt=a(579),Lt=a(580),Ft=a(581),Rt=a(611),Pt=a(519),_t=a(319),Wt=a(582),qt=a(583),Ut=a(30),zt=a(577),Vt=a(618),Ht=a(102),Yt=a.n(Ht),Qt=a(573),Gt=a(198),Jt=a(574),Kt=a(196),Xt=a(575),Zt=a(576),$t={width:32,height:32,minWidth:32,minHeight:32},ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"a",t={a:"gold",b:"gold",c:"gold",d:"purple",e:"purple",f:"purple",g:"black",h:"black",i:"black",j:"blue",k:"blue",l:"blue",m:"green",n:"green",o:"green",p:"brown",q:"brown",r:"brown",s:"pink",t:"pink",u:"pink",v:"red",w:"red",y:"red",x:"lime",z:"lime"};return t[e.toLowerCase()]},ta=Object(d.memo)((function(e){var t=e.classes,a=e.name,n=e.photoUrl,r=Yt()(a)||"";return b.a.createElement(Vt.a,{alt:a,src:n,className:t[ea(r)]},r.toUpperCase())})),aa=Object(G.a)((function(e){return{black:Object(u.a)({color:"white",backgroundColor:"black"},$t),purple:Object(u.a)({color:e.palette.getContrastText(Qt.a[500]),backgroundColor:Qt.a[500]},$t),red:Object(u.a)({color:"white",backgroundColor:ue.a[300]},$t),green:Object(u.a)({color:e.palette.getContrastText(Ve.a[800]),backgroundColor:Ve.a[800]},$t),blue:Object(u.a)({color:e.palette.getContrastText(Gt.a[800]),backgroundColor:Gt.a[800]},$t),brown:Object(u.a)({color:e.palette.getContrastText(Jt.a[500]),backgroundColor:Jt.a[500]},$t),pink:Object(u.a)({color:e.palette.getContrastText(Kt.a[500]),backgroundColor:Kt.a[500]},$t),gold:Object(u.a)({color:"white",backgroundColor:Xt.a[900]},$t),lime:Object(u.a)({color:"white",backgroundColor:Zt.a[800]},$t)}}),{withTheme:!0})(ta),na=function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{slackBox:{paddingTop:60,paddingBottom:50},slackIntegration:{marginLeft:25},floatButton:{marginBottom:5,marginLeft:10},tableCheckBox:{width:10,paddingTop:20,paddingBottom:0,margin:0,border:0,paddingLeft:0},tableUser:{paddingTop:20,paddingBottom:10,marginLeft:0,paddingLeft:0},tableInvite:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",padding:0,paddingTop:20,paddingBottom:0,margin:0,border:0},selectFilter:{width:180,minWidth:80},formControl:{margin:10},profileMenuContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start",width:"100%"},userName:{marginLeft:15}})},ra=Object(d.memo)((function(e){var t=e.users,a=e.classes,n=e.onRevoke,r=e.isRevokeDisabled,o=e.locations,i=e.companyName,c=e.checkedAll,l=e.setCheckedAll,s=e.selectedLocations,m=e.setSelectedLocations,u=e.canDisconnect,d=e.selectedRole,p=e.setSelectedRole,g=e.isInviteDisabled,f=e.onShowMore,h=e.setDisableShowMore,E=e.selectedUsers,O=e.setSelectedUsers,j=e.onInvite,k=e.nextCursor,y=e.disableShowMore,C=function(e){var t=e.target,a=t.checked,n=t.value;O(a?E.concat(n):E.filter((function(e){return e!==n})))},A=Object(Ut.a)(),w=Object(zt.a)(A.breakpoints.down("xs")),T=jt()(d)&&jt()(s)&&jt()(E),x=g||!T;return b.a.createElement("section",null,b.a.createElement("div",{className:a.container},b.a.createElement("div",{className:a.headerView},b.a.createElement("aside",null,b.a.createElement(Fe.a,{variant:"h6"},b.a.createElement("b",null,"Slack conectado: ".concat(i)))),b.a.createElement("aside",null,u&&b.a.createElement(ie.a,{onClick:n,color:"default",variant:"outlined",className:a.floatButton,disabled:r},"Desconectar Slack")))),b.a.createElement("div",{className:a.container},b.a.createElement(It.a,{size:w?"small":"medium"},b.a.createElement(Bt.a,null,b.a.createElement(Lt.a,null,b.a.createElement(Ft.a,{className:a.tableCheckBox},b.a.createElement(Rt.a,{checked:c,onChange:function(e){var a=e.target.checked;l(a),O(a?t.map((function(e){return JSON.stringify(e)})):[])},disabled:g,color:"primary"})),b.a.createElement(Ft.a,{className:a.tableUser},!w&&b.a.createElement("b",null,"USU\xc1RIOS (".concat(jt()(E),")"))),b.a.createElement(Ft.a,{className:a.tableInvite,colSpan:w?2:1},b.a.createElement(nt.a,{className:a.formControl},b.a.createElement(Pt.a,{displayEmpty:!0,className:a.selectFilter,input:b.a.createElement(_t.a,null),value:d,onChange:function(e){p(e.target.value)},disabled:g,variant:"outlined"},b.a.createElement(Wt.a,{value:"",disabled:!0},"Permiss\xe3o"),Ke.map((function(e){return b.a.createElement(Wt.a,{key:e.value,value:e.value},e.label)})))),b.a.createElement(nt.a,{className:a.formControl},b.a.createElement(Pt.a,{multiple:!0,displayEmpty:!0,className:a.selectFilter,input:b.a.createElement(_t.a,null),value:s,onChange:function(e){m(e.target.value)},disabled:g,variant:"outlined",renderValue:function(e){var t=jt()(e);return t?"".concat(t," ").concat(t>1?"locais":"local"):"Local"}},o.map((function(e){return b.a.createElement(Wt.a,{key:e.id,value:e.id},e.name)})))),b.a.createElement(nt.a,{className:a.formControl},b.a.createElement(ie.a,{color:"primary",size:"medium",variant:"contained",className:a.floatButton,disabled:x,onClick:function(){try{var e={role:d,locationIds:s,slackUsers:E.map((function(e){return JSON.parse(e)}))};j(e)}catch(t){O([]),m([]),p("")}}},"Convidar"))))),jt()(t)?b.a.createElement(qt.a,null,t.map((function(e){var t=JSON.stringify(e);return b.a.createElement(Lt.a,{key:e.email},b.a.createElement(Ft.a,{className:a.tableCheckBox},b.a.createElement(Rt.a,{checked:E.includes(t),onChange:C,disabled:g,value:t,color:"primary"})),b.a.createElement(Ft.a,{colSpan:2,className:a.tableUser},b.a.createElement("div",{className:a.profileMenuContainer},b.a.createElement(aa,{name:v()(e,"name"),photoUrl:v()(e,"photo_url","")}),b.a.createElement("span",{className:a.userName},b.a.createElement("b",null,v()(e,"name")),b.a.createElement("br",null),b.a.createElement(Fe.a,{variant:"body2",color:"textSecondary",component:"small"},v()(e,"email"))))))})),k?b.a.createElement(Lt.a,null,b.a.createElement(Ft.a,{colSpan:3,className:a.textCenter},b.a.createElement(ie.a,{color:"primary",size:"medium",variant:"contained",disabled:y,onClick:function(){h(!0),f()}},"Ver mais usu\xe1rios"))):null):null)))})),oa=Object(Q.a)(Object(G.a)(na,{withTheme:!0}),Object(Q.f)("checkedAll","setCheckedAll",!0),Object(Q.f)("selectedLocations","setSelectedLocations",[]),Object(Q.f)("selectedUsers","setSelectedUsers",[]),Object(Q.f)("selectedRole","setSelectedRole",""),Object(Q.f)("disableShowMore","setDisableShowMore",!1),Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.users;(0,e.setSelectedUsers)(t.map((function(e){return JSON.stringify(e)})))}}),Object(Q.e)(["users"],(function(e){var t=e.users,a=e.setDisableShowMore,n=e.setCheckedAll,r=e.setSelectedUsers;a(!1),n(!0),r(t.map((function(e){return JSON.stringify(e)})))})))(ra),ia=a(203),ca=Object(d.memo)((function(e){var t=e.classes,n=e.onInstallLobby,r=e.onAuthUser,o=e.onRevoke,i=e.isDisabled,c=M.getUserData(),l=v()(c,"member.slack_user_id"),s=v()(c,"member.company.slack_team_id");return b.a.createElement("div",{className:t.container},b.a.createElement(ia.a,{className:t.paper},b.a.createElement("section",{className:t.slackBox},b.a.createElement("div",{className:t.textCenter},b.a.createElement("img",{src:a(469),alt:"Integra\xe7\xe3o Lobby com Slack",className:t.slackIntegration}),b.a.createElement("br",null),b.a.createElement("br",null),b.a.createElement(Fe.a,{variant:"h6",component:"strong"},b.a.createElement("b",null,"Crie tickets atrav\xe9s do Slack")),b.a.createElement("br",null),b.a.createElement(Fe.a,{variant:"body2",color:"textSecondary"},b.a.createElement("b",null,"Leva menos de um minuto"))),b.a.createElement("br",null),b.a.createElement("div",{className:t.textCenter},b.a.createElement(Fe.a,{variant:"subtitle2"},"Colaboradores poder\xe3o criar tickets",b.a.createElement("br",null),"via atalho Lobby ou comando",b.a.createElement("b",null," /lobby "),"no Slack"),b.a.createElement("br",null),s?l?b.a.createElement(ie.a,{onClick:o,size:"large",color:"default",variant:"outlined",disabled:i},"Desconectar Slack"):b.a.createElement(ie.a,{onClick:r,size:"large",color:"primary",variant:"contained",disabled:i},"Integrar Slack"):b.a.createElement(ie.a,{onClick:n,size:"large",color:"primary",variant:"contained",disabled:i},"Instalar Lobby no Slack")))))})),la=Object(Q.a)(Object(G.a)(na,{withTheme:!0}))(ca),sa=a(619),ma=a(570),ua=a(612),da=a(588),ba=a(318),pa=a(297),ga=a.n(pa),fa=a(296),ha=a.n(fa),Ea=a(295),va=a.n(Ea),Oa=a(516),ja=a(584),ka=a(585),ya=a(586),Ca=a(587),Aa=Object.values(Be).filter((function(e){return!e.hideMenu&&!e.settingsMenu})),wa=Aa.filter((function(e){return!e.buildingFeature})),Ta=Aa.filter((function(e){return e.buildingFeature})),xa=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={userDataError:!1,sideMenuOpen:!1,profileMenuAnchor:null},e.onLogout=function(){e.setState({profileMenuAnchor:null},(function(){if(window.confirm("Voc\xea deseja sair?")){var t=e.props.history;U.hit("Logout"),M.clear(),t.push("/")}}))},e.onSettings=function(){e.setState({profileMenuAnchor:null},(function(){var t=e.props.history;U.hit("Settings"),t.push("/configuracoes/meu-perfil")}))},e.onToggleSideMenu=function(){var t=e.state.sideMenuOpen;e.setState({sideMenuOpen:!t})},e.onChangePage=function(t,a){e.props.history.push(Aa[a].path)},e.onToggleProfileMenu=function(t){return e.setState({profileMenuAnchor:t.currentTarget})},e.prepareMenu=function(e){var t=M.getUserData(),a=v()(t,"member.has_spaces",!1),n=v()(t,"member.has_visitors",!1),r=v()(t,"member.company.has_ticket_support",!1),o="MEMBER"!==v()(t,"member.role","MEMBER");return e.filter((function(e){return!(!n&&e.path.includes("/visitantes"))&&(!(!a&&e.path.includes("/espacos"))&&(!(!r&&e.path.includes("/tickets"))&&!(!o&&e.path.includes("/servicos"))))}))},e.renderErrorAlertBox=function(t){var a=e.props.history;return M.isAuthorized(t)?b.a.createElement(Ge,{type:"error",message:"Erro ao carregar dados do servidor",actionButton:b.a.createElement("b",null,"Recarregar"),onClickAction:function(){return window.location.reload()}}):b.a.createElement(Ge,{type:"error",message:"Sua sess\xe3o expirou, fa\xe7a login novamente",actionButton:b.a.createElement("b",null,"Fazer login"),onClickAction:function(){M.clear(),a.push("/")}})},e.renderWebappUpdateAlertBox=function(){return b.a.createElement(Ge,{type:"success",message:"Uma nova atualiza\xe7\xe3o foi instalada.",actionButton:b.a.createElement("b",null,"Continuar"),onClickAction:function(){return window.location.reload()}})},e.renderAlerts=function(){var t=e.props,a=t.alertBox,n=t.webappUpdated,r=t.error,o=e.state.userDataError,i=r||o;return a||(n?e.renderWebappUpdateAlertBox():i?e.renderErrorAlertBox(i):null)},e}return Object(l.a)(n,[{key:"renderSideMenuList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this.props,n=a.classes,r=a.history,o=this.prepareMenu(e);return jt()(o)?b.a.createElement(ma.a,{component:"nav",subheader:b.a.createElement(ja.a,{component:"div"},b.a.createElement(Fe.a,{variant:"body2",color:"textSecondary",component:"small"},b.a.createElement("strong",{className:n.listItemHeaderText},t)))},o.map((function(e,t){var a=Object.values(e.submenus||{}),o=Boolean(jt()(a)),i={};return o||(i={component:f.b,to:e.path.replace(/:[\w*]+/g,""),selected:r.location.pathname.includes(e.path)||e.path.includes(r.location.pathname)}),b.a.createElement("div",{key:t.toString()},b.a.createElement(Oa.a,Object.assign({button:!o,key:e.path},i),e.icon&&b.a.createElement(ka.a,{className:n.listItemIcon},e.icon),b.a.createElement(ya.a,{className:n.listItemText,disableTypography:!0,primary:b.a.createElement(Ca.a,{badgeContent:e.badge,color:"primary",invisible:!e.badge,classes:{badge:n.badge}},e.label)})),o&&b.a.createElement(ma.a,{className:n.submenuList},a.map((function(t){var a="".concat(e.path).concat(t.path);return b.a.createElement(Oa.a,{button:!0,className:n.submenuItem,key:a,component:f.b,to:a.replace(/:[\w*]+/g,""),selected:a===r.location.pathname},t.icon&&b.a.createElement(ka.a,{className:n.listItemIcon},t.icon),b.a.createElement(ya.a,{className:n.listItemText,disableTypography:!0,primary:t.label}))}))))}))):null}},{key:"renderUserProfile",value:function(){var e=this,t=this.props.classes,a=this.state.profileMenuAnchor,n=M.getUserData(),r=v()(n,"member.name",""),o=v()(n,"member.lastname",""),i=v()(n,"member.photo_url",""),c="".concat(r," ").concat(o);return b.a.createElement(ma.a,{component:"nav",className:t.userProfileList},b.a.createElement(Oa.a,{alignItems:"flex-start"},b.a.createElement("div",{className:t.profileMenuContainer},b.a.createElement(aa,{name:c,photoUrl:i}),b.a.createElement("span",{className:t.userName,onClick:this.onToggleProfileMenu},c),b.a.createElement(ze.a,{size:"medium",onClick:this.onToggleProfileMenu},b.a.createElement(va.a,null)),b.a.createElement(ba.a,{keepMounted:!0,anchorEl:a,open:Boolean(a),onClose:function(){return e.setState({profileMenuAnchor:null})},transformOrigin:{vertical:"bottom",horizontal:"right"}},b.a.createElement(Wt.a,{onClick:this.onSettings},"Configura\xe7\xf5es"),b.a.createElement(Wt.a,{onClick:this.onLogout},"Sair")))))}},{key:"renderSideMenu",value:function(e){var t=this.props.classes,n=this.state.sideMenuOpen;return b.a.createElement(sa.a,{classes:{paper:t.drawer},variant:e?"persistent":"permanent",anchor:"left",open:n,ModalProps:{keepMounted:!e}},b.a.createElement("div",{className:t.headerLogoContainer},e&&b.a.createElement("div",{className:t.closeMenuIcon},b.a.createElement(ze.a,{size:"medium",onClick:this.onToggleSideMenu},b.a.createElement(ha.a,null))),b.a.createElement("div",{className:t.logoContainer},b.a.createElement(f.b,{to:"/"},b.a.createElement("img",{src:a(470),alt:L.appName,className:t.logo})))),b.a.createElement(da.a,{className:t.divider}),this.renderSideMenuList(wa),this.renderSideMenuList(Ta,"RECURSOS DO PR\xc9DIO"),this.renderUserProfile())}},{key:"render",value:function(){var e=this.props.classes;return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:e.root},b.a.createElement(ze.a,{"aria-label":"open drawer",onClick:this.onToggleSideMenu,edge:"start"},b.a.createElement(ga.a,null)),b.a.createElement(ua.a,{smDown:!0},this.renderSideMenu(!1)),b.a.createElement(ua.a,{mdUp:!0},this.renderSideMenu(!0)),this.renderAlerts()))}}]),n}(d.PureComponent),Sa=Object(Q.a)(Object(G.a)((function(e){var t;return{root:Object($.a)({marginBottom:0},e.breakpoints.up("md"),{marginBottom:"-27px"}),drawer:(t={},Object($.a)(t,e.breakpoints.up("md"),{width:e.menuWidth,flexShrink:0}),Object($.a)(t,"background","#FAFAFA"),Object($.a)(t,"color","#313131"),t),appBar:{backgroundColor:"#FAFAFA",width:"calc(100%-".concat(e.menuWidth,"px)"),borderBottom:"1px solid rgba(0, 0, 0, 0.12)",boxShadow:"none"},userProfileList:{position:"absolute",bottom:5,left:0},profileMenuContainer:{display:"flex",alignItems:"center",width:"100%"},userName:{color:"#313131",fontSize:14,cursor:"pointer",marginLeft:10},towerSelect:{width:200,color:"#313131",borderColor:"#FAFAFA",backgroundColor:"#FAFAFA",marginTop:10},logoutButton:{color:"red",fontSize:16,fontWeight:"bold",textTransform:"none"},headerLogoContainer:{width:"100%",display:"flex",paddingTop:5,paddingBottom:2,paddingRight:20},logoContainer:Object($.a)({marginLeft:0,color:"#313131",paddingTop:5},e.breakpoints.up("md"),{paddingTop:9,paddingBottom:4,marginLeft:15}),closeMenuIcon:{display:"inline-block",color:"#313131",marginLeft:0},logo:{width:105,height:39},checkIcon:{marginRight:10},listItemIcon:{color:"#313131",fontSize:12,width:16,height:16},listItemText:{marginLeft:-25,fontSize:12,color:"#313131"},listItemLink:{fontSize:12,color:"#313131"},listItemHeaderText:{fontSize:12},submenuList:{marginBottom:-8,marginTop:-8},submenuItem:{paddingLeft:75},badge:{right:-25,top:7,fontSize:12,backgroundColor:"#aef7ea",color:"#22007f"}}}),{withTheme:!0}),h.g,Object(Q.f)("webappUpdated","setWebappUpdated",!1))(xa),Na=a(610),Da=a(589),Ma=a(146),Ia=a.n(Ma),Ba=["TicketCategories","Locations","Members"],La=["TicketCategories","Locations","Slack"],Fa=Object(d.memo)((function(e){var t=e.history,a=e.classes,n=function(){var e=Object.values(Be).filter((function(e){return!e.hideMenu&&e.settingsMenu})),t=M.getUserData(),a="MEMBER"===v()(t,"member.role","MEMBER"),n=v()(t,"member.company.has_ticket_support",!1);return a&&(e=e.filter((function(e){return!Ba.includes(e.trackPage)}))),n||(e=e.filter((function(e){return!La.includes(e.trackPage)}))),e}();return b.a.createElement(ia.a,{square:!0,className:a.root},b.a.createElement(Na.a,{value:Ia()(n,(function(e){return t.location.pathname===e.path})),indicatorColor:"primary",textColor:"primary",scrollButtons:"auto",variant:"scrollable",onChange:function(e,a){return t.push(n[a].path)}},n.map((function(e,t){return b.a.createElement(Da.a,{key:e.path,label:e.label,index:t})}))))})),Ra=Object(Q.a)(Object(G.a)((function(e){return{root:Object($.a)({marginTop:25},e.breakpoints.up("md"),{marginTop:35})}}),{withTheme:!0}),h.g)(Fa),Pa={updateMember:function(e){var t=e.name,a=e.lastname,n=e.jobRole;return R.put("/member",{name:t,lastname:a,job_role:n})},updateMemberPassword:function(e){var t=e.password;return R.put("/member/change_password",{password:t})},revokeSlackUser:function(){return R.put("/member/revoke_slack")}},_a=a(298),Wa=a.n(_a),qa={inviteUsers:function(e){var t=e.role,a=e.locationIds,n=e.slackUsers,r={role:t,location_ids:a,slack_users:j()(n,(function(e){var t=v()(e,"name","").trim().split(" ");return{name:Yt()(t),lastname:Wa()(t,1).join(" "),email:v()(e,"email")}}))};return R.post("/slack/invite",r)},listUsers:function(e){var t=e.canInvite,a=e.nextCursor;return t?R.get("/slack/users",{cursor:a}):null}},Ua={ok:"Conta Slack integrada com sucesso",not_authorized:"N\xe3o foi poss\xedvel integrar sua conta Slack",wrong_member:"\xc9 necess\xe1rio logar no Slack com mesmo email de login Lobby"},za=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.revokeSlackFetch,o=e.revokeSlackLoading,i=e.canInvite,c=e.slackUsers,l=e.slackUsersFetch,s=e.slackUsersLoading,m=e.inviteSlackUsersFetch,u=e.inviteSlackUsersLoading,d=e.nextCursor,p=a.showAlert,g=a.alertMsg,f=a.alertType,h=null;p&&(h=b.a.createElement(Ge,{message:g,type:f,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}}));var E=M.getUserData(),O=v()(E,"member.company.name"),j=v()(E,"member.company.slack_team_id"),k=v()(E,"member.slack_user_id"),y=Nt()(v()(E,"member.locations",[]),["name"]),C=function(){window.confirm("Tem certeza em realizar essa a\xe7\xe3o?")&&(U.hit("SlackIntegration - RevokeUser"),r(!0))};return b.a.createElement("div",{className:t.root},b.a.createElement(Sa,{alertBox:h}),b.a.createElement("section",null,b.a.createElement("div",{className:t.container},b.a.createElement("div",{className:t.headerView},b.a.createElement("aside",null,b.a.createElement(Fe.a,{variant:"h5"},b.a.createElement("b",null,"Configura\xe7\xf5es"))))),b.a.createElement("div",{className:t.container},b.a.createElement(Ra,null)),b.a.createElement("br",null),s?b.a.createElement(se,null):i&&jt()(c)?b.a.createElement(oa,{users:c,onRevoke:C,onInvite:function(e){m(!0,"",null,{variables:e})},onShowMore:function(){return l(!1)},isRevokeDisabled:o,isInviteDisabled:u,canDisconnect:Boolean(k),nextCursor:d,locations:y,companyName:O}):b.a.createElement(la,{onAuthUser:function(){U.hit("SlackIntegration - AuthUser");var e="".concat(L.slackOAuthURL,"?scope=").concat(L.slackOAuthScope,"&team=").concat(j);e+="&client_id=".concat(L.slackClientId,"&user_scope=").concat(L.slackOAuthUserScope),e+="&redirect_uri=".concat(L.slackRedirectURL),window.location.href=e},onInstallLobby:function(){U.hit("SlackIntegration - InstallLobby");var e="".concat(L.slackOAuthURL,"?scope=").concat(L.slackOAuthScope);e+="&client_id=".concat(L.slackClientId,"&user_scope=").concat(L.slackOAuthUserScope),e+="&redirect_uri=".concat(L.slackRedirectURL),window.location.href=e},onRevoke:C,isDisabled:o})))})),Va=ft(Pa.revokeSlackUser,{name:"revokeSlack",init:!1,options:function(e){var t=e.setAlert;return{onRequestFinished:function(){var e=Object(i.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({alertMsg:"A conta Slack foi desconectada",alertType:"success",showAlert:!0}),a=M.getUserData(),xt()(a,"member.slack_user_id",null),M.setUserData(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRequestError:function(){t({alertMsg:"Erro ao desconectar conta Slack",alertType:"error",showAlert:!0})}}}}),Ha=ft(qa.listUsers,{name:"slackUsers",options:function(e){var t=e.setAlert,a=e.slackUsers,n=e.setSlackUsers,r=e.setNextCursor,o=e.nextCursor;return{variables:{canInvite:e.canInvite,nextCursor:o},onRequestFinished:function(e){var t=a.concat(v()(e,"users",[]));n(Nt()(Mt()(t,"email"),["name"])),r(v()(e,"next_cursor",""))},onRequestError:function(){t({alertMsg:"Erro ao carregar lista de usu\xe1rios slack",alertType:"error",showAlert:!0})}}}}),Ya=ft(qa.inviteUsers,{name:"inviteSlackUsers",init:!1,options:function(e){var t=e.setAlert,a=e.slackUsersFetch;return{onRequestFinished:function(){t({alertMsg:"Convite enviado com sucesso",alertType:"success",showAlert:!0}),a(!0)},onRequestError:function(){t({alertMsg:"Erro ao carregar convidar usu\xe1rios slack",alertType:"error",showAlert:!0})}}}}),Qa=Object(Q.a)(h.g,Object(G.a)(na,{withTheme:!0}),Object(Q.f)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Q.f)("canInvite","setCanInvite",!1),Object(Q.f)("slackUsers","setSlackUsers",[]),Object(Q.f)("nextCursor","setNextCursor",""),Va,Ha,Ya,Object(Q.b)({componentDidMount:function(){var e=this;return Object(i.a)(o.a.mark((function t(){var a,n,r,i,c,l,s,m,u,d,b;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props,n=a.location,r=a.setAlert,i=a.setCanInvite,c=new URLSearchParams(n.search),l=c.get("status"),s=M.getUserData(),m=v()(s,"member.role"),u=v()(s,"member.company.slack_team_id"),d=v()(s,"member.slack_user_id"),b=Xe.includes(m)&&u&&d,i(Boolean(b)),l&&(r({alertMsg:Ua[l],alertType:"ok"===l?"success":"error",showAlert:!0}),window.history.pushState("","","/#/configuracoes/slack"));case 10:case"end":return t.stop()}}),t)})))()}}))(za),Ga=a(103),Ja=a.n(Ga),Ka={getSpace:function(e){return R.get("/spaces/".concat(e))},getSpaces:function(e){return e?R.get("/buildings/".concat(e,"/spaces")):null}},Xa=a(590),Za=a(591),$a=a(593),en=a(592),tn=Object(d.memo)((function(e){var t=e.classes,a=e.space,n=e.history,r=v()(a,"in_maintenance"),o=r?t.cardDisabled:t.card;return b.a.createElement(oe.a,{item:!0,xs:12,sm:6,md:4},b.a.createElement(Xa.a,{className:o,onClick:function(){r||n.push("/espacos/".concat(a.id))}},b.a.createElement(Za.a,null,b.a.createElement(en.a,{className:t.media,image:a.photo_url,title:a.name}),b.a.createElement($a.a,null,b.a.createElement(Fe.a,{variant:"h6"},b.a.createElement("small",null,a.name,"\xa0"),r&&b.a.createElement("small",{className:t.danger},"(Manuten\xe7\xe3o)"))))))})),an=Object(Q.a)(Object(G.a)((function(){return{card:{marginBottom:10},cardDisabled:{marginBottom:10,background:"#EDEDED"},danger:{color:"red"},media:{height:100}}}),{withTheme:!0}),h.g)(tn),nn=v()(M.getUserData(),"buildings[0].id"),rn=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.spacesData,c=e.spacesError,l=e.spacesFetch,s=e.spacesLoading,m=e.setBuildingId,u=e.buildingId,d=a.showAlert,p=a.alertMsg,g=a.alertType,f=null;d&&(f=b.a.createElement(Ge,{message:p,type:g,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}}));var h=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.target.value),l(!0),a={select_building:t.target.value},U.hit("Spaces - FilteredByBuilding",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=v()(r,"spaces",[]),O=Nt()(v()(M.getUserData(),"buildings",[]),["name"]);return b.a.createElement("div",{className:t.root},b.a.createElement(Sa,{alertBox:f,error:c}),b.a.createElement("section",null,b.a.createElement("div",{className:t.container},b.a.createElement("div",{className:t.headerView},b.a.createElement("aside",null,b.a.createElement(Fe.a,{variant:"h5"},b.a.createElement("b",null,jt()(E)?"Reserva de espa\xe7os (".concat(jt()(E),")"):"Reserva de espa\xe7os")))),b.a.createElement("br",null),b.a.createElement(oe.a,{container:!0,spacing:1},b.a.createElement(oe.a,{item:!0,xs:6,sm:3,md:2},b.a.createElement(nt.a,{fullWidth:!0},b.a.createElement(Le.a,{select:!0,label:"Pr\xe9dio",value:u,SelectProps:{native:!0},InputLabelProps:{shrink:!0},onChange:h},O.map((function(e){return b.a.createElement("option",{key:e.id,value:e.id},e.name)}))))))),b.a.createElement("div",{className:t.container},b.a.createElement(oe.a,{container:!0,spacing:1},s?b.a.createElement(se,null):Ja()(E)?b.a.createElement("div",{className:t.centerHeaderView},b.a.createElement(K.a,{className:t.emptyHeaderIcon}),b.a.createElement("b",{className:t.emptyHeaderTitle},"Este pr\xe9dio n\xe3o possui espa\xe7o para reserva")):E.map((function(e){return b.a.createElement(an,{key:e.id,space:e})}))))))})),on=ft(Ka.getSpaces,{name:"spaces",options:function(e){return{variables:e.buildingId}}}),cn=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)({},ee(e))}),{withTheme:!0}),Object(Q.f)("buildingId","setBuildingId",nn),Object(Q.f)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),on)(rn),ln=a(43),sn=a.n(ln),mn=a(200),un=a.n(mn),dn={getBookings:function(e){var t=e.spaceId,a=e.from,n=e.to;return R.get("/spaces/".concat(t,"/space_bookings?from=").concat(A()(a).toISOString(),"&to=").concat(A()(n).toISOString()))},createBookings:function(e){var t={title:v()(e,"title"),space_id:v()(e,"spaceId"),booking_date:v()(e,"bookingDate"),periods:v()(e,"periods",[])};return R.post("/space_bookings",t)},cancelBooking:function(e){return R.put("/space_bookings/".concat(e,"/cancel"))}},bn=(a(473),a(474),a(153)),pn=a(302),gn=a.n(pn),fn={calendar:{height:575},pastBox:{backgroundColor:"#777",borderColor:"#555"},ownerBox:{backgroundColor:"#1177FF"},busyBox:{backgroundColor:"#92b4bf"}},hn=Object(bn.c)(A.a),En=[{key:bn.b.WEEK,value:"Semanal"},{key:bn.b.MONTH,value:"Mensal"}],vn=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.onNavigate,r=t.view,o=t.loading;return b.a.createElement("div",{className:"rbc-toolbar"},b.a.createElement("div",{className:"rbc-btn-group"},En.map((function(t){var a=t.key,n=t.value,i=r===a?"rbc-active":"",c=e.view.bind(null,a);return b.a.createElement("button",{key:a,type:"button",disabled:o,className:i,onClick:c},n)}))),b.a.createElement("b",{className:"rbc-toolbar-label"},o?"Carregando...":a),b.a.createElement("div",{className:"rbc-btn-group"},b.a.createElement("button",{type:"button",disabled:o,onClick:function(){return n("PREV")}},"\u2190"),b.a.createElement("button",{type:"button",disabled:o,onClick:function(){return n("TODAY")}},"Hoje"),b.a.createElement("button",{type:"button",disabled:o,onClick:function(){return n("NEXT")}},"\u2192")))}}]),a}(gn.a);vn.propTypes={loading:Z.a.bool};var On=Object(d.memo)((function(e){var t=e.data,a=e.view,n=e.onView,r=e.onRangeChange,o=e.loading,i=e.eventComponent,c=e.onSelectBooking;return b.a.createElement(bn.a,{resizable:!0,events:t,localizer:hn,view:a,onView:n,startAccessor:"from",endAccessor:"to",step:30,onRangeChange:r,scrollToTime:A()(6,"HH").toDate(),culture:L.locale,eventPropGetter:function(e){return{style:(t=e,A()(t.bookingDate).isBefore()?fn.pastBox:t.busy?fn.busyBox:fn.ownerBox)};var t},components:{event:i,toolbar:function(e){return b.a.createElement(vn,Object.assign({loading:o},e))}},style:fn.calendar,onSelectEvent:c})}));On.propTypes={data:Z.a.array,eventComponent:Z.a.func,onView:Z.a.func,view:Z.a.string,loading:Z.a.bool,onSelectBooking:Z.a.func,onRangeChange:Z.a.func};var jn=On,kn=a(512),yn=a(514),Cn=a(515),An=a(594),wn=a(509),Tn=a(595),xn=a(596),Sn=a(303),Nn=a.n(Sn),Dn=a(150),Mn=a.n(Dn),In={getCalendar:function(e){var t=e.spaceId,a=e.bookingDate;return e.readOnly?new Promise((function(e){return e({})})):R.get("/spaces/".concat(t,"/space_calendars?booking_date=").concat(A()(a).toISOString()))}},Bn=A()().add(1,"day").toDate(),Ln=function(){return{title:"",busy:!1,bookingDate:Bn,periods:Mn()([])}},Fn=Object(d.memo)((function(e){var t=e.classes,a=e.open,n=e.setOpen,r=e.calendarLoading,c=e.isMonthView,l=e.space,s=e.bookingData,m=e.calendarFetch,d=e.submitBookingFetch,p=e.submitBookingLoading,g=e.cancelBookingFetch,f=e.cancelBookingLoading,h=e.readOnly,E=e.openModalButton,v=e.setBookingState,O=e.calendar,k=e.setCalendar,y=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(!0),U.hit("SpaceBookingModal - Viewed"),e.next=5,m(!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(Ln());case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),C=function(){U.hit("SpaceBookingModal - Closed"),h||v(Ln()),n(!1)},w=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k([]),v({bookingDate:t,periods:Mn()([])}),e.next=5,m(!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(Ln());case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),T=function(e,t){var a=s.periods;try{var n=JSON.parse(e.currentTarget.value);t?(a.push(n),v({periods:a})):v({periods:a.filter((function(e){return e.label!==n.label}))})}catch(r){v(Ln())}},x=s.id,S=s.title,N=s.bookingDate,D=s.periods,M=s.busy,I=p||r,B=x&&h,F=A()(N).isBefore(),R=!h&&jt()(O),P=Object(Ut.a)(),_=Object(zt.a)(P.breakpoints.down("sm"));return b.a.createElement(b.a.Fragment,null,E?b.a.createElement("div",{className:c?t.monthViewButton:t.timeViewButton,onClick:y},E):b.a.createElement(ie.a,{onClick:y,size:"large",variant:"contained",color:"primary",className:_?t.fab:null},"Reservar"),b.a.createElement(kn.a,{open:Boolean(a),maxWidth:"md",onClose:C,keepMounted:!0},b.a.createElement(oe.a,{container:!0,className:t.container},b.a.createElement(oe.a,{item:!0,xs:12,sm:12,md:6},b.a.createElement(An.a,null,l.name),b.a.createElement(yn.a,{className:t.dialogContent},b.a.createElement("div",{dangerouslySetInnerHTML:{__html:l.description}}))),b.a.createElement(oe.a,{item:!0,xs:12,sm:12,md:6},b.a.createElement(An.a,null,h?S:"Reservar espa\xe7o",b.a.createElement(ze.a,{className:t.closeButton,onClick:C},b.a.createElement(Ue.a,null))),b.a.createElement(yn.a,{className:t.dialogContent},!h&&b.a.createElement(nt.a,{className:t.inputField},b.a.createElement(Le.a,{fullWidth:!0,label:"Tit\xfalo",margin:"normal",disabled:I||h,InputLabelProps:{shrink:!0},value:S,onChange:function(e){return v({title:e.target.value})}})),b.a.createElement(nt.a,{className:t.inputField},b.a.createElement(bt.a,{libInstance:A.a,utils:dt.a,locale:L.locale},b.a.createElement(pt.a,{className:t.calendarInputField,label:"Data da reserva",invalidDateMessage:"Formato inv\xe1lido",variant:"dialog",disabled:I||h,value:N,onChange:w,minDate:Bn,format:"DD/MM/YYYY",cancelLabel:"Cancelar",minDateMessage:""}))),b.a.createElement(nt.a,{className:t.checkboxArea},b.a.createElement(wn.a,{className:t.inputLabel},"Hor\xe1rios"),r?b.a.createElement("div",{className:t.loading},b.a.createElement(se,null)):b.a.createElement(Tn.a,null,B?j()(D,(function(e){var a="".concat(A()(e.from).format("HH:mm"),"-").concat(A()(e.to).format("HH:mm"));return b.a.createElement(xn.a,{key:a,label:a,classes:{label:t.period},control:b.a.createElement(Rt.a,{checked:!0,disabled:!0})})})):jt()(O)?j()(O,(function(e){var a="".concat(e.from,"-").concat(A()(e.to,"HH:mm").add(1,"minute").format("HH:mm")),n=I||h||!e.available,r=e.available?t.period:t.periodBusy,o=!n&&!Ja()(Nn()(D,(function(e){return e.label===a})));return b.a.createElement(xn.a,{key:a,label:a,classes:{label:r},control:b.a.createElement(Rt.a,{color:"primary",checked:o,disabled:n,onChange:T,value:JSON.stringify(Object(u.a)(Object(u.a)({},e),{},{label:a}))})})})):b.a.createElement("span",{className:t.error},b.a.createElement("br",null),"N\xe3o h\xe1 hor\xe1rios dispon\xedveis nessa data")))),b.a.createElement(Cn.a,{className:t.dialogAction},M||F?b.a.createElement(ie.a,{onClick:C,size:"large"},"Fechar"):B?b.a.createElement(b.a.Fragment,null,b.a.createElement(ie.a,{onClick:C,size:"large",disabled:f},"Fechar"),b.a.createElement(ie.a,{onClick:function(){window.confirm("Tem certeza em realizar essa a\xe7\xe3o?")&&g(!0)},size:"large",color:"secondary",variant:"contained",disabled:f},"Remover")):b.a.createElement(b.a.Fragment,null,b.a.createElement(ie.a,{onClick:C,disabled:I,size:"large"},"Fechar"),b.a.createElement(ie.a,{onClick:function(){return d(!0)},size:"large",color:"primary",variant:"contained",disabled:I||!R,className:t.submitButton},p?"Reservando...":"Reservar")))))))})),Rn=ft(In.getCalendar,{name:"calendar",options:function(e){var t=e.space,a=e.setCalendar,n=e.readOnly,r=e.bookingData.bookingDate;return{variables:{spaceId:v()(t,"id"),readOnly:n,bookingDate:r},onRequestFinished:function(e){a(v()(e,"space_calendars",[]))},onRequestError:function(){a([])}}}}),Pn=ft(dn.createBookings,{name:"submitBooking",init:!1,options:function(e){var t=e.bookingData,a=e.setBookingState,n=e.setOpen,r=e.space,o=e.onRequestBooking;return{variables:Object(u.a)(Object(u.a)({},t),{},{spaceId:v()(r,"id")}),onRequestFinished:function(){U.hit("SpaceBooking - Added",{}),a(Ln()),n(!1),o()},onRequestError:o}}}),_n=ft(dn.cancelBooking,{name:"cancelBooking",init:!1,options:function(e){var t=e.bookingData,a=e.onRequestBooking,n=e.setOpen;return{variables:v()(t,"id"),onRequestFinished:function(){U.hit("SpaceBooking - Canceled",{}),n(!1),a()},onRequestError:a}}}),Wn=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{container:{flexGrow:1,paddingBottom:15},calendarInputField:{maxWidth:180,marginBottom:10},inputField:{display:"block",maxWidth:265,marginBottom:20},checkboxArea:{marginBottom:20},inputLabel:{fontSize:12},period:{fontSize:12},periodBusy:{fontSize:12,textDecoration:"line-through"},timeViewButton:{width:"100vw",minWidth:"100vw",maxWidth:"100vw",height:"100vh",maxHeight:"100vh",minHeight:"100vh",marginLeft:-10,paddingLeft:10,marginTop:-20,paddingTop:20},monthViewButton:{width:"100vw",minWidth:"100vw",maxWidth:"100vw",marginLeft:-10,paddingLeft:10,marginTop:-20,paddingTop:20},loading:{width:275},error:{color:"red"},dialogContent:{marginTop:-20},dialogAction:{paddingLeft:20,paddingRight:20}})}),{withTheme:!0}),Object(Q.f)("open","setOpen",!1),Object(Q.f)("bookingData","setBookingData",Ln()),Object(Q.f)("calendar","setCalendar",[]),Object(Q.f)("disableAction","setDisableAction",!1),Object(Q.c)({setBookingState:function(e){var t=e.setBookingData,a=e.bookingData;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}),Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.selectedBookingData,a=e.setBookingData,n=e.space;if(t){var r=t.event,o=r.id,i=r.title,c=r.from,l=r.to;a({id:o,title:i,bookingDate:r.bookingDate,busy:r.busy,spaceId:n.id,periods:[{from:c,to:l,label:"".concat(c,"-").concat(l)}]})}}}),Rn,_n,Pn)(Fn),qn=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.bookingsFetch,c=e.match,l=e.setRangeDates,s=e.bookingsData,m=e.bookingsError,u=e.bookingsLoading,d=e.spaceData,p=e.spaceError,g=e.spaceLoading,f=e.calendarView,h=e.setCalendarView,E=a.showAlert,O=a.alertMsg,k=a.alertType,y=function(e){return n({alertMsg:e,alertType:"error",showAlert:!0})},C=function(e){return n({alertMsg:e,alertType:"success",showAlert:!0})},w=null;E&&(w=b.a.createElement(Ge,{message:O,type:k,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}}));var T=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.params.id,e.prev=1,a=sn()(t)?{spaceId:n,from:Yt()(t),to:un()(t)}:{spaceId:n,from:t.start,to:t.end},l({from:a.from,to:a.to}),e.next=6,r(!0,"",null,{variables:a});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),y(v()(e.t0,"error")||"Erro ao atualizar calend\xe1rio");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}a=v()(t,"errors.periods",[]).join(", "),y(a||"Ocorreu um erro ao reservar espa\xe7o"),e.next=9;break;case 6:return C("Reservado com sucesso"),e.next=9,r(!0);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),y("Erro ao atualizar calend\xe1rio");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}a=v()(t,"errors.booking_date",[]).join(", "),y(a||"Ocorreu um erro ao cancelar esta reserva"),e.next=9;break;case 6:return C("Reserva cancelada com sucesso"),e.next=9,r(!0);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),y("Erro ao atualizar calend\xe1rio");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),N=v()(d,"space",{}),D=v()(s,"space_bookings",[]),M=p||m,I=j()(D,(function(e){return{id:e.id,title:e.title||"N\xe3o dispon\xedvel",bookingDate:A()(e.booking_date).toDate(),from:A()(e.booking_date).hour(Yt()(e.from.split(":"))).minute(un()(e.from.split(":"))).toDate(),to:A()(e.booking_date).hour(Yt()(e.to.split(":"))).minute(un()(e.to.split(":"))).add(1,"minute").toDate(),busy:!e.title}}));return b.a.createElement("div",{className:t.root},b.a.createElement(Sa,{alertBox:w,error:M}),b.a.createElement("section",null,!g&&b.a.createElement("div",{className:t.container},b.a.createElement("div",{className:t.headerView},b.a.createElement("aside",null,b.a.createElement(Fe.a,{variant:"h5"},b.a.createElement("b",null,N.name))),b.a.createElement("aside",{className:t.newBooking},b.a.createElement(Wn,{space:N,onRequestBooking:x})))),b.a.createElement("div",{className:t.container},g?b.a.createElement(se,null):b.a.createElement(jn,{data:I,onView:h,onRangeChange:T,view:f,loading:u,eventComponent:function(e){return b.a.createElement(Wn,{readOnly:!0,space:N,isMonthView:"month"===f,onRequestBooking:S,selectedBookingData:e,openModalButton:b.a.createElement(b.a.Fragment,null,e.title)})}}))))})),Un=ft(Ka.getSpace,{name:"space",options:function(e){return{variables:e.match.params.id}}}),zn=ft(dn.getBookings,{name:"bookings",options:function(e){var t=e.match.params.id,a=e.rangeDates;return{variables:{spaceId:t,from:a.from,to:a.to}}}}),Vn=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)({},ee(e))}),{withTheme:!0}),Object(Q.f)("rangeDates","setRangeDates",{from:A()().startOf("week").toDate(),to:A()().endOf("week").toDate()}),Object(Q.f)("calendarView","setCalendarView","week"),Object(Q.f)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Un,zn)(qn),Hn=a(304),Yn=a.n(Hn),Qn=a(305),Gn=a.n(Qn),Jn={getVisitors:function(e){var t=e.page,a=void 0===t?0:t,n=e.perPage,r=void 0===n?20:n,o=e.month,i=void 0===o?11:o,c=e.year,l=e.buildingId;return l?R.get("/visitors",{page:a,per_page:r,month:i,year:c,building_id:l}):null},createVisitors:function(e){var t=e.visitorData,a={company_id:e.companyId,visitor_company:e.visitorCompany,visit_hour:e.visitTime,visit_date:e.visitDate,host_member_id:e.hostMemberId,building_id:e.buildingId},n=t.map((function(e){return Object(u.a)(Object(u.a)({},e),a)}));return R.post("/visitors",{visitors:n})},deleteVisitor:function(e){return R.put("/visitors/".concat(e,"/cancel"))}},Kn={getMembers:function(){return R.get("/members")},getMember:function(e){return R.get("/members/".concat(e))},blockMember:function(e){return R.put("/members/".concat(e,"/block"))},updateMember:function(e){var t=e.id,a=e.name,n=e.lastname,r=e.phone,o=e.role,i=e.job_role,c=e.locationIds;return R.put("/members/".concat(t),{id:t,name:a,lastname:n,phone:r,role:o,job_role:i,location_ids:c})},emailCheck:function(e){return R.get("/members/email_check",{email:e})},createMember:function(e){var t=e.name,a=e.lastname,n=e.phone,r=e.role,o=e.email,i=e.jobRole,c=e.locationIds;return R.post("/members?send_invite=true",{name:t,lastname:a,phone:n,role:r,email:o,job_role:i,location_ids:c})},resendInvitationEmail:function(e){return R.get("/members/resend_invitation_email",{id:e})}},Xn=a(292),Zn=a(508),$n=a(614),er=a(306),tr=a.n(er),ar=function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{submitButton:{fontWeight:"bold"},dialogContent:{maxWidth:660},inputField:{marginTop:-15,padding:"0 10px",width:"100%"},calendarInputField:{marginTop:10},selectLabel:{position:"relative",fontSize:14,paddingBottom:3},inputLabel:{padding:"20px 12px"},selectBox:{paddingTop:16},button:{fontWeight:"bold",margin:"0 20px"},addVisitorButton:{fontWeight:"bold",marginTop:"15px",maxWidth:"40px",maxHeight:"40px",minWidth:"40px",minHeight:"40px",marginRight:"10px"},deleteVisitorButton:{fontWeight:"bold",marginTop:"15px",backgroundColor:"#EE3C3C",color:"#FFF","&:hover":{backgroundColor:"#EE3C3C"},maxWidth:"40px",maxHeight:"40px",minWidth:"40px",minHeight:"40px",marginRight:"10px"},visitorsContainer:{display:"flex",justifyContent:"space-between"},buttonContainer:{display:"flex",justifyContent:"flex-end"},actions:{marginTop:30,marginBottom:10,display:"flex",justifyContent:"center"}})},nr=function(){var e=M.getUserData();return{visitorData:Mn()([{name:"",email:""}]),visitorCompany:"",visitTime:A()(new Date).add(1,"hour").minute(0).toDate(),visitDate:new Date,hostMemberId:v()(e,"member.id",""),buildingId:v()(e,"buildings[0].id","")}},rr=Object(d.memo)((function(e){var t=e.classes,a=e.open,n=e.setOpen,r=e.loading,o=e.setMemberState,i=e.members,c=e.memberData,l=e.buildings,s=e.submitFetch,m=e.submitLoading,u=e.submitError,d=function(){var e=c.visitorData;e.splice(1,0,{name:"",email:""}),o({visitorData:e})},p=function(){U.hit("VisitorModal - Closed"),o(nr()),n(!1)},g=Object(Ut.a)(),f=Object(zt.a)(g.breakpoints.down("sm")),h=tr()(v()(u,"errors",{}),(function(e){return e[0]})),E=c.visitorCompany,O=c.visitTime,j=c.visitDate,k=c.hostMemberId,y=c.visitorData,C=c.buildingId,w=r||m;return b.a.createElement("div",null,b.a.createElement(ie.a,{onClick:function(){U.hit("VisitorModal - Viewed"),o(nr()),n(!0)},size:"large",variant:"contained",color:"primary",className:f?t.fab:null},"Nova visita"),b.a.createElement(kn.a,{open:a,maxWidth:"md",onClose:p,keepMounted:!0},b.a.createElement(An.a,null,"Novo visitante",b.a.createElement(ze.a,{className:t.closeButton,onClick:p},b.a.createElement(Ue.a,null))),b.a.createElement(yn.a,{className:t.dialogContent},b.a.createElement(oe.a,{container:!0,spacing:2},y.map((function(e,a){return b.a.createElement(b.a.Fragment,{key:a.toString()},b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(nt.a,{error:!!h.name,className:t.inputField},b.a.createElement(Le.a,{error:!!h.name,fullWidth:!0,label:"Nome do visitante",margin:"normal",InputLabelProps:{shrink:!0},value:y[a].name,disabled:w,onChange:function(e){return function(e,t){var a=c.visitorData;a[t].name=e.target.value,o({visitorData:a})}(e,a)}}),h.name&&b.a.createElement(et.a,null,h.name))),b.a.createElement(oe.a,{item:!0,xs:10,sm:5},b.a.createElement(nt.a,{error:!!h.email,className:t.inputField},b.a.createElement(Le.a,{error:!!h.email,fullWidth:!0,label:"E-mail do visitante",margin:"normal",InputLabelProps:{shrink:!0},value:y[a].email,disabled:w,onChange:function(e){return function(e,t){var a=c.visitorData;a[t].email=e.target.value,o({visitorData:a})}(e,a)}}),h.email&&b.a.createElement(et.a,null,h.email))),b.a.createElement(oe.a,{item:!0,xs:2,sm:1},b.a.createElement("div",{className:t.buttonContainer},a?b.a.createElement(ie.a,{tabIndex:"-1",onClick:function(){return function(e){var t=c.visitorData;t.splice(e,1),o({visitorData:t})}(a)},variant:"contained",disabled:w,className:t.deleteVisitorButton},"-"):b.a.createElement(ie.a,{onClick:d,color:"primary",variant:"contained",disabled:w,className:t.addVisitorButton},"+"))))})),b.a.createElement(b.a.Fragment,null,b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(nt.a,{className:t.inputField,error:!!h.visitorCompany},b.a.createElement(Le.a,{error:!!h.visitorCompany,fullWidth:!0,label:"Empresa do visitante/evento",margin:"normal",InputLabelProps:{shrink:!0},value:E,disabled:w,onChange:function(e){return o({visitorCompany:e.target.value})}}),h.visitorCompany&&b.a.createElement(et.a,null,h.visitorCompany))),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(nt.a,{className:t.inputField,error:!!h.host_member},b.a.createElement(Zn.a,{shrink:!0,className:t.inputLabel},"Pessoa visitada"),b.a.createElement(Xn.a,{fullWidth:!0,className:t.selectBox,value:k,disabled:w,onChange:function(e){return o({hostMemberId:e.target.value})}},i.map((function(e){return b.a.createElement("option",{key:e.id,value:e.id},"".concat(e.name," ").concat(e.lastname))}))),h.members&&b.a.createElement(et.a,null,h.members)))),b.a.createElement(b.a.Fragment,null,b.a.createElement(oe.a,{item:!0,xs:6},b.a.createElement(nt.a,{className:t.inputField,error:!!h.visitorCompany},b.a.createElement(bt.a,{libInstance:A.a,utils:dt.a,locale:L.locale},b.a.createElement(pt.a,{className:t.calendarInputField,style:ar.components,label:"Data da visita",invalidDateMessage:"Formato inv\xe1lido",variant:"dialog",value:j,disabled:w,onChange:function(e){return o({visitDate:e})},minDate:new Date,format:"DD/MM/YYYY",cancelLabel:"Cancelar"})))),b.a.createElement(oe.a,{item:!0,xs:6},b.a.createElement(nt.a,{className:t.inputField,error:!!h.visitorCompany},b.a.createElement(bt.a,{libInstance:A.a,utils:dt.a,locale:L.locale},b.a.createElement($n.a,{className:t.calendarInputField,style:ar.components,ampm:!1,minutesStep:5,variant:"dialog",label:"Hor\xe1rio",value:O,disabled:w,onChange:function(e){return o({visitTime:e})},cancelLabel:"Cancelar"})))),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(nt.a,{className:t.inputField},b.a.createElement(Zn.a,{shrink:!0,className:t.inputLabel},"Pr\xe9dio"),b.a.createElement(Xn.a,{fullWidth:!0,className:t.selectBox,value:C,disabled:w,onChange:function(e){return o({buildingId:e.target.value})}},l.map((function(e){return b.a.createElement("option",{key:e.id,value:e.id},e.name)})))))))),b.a.createElement(Cn.a,{className:t.actions},b.a.createElement(ie.a,{onClick:p,size:"large",disabled:w},"Cancelar"),b.a.createElement(ie.a,{onClick:function(){return s(!0)},size:"large",color:"primary",variant:"contained",disabled:w,style:ar.submitButton},m?"Autorizando...":"Autorizar"))))})),or=ft(Jn.createVisitors,{name:"submit",init:!1,options:function(e){var t=e.onCreateVisitor,a=e.memberData,n=e.setOpen,r=e.setMemberState,o=e.companyId;return{variables:Object(u.a)(Object(u.a)({},a),{},{companyId:o}),onRequestFinished:function(){U.hit("NewVisitor - Added"),n(!1),r(nr()),t()},onRequestError:function(e){t(e)}}}}),ir=Object(Q.a)(Object(G.a)(ar,{withTheme:!0}),Object(Q.f)("open","setOpen",!1),Object(Q.f)("memberData","setMemberData",nr()),Object(Q.c)({setMemberState:function(e){var t=e.setMemberData,a=e.memberData;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}),or)(rr),cr=function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{createNotificationButton:{backgroundColor:"#1177FF",border:"none",width:200,height:50},button:{marginTop:20,marginRight:20},buttonContainer:{display:"flex",justifyContent:"center"},showMoreButton:{width:220,marginBottom:50}})},lr={ACCEPTED:"Autorizado",PENDING:"Pendente",CANCELED:"Cancelado"},sr=Object(d.memo)((function(e){var t=e.classes,a=e.index,n=e.visitor,r=e.isSmallScreen,o=e.fields,i=e.onCancelVisitor,c=v()(n,"id"),l="".concat(v()(n,"name")," ").concat(v()(n,"visitor_company")||""),s="".concat(v()(n,"host_member.name")," ").concat(v()(n,"host_member.lastname")),m=v()(n,"host_member.email"),u="".concat(v()(n,"inviter.name")," ").concat(v()(n,"inviter.lastname")),d=v()(n,"inviter.email"),p=v()(n,"visit_date"),g=p?"".concat(A()(p).format("DD/MM/YYYY")):"--",f=A()(v()(n,"visit_hour")),h=f?"".concat(A()(f).format("HH:mm")):"--",E=v()(n,"checkin_at"),O=E?A()(E).format("DD/MM/YY HH:mm"):"",j=A()(p).hour(f.hour()).minute(f.minute()),k="ACCEPTED"!==n.status&&A()(j).isAfter(A()().startOf("day"));if(r){var y=["".concat(g," ").concat(h),"".concat(lr[n.status]).concat(O?" \xe0s ".concat(O):""),l,"".concat(s," (").concat(d,")"),"".concat(u," (").concat(d,")")],C=o.slice(0,-1);return b.a.createElement(Lt.a,{className:a%2?t.bgWhite:t.bgGray},b.a.createElement(Ft.a,{colSpan:jt()(o)},b.a.createElement(oe.a,{container:!0,spacing:3},b.a.createElement(oe.a,{item:!0,xs:10},C.map((function(e,t){return b.a.createElement("div",{key:t.toString()},b.a.createElement("strong",null,e),b.a.createElement("br",null),b.a.createElement("span",null,y[t]))}))),b.a.createElement(oe.a,{item:!0,xs:2},k&&b.a.createElement("button",{type:"button",className:t.clearButton,onClick:function(){return i(c)}},b.a.createElement(Ue.a,null))))))}return b.a.createElement(Lt.a,{className:a%2?t.bgWhite:t.bgGray},b.a.createElement(Ft.a,{className:t.tableCell},g,b.a.createElement("br",null),h),b.a.createElement(Ft.a,{className:t.tableCell},lr[n.status],b.a.createElement("br",null),O),b.a.createElement(Ft.a,{className:t.tableCell},l),b.a.createElement(Ft.a,{className:t.tableCell},s,b.a.createElement("br",null),b.a.createElement("small",null,m)),b.a.createElement(Ft.a,{className:t.tableCell},u,b.a.createElement("br",null),b.a.createElement("small",null,d)),b.a.createElement(Ft.a,{className:t.tableSmallCell},k&&b.a.createElement("button",{type:"button",className:t.clearButton,onClick:function(){return i(c)}},b.a.createElement(Ue.a,null))))})),mr=Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},cr(e)),{},{clearButton:{display:"flex",justifyContent:"center",alignItems:"center",padding:7,marginLeft:5,borderRadius:50,borderWidth:0,borderStyle:"none",borderImage:"none",backgroundColor:"#EE3C3C",cursor:"pointer",color:"#fff","&:hover":{color:"#fff",backgroundColor:"#EE2C3C"}}})}),{withTheme:!0})(sr),ur=["Data visita","Status","Visitante","Visita para","Criado por","A\xe7\xe3o"],dr=Object(d.memo)((function(e){var t=e.classes,a=e.visitors,n=e.loading,r=e.onCancelVisitor,o=Object(Ut.a)(),i=Object(zt.a)(o.breakpoints.down("sm")),c=i?1:jt()(ur);return b.a.createElement("div",{className:t.container},b.a.createElement(ia.a,{className:t.paper},b.a.createElement(It.a,null,b.a.createElement(Bt.a,null,b.a.createElement(Lt.a,null,i?b.a.createElement(Ft.a,{className:t.tableCell},"VISITAS REGISTRADAS"):ur.map((function(e,a){return b.a.createElement(Ft.a,{className:t.tableCell,key:a.toString()},e.toUpperCase())})))),b.a.createElement(qt.a,null,n?b.a.createElement(Lt.a,null,b.a.createElement(Ft.a,{colSpan:c,align:"center"},b.a.createElement(se,null))):jt()(a)?a.map((function(e,t){return b.a.createElement(mr,{index:t,key:e.id,visitor:e,loading:n,onCancelVisitor:r,fields:ur,isSmallScreen:i})})):b.a.createElement(Lt.a,null,b.a.createElement(Ft.a,{className:t.empty,colSpan:c,align:"center"},"Nenhum visitante registrado"))))))})),br=Object(G.a)({container:{marginBottom:40,paddingTop:20},empty:{backgroundColor:"#EEE"},paper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},tableCell:{fontSize:14,width:140,maxWidth:140,minWidth:140}},{withTheme:!0})(dr),pr=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.setBuildingId,r=e.setMonth,c=e.setYear,l=e.setVisitors,s=e.setDisableSeeMore,m=e.membersData,u=e.visitors,d=e.page,p=e.setPage,g=e.buildingId,f=e.setHideSeeMore,h=e.visitorsFetch,E=e.visitorsLoading,O=e.visitorsError,j=e.disableSeeMore,k=e.classes,y=e.month,C=e.year,w=e.hideSeeMore,T=e.totalVisitors,x=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=A()(t.target.value,"YYYY-MM"),r(a.month()),c(a.year()),N(),n={select_month:a.month()+1,select_year:a.year()},U.hit("Visitors - FilteredByMonth",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t.target.value),N(),a={select_building:t.target.value},U.hit("Visitors - FilteredByBuilding",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),p(0),e.next=5,h(!0);case 5:t=e.sent,a=Mt()(v()(t,"visitors",[]),"id"),l(a),s(!1),f(Ja()(a)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),s(!1),f(!0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),p(d+1),e.next=5,h(!1);case 5:t=e.sent,a=v()(t,"visitors",[]),l(Mt()(Yn()(u,a),"id")),s(!1),f(Ja()(a)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),s(!1),l(u),f(!0);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Deseja cancelar a visita?")){e.next=12;break}return e.prev=1,e.next=4,Jn.deleteVisitor(t);case 4:return e.next=6,h(!0);case 6:a({alertMsg:"Visitante cancelado com sucesso",alertType:"success",showAlert:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a({alertMsg:"Ocorreu um erro no cancelamento da visita",alertType:"error",showAlert:!0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}a({alertMsg:"Ocorreu um erro ao registrar visitante",alertType:"error",showAlert:!0}),e.next=13;break;case 4:return e.prev=4,a({alertMsg:"Visitante autorizado com sucesso",alertType:"success",showAlert:!0}),e.next=8,h(!0);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),a({alertMsg:"Ocorreu um erro atualizar lista de visitantes",alertType:"error",showAlert:!0});case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),L=Boolean(!E&&!((jt()(u)||1)===T)),F=M.getUserData(),R=v()(F,"member.company.id"),P=Nt()(v()(F,"buildings",[]),["name"]),_=t.showAlert,W=t.alertMsg,q=t.alertType,z=null;_&&(z=b.a.createElement(Ge,{message:W,type:q,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var V=v()(m,"members",[]),H=E,Y=H;return b.a.createElement("div",{className:k.root},b.a.createElement(Sa,{alertBox:z,error:O}),b.a.createElement("section",null,b.a.createElement("div",{className:k.container},b.a.createElement("div",{className:k.headerView},b.a.createElement("aside",null,b.a.createElement(Fe.a,{variant:"h5"},b.a.createElement("b",null,T?"Visitantes (".concat(T,")"):"Visitantes")),b.a.createElement("br",null),b.a.createElement(oe.a,{container:!0,spacing:2},b.a.createElement(oe.a,{item:!0,xs:6},b.a.createElement(nt.a,{fullWidth:!0},b.a.createElement(Le.a,{select:!0,label:"Pr\xe9dio",disabled:Y,value:g,SelectProps:{native:!0},InputLabelProps:{shrink:!0},onChange:S},P.map((function(e){return b.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),b.a.createElement(oe.a,{item:!0,xs:6},b.a.createElement(nt.a,{fullWidth:!0},b.a.createElement(Le.a,{select:!0,label:"M\xeas",disabled:Y,value:A()().month(y).year(C).format("YYYY-MM"),SelectProps:{native:!0},InputLabelProps:{shrink:!0},onChange:x},Gn()(6,(function(e){var t=A()().subtract(e,"month");return b.a.createElement("option",{key:t.format("YYYY-MM"),value:t.format("YYYY-MM")},t.format("MMMM YYYY"))}))))))),b.a.createElement("aside",null,b.a.createElement(ir,{loading:H,setAlert:a,members:V,companyId:R,onCreateVisitor:B,buildings:P})))),b.a.createElement("div",{className:k.container},b.a.createElement(br,{visitors:u,loading:E,onCancelVisitor:I}),L&&!w&&b.a.createElement("div",{className:k.buttonContainer},b.a.createElement(ie.a,{className:k.showMoreButton,onClick:D,size:"medium",variant:"contained",color:"primary",disabled:j},j?"Carregando":"Ver Mais")))))})),gr=ft(Kn.getMembers,{name:"members"}),fr=ft(Jn.getVisitors,{name:"visitors",options:function(e){var t=e.page,a=e.month,n=e.year,r=e.buildingId,o=e.setVisitors,i=e.setHideSeeMore,c=e.setTotalVisitors;return{variables:{page:t,perPage:20,month:a+1,year:n,buildingId:r},onRequestFinished:function(e){var t=Mt()(v()(e,"visitors",[]),"id"),a=v()(e,"meta.total",0);o(t),i(Ja()(t)),c(a)}}}}),hr=Object(Q.a)(Object(G.a)(cr,{withTheme:!0}),Object(Q.f)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Q.f)("buildingId","setBuildingId",v()(M.getUserData(),"buildings[0].id")),Object(Q.f)("totalVisitors","setTotalVisitors",0),Object(Q.f)("visitors","setVisitors",[]),Object(Q.f)("hideSeeMore","setHideSeeMore",!1),Object(Q.f)("disableSeeMore","setDisableSeeMore",!1),Object(Q.f)("page","setPage",0),Object(Q.f)("month","setMonth",A()().month()),Object(Q.f)("year","setYear",A()().year()),gr,fr)(pr),Er=a(609),vr=a(613),Or=a(603),jr=a(604),kr=a(314),yr=a.n(kr),Cr=a(116),Ar=a.n(Cr),wr=a(307),Tr=a.n(wr),xr=a(151),Sr={PRIORITIES:[{label:"Baixa",key:"LOW"},{label:"M\xe9dia",key:"NORMAL"},{label:"Alta",key:"HIGH"}],KANBAN_STATUSES:[{label:"Pendente",key:"PENDING"},{label:"Em andamento",key:"IN_PROGRESS"},{label:"Conclu\xeddo",key:"DONE"}],STATUSES:[{label:"Pendente",key:"PENDING"},{label:"Em andamento",key:"IN_PROGRESS"},{label:"Conclu\xeddo",key:"DONE"}],STATUS_PENDING:"PENDING",STATUS_IN_PROGRESS:"IN_PROGRESS",STATUS_DONE:"DONE",PRIORITY_LOW:"LOW",PRIORITY_NORMAL:"NORMAL",PRIORITY_HIGH:"HIGH"},Nr={kanban:{display:"inline-flex",userSelect:"none",alignItems:"center",justifyContent:"center",height:740},column:{margin:10,display:"flex",flexDirection:"column",marginBottom:10,minWidth:328,height:740},columnLoading:{transition:"background-color 500ms fade-out 1s",backgroundColor:"rgba(96, 115, 137, 0.04)"},columnHeader:{display:"flex",alignItems:"center",justifyContent:"center",border:0,backgroundColor:"rgba(96, 115, 137, 0.04)",transition:"background-color 0.1s ease",height:50,userSelect:"none"},columnTitle:{padding:10,transition:"background-color ease 0.2s",flexGrow:1,userSelect:"none",position:"relative",fontSize:14,fontWeight:600,color:"#515c6a"},columnTitleLoading:{color:"rgb(224, 224, 224)"},list:{backgroundColor:"#F2F3F8",display:"flex",flexDirection:"column",padding:10,borderRadius:8,paddingBottom:0,transition:"background-color 0.1s ease, opacity 0.1s ease",userSelect:"none",minHeight:250,marginBottom:10},card:{cursor:"pointer",height:"auto"},cardContent:{flexGrow:1,flexBasis:"100%",display:"flex",flexDirection:"column",marginBottom:8}},Dr=Object(d.memo)((function(e){var t=e.provided,a=void 0===t?{}:t,n=e.children;return b.a.createElement("a",Object.assign({style:Nr.card,ref:a.innerRef},a.draggableProps,a.dragHandleProps),n)}));Dr.propTypes={children:Z.a.any,provided:Z.a.any};var Mr=Object(d.memo)((function(e){var t=e.provided,a=e.renderCard,n=e.row,r=e.cardWrapperStyle,o=e.disableDragDrop;return b.a.createElement(Dr,{provided:o?{}:t},b.a.createElement("div",{style:Object(u.a)(Object(u.a)({},Nr.cardContent),r)},a(n)))})),Ir=Object(d.memo)((function(e){var t=e.provided,a=void 0===t?{}:t,n=e.style,r=e.children;return b.a.createElement("div",Object.assign({style:Object(u.a)(Object(u.a)({},Nr.list),n),ref:a.innerRef},a.droppableProps),r)}));Ir.propTypes={children:Z.a.any,provided:Z.a.any,style:Z.a.any};var Br=Object(d.memo)((function(e){var t=e.column,a=e.cardWrapperStyle,n=e.renderCard,r=e.disableDragDrop;return j()(v()(t,"rows",[]),(function(e,t){return r?b.a.createElement(Mr,{key:t,row:e,renderCard:n,cardWrapperStyle:a,disableDragDrop:r}):b.a.createElement(xr.b,{key:e.id,draggableId:e.id,index:t},(function(o,i){return b.a.createElement(Mr,{key:t,row:e,provided:o,dragSnapshot:i,renderCard:n,cardWrapperStyle:a,disableDragDrop:r})}))}))})),Lr=Object(d.memo)((function(e){var t=e.listStatus,a=e.column,n=e.disableDragDrop,r=e.renderCard,o=e.columnStyle,i=e.cardWrapperStyle;return n?b.a.createElement(Ir,{style:o},b.a.createElement(Br,{column:a,renderCard:r,disableDragDrop:n,cardWrapperStyle:i})):b.a.createElement(xr.c,{droppableId:t||"ROW",isDropDisabled:!1,type:"ROW"},(function(e){return b.a.createElement(Ir,{style:o,provided:e},b.a.createElement(Br,{column:a,renderCard:r,disableDragDrop:n,cardWrapperStyle:i}),e.placeholder)}))}));Lr.propTypes={listStatus:Z.a.string,renderCard:Z.a.func,column:Z.a.object,columnStyle:Z.a.object,cardWrapperStyle:Z.a.object,disableDragDrop:Z.a.bool};var Fr=Lr,Rr=Object(d.memo)((function(e){var t=e.index,a=e.column,n=e.renderCard,r=e.columnStyle,o=e.columnWrapperStyle,i=e.cardWrapperStyle,c=e.columnTitleStyle,l=e.columnHeaderStyle,s=e.disableDragDrop,m=e.loading,d=e.renderMenu;return b.a.createElement("div",{style:Object(u.a)(Object(u.a)({},Nr.column),o)},b.a.createElement("header",{style:Object(u.a)(Object(u.a)({},Nr.columnHeader),l)},b.a.createElement("h4",{style:Object(u.a)(Object(u.a)(Object(u.a)({},Nr.columnTitle),c),m?Nr.columnTitleLoading:{})},"".concat(v()(a,"title")," (").concat(jt()(v()(a,"rows")),")")),d&&b.a.createElement("div",null,d)),b.a.createElement(Fr,{key:t,columnStyle:r,column:a,loading:m,listStatus:v()(a,"status"),renderCard:n,cardWrapperStyle:i,disableDragDrop:s}))}));Rr.propTypes={index:Z.a.number,renderCard:Z.a.func,loading:Z.a.bool,column:Z.a.object,columnWrapperStyle:Z.a.object,columnStyle:Z.a.object,columnTitleStyle:Z.a.object,columnHeaderStyle:Z.a.object,cardWrapperStyle:Z.a.object,disableDragDrop:Z.a.bool,renderMenu:Z.a.object};var Pr=Rr,_r=Sr.KANBAN_STATUSES,Wr=Sr.STATUS_PENDING,qr=Sr.STATUS_IN_PROGRESS,Ur=Sr.STATUS_DONE,zr=function(e,t){return j()(e,(function(e){return e.status})).indexOf(t)},Vr=function(e){return j()(_r,(function(t,a){var n=v()(t,"key"),r=Tr()(e,(function(e){return e.status===n}));return{index:a,status:n,title:v()(t,"label","").toUpperCase(),rows:r}}))},Hr=Object(d.memo)((function(e){var t=e.columns,a=e.setColumns,n=e.onDragEnd,r=e.renderCard,o=e.loading,i=e.columnWrapperStyle,c=e.cardWrapperStyle,l=e.columnStyle,s=e.columnHeaderStyle,m=e.columnTitleStyle,d=e.disableDragDrop,p=e.renderPendingMenu,g=e.renderInProgressMenu,f=e.renderDoneMenu,h=function(e){return e===Wr&&p?p:e===qr&&g?g:e===Ur&&f?f:null};return b.a.createElement(xr.a,{onDragEnd:function(e){var r=e.source,o=e.destination;if(!(!o||r.droppableId===o.droppableId&&r.index===o.index)){var i=Ar()(t),c=zr(t,r.droppableId),l=zr(t,o.droppableId);if(r.droppableId!==o.droppableId){var s=Ar()(t[c].rows),m=Ar()(t[l].rows),u=s.splice(r.index,1),d=Object(it.a)(u,1)[0];m.splice(o.index,0,d),i[c].rows=Ar()(s),i[l].rows=Ar()(m)}else{var b=i[c].rows[r.index],p=i[l].rows[o.index];i[c].rows[r.index]=p,i[l].rows[o.index]=b}a(Ar()(i)),n(e)}}},b.a.createElement("div",{style:Nr.kanban},j()(_r,(function(e,a){return b.a.createElement(Pr,{key:a,index:a,loading:o,column:t[a],renderCard:r,columnHeaderStyle:s,columnTitleStyle:m,columnStyle:Object(u.a)(Object(u.a)({},l),o?Nr.columnLoading:{}),columnWrapperStyle:i,cardWrapperStyle:c,disableDragDrop:d,renderMenu:h(e.key)})}))))})),Yr=Object(Q.a)(Object(Q.f)("columns","setColumns",[]),Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.data;(0,e.setColumns)(Vr(t))}}),Object(Q.e)(["data","loading"],(function(e){var t=e.data;(0,e.setColumns)(Vr(t))})))(Hr),Qr=a(620),Gr=a(597),Jr=a(308),Kr=a.n(Jr),Xr=Object(d.memo)((function(e){var t=e.classes,a=e.ticket,n=e.loading,r=e.onClickCard,o="".concat(v()(a,"requester.name")," ").concat(v()(a,"requester.lastname","")),i=v()(a,"assignees"),c=i.map((function(e){return{assigneeName:"".concat(v()(e,"name","")," ").concat(v()(e,"lastname","")),assignePhotoUrl:v()(e,"photo_url")}})),l=v()(a,"created_at")?"".concat(A()(a.created_at).fromNow()," por "):"",s=v()(a,"title",""),m=v()(a,"category.title","");return b.a.createElement(b.a.Fragment,null,b.a.createElement(Xa.a,{className:t.card,onClick:function(){n||r(a)}},b.a.createElement($a.a,{className:t.cardContent},!v()(a,"viewer_has_read")&&b.a.createElement(Kr.a,{className:t.notReadIndicator}),!n&&function(e,t){if(e){var a=A()(e).format("MMM D"),n=A()().startOf("day"),r=A()(e).startOf("day"),o=r.isSame(n,"day"),i=1===r.diff(n,"days"),c=r.isBefore(n,"day");return o?b.a.createElement(Qr.a,{label:a,size:"small",className:t.cardChipToday}):i?b.a.createElement(Qr.a,{label:a,size:"small",className:t.cardChipTomorrow}):c?b.a.createElement(Qr.a,{label:a,size:"small",className:t.cardChipExpired}):b.a.createElement(Qr.a,{label:a,size:"small",className:t.cardChipFarFromExpiration})}return null}(v()(a,"deadline"),t),b.a.createElement(Fe.a,{variant:"subtitle1",className:t.cardTitle},n?b.a.createElement(Gr.a,{animation:"wave"}):b.a.createElement("b",null,s)),n?b.a.createElement(Gr.a,{animation:"wave",width:150}):b.a.createElement(Fe.a,{variant:"body2",color:"textSecondary",component:"small"},l,b.a.createElement("b",null,o)),b.a.createElement("div",{className:t.cardAction},b.a.createElement("div",{className:t.cardAvatar},n?b.a.createElement(Gr.a,{animation:"wave",width:100}):i&&b.a.createElement("div",{className:t.cardAvatarContainer},c.map((function(e,a){return b.a.createElement("div",{key:"".concat(e.assigneeName,"_").concat(a.toString()),className:t.cardAvatarImage},b.a.createElement(aa,{name:e.assigneeName,photoUrl:e.assignePhotoUrl}))})))),b.a.createElement(Fe.a,{variant:"body2",color:"textSecondary",component:"small"},n?b.a.createElement(Gr.a,{animation:"wave",width:50}):m)))))})),Zr=Object(Q.a)(Object(G.a)((function(e){return{card:{padding:0,width:308,height:"auto",minHeight:"auto",maxHeight:"auto",borderRadius:8,boxShadow:"0 3px 3px 0 rgba(133, 133, 133, 0.2)",border:"1px solid #eee"},cardContent:{marginBottom:0,paddingBottom:"5px !important"},cardAction:{marginTop:10,marginBottom:15,display:"inline-flex",width:"100%",alignItems:"center",justifyContent:"space-between"},cardTitle:{lineHeight:"1.5em",marginBottom:5},cardChipToday:{float:"right",backgroundColor:ue.a[700],color:"white"},cardChipTomorrow:{float:"right",backgroundColor:Xt.a[700],color:"white"},cardChipExpired:{float:"right",backgroundColor:ue.a[200],color:"white"},cardChipFarFromExpiration:{float:"right",backgroundColor:"rgb(242, 243, 248)",color:"black"},notReadIndicator:{float:"right",fontSize:"1rem",color:e.palette.success.dark,marginLeft:e.spacing(1)},cardAvatar:{display:"inline-flex",width:"100%",height:"auto",minHeight:"auto",maxHeight:"auto",alignItems:"center"},cardAvatarName:{marginLeft:10,marginTop:0,lineHeight:"1.2em"},cardAvatarImage:{marginRight:5,marginTop:5},cardAvatarContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap"}}}),{withTheme:!0}),h.g)(Xr),$r=a(572),eo=a(601),to=a(310),ao=a.n(to),no={getTickets:function(e){return R.get("/tickets",{location_id:v()(e,"locationId"),assignee_id:v()(e,"assigneeId"),category_id:v()(e,"categoryId"),deadline:v()(e,"deadline"),priority:v()(e,"priority")})},getTicket:function(e){return e?R.get("/tickets/".concat(e)):null},getTicketByCode:function(e){return e?R.get("/tickets/codes/".concat(e)):null},updateTicket:function(e){var t=e.ticket,a=e.selectedAssignees,n={id:v()(t,"id"),title:v()(t,"title"),priority:v()(t,"priority"),deadline:v()(t,"deadline"),location_id:v()(t,"location.id"),assignee_ids:a,category_id:v()(t,"category.id")};return R.put("/tickets/".concat(v()(t,"id")),n)},moveTicket:function(e){var t=e.id,a=e.status,n=e.position,r=e.location_id;return R.put("/tickets/".concat(t,"/move"),{status:a,position:n,location_id:r})},archiveTicket:function(e){var t=e.ticketsIds;return R.put("/tickets/archive",{tickets_ids:t})},postTicket:function(e){return R.post("/tickets",e)},getAssignables:function(){return R.get("/tickets/assignables")},exportCsv:function(e){var t=e.start_date,a=e.end_date;return R.post("/tickets/export_csv",{start_date:t,end_date:a})},markAsRead:function(e){return R.put("/tickets/".concat(e,"/mark_as_read"))},postPublicTicket:function(e){var t=e.ticket,a=e.companyId;return R.post("/public_tickets?company_id=".concat(a),t)}},ro={getComments:function(e){return e?R.get("/tickets/".concat(e,"/ticket_comments")):null},sendComment:function(e){var t=e.id,a=e.content,n=e.isInternal,r=e.attachmentData,o=null;return r&&(o={id:r.id,storage:r.storage,metadata:r.metadata}),R.post("/tickets/".concat(t,"/ticket_comments"),{content:a,is_internal:n,attachment_data:o})}},oo={isTablet:function(){return window.innerWidth<1280},isMobile:function(){return window.innerWidth<720}},io=a(309),co=a.n(io),lo=a(599),so=a(598),mo=a(600),uo=Object(d.memo)((function(e){var t=e.file,a=e.onRemoveFile,n=e.outterContainerClassName,r=e.disabled,o=e.classes,i=Object(N.get)(t,"progressPercent")<100;return b.a.createElement("div",{className:"".concat(o.outterContainer," ").concat(n)},b.a.createElement(ie.a,{variant:"outlined",size:"large",onClick:function(){return t.url&&window.open(t.url,"_blank")},disabled:r||i},b.a.createElement("div",null,b.a.createElement("div",{className:o.innerButtonContainer},b.a.createElement(so.a,null),b.a.createElement("div",null,b.a.createElement("span",{className:o.filename},Object(N.get)(t,"metadata.filename")),b.a.createElement("br",null),b.a.createElement("small",{className:o.sizeText},Math.round(Object(N.get)(t,"metadata.size")/1e3),"KB"))),i&&b.a.createElement(lo.a,{className:o.progressBar,variant:"determinate",value:t.progressPercent}))),!r&&a&&b.a.createElement(mo.a,{onClick:function(){return a(t)},className:o.cancelButton}))})),bo=Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{outterContainer:{display:"inline-block",position:"relative"},innerButtonContainer:{display:"flex",textAlign:"left",lineHeight:1},filename:{fontSize:"calc(".concat(e.typography.button.fontSize," * 0.8)")},sizeText:{fontSize:"calc(".concat(e.typography.button.fontSize," * 0.6)")},progressBar:{position:"absolute",left:0,bottom:0,width:"100%"},cancelButton:{position:"absolute",top:-12,right:-12,cursor:"pointer"}})}))(uo),po=Object(d.memo)((function(e){var t=e.comment,a=e.classes,n=v()(t,"is_internal"),r=n?a.internalBallon:"",o=v()(t,"member.job_role")?"- ".concat(v()(t,"member.job_role")):"",i="".concat(v()(t,"member.name","")," ").concat(v()(t,"member.lastname","")),c=v()(t,"is_activity"),l=co()(t.content||""),s=n&&!c?" - Interno":"",m=c?"".concat(l,"."):o;return b.a.createElement("div",null,b.a.createElement("div",{className:a.userNameContainer},b.a.createElement(aa,{name:i,photoUrl:v()(t,"member.photo_url","")}),b.a.createElement("div",null,b.a.createElement(Fe.a,{variant:"subtitle2",className:a.userName},b.a.createElement("b",null,i),"\xa0",b.a.createElement(Fe.a,{variant:"body2",component:"span"},m)),c&&b.a.createElement(Fe.a,{variant:"body2",color:"textSecondary",component:"small",className:a.userName},"".concat(A()(v()(t,"created_at")).calendar()).concat(s)))),b.a.createElement("div",{className:a.content},!c&&b.a.createElement(b.a.Fragment,null,t.attachment_data&&b.a.createElement(bo,{file:t.attachment_data,outterContainerClassName:a.previewButtonContainer}),t.content&&b.a.createElement("div",{className:"".concat(a.baloon," ").concat(r)},b.a.createElement("div",{className:t.attachment_data&&a.contentWithMargin},(t.content||"").split("\n").map((function(e,t){return b.a.createElement("span",{key:"".concat(Date.now(),"_").concat(t.toString())},e,b.a.createElement("br",null))})))),b.a.createElement(Fe.a,{variant:"body2",color:"textSecondary",component:"small"},"".concat(A()(v()(t,"created_at")).calendar()).concat(s)))))})),go=Object(G.a)((function(){return{userNameContainer:{display:"flex",alignItems:"flex-start",marginTop:15},userName:{marginLeft:10},content:{marginLeft:40,marginBottom:20},baloon:{backgroundColor:"#fff",borderRadius:5,paddingLeft:15,paddingRight:15,paddingTop:10,paddingBottom:10,marginBottom:5,height:"auto",wordBreak:"break-word",whiteSpace:"pre-line"},internalBallon:{backgroundColor:"#fff3d7"},previewButtonContainer:{display:"flex",width:"fit-content",backgroundColor:"white",marginBottom:5},contentWithMargin:{marginTop:10}}}),{withTheme:!0})(po),fo={genericUploadsParams:function(){return R.get("/uploads/params")},uploadToApi:function(e){var t=e.file,a=e.progressHandler;return R.post("/uploads/upload",t.formData,null,{onUploadProgress:function(e){var n=Math.round(100*e.loaded/e.total);a({progressPercent:n<95?n:95,originalFileName:t.name})}}).then((function(e){var t=e.id,a=e.storage,n=e.metadata;return{id:t,storage:a,metadata:{filename:n.filename,size:n.size,mime_type:n.mime_type},progressPercent:100}}))}},ho=function(e){var t,a,n=e.file,r=e.progressHandler,o=new Promise((function(e,n){t=e,a=n}));o.cancelUpload=function(){o.wasCanceled=!0,a(new Error("REQUEST CANCELED"))};var i=function(e){o.wasCanceled||r(Object(u.a)(Object(u.a)(Object(u.a)({},n),e),{},{cancelUpload:o.cancelUpload,wasCanceled:o.wasCanceled}))};return i({progressPercent:0}),(0,fo.uploadToApi)({file:n,progressHandler:i}).then(t).catch(a),o},Eo=Object(d.memo)((function(e){var t=e.accept,a=e.onChange,n=e.buttonProps,r=e.disabled,o=null;return b.a.createElement(b.a.Fragment,null,b.a.createElement(ie.a,Object.assign({color:"primary",variant:"outlined",size:"large",onClick:function(){return o&&o.click()},startIcon:b.a.createElement(so.a,null),disabled:r},n),"Anexar"),b.a.createElement("input",{type:"file",accept:t,style:{display:"none"},ref:function(e){o=e},onChange:function(e){return function(e){var t=Object(N.map)(e,(function(e){var t=function(e){return{metadata:{size:e.size,filename:e.name,mime_type:e.type},originalFileObj:e}}(e),a=new FileReader,n=new FormData;return n.append("file",e),new Promise((function(r){a.onload=function(e){r(Object(N.merge)(t,{url:e.target.result,data:e.target.result,base64Data:e.target.result,formData:n}))},a.readAsDataURL(e)}))}));return Promise.all(t)}(e.target.files).then((function(e){return a(e[0])}))}}))})),vo=Object(d.memo)((function(e){var t=e.file,a=e.setFile,n=e.onFileChange,r=e.disabled;return t&&t.progressPercent?b.a.createElement(bo,{disabled:r,file:t,onRemoveFile:function(e){return e.cancelUpload||a(null)}}):b.a.createElement(Eo,{disabled:r,accept:"image/*,.doc,.docx,.xls,.xlsx,.pdf,.xml",onChange:n,buttonProps:{style:{backgroundColor:"#fff"}}})})),Oo=ft(ro.sendComment,{name:"sendTicketComment",init:!1,options:function(e){var t=e.setFile,a=e.onAttachmentSent,n=e.onUploadError;return{onRequestFinished:function(){t(null),a&&a()},onRequestError:function(e){n(e)}}}}),jo=Object(Q.a)(Object(Q.f)("file","setFile",null),Oo,Object(Q.c)({onFileChange:function(e){var t=e.ticketId,a=e.isInternal,n=e.onUploadError,r=e.setFile,o=e.sendTicketCommentFetch;return function(e){ho({file:e,progressHandler:function(t){var a=t.progressPercent;a<100&&r(Object(u.a)(Object(u.a)({},e),{},{progressPercent:a}))}}).catch((function(e){r(null),n&&n(e)})).then((function(n){var i=Object(u.a)(Object(u.a)(Object(u.a)({},e),n),{},{progressPercent:99});r(i),o(!0,null,null,{variables:{id:t,attachmentData:i,content:null,isInternal:a}})}))}}}))(vo),ko=Sr.PRIORITIES,yo=Sr.STATUSES,Co=Sr.KANBAN_STATUSES,Ao=Object(d.memo)((function(e){var t=e.setAlert,a=e.classes,n=e.assignees,r=e.categories,c=e.open,l=e.onClose,s=e.setCurrentTicketState,m=e.history,d=e.currentTicket,p=e.formData.validationErrors,g=e.ticketLoading,f=e.theme,h=e.isEditing,E=e.setIsEditing,v=e.selectedAssignees,O=e.setSelectedAssignees,j=e.updateTicketFetch,k=e.updateTicketLoading,y=e.initialTitle,C=e.lastTitle,w=e.ticketCommentsFetch,T=e.ticketCommentsData,x=e.ticketCommentsLoading,S=e.commentMessage,D=e.setCommentMessage,I=e.setCloseModal,B=e.setInitialTitle,F=e.sendTicketCommentFetch,R=e.sendTicketCommentLoading,P=e.setLastTitle,_=e.moveTicketFetch,W=e.moveTicketLoading,q=e.archiveTicketFetch,z=e.archiveTicketLoading;if(!c)return null;var V=oo.isMobile(),H=M.getUserData(),Y=Object(N.sortBy)(Object(N.get)(H,"member.locations",[]),["name"]),Q=Object(N.get)(H,"member.role","MEMBER"),G=Ze.includes(Q),J=Object(N.sortBy)(Object(N.get)(T,"ticket_comments",[]),["created_at"]).reverse(),K=Object(N.get)(d,"requester.id"),X=Object(N.get)(H,"member.id"),Z=Object(N.get)(d,"status"),$=Boolean(Object(N.get)(d,"archived_at")),ee=G&&!$,te=ee||!$&&(K&&X&&X===K),ae=!te||R||x,ne=k||W||g,ce=!G||ne,le=!ee,me=ae||Object(N.isEmpty)(Object(N.get)(S,"content","")),ue="".concat(Object(N.get)(d,"requester.name","")," ").concat(Object(N.get)(d,"requester.lastname","")),de=Object(N.get)(d,"created_at")?A()(d.created_at).fromNow():"",be=Object(N.get)(d,"code",""),pe=Object(N.get)(d,"title",""),ge="".concat($?"Ticket arquivado - ":"").concat(pe),fe=Object(N.isEmpty)(Object(N.get)(d,"priority"))?"":Object(N.get)(d,"priority"),he=Object(N.get)(d,"location.id"),Ee=Object(N.get)(d,"category.id"),ve=Object(N.compact)([Object(N.get)(d,"category")].concat(r||[])),Oe=Object(N.sortBy)(Object(N.uniqBy)(ve,"id"),"title"),je=Object(N.get)(d,"deadline",null),ke=z||ne,ye=Object(N.map)(Object(N.get)(d,"assignees"),(function(e){return"".concat(e.name," ").concat(e.lastname)})).join(", ");le&&(fe=Object(N.get)(Object(N.find)(ko,(function(e){return e.key===fe})),"label",""),he=Object(N.get)(Object(N.find)(Y,(function(e){return e.id===he})),"name",""),Ee=Object(N.get)(Object(N.find)(r,(function(e){return e.id===Ee})),"title",""),Z=Object(N.get)(Object(N.find)(yo,(function(e){return e.key===Z})),"label",""),je=Object(N.isEmpty)(je)?"":A()(je).format("DD/MM/YYYY"));var Ce=Object(Ut.a)(),Ae=Object(zt.a)(Ce.breakpoints.down("sm")),we=f.mainColor,Te=function(){var e={id:Object(N.get)(d,"id"),title:Object(N.get)(d,"title")};U.hit("TicketModal - Closed",e),I(!0),E(!1),l()},xe=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t.target.value);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(i.a)(o.a.mark((function e(){var t,a,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.stringify(v.sort()),a=Object(N.map)(Object(N.get)(d,"assignees"),(function(e){return e.id})),r=JSON.stringify(a.sort()),t===r){e.next=10;break}return I(!1),e.next=7,j(!0);case 7:w(!0),i=n.filter((function(e){return v.includes(e.id)})),s({assignees:i});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ee){e.next=6;break}return I(!1),s(t),e.next=5,j(!0);case 5:w(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ee){e.next=7;break}return I(!1),a={variables:{id:d.id,status:t}},s({status:t}),e.next=6,_(!0,"",null,a);case 6:w(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ee){e.next=7;break}return I(!1),a={variables:{id:d.id,location_id:t}},s({location:{id:t}}),e.next=6,_(!0,"",null,a);case 6:w(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){window.document.getElementById("title").focus(),P(pe),E(!0)};return b.a.createElement(kn.a,{open:c,fullScreen:Ae,onClose:Te,keepMounted:!0,fullWidth:!0,maxWidth:"md",disableEscapeKeyDown:h},b.a.createElement(oe.a,{container:!0},b.a.createElement(oe.a,{item:!0,xs:12,sm:12,md:5},b.a.createElement(An.a,null,b.a.createElement(Le.a,{multiline:!0,id:"title",disabled:ce,InputProps:{disableUnderline:!0,style:{color:"#000",fontSize:20,width:V?300:350,backgroundColor:h?"#E0E0E0":"",borderRadius:h?5:"",paddingLeft:5},endAdornment:b.a.createElement($r.a,{position:"end"},G&&!V&&!h&&b.a.createElement(ze.a,{onClick:Ie,disabled:ne},k?b.a.createElement(re.a,{color:we,className:a.progress,variant:"indeterminate",disableShrink:!0,thickness:5,size:25}):!h&&b.a.createElement(ao.a,{fontSize:"small"})))},value:ge,onFocus:Ie,onKeyDown:function(e){13!==e.keyCode||Object(N.isEmpty)(pe)?27===e.keyCode&&(s({title:y}),E(!1)):(Ne({title:pe}),B(pe),E(!1))},onBlur:function(){Object(N.isEmpty)(pe)||C===pe||(Ne({title:pe}),B(pe)),E(!1)},onChange:function(e){return t=e.target.value,void(ee&&s({title:t}));var t}},p.title&&b.a.createElement(et.a,null,"T\xedtulo n\xe3o pode ficar em branco")),b.a.createElement("br",null),b.a.createElement(Fe.a,{variant:"body2",color:"textSecondary",component:"small"},g?"":"#".concat(be," - ").concat(de," por "),b.a.createElement("b",null,ue)),b.a.createElement(ze.a,{className:a.closeButton,onClick:Te},b.a.createElement(Ue.a,null))),b.a.createElement(yn.a,{className:a.ticketContent},b.a.createElement(ut,{errors:Object(N.get)(p,"status",[]),label:"Status",value:Z,disabled:ne||!ee,InputProps:{readOnly:le},onChange:function(e){return De(e.target.value)},options:Co,optionValueField:"key"}),Object(N.size)(Y)>1&&b.a.createElement(ut,{errors:Object(N.get)(p,"location_id",[]),label:"Local",value:he,disabled:ne||!ee,InputProps:{readOnly:le},onChange:function(e){return Me(e.target.value)},options:Y,optionValueField:"id",optionLabelField:"name"}),b.a.createElement(ut,{errors:Object(N.get)(p,"category_id",[]),label:"Categoria",value:Ee,disabled:ne||!ee,InputProps:{readOnly:le},onChange:function(e){return Ne({category:{id:e.target.value}})},options:Oe,optionValueField:"id",optionLabelField:"title"}),b.a.createElement(nt.a,{fullWidth:!0,margin:"normal",variant:"outlined",className:a.formControl,error:!!p.assignees},le?b.a.createElement(ot,{label:"Respons\xe1veis",value:ye,disabled:ne,InputProps:{readOnly:le}}):b.a.createElement(b.a.Fragment,null,b.a.createElement(Zn.a,{shrink:!0},"Respons\xe1veis"),b.a.createElement(Pt.a,{error:!!p.assignees,label:"Respons\xe1veis",multiple:!0,value:v,onChange:xe,onClose:Se,disabled:ne||le},n.map((function(e){return b.a.createElement(Wt.a,{key:e.id,value:e.id},"".concat(e.name," ").concat(e.lastname))}))),p.assignees&&b.a.createElement(et.a,null,p.assignees))),b.a.createElement(oe.a,{container:!0,direction:"row",justify:"center",spacing:1},b.a.createElement(oe.a,{item:!0,xs:6},b.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!p.deadline},le?b.a.createElement(ot,{errors:Object(N.get)(p,"deadline",[]),label:"Prazo",value:je,disabled:ne,InputProps:{readOnly:le}}):b.a.createElement(bt.a,{libInstance:A.a,utils:dt.a,locale:L.locale},b.a.createElement(pt.a,{autoOk:!0,label:"Prazo",clearable:!0,animateYearScrolling:!0,disabled:ne,InputProps:{readOnly:le},invalidDateMessage:"Formato inv\xe1lido",minDateMessage:"",variant:"outlined",inputVariant:"outlined",InputLabelProps:{shrink:!0},value:je,onChange:function(e){return Ne({deadline:e})},minDate:new Date,format:"DD/MM/YYYY",cancelLabel:"Cancelar",clearLabel:"Limpar"})),p.deadline&&b.a.createElement(et.a,null,p.deadline))),b.a.createElement(oe.a,{item:!0,xs:6},b.a.createElement(ut,{errors:Object(N.get)(p,"priority",[]),label:"Prioridade",value:fe,disabled:ne||!ee,InputProps:{readOnly:le},onChange:function(e){return Ne({priority:e.target.value})},options:ko,optionValueField:"key"})))),b.a.createElement(Cn.a,{className:a.ticketActions},!$&&G&&b.a.createElement(b.a.Fragment,null,b.a.createElement(ie.a,{color:"default",size:"large",variant:"outlined",onClick:function(){ee&&window.confirm("Tem certeza em arquivar esse ticket?")&&q(d)},disabled:ke},"ARQUIVAR"),b.a.createElement(ie.a,{color:"primary",size:"large",variant:"outlined",onClick:function(){return m.push("/servicos/sobdemanda?utm_source=tickets")}},"FAZER OR\xc7AMENTO")))),b.a.createElement(oe.a,{item:!0,xs:12,sm:12,md:7,className:a.bgCommentDialog},b.a.createElement(An.a,null,"Atividade"),b.a.createElement(yn.a,{className:a.commentContent},b.a.createElement("div",{className:a.commentArea},x?b.a.createElement(se,null):Object(N.map)(J,(function(e){return b.a.createElement(go,{key:e.id,comment:e})}))),b.a.createElement("div",{className:a.commentHeaderContainer},b.a.createElement(Fe.a,{variant:"h6"},"Comentar"),G&&b.a.createElement(xn.a,{className:a.isInternalSwitch,control:b.a.createElement(eo.a,{checked:S.isInternal,onChange:function(){return D(Object(u.a)(Object(u.a)({},S),{},{isInternal:!S.isInternal}))},color:"primary"}),label:"Interno",disabled:ae})),b.a.createElement(nt.a,{fullWidth:!0,margin:"normal"},b.a.createElement(Le.a,{variant:"outlined",multiline:!0,rows:3,rowsMax:3,placeholder:"Escreva seu coment\xe1rio aqui...",classes:{root:a.bgWhite},InputLabelProps:{shrink:!0},value:S.content,onChange:function(e){return D(Object(u.a)(Object(u.a)({},S),{},{content:e.target.value}))},disabled:ae}))),b.a.createElement(Cn.a,{className:a.commentActions},b.a.createElement(jo,{ticketId:Object(N.get)(d,"id"),isInternal:S.isInternal,disabled:ke,onAttachmentSent:function(){return w(!0)},onUploadError:function(){t({alertMsg:"Erro ao tentar enviar arquivo.",alertType:"error",showAlert:!0})}}),b.a.createElement(ie.a,{color:"primary",size:"large",variant:"contained",onClick:function(){te&&(I(!1),F(!0))},disabled:me},"ENVIAR")))))})),wo=ft(ro.getComments,{name:"ticketComments",init:!1,options:function(e){var t=e.ticket;return{variables:Object(N.get)(t,"id")}}}),To=ft(ro.sendComment,{name:"sendTicketComment",init:!1,options:function(e){var t=e.currentTicket,a=e.commentMessage,n=e.setCommentMessage,r=e.onClose,o=e.ticketCommentsFetch;return{variables:Object(u.a)({id:Object(N.get)(t,"id")},a),onRequestFinished:function(){n(Io),o(!1)},onRequestError:function(e){var a={id:Object(N.get)(t,"id"),title:Object(N.get)(t,"title")};U.hit("TicketModal - Closed",a),r(e,"Erro ao enviar um coment\xe1rio para esse ticket")}}}}),xo=ft(no.moveTicket,{name:"moveTicket",init:!1,options:function(e){var t=e.onClose,a=e.closeModal,n=e.currentTicket,r=e.setFormData;return{onRequestFinished:function(){if(a){var e={id:Object(N.get)(n,"id"),title:Object(N.get)(n,"title")};U.hit("TicketModal - Closed",e),t(null,"Ticket #".concat(n.code," atualizado com sucesso"))}},onRequestError:function(e){var a=Object(N.mapValues)(Object(N.get)(e,"errors",{}),(function(e){return e[0]}));if(Object(N.isEmpty)(a)){var o={id:Object(N.get)(n,"id"),title:Object(N.get)(n,"title")};U.hit("TicketModal - Closed",o);var i=Object(N.get)(e,"error","Erro ao atualizar esse ticket");t(e,i)}else r({validationErrors:a})}}}}),So=ft(no.getTicket,{name:"ticket",init:!1,options:function(e){var t=e.ticket,a=e.setCurrentTicket,n=e.onClose;return{variables:Object(N.get)(t,"id"),onRequestFinished:function(e){a(Object(N.get)(e,"ticket"))},onRequestError:function(e){var a={id:Object(N.get)(t,"id"),title:Object(N.get)(t,"title")};U.hit("TicketModal - Closed",a),n(e,"Erro ao abrir esse ticket")}}}}),No=ft(no.updateTicket,{name:"updateTicket",init:!1,options:function(e){var t=e.currentTicket,a=e.onClose,n=e.closeModal,r=e.setFormData,o=e.selectedAssignees;return{variables:{ticket:t,selectedAssignees:o},onRequestFinished:function(){if(r({validationErrors:{}}),n){var e={id:Object(N.get)(t,"id"),title:Object(N.get)(t,"title")};U.hit("TicketModal - Closed",e),a(null,"Ticket #".concat(t.code," atualizado com sucesso"))}},onRequestError:function(e){var t=Object(N.mapValues)(Object(N.get)(e,"errors",{}),(function(e){return e[0]}));r({validationErrors:t})}}}}),Do=ft(no.archiveTicket,{name:"archiveTicket",init:!1,options:function(e){var t=e.currentTicket,a=e.onClose;return{variables:{ticketsIds:[t.id]},onRequestFinished:function(){var e={id:Object(N.get)(t,"id"),title:Object(N.get)(t,"title")};U.hit("Ticket - Archived",e),a(null,"Ticket #".concat(t.code," arquivado com sucesso"))},onRequestError:function(e){a(e,"Erro ao arquivar ticket #".concat(t.code))}}}}),Mo={validationErrors:{}},Io={content:"",isInternal:!1},Bo=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{ticketContent:{marginTop:-20},ticketActions:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end",alignSelf:"flex-end",paddingLeft:25,paddingRight:25,marginTop:22},commentHeaderContainer:{display:"flex",alignItems:"center"},isInternalSwitch:{marginLeft:"1rem"},bgCommentDialog:{backgroundColor:"rgb(242, 243, 248)"},commentContent:{marginTop:-20,paddingLeft:20,paddingRight:20},commentArea:{height:315,minHeight:315,maxHeight:315,marginBottom:15,overflowY:"scroll"},commentActions:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"flex-end",alignSelf:"flex-end",paddingLeft:20,paddingRight:20,paddingBottom:20},title:{marginBottom:0},editButton:{position:"absolute",right:e.spacing(75),top:e.spacing(1),color:e.palette.grey[500]},inputLabel:{color:"rgba(0, 0, 0, 0.54)"}})}),{withTheme:!0}),h.g,Object(Q.f)("formData","setFormDataRaw",Mo),Object(Q.c)({setFormData:function(e){var t=e.setFormDataRaw,a=e.formData;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}),Object(Q.f)("currentTicket","setCurrentTicket",{}),Object(Q.f)("commentMessage","setCommentMessage",Io),Object(Q.f)("selectedAssignees","setSelectedAssignees",[]),Object(Q.f)("closeModal","setCloseModal",!1),Object(Q.f)("isEditing","setIsEditing",!1),Object(Q.f)("initialTitle","setInitialTitle",""),Object(Q.f)("lastTitle","setLastTitle",""),wo,To,No,xo,Do,So,Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.ticket,a=e.setCurrentTicket,n=e.setCommentMessage;(0,e.setSelectedAssignees)(Object(N.map)(Object(N.get)(t,"assignees"),(function(e){return e.id}))),a(t),n(Io)}}),Object(Q.e)(["open"],(function(e){var t=e.open,a=e.setCommentMessage,n=e.setCurrentTicket,r=e.setFormData,o=e.setSelectedAssignees,i=e.ticketFetch,c=e.ticketCommentsFetch,l=e.ticket,s=e.setInitialTitle;if(t){var m={id:Object(N.get)(l,"id"),title:Object(N.get)(l,"title")};U.hit("TicketModal - Opened",m),l&&!l.mark_as_read&&no.markAsRead(l.id),r(Mo),o(Object(N.map)(Object(N.get)(l,"assignees"),(function(e){return e.id}))),n({}),s(Object(N.get)(l,"title")),a(Io),i(!0),c(!0)}})),Object(Q.c)({setCurrentTicketState:function(e){var t=e.setCurrentTicket,a=e.currentTicket;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}))(Ao),Lo={wrapper:{marginLeft:0,marginRight:10},header:{backgroundColor:"#FFF",padding:10,paddingTop:0,paddingBottom:0,height:60,width:"100%",borderTopLeftRadius:5,borderTopRightRadius:5},headerTitle:{color:"#313131"},column:{width:"100%",backgroundColor:"#F2F3F8",height:640,overflowY:"scroll"}},Fo=a(602),Ro=Object(d.memo)((function(e){var t=e.anchorEl,a=e.setAnchorEl,n=e.archiveFetch,r=e.archiveLoading,o=e.doneTickets,i=e.theme,c=e.classes,l=Boolean(t),s=i.mainColor;return b.a.createElement("div",null,r?b.a.createElement(re.a,{color:s,className:c.progress,variant:"indeterminate",disableShrink:!0,thickness:5,size:25}):b.a.createElement(b.a.Fragment,null,b.a.createElement(ze.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){a(e.currentTarget)}},b.a.createElement(Fo.a,null)),b.a.createElement(ba.a,{id:"long-menu",anchorEl:t,keepMounted:!0,open:l,onClose:function(){a(null)},PaperProps:{style:{maxHeight:216,width:"23ch"}}},b.a.createElement(Wt.a,{onClick:function(){window.confirm("Deseja arquivar os tickets?")&&(a(!1),n(o))}},"Arquivar conclu\xeddos"))))})),Po=ft(no.archiveTicket,{name:"archive",init:!1,options:function(e){var t=e.setAlert,a=e.ticketsFetch,n=e.doneTickets;return{variables:{ticketsIds:n},onRequestFinished:function(){var e=Object(N.size)(n)>1?"tickets conclu\xeddos foram arquivados":"ticket conclu\xeddo foi arquivado",r=0===Object(N.size)(n)?"Nenhum ticket foi arquivado":e;a(!0),t({alertMsg:"".concat(0===Object(N.size)(n)?"":Object(N.size)(n)," ").concat(r),alertType:"success",showAlert:!0})},onRequestError:function(){t({alertMsg:"Erro ao arquivar tickets",alertType:"warning",showAlert:!0})}}}}),_o=Object(Q.a)(d.memo,Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{progress:{marginRight:10,marginTop:12}})}),{withTheme:!0}),Po,Object(Q.f)("anchorEl","setAnchorEl",null),Object(Q.f)("isExportModalOpen","setIsExportModalOpen",!1))(Ro),Wo=Object(d.memo)((function(e){var t=e.tickets,a=e.categories,n=e.assignees,r=e.loading,o=e.onClickCard,i=e.onCloseCardModal,c=e.lockBoard,l=e.ticketToOpenModal,s=e.onDragCard,m=e.setAlert,u=e.doneTickets,d=e.ticketsFetch,p=e.isManager;return b.a.createElement(b.a.Fragment,null,b.a.createElement(Yr,{renderDoneMenu:p&&b.a.createElement(_o,{doneTickets:u,setAlert:m,ticketsFetch:d}),data:t||[],disableDragDrop:c,loading:r,renderCard:function(e){return b.a.createElement(Zr,{ticket:e,loading:r,onClickCard:o,onCloseModal:i})},onDragEnd:function(e){var t=e.draggableId,a=e.destination,n={variables:{id:t,status:v()(a,"droppableId"),position:v()(a,"index")}};s(n)},columnStyle:Lo.column,columnHeaderStyle:Lo.header,columnTitleStyle:Lo.headerTitle,columnWrapperStyle:Lo.wrapper}),b.a.createElement(Bo,{open:!!l,ticket:l,categories:a,assignees:n,onClose:i,setAlert:m}))}));Wo.propTypes={setAlert:Z.a.func,tickets:Z.a.array,categories:Z.a.array,assignees:Z.a.array,lockBoard:Z.a.bool,loading:Z.a.bool,ticketToOpenModal:Z.a.object,onCloseCardModal:Z.a.func,onDragCard:Z.a.func,onClickCard:Z.a.func,doneTickets:Z.a.array,ticketsFetch:Z.a.func,isManager:Z.a.bool};var qo=Object(Q.a)(Object(G.a)(Lo,{withTheme:!0}))(Wo),Uo=function(e){return Object(Q.a)(Object(Q.d)((function(t){return{previousValues:e(t)}})),Object(Q.f)("formData","setFormDataRaw",(function(e){var t=e.previousValues;return Object(u.a)({validationErrors:{},changedFields:{}},t)})),Object(Q.c)({setFormData:function(e){var t=e.setFormDataRaw,a=e.formData,n=e.previousValues;return function(e){var r=Object(u.a)(Object(u.a)({},a),e),o=(r.validationErrors,r.changedFields,Object(at.a)(r,["validationErrors","changedFields"])),i=Object(N.pickBy)(o,(function(e,t){var a=n[t];return!Object(N.isEqual)(a,e)}));t(Object(u.a)(Object(u.a)({},r),{},{changedFields:i}))}},resetFormData:function(e){var t=e.setFormDataRaw,a=e.previousValues;return function(){t(Object(u.a)({validationErrors:{},changedFields:{}},a))}}}))},zo=Object(Q.a)(d.memo,Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{root:{maxWidth:"50rem"},actions:{margin:15,marginBottom:20},content:{overflowX:"hidden"}})}),{withTheme:!0}))((function(e){var t=e.classes,a=e.open,n=e.onClose,r=e.modalTitle,o=e.content,i=e.actions,c=Object(at.a)(e,["classes","open","onClose","modalTitle","content","actions"]),l=Object(Ut.a)(),s=Object(zt.a)(l.breakpoints.down("sm"));return b.a.createElement(kn.a,Object.assign({fullScreen:s,keepMounted:!0,maxWidth:"md",classes:{paper:t.root},open:a,onClose:n},c),b.a.createElement(An.a,null,r,b.a.createElement(ze.a,{className:t.closeButton,onClick:n},b.a.createElement(Ue.a,null))),b.a.createElement(yn.a,{className:t.content},o),b.a.createElement(Cn.a,{className:t.actions},b.a.createElement(oe.a,{container:!0,justify:"flex-end",spacing:2},i)))})),Vo=Object(d.memo)((function(e){var t=e.setFormData,a=e.isLoading,n=e.formData,r=n.start_date,o=n.end_date,i=n.validationErrors;return a?b.a.createElement(se,null):b.a.createElement(b.a.Fragment,null,b.a.createElement(oe.a,{container:!0,direction:"row",spacing:1},b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(gt,{errors:i.start_date,label:"Data de in\xedcio",disabled:a,value:r,onChangeValue:function(e){return t({start_date:e})},disableFuture:!0})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(gt,{errors:i.end_date,label:"Data de fim",disabled:a,value:o,onChangeValue:function(e){return t({end_date:e})},disableFuture:!0}))),b.a.createElement(Er.a,{display:"flex",justifyContent:"end",mt:2},b.a.createElement(Fe.a,{variant:"body2",color:"textSecondary",component:"small",align:"right"},"Formato de arquivo .csv")))})),Ho=ft(no.exportCsv,{name:"exportCsv",init:!1,options:function(e){var t=e.formData,a=e.setFormData,n=e.setAlert,r=e.onClose;t.validationErrors;return{variables:Object(at.a)(t,["validationErrors"]),onRequestFinished:function(e){n({alertMsg:Object(N.get)(e,"flash_message.message"),alertType:"success",showAlert:!0}),r()},onRequestError:function(e){n({alertMsg:"Erro ao tentar exportar CSV",alertType:"error",showAlert:!0}),a({validationErrors:Object(N.get)(e,"errors",{})})}}}}),Yo=Object(Q.a)(d.memo,Uo((function(){return{start_date:null,end_date:null}})),Ho)((function(e){var t=e.isModalOpen,a=e.onClose,n=e.formData,r=e.setFormData,o=e.resetFormData,i=e.exportCsvFetch,c=e.exportCsvLoading,l=function(){o(),setTimeout(a,10)};return t&&b.a.createElement(zo,{open:t,onClose:l,modalTitle:"Exportar todos os tickets",content:b.a.createElement(Vo,{formData:n,setFormData:r,isLoading:c}),actions:b.a.createElement(b.a.Fragment,null,b.a.createElement(ie.a,{color:"default",size:"large",variant:"contained",onClick:l,disabled:c},"CANCELAR"),b.a.createElement(Er.a,{ml:1},b.a.createElement(ie.a,{color:"primary",size:"large",variant:"contained",onClick:function(){return i(!0)},disabled:c},"EXPORTAR")))})})),Qo=Object(Q.a)(d.memo,Object(Q.f)("anchorEl","setAnchorEl",null),Object(Q.f)("isExportModalOpen","setIsExportModalOpen",!1))((function(e){var t=e.setAlert,a=e.anchorEl,n=e.setAnchorEl,r=e.isExportModalOpen,o=e.setIsExportModalOpen,i=Boolean(a),c=function(){n(null)};return b.a.createElement("div",null,b.a.createElement(ze.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){n(e.currentTarget)}},b.a.createElement(Fo.a,null)),b.a.createElement(ba.a,{id:"long-menu",anchorEl:a,keepMounted:!0,open:i,onClose:c,PaperProps:{style:{maxHeight:216,width:"23ch"}}},b.a.createElement(Wt.a,{onClick:function(){U.hit("ExportTicketsCsvModal - Opened"),o(!0),c()}},"Exportar Tickets",b.a.createElement(Yo,{setAlert:t,isModalOpen:r,onClose:function(){o(!1),U.hit("ExportTicketsCsvModal - Closed")}}))))})),Go=a(311),Jo=a.n(Go),Ko=a(312),Xo=a.n(Ko),Zo=a(313),$o=a.n(Zo),ei={getCategories:function(e){var t={};return e&&(t={deleted:e}),R.get("/ticket_categories",t)},updateCategory:function(e){var t=e.id,a=e.title,n=e.assigneeId,r=e.deadlineInDays,o=e.formQuestions,i={id:t,title:a,assignee_id:n,deadline_in_days:r,ticket_form_questions:j()(o,(function(e){return{question:v()(e,"question"),field_type:v()(e,"field_type"),required:v()(e,"required"),options:Xo()(Jo()(v()(e,"options",""),",").map((function(e){return $o()(e)})))}}))};return R.put("/ticket_categories/".concat(t),i)},createCategory:function(e){var t={title:e.title,deadline_in_days:e.deadlineInDays,assignee_id:e.assigneeId};return R.post("/ticket_categories",t)},toggleCategory:function(e){return R.put("/ticket_categories/".concat(e,"/toggle_active"))},getCategoriesByCompany:function(e){return e?R.get("/public_ticket_categories",{company_id:e}):null}},ti=Sr.STATUSES,ai=Sr.STATUS_DONE,ni=Object(N.find)(ti,(function(e){return e.key===ai})).key,ri=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=e.assigneeId,c=e.setAssigneeId,l=e.code,s=e.setCode,m=e.deadline,u=e.setDeadline,d=e.locationId,p=e.setLocationId,g=e.ticketsFetch,h=e.ticketsData,E=e.ticketByCodeFetch,v=e.priority,O=e.setPriority,j=e.ticketsError,k=e.ticketsLoading,y=e.ticketCategoriesData,C=e.ticketLoading,w=e.ticketCategoriesError,T=e.ticketCategoriesLoading,x=e.categoryId,S=e.setCategoryId,D=e.ticketAssigneesData,I=e.ticketAssigneesError,B=e.ticketAssigneesLoading,F=e.ticketToOpenModal,R=e.setTicketToOpenModal,P=e.ticketByCodeLoading,_=e.moveTicketFetch,W=M.getUserData();if(Object(N.get)(W,"member.company.has_ticket_support")){var q=Object(Ut.a)(),z=Xe.includes(Object(N.get)(W,"member.role")),V=Object(zt.a)(q.breakpoints.down("sm")),H=Object(N.sortBy)(Object(N.get)(W,"member.locations",[]),["name"]),Y="MEMBER"===Object(N.get)(W,"member.role","MEMBER"),Q=Object(N.get)(h,"tickets",[]),G=Q.filter((function(e){return e.status===ni})),J=Object(N.map)(G,(function(e){return e.id})),X=Object(N.sortBy)(Object(N.get)(y,"ticket_categories",[]),["title"]),Z=Object(N.sortBy)(Object(N.get)(D,"members",[]),["name","lastname"]),$=k||T||B||P||C,ee=$,te=Sr.PRIORITIES,ae=j||w||I,ne=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(!1,"",null,t);case 2:g(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(e){var t=e.target.value.replace(/[\D]+/g,"");l!==t&&s(t)},ce=function(){if(Object(N.size)(l)&&oo.isMobile()){var e={select_code:l};U.hit("Tickets - FilteredByCode",e),R(null),E(!0)}},le=function(e){if(Object(N.size)(l)&&13===e.keyCode){var t={select_code:l};U.hit("Tickets - FilteredByCode",t),R(null),E(!0)}},se=function(e){var t=Object(N.isEmpty)(e.target.value)?void 0:e.target.value;c(t);var a={select_assignee:t};U.hit("Tickets - FilteredByAssignee",a),g(!0)},me=function(e){u(e),U.hit("Tickets - FilteredByDeadline"),g(!0)},ue=function(e){var t=Object(N.isEmpty)(e.target.value)?void 0:e.target.value;O(t);var a={priority:v};U.hit("Tickets - FilteredByPriority",a),g(!0)},de=function(e){var t=Object(N.isEmpty)(e.target.value)?void 0:e.target.value;S(t);var a={select_category:t};U.hit("Tickets - FilteredByCategory",a),g(!0)},be=function(e){var t=Object(N.isEmpty)(e.target.value)?void 0:e.target.value;p(t);var a={select_building:t};U.hit("Tickets - FilteredByBuilding",a),g(!0)},pe=t.showAlert,ge=t.alertMsg,fe=t.alertType,he=null;pe&&(he=b.a.createElement(Ge,{message:ge,type:fe,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var Ee=function(){return b.a.createElement(oe.a,{container:!0,spacing:3},b.a.createElement(oe.a,{item:!0,xs:6,sm:1},b.a.createElement(nt.a,{fullWidth:!0},b.a.createElement(Le.a,{label:"Busca",placeholder:"N\u02da",disabled:ee,value:l,type:"tel",InputLabelProps:{shrink:!0},onKeyDown:le,onBlur:ce,onChange:re}))),Object(N.size)(H)>1?b.a.createElement(oe.a,{item:!0,xs:6,sm:2},b.a.createElement(nt.a,{fullWidth:!0},b.a.createElement(Le.a,{select:!0,label:"Local",className:n.filterSelect,disabled:ee,value:d,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:be},b.a.createElement("option",{value:""},"Todos"),H.map((function(e){return b.a.createElement("option",{key:e.id,value:e.id},e.name)}))))):b.a.createElement(b.a.Fragment,null),Y?b.a.createElement(b.a.Fragment,null):b.a.createElement(oe.a,{item:!0,xs:6,sm:2},b.a.createElement(nt.a,{fullWidth:!0},b.a.createElement(Le.a,{select:!0,label:"Respons\xe1vel",className:n.filterSelect,disabled:ee,value:r,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:se},b.a.createElement("option",{value:"all"},"Todos"),b.a.createElement("option",{value:""},"Nenhum"),Z.map((function(e){return b.a.createElement("option",{key:e.id,value:e.id},"".concat(e.name," ").concat(e.lastname))}))))),b.a.createElement(oe.a,{item:!0,xs:6,sm:2},b.a.createElement(nt.a,{fullWidth:!0},b.a.createElement(Le.a,{select:!0,label:"Categoria",className:n.filterSelect,disabled:ee,value:x,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:de},b.a.createElement("option",{value:""},"Todos"),X.map((function(e){return b.a.createElement("option",{key:e.id,value:e.id},e.title)}))))),b.a.createElement(oe.a,{item:!0,xs:6,sm:2},b.a.createElement(nt.a,{fullWidth:!0},b.a.createElement(Le.a,{select:!0,label:"Prioridade",className:n.filterSelect,disabled:ee,value:v,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:ue},b.a.createElement("option",{value:""},"Todos"),te.map((function(e){return b.a.createElement("option",{key:e.key,value:e.key},e.label)}))))),b.a.createElement(oe.a,{item:!0,xs:6,sm:2},b.a.createElement(nt.a,{fullWidth:!0},b.a.createElement(bt.a,{libInstance:A.a,utils:dt.a,locale:L.locale},b.a.createElement(pt.a,{autoOk:!0,label:"Prazo",clearable:!0,animateYearScrolling:!0,className:n.filterSelect,disabled:ee,invalidDateMessage:"Formato inv\xe1lido",InputLabelProps:{shrink:!0},value:m,onChange:me,format:"DD/MM/YYYY",cancelLabel:"Cancelar",clearLabel:"Limpar"})))))};return b.a.createElement("div",{className:n.root},b.a.createElement(Sa,{alertBox:he,error:ae}),b.a.createElement("section",null,b.a.createElement("div",{className:n.container},b.a.createElement(Er.a,{display:"flex",justifyContent:"space-between",mb:2},b.a.createElement(Fe.a,{variant:"h5"},b.a.createElement("b",null,Object(N.size)(Q)?"Tickets (".concat(Object(N.size)(Q),")"):"Tickets")),b.a.createElement(Er.a,{display:"flex"},b.a.createElement(ie.a,{variant:"contained",component:f.b,to:"/tickets/novo",color:"primary",size:"large",disabled:ee,className:V?n.fab:null},"Novo ticket"),z&&b.a.createElement(Er.a,{ml:1},b.a.createElement(Qo,{setAlert:a})))),V?z&&b.a.createElement(vr.a,null,b.a.createElement(Or.a,{expandIcon:b.a.createElement(yr.a,null)},b.a.createElement(Fe.a,{variant:"subtitle1"},"Filtros")),b.a.createElement(jr.a,null,Ee())):z&&Ee()),b.a.createElement("div",{className:n.container},b.a.createElement(oe.a,{container:!0},b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(qo,{isManager:z,ticketsFetch:g,doneTickets:J,lockBoard:Y,tickets:Q,ticketToOpenModal:F,categories:X,assignees:Z,loading:$,onClickCard:function(e){R(e),window.history.pushState("","","/#/tickets/".concat(e.id))},onDragCard:ne,onCloseCardModal:function(e,t){R(null),g(!1),window.history.pushState("","","/#/tickets"),t&&a({alertMsg:t,alertType:e?"error":"success",showAlert:!0})},setAlert:a}))))))}return b.a.createElement("div",{className:n.root},b.a.createElement(Sa,null),b.a.createElement("section",null,b.a.createElement("div",{className:n.container},b.a.createElement(oe.a,{container:!0,spacing:1},b.a.createElement("div",{className:n.centerHeaderView},b.a.createElement(K.a,{className:n.emptyHeaderIcon}),b.a.createElement("b",{className:n.emptyHeaderTitle},"Essa conta n\xe3o possui o servi\xe7o de tickets"))))))})),oi=ft(ei.getCategories,{name:"ticketCategories"}),ii=ft(no.getAssignables,{name:"ticketAssignees"}),ci=ft(no.moveTicket,{name:"moveTicket",init:!1,options:function(e){var t=e.setAlert;return{onRequestError:function(e){console.info(e),t({alertMsg:"Erro ao mover esse ticket",alertType:"warning",showAlert:!0})}}}}),li=ft(no.getTicketByCode,{name:"ticketByCode",init:!1,options:function(e){var t=e.setAlert,a=e.setCode,n=e.setTicketToOpenModal,r=e.code;return{variables:r,onRequestFinished:function(e){var t=Object(N.get)(e,"ticket");n(t),a(""),window.history.pushState("","","/#/tickets/".concat(t.id))},onRequestError:function(){n(null),t({alertMsg:"Ticket ".concat(r," n\xe3o foi identificado"),alertType:"warning",showAlert:!0}),window.history.pushState("","","/#/tickets")}}}}),si=ft(no.getTicket,{name:"ticket",init:!1,options:function(e){var t=e.match,a=e.setAlert,n=e.setTicketToOpenModal;return{variables:Object(N.get)(t,"params.id"),onRequestFinished:function(e){var t=Object(N.get)(e,"ticket");n(t),window.history.pushState("","","/#/tickets/".concat(t.id))},onRequestError:function(){n(null),a({alertMsg:"Este ticket n\xe3o foi identificado",alertType:"warning",showAlert:!0}),window.history.pushState("","","/#/tickets")}}}}),mi=ft(no.getTickets,{name:"tickets",init:!1,options:function(e){return{variables:{locationId:e.locationId,assigneeId:e.assigneeId,categoryId:e.categoryId,deadline:e.deadline,priority:e.priority}}}}),ui=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{closeTicket:{cursor:"pointer",fontSize:14,fontWeight:"bold",marginRight:3},filterSelect:{minWidth:115}})}),{withTheme:!0}),h.g,Object(Q.f)("assigneeId","setAssigneeId","all"),Object(Q.f)("code","setCode",""),Object(Q.f)("ticketToOpenModal","setTicketToOpenModal"),Object(Q.f)("categoryId","setCategoryId"),Object(Q.f)("locationId","setLocationId"),Object(Q.f)("priority","setPriority"),Object(Q.f)("deadline","setDeadline",null),Object(Q.f)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),mi,si,li,oi,ii,ci,Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.ticketsFetch,a=e.ticketFetch,n=e.ticketToOpenModal,r=e.match,o=Object(N.get)(r,"params.id");Object(N.isEmpty)(n)&&t(!0),Object(N.size)(o)&&a(!1)}}))(ri),di=[{label:"Texto curto",key:"TEXT_FIELD"},{label:"Texto longo",key:"TEXT_AREA"},{label:"Sele\xe7\xe3o \xfanica",key:"SELECT"},{label:"M\xfaltipla sele\xe7\xe3o",key:"CHECKBOX"}],bi=["SELECT","CHECKBOX"],pi=Object(d.memo)((function(e){var t=e.value,a=e.onChange,n=e.disabled,r=e.onUploadProgress,o=e.onUploadSuccess,i=e.onUploadError;return t&&(t.progressPercent||t.id)?b.a.createElement(bo,{file:t,onRemoveFile:function(e){return e.cancelUpload||a(null)},disabled:n}):b.a.createElement(Eo,{accept:"image/*,.doc,.docx,.xls,.xlsx,.pdf,.xml",onChange:function(e){ho({file:e,progressHandler:function(t){var n=t.progressPercent,o=Object(N.merge)(e,{progressPercent:n});a(o),r&&r(o)}}).catch(i).then((function(t){var n=Object(N.merge)(e,t);a(n),o&&o(n)}))},disabled:n})})),gi=Object(d.memo)((function(e){var t=e.id,a=e.classes,n=e.required,r=e.disabled,o=e.question,i=e.options,c=e.fieldType,l=e.showBlankError,s=e.onChangeQuestion,m=e.onCheckOption,u=l&&n;return"CHECKBOX"===c?b.a.createElement(nt.a,{component:"fieldset",className:a.checkboxControl,fullWidth:!0,error:u},b.a.createElement(et.a,{component:"legend"},o),b.a.createElement(Tn.a,null,i.map((function(e){return b.a.createElement(xn.a,{key:e,label:e,control:b.a.createElement(Rt.a,{color:"primary",disabled:r,onChange:function(a){return m(e,a.target.checked,t)}})})}))),u&&b.a.createElement(et.a,null,"selecione uma op\xe7\xe3o")):"SELECT"===c?b.a.createElement(nt.a,{fullWidth:!0,error:u},b.a.createElement(Le.a,{select:!0,label:o,className:a.questionInput,disabled:r,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return s(e.target.value,t)},variant:"outlined",error:u},i.map((function(e){return b.a.createElement("option",{key:e,value:e},e)}))),u&&b.a.createElement(et.a,null,"selecione uma op\xe7\xe3o")):b.a.createElement(nt.a,{fullWidth:!0,error:u},b.a.createElement(Le.a,{label:o,className:a.questionInput,multiline:"TEXT_AREA"===c,rows:"TEXT_AREA"===c?4:1,rowsMax:"TEXT_AREA"===c?4:1,disabled:r,InputLabelProps:{shrink:!0},onChange:function(e){return s(e.target.value,t)},variant:"outlined",error:u}),u&&b.a.createElement(et.a,null,"este campo est\xe1 em branco"))})),fi=Object(Q.a)(Object(G.a)((function(e){return{checkboxControl:{margin:e.spacing(2)},questionInput:{marginTop:14}}}),{withTheme:!0}))(gi),hi=Sr.PRIORITIES,Ei=Sr.PRIORITY_NORMAL,vi=function(){var e=M.getUserData(),t=Ze.includes(Object(N.get)(e,"member.role")),a=Object(N.sortBy)(Object(N.get)(e,"member.locations",[]),["name"]);return{title:"",description:"",category_id:"",deadline:null,priority:t?Ei:null,source:"PORTAL",location_id:Object(N.get)(a,"[0].id"),attachment_data:null,ticket_form_questions:Object(N.clone)([])}},Oi=function(e,t){var a=Object(N.find)(e,(function(e){return e.id===t})),n=Object(N.get)(a,"ticket_form_questions",[]);return Object(N.map)(n,(function(e){var t="SELECT"===Object(N.get)(e,"field_type")?Object(N.compact)(Object(N.first)(Object(N.get)(e,"options"))):[];return Object(u.a)(Object(u.a)({},e),{},{value:t})}))},ji=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.ticket,o=e.setTicketState,i=e.ticketLoading,c=e.ticketFetch,l=e.errors,s=e.ticketCategoriesLoading,m=e.categories,u=e.setShowQuestionError,d=e.isUploading,p=e.setIsUploading,g=e.showQuestionError,h=Object(Ut.a)(),E=Object(zt.a)(h.breakpoints.down("sm")),v=M.getUserData();if(Object(N.get)(v,"member.company.has_ticket_support")){var O=a.showAlert,j=a.alertMsg,k=a.alertType,y=a.actionButton,C=a.onClickAction,w=null;O&&(w=b.a.createElement(Ge,{message:j,type:k,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1,actionButton:""})},actionButton:y,onClickAction:C}));var T=Ze.includes(Object(N.get)(v,"member.role")),x=Object(N.sortBy)(Object(N.get)(v,"member.locations",[]),["name"]),S=s||i,D=S||d,I=function(){var e=Object(N.get)(r,"ticket_form_questions",[]),t=Object(N.reject)(e,(function(e){return!e.required}));return Boolean(Object(N.size)(Object(N.reject)(t,(function(e){return Object(N.size)(e.value)}))))},B=function(e,t){var a=Object(N.get)(r,"ticket_form_questions",[]),n=Object(N.findIndex)(a,(function(e){return e.id===t}));Object(N.set)(r,"ticket_form_questions[".concat(n,"].value"),[e]),u(I())},F=function(e,t,a){var n=Object(N.get)(r,"ticket_form_questions",[]),o=Object(N.findIndex)(n,(function(e){return e.id===a})),i=n[o].value;i=t?i.concat(e):i.filter((function(t){return t!==e})),Object(N.set)(r,"ticket_form_questions[".concat(o,"].value"),i),u(I())},R=Object(N.get)(r,"ticket_form_questions",[]);return b.a.createElement("div",{className:t.root},b.a.createElement(Sa,{alertBox:w}),b.a.createElement("section",null,b.a.createElement("div",{className:t.container},b.a.createElement("div",{className:t.headerView},b.a.createElement("aside",null,b.a.createElement(Fe.a,{variant:"h5"},b.a.createElement("b",null,"Novo ticket"))))),b.a.createElement("br",null),b.a.createElement("form",{className:t.container},b.a.createElement(ia.a,{className:t.paper},b.a.createElement(Fe.a,{variant:"h6"},b.a.createElement("b",null,"Solicita\xe7\xe3o")),b.a.createElement(oe.a,{container:!0,item:!0,xs:12,sm:8,md:6,spacing:2},b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(ot,{label:"T\xedtulo",errors:Object(N.get)(l,"title",[]),className:t.input,disabled:S,placeholder:"Ex.: Banheiro entupido, m\xe1quina de caf\xe9 com defeito, etc",value:Object(N.get)(r,"title",""),onChange:function(e){return o({title:e.target.value})}}),Object(N.size)(x)>1&&b.a.createElement(ut,{label:"Local",errors:Object(N.get)(l,"location_id",[]),className:t.input,disabled:S,value:Object(N.get)(r,"location_id"),onChange:function(e){return o({location_id:e.target.value})},options:x,optionValueField:"id",optionLabelField:"name"}),b.a.createElement(ut,{label:"Categoria",errors:Object(N.get)(l,"category_id",[]),className:t.input,disabled:S,value:Object(N.get)(r,"category_id"),onChange:function(e){var t=e.target.value;o({category_id:t,ticket_form_questions:Oi(m,t)}),u(!1)},options:m,optionValueField:"id",optionLabelField:"title"}),Object(N.map)(R,(function(e){return b.a.createElement(fi,{key:Object(N.get)(e,"id"),id:Object(N.get)(e,"id"),question:Object(N.get)(e,"question"),options:Object(N.get)(e,"options"),fieldType:Object(N.get)(e,"field_type"),required:Object(N.get)(e,"required"),disabled:D,showBlankError:g,onChangeQuestion:B,onCheckOption:F})})),b.a.createElement(ot,{label:"Descri\xe7\xe3o",multiline:!0,rows:4,rowsMax:4,errors:Object(N.get)(l,"comments",[]),className:t.input,disabled:S,placeholder:"Descreva mais detalhes sobre esta ocorr\xeancia...",value:Object(N.get)(r,"description",""),onChange:function(e){return o({description:e.target.value})}}))),T&&b.a.createElement(b.a.Fragment,null,b.a.createElement("br",null),b.a.createElement(Fe.a,{variant:"h6",className:t.deadline},b.a.createElement("b",null,"Deadline")),b.a.createElement(oe.a,{container:!0,item:!0,xs:12,sm:8,md:6,spacing:2},b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(nt.a,{fullWidth:!0},b.a.createElement(bt.a,{libInstance:A.a,utils:dt.a,locale:L.locale},b.a.createElement(pt.a,{autoOk:!0,label:"Prazo",clearable:!0,animateYearScrolling:!0,className:t.input,disabled:S,invalidDateMessage:"Formato inv\xe1lido",variant:"outlined",inputVariant:"outlined",InputLabelProps:{shrink:!0},value:Object(N.get)(r,"deadline"),onChange:function(e){return o({deadline:e})},minDate:new Date,format:"DD/MM/YYYY",cancelLabel:"Cancelar",clearLabel:"Limpar"})))),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(nt.a,{fullWidth:!0,error:!!l.priority},b.a.createElement(Le.a,{select:!0,label:"Prioridade",error:!!l.priority,className:E?t.priorityIput:"",disabled:S,value:Object(N.get)(r,"priority"),InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return o({priority:e.target.value})},variant:"outlined"},Object(N.map)(hi,(function(e){return b.a.createElement("option",{value:e.key,key:e.key},e.label)}))),l.priority&&b.a.createElement(et.a,null,l.priority))))),b.a.createElement("br",null),b.a.createElement(Fe.a,{variant:"h6"},b.a.createElement("b",null,"Mais detalhes")),b.a.createElement("br",null),b.a.createElement(oe.a,{container:!0,item:!0,xs:12,sm:8,md:6,spacing:2},b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement("div",null,b.a.createElement(pi,{value:Object(N.get)(r,"attachment_data",null),onChange:function(e){o({attachment_data:e}),p(Object(N.get)(e,"progressPercent",100)<100)},disabled:S})),b.a.createElement("div",{className:t.actions},b.a.createElement(ie.a,{component:f.b,to:"/tickets",color:"default",size:"large",disabled:S,className:t.cancel},"Voltar"),b.a.createElement(ie.a,{variant:"contained",color:"primary",size:"large",disabled:D,onClick:function(){if(Object(N.isEmpty)(x))n({alertMsg:"N\xe3o foi informado o local da ocorr\xeancia",alertType:"error",showAlert:!0});else{var e=I();u(e),e||c(!0)}}},D?"Aguarde...":"Enviar"))))))))}return b.a.createElement("div",{className:t.root},b.a.createElement(Sa,null),b.a.createElement("section",null,b.a.createElement("div",{className:t.container},b.a.createElement(oe.a,{container:!0,spacing:1},b.a.createElement("div",{className:t.centerHeaderView},b.a.createElement(K.a,{className:t.emptyHeaderIcon}),b.a.createElement("b",{className:t.emptyHeaderTitle},"Essa conta n\xe3o possui o servi\xe7o de tickets"))))))})),ki=ft(ei.getCategories,{name:"ticketCategories",options:function(e){var t=e.setTicketState,a=e.setCategories,n=e.selectedCategory;return{onRequestFinished:function(e){var r=Object(N.sortBy)(Object(N.get)(e,"ticket_categories",[]),["title"]),o=Object(N.find)(r,(function(e){return Object(N.toLower)(e.title)===Object(N.toLower)(n)})),i=Object(N.get)(o,"id")||Object(N.get)(r,"[0].id");a(r),t({category_id:i,ticket_form_questions:Oi(r,i)})}}}}),yi=ft(no.postTicket,{name:"ticket",init:!1,options:function(e){var t=e.ticket,a=e.setTicketState,n=e.setAlert,r=e.categories,o=e.history,i=e.setErrors;return{variables:t,onRequestFinished:function(e){document.querySelector("form").reset();var t=Object(N.get)(r,"[0].id");a(Object(u.a)(Object(u.a)({},vi()),{},{category_id:t,ticket_form_questions:Oi(r,t)}));var c=Object(N.get)(e,"ticket.id");n({alertMsg:"Ticket registrado com sucesso",alertType:"success",showAlert:!0,actionButton:"Ver ticket",onClickAction:function(){return o.push("/tickets/".concat(c))}}),i({})},onRequestError:function(e){i(Object(N.get)(e,"errors",{})),n({alertMsg:"Erro ao registrar esse ticket",alertType:"error",showAlert:!0})}}}}),Ci=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{cancel:{marginRight:20},input:{marginTop:0,marginBottom:-8},priorityIput:{marginTop:8},deadline:{marginBottom:20}})}),{withTheme:!0}),h.g,Object(Q.f)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Q.f)("ticket","setTicket",vi),Object(Q.f)("categories","setCategories",[]),Object(Q.f)("showQuestionError","setShowQuestionError",!1),Object(Q.f)("isUploading","setIsUploading",!1),Object(Q.f)("selectedCategory","setSelectedCategory"),Object(Q.f)("errors","setErrors",{}),Object(Q.c)({setTicketState:function(e){var t=e.setTicket,a=e.ticket;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}),ki,yi,Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.location,a=e.setTicketState,n=e.setSelectedCategory,r=new URLSearchParams(t.search),o=(r.get("utm_source")||"").toUpperCase();n(r.get("category")||r.get("categoria")),"QRCODE"===o&&a({source:"QRCODE"})}}))(ji),Ai={getLocations:function(e){return R.get("/locations",{list_inactive:!!e})},createLocation:function(e){return R.post("/locations",e)},updateLocation:function(e){var t=e.id,a=e.changes;return R.put("/locations/".concat(t),a)},toggleActive:function(e){return R.delete("/locations/".concat(e,"/toggle_active"))},getLocationsByCompany:function(e){return e?R.get("/public_locations",{company_id:e}):null}},wi=function(){return{title:"",description:"",category_id:"",deadline:null,priority:null,source:"PORTAL",location_id:"",attachment_data:null,ticket_form_questions:Object(N.clone)([]),email:"",name:"",lastname:""}},Ti=function(e,t){var a=Object(N.find)(e,(function(e){return e.id===t})),n=Object(N.get)(a,"ticket_form_questions",[]);return Object(N.map)(n,(function(e){var t="SELECT"===Object(N.get)(e,"field_type")?Object(N.compact)(Object(N.first)(Object(N.get)(e,"options"))):[];return Object(u.a)(Object(u.a)({},e),{},{value:t})}))},xi=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.ticket,o=e.setTicketState,i=e.ticketLoading,c=e.ticketError,l=e.ticketFetch,s=e.companyId,m=e.locationsData,u=e.locationsLoading,d=e.showQuestionError,p=e.ticketCategoriesLoading,g=e.categories,f=e.setShowQuestionError,h=e.isUploading,E=e.setIsUploading;if(s){var v=a.showAlert,O=a.alertMsg,j=a.alertType,k=a.actionButton,y=a.onClickAction,C=Object(N.mapValues)(Object(N.get)(c,"errors",{}),(function(e){return e[0]})),A=function(){var e=Object(N.get)(r,"ticket_form_questions",[]),t=Object(N.reject)(e,(function(e){return!e.required}));return Boolean(Object(N.size)(Object(N.reject)(t,(function(e){return Object(N.size)(e.value)}))))},w=function(e,t){var a=Object(N.get)(r,"ticket_form_questions",[]),n=Object(N.findIndex)(a,(function(e){return e.id===t}));Object(N.set)(r,"ticket_form_questions[".concat(n,"].value"),[e]),f(A())},T=function(e,t,a){var n=Object(N.get)(r,"ticket_form_questions",[]),o=Object(N.findIndex)(n,(function(e){return e.id===a})),i=n[o].value;i=t?i.concat(e):i.filter((function(t){return t!==e})),Object(N.set)(r,"ticket_form_questions[".concat(o,"].value"),i),f(A())},x=Object(N.get)(r,"ticket_form_questions",[]),S=Object(N.sortBy)(Object(N.get)(m,"locations",[]),["name"]),D=Object(N.isEmpty)(S)||Object(N.isEmpty)(g)||p||i||u,M=D||h;return b.a.createElement("div",{className:t.root},v&&b.a.createElement(Ge,{message:O,type:j,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1,actionButton:""})},actionButton:k,onClickAction:y}),b.a.createElement("section",null,b.a.createElement(oe.a,{container:!0,justify:"center",alignContent:"center"},b.a.createElement(oe.a,{item:!0,xs:12,sm:8,md:6,lg:4},b.a.createElement("form",{className:t.containerNoSidebar},b.a.createElement(ia.a,{className:t.paper},b.a.createElement(oe.a,{container:!0,spacing:2,justify:"center",alignContent:"center"},b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(Fe.a,{variant:"h6"},b.a.createElement("b",null,"Nova solicita\xe7\xe3o de ticket"))),b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(ot,{errors:C.email,label:"Email",placeholder:"Seu email de trabalho",disabled:D,value:Object(N.get)(r,"email",""),onChange:function(e){return o({email:e.target.value})}})),b.a.createElement(oe.a,{item:!0,xs:6},b.a.createElement(ot,{errors:C.name,label:"Nome",disabled:D,className:t.inputControl,value:Object(N.get)(r,"name",""),onChange:function(e){return o({name:e.target.value})}})),b.a.createElement(oe.a,{item:!0,xs:6},b.a.createElement(ot,{errors:C.lastname,label:"Sobrenome",disabled:D,className:t.inputControl,value:Object(N.get)(r,"lastname",""),onChange:function(e){return o({lastname:e.target.value})}})),b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(ot,{errors:C.title,label:"T\xedtulo",placeholder:"Ex.: Banheiro entupido, m\xe1quina de caf\xe9 com defeito, etc",disabled:D,className:t.inputControl,value:Object(N.get)(r,"title",""),onChange:function(e){return o({title:e.target.value})}}),Object(N.size)(S)>1&&b.a.createElement(ut,{label:"Local",errors:Object(N.get)(C,"location_id",[]),value:Object(N.get)(r,"location_id"),disabled:D,onChange:function(e){return o({location_id:e.target.value})},options:S,optionLabelField:"name",optionValueField:"id"}),Object(N.size)(g)>1&&b.a.createElement(ut,{label:"Categoria",errors:Object(N.get)(C,"category_id",[]),value:Object(N.get)(r,"category_id"),disabled:D,onChange:function(e){var t=e.target.value;o({category_id:t,ticket_form_questions:Ti(g,t)}),f(!1)},options:g,optionLabelField:"title",optionValueField:"id"}),Object(N.map)(x,(function(e){return b.a.createElement(fi,{key:Object(N.get)(e,"id"),id:Object(N.get)(e,"id"),question:Object(N.get)(e,"question"),options:Object(N.get)(e,"options"),fieldType:Object(N.get)(e,"field_type"),required:Object(N.get)(e,"required"),disabled:M,showBlankError:d,onChangeQuestion:w,onCheckOption:T})})),b.a.createElement(ot,{errors:C.comments,label:"Descri\xe7\xe3o",multiline:!0,rows:4,rowsMax:4,placeholder:"Descreva mais detalhes sobre esta ocorr\xeancia...",disabled:D,value:Object(N.get)(r,"description",""),onChange:function(e){return o({description:e.target.value})}}))),b.a.createElement("br",null),b.a.createElement(oe.a,{container:!0,spacing:2,justify:"center",alignContent:"center"},b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement("div",null,b.a.createElement(pi,{value:Object(N.get)(r,"attachment_data",null),onChange:function(e){o({attachment_data:e}),E(Object(N.get)(e,"progressPercent",100)<100)},disabled:D})),b.a.createElement("div",{className:t.actions},b.a.createElement(ie.a,{variant:"contained",color:"primary",size:"large",disabled:M,onClick:function(){if(Object(N.isEmpty)(Object(N.get)(r,"location_id")))n({alertMsg:"N\xe3o foi informado o local da ocorr\xeancia",alertType:"error",showAlert:!0});else{var e=A();f(e),e||l(!0)}}},M?"Aguarde...":"Enviar"))))))))))}return b.a.createElement("div",{className:t.root},b.a.createElement("section",null,b.a.createElement("div",{className:t.containerNoSidebar},b.a.createElement(oe.a,{container:!0,spacing:1},b.a.createElement("div",{className:t.centerHeaderView},b.a.createElement(K.a,{className:t.emptyHeaderIcon}),b.a.createElement("b",{className:t.emptyHeaderTitle},"Esse link inv\xe1lido n\xe3o pode solicitar tickets"))))))})),Si=ft(Ai.getLocationsByCompany,{name:"locations",options:function(e){var t=e.companyId,a=e.setAlert,n=e.setTicketState;return{variables:t,onRequestFinished:function(e){var t=Object(N.sortBy)(Object(N.get)(e,"locations",[]),["name"]);Object(N.size)(t)?n({location_id:Object(N.get)(t,"[0].id")}):a({alertMsg:"Esta empresa n\xe3o possui um local",alertType:"warning",showAlert:!0,actionButton:"Recarregar",onClickAction:function(){return window.location.reload()}})},onRequestError:function(){a({alertMsg:"Erro ao carregar os locais da empresa",alertType:"warning",showAlert:!0,actionButton:"Recarregar",onClickAction:function(){return window.location.reload()}})}}}}),Ni=ft(ei.getCategoriesByCompany,{name:"ticketCategories",options:function(e){var t=e.setTicketState,a=e.companyId,n=e.setCategories,r=e.selectedCategory,o=e.setAlert;return{variables:a,onRequestFinished:function(e){var a=Object(N.sortBy)(Object(N.get)(e,"ticket_categories",[]),["title"]);if(Object(N.size)(a)){var i=Object(N.find)(a,(function(e){return Object(N.toLower)(e.title)===Object(N.toLower)(r)})),c=Object(N.get)(i,"id")||Object(N.get)(a,"[0].id");n(a),t({category_id:c,ticket_form_questions:Ti(a,c)})}else o({alertMsg:"Esta empresa n\xe3o possui uma categoria",alertType:"warning",showAlert:!0,actionButton:"Recarregar",onClickAction:function(){return window.location.reload()}})},onRequestError:function(){o({alertMsg:"Erro ao carregar categorias",alertType:"error",showAlert:!0,actionButton:"Recarregar",onClickAction:function(){return window.location.reload()}})}}}}),Di=ft(no.postPublicTicket,{name:"ticket",init:!1,options:function(e){var t=e.ticket,a=e.companyId,n=e.setTicketState,r=e.setAlert,o=e.categories;return{variables:{ticket:t,companyId:a},onRequestFinished:function(){document.querySelector("form").reset();var e=Object(N.get)(o,"[0].id");n(Object(u.a)(Object(u.a)({},wi()),{},{category_id:e,ticket_form_questions:Ti(o,e)})),r({alertMsg:"Ticket registrado com sucesso",alertType:"success",showAlert:!0})},onRequestError:function(){r({alertMsg:"Erro ao registrar esse ticket",alertType:"error",showAlert:!0})}}}}),Mi=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{root:Object($.a)({flexGrow:1,marginRight:5,marginLeft:5},e.breakpoints.up("md"),{marginRight:100,marginLeft:100}),cancel:{marginRight:20},checkboxControl:{margin:e.spacing(2)},inputControl:{marginTop:-20}})}),{withTheme:!0}),h.g,Object(Q.f)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Q.f)("ticket","setTicket",wi),Object(Q.f)("categories","setCategories",[]),Object(Q.f)("companyId","setCompanyId"),Object(Q.f)("showQuestionError","setShowQuestionError",!1),Object(Q.f)("isUploading","setIsUploading",!1),Object(Q.f)("selectedCategory","setSelectedCategory"),Object(Q.c)({setTicketState:function(e){var t=e.setTicket,a=e.ticket;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}),Si,Ni,Di,Object(Q.b)({componentDidMount:function(){if(M.isLoggedIn())return window.location.href="/#/tickets/novo",!0;var e=this.props,t=e.location,a=e.setTicketState,n=e.setCompanyId,r=e.setSelectedCategory,o=new URLSearchParams(t.search),i=(o.get("utm_source")||"").toUpperCase();return r(o.get("category")||o.get("categoria")),n(o.get("company_id")||o.get("company")),"QRCODE"===i&&a({source:"QRCODE"}),!0}}))(xi),Ii=a(315),Bi=a.n(Ii),Li=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.children,o=a.showAlert,i=a.alertMsg,c=a.alertType,l=null;return o&&(l=b.a.createElement(Ge,{message:i,type:c,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}})),b.a.createElement("div",{className:t.root},b.a.createElement(Sa,{alertBox:l}),b.a.createElement("section",{className:t.container},b.a.cloneElement(r,{setAlert:n})))})),Fi=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)({},ee(e))}),{withTheme:!0}),Object(Q.f)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}))(Li),Ri=Object(Q.a)(Object(Q.f)("viewer","setViewer",null),Object(Q.b)({componentDidMount:function(){var e=M.getUserData();this.props.setViewer(e)}})),Pi=Object(d.memo)((function(e){var t=e.messageText,a=e.classes;return b.a.createElement("div",{className:a.root},b.a.createElement(Sa,null),b.a.createElement("section",null,b.a.createElement(oe.a,{container:!0,spacing:1},b.a.createElement("div",{className:a.centerHeaderView},b.a.createElement(K.a,{className:a.emptyHeaderIcon}),b.a.createElement("b",{className:a.emptyHeaderTitle},t)))))}));Pi.propTypes={classes:Z.a.object,messageText:Z.a.string};var _i=Object(G.a)((function(e){return Object(u.a)({},ee(e))}),{withTheme:!0})(Pi),Wi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.condition,a=e.messageText,n=void 0===a?"Voc\xea n\xe3o possui permiss\xe3o de acesso a esta tela.":a;return function(e){return Ri((function(a){return a.viewer?t(a.viewer)?b.a.createElement(_i,{messageText:n}):b.a.createElement(e,a):null}))}},qi=[{label:"sob-demanda",path:"sobdemanda"},{label:"recorrentes",path:"recorrentes"}],Ui=Object(d.memo)((function(e){var t=e.pathBase,a=e.history;return b.a.createElement(ia.a,{square:!0},b.a.createElement(Na.a,{value:Ia()(qi,(function(e){return a.location.pathname==="".concat(t,"/").concat(e.path)})),indicatorColor:"primary",textColor:"primary",scrollButtons:"auto",variant:"scrollable",onChange:function(e,n){return a.push("".concat(t,"/").concat(qi[n].path))}},qi.map((function(e,t){return b.a.createElement(Da.a,{key:e.path,label:e.label,index:t})}))))}));Ui.propTypes={pathBase:Z.a.string,history:Z.a.object};var zi=Object(h.g)(Ui),Vi={ON_DEMAND:"ON_DEMAND",SUBSCRIPTION:"SUBSCRIPTION"},Hi={getServices:function(e){var t=e.serviceType;return R.get("/services",{service_type:t})},getService:function(e){return R.get("/services/".concat(e))}},Yi=function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{container:{marginLeft:"auto",marginRight:"auto",marginBottom:20}})},Qi=Object(d.memo)((function(e){var t=e.classes,a=e.service,n=e.history;return b.a.createElement(Xa.a,{onClick:function(){return n.push("/servicos/".concat(a.id,"/solicitar-servico"))}},b.a.createElement(Za.a,null,b.a.createElement(en.a,{className:t.media,image:a.image_url,title:a.title}),b.a.createElement($a.a,{className:t.content},b.a.createElement(Fe.a,{variant:"h6"},b.a.createElement("small",null,b.a.createElement("b",null,a.title))))))})),Gi=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},Yi(e)),{},{media:{minHeight:150}})}),{withTheme:!0}),h.g)(Qi),Ji=Object(d.memo)((function(e){var t=e.classes,a=e.servicesData;if(e.servicesLoading)return b.a.createElement(se,null);var n=Object(N.groupBy)(Object(N.get)(a,"services",[]),"category");return b.a.createElement(b.a.Fragment,null,Object(N.map)(n,(function(e,a){return b.a.createElement("div",{className:t.categoryContainer,key:a},b.a.createElement(Fe.a,{className:t.categoryName,variant:"h6"},b.a.createElement("b",null,a)),b.a.createElement(oe.a,{container:!0,spacing:2},Object(N.map)(e,(function(e){return b.a.createElement(oe.a,{key:e.id,item:!0,xs:12,sm:4,md:3},b.a.createElement(Gi,{service:e}))}))))})))})),Ki=ft(Hi.getServices,{name:"services",options:function(e){var t=e.setAlert;return{variables:{serviceType:Vi.ON_DEMAND},onRequestError:function(){t({alertMsg:"Erro ao carregar dados do servidor",alertType:"error",showAlert:!0})}}}}),Xi=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{categoryContainer:{marginTop:40},categoryName:{marginTop:15,marginBottom:10}})}),{withTheme:!0}),Ki)(Ji),Zi=Object(d.memo)((function(e){var t=e.classes,a=e.service,n=e.history;return b.a.createElement(Xa.a,null,b.a.createElement(en.a,{className:t.media,image:a.image_url,title:a.title}),b.a.createElement($a.a,{className:t.content},b.a.createElement(Fe.a,{variant:"h6"},b.a.createElement("small",null,b.a.createElement("b",null,a.title))),b.a.createElement("p",{className:t.description},a.description),b.a.createElement(ie.a,{color:"primary",onClick:function(){return n.push("/servicos/".concat(a.id,"/solicitar-servico"))}},"Obter Oferta")))})),$i=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},Yi(e)),{},{media:{minHeight:150},description:{height:60,width:"100%",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",lineClamp:3,boxOrient:"vertical"}})}),{withTheme:!0}),h.g)(Zi),ec=a(605),tc=a(316),ac=a.n(tc),nc=Object(d.memo)((function(e){var t=e.classes;return b.a.createElement(ia.a,null,b.a.createElement(Er.a,{display:"flex",height:347,flexDirection:"column",justifyContent:"center",alignItems:"center"},b.a.createElement(Er.a,{display:"flex",height:150,justifyContent:"center",alignItems:"center"},b.a.createElement(ac.a,{className:t.icon})),b.a.createElement(Er.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},b.a.createElement(Fe.a,{variant:"h6"},b.a.createElement("small",null,b.a.createElement("b",null,"Precisa de mais alguma coisa?"))),b.a.createElement(ie.a,{component:ec.a,color:"primary",onClick:function(){window.location.href="https://wa.me/5511997781301"}},"Nova Solicita\xe7\xe3o"))))}));nc.propTypes={classes:Z.a.object};var rc=Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},Yi(e)),{},{icon:{width:"100%",height:"100%",marginBottom:e.spacing(1),color:"#c5ccd2"},descriptionPlaceholder:{height:60}})}),{withTheme:!0})(nc),oc=Object(d.memo)((function(e){var t=e.servicesData;return e.servicesLoading?b.a.createElement(se,null):b.a.createElement(b.a.Fragment,null,b.a.createElement(oe.a,{container:!0,spacing:2},Object(N.map)(Object(N.get)(t,"services",[]),(function(e){return b.a.createElement(oe.a,{key:e.id,item:!0,xs:12,sm:4},b.a.createElement($i,{service:e}))})),b.a.createElement(oe.a,{item:!0,xs:12,sm:4},b.a.createElement(rc,null))))})),ic=ft(Hi.getServices,{name:"services",options:function(e){var t=e.setAlert;return{variables:{serviceType:Vi.SUBSCRIPTION},onRequestError:function(){t({alertMsg:"Erro ao carregar dados do servidor",alertType:"error",showAlert:!0})}}}}),cc=Object(Q.a)(ic)(oc),lc={createServiceRequest:function(e){var t=e.serviceId,a=e.dynamicQuestions;return R.post("/service_requests",{service_id:t,dynamic_questions:a})}},sc=function(e){var t=e.serviceData,a={validationErrors:{}};return Object(N.forEach)(Object(N.get)(t,"service.questions"),(function(e){a[e]=""})),a},mc=ft(Hi.getService,{name:"service",options:function(e){return{variables:e.match.params.serviceId}}}),uc=ft(lc.createServiceRequest,{name:"createServiceRequest",init:!1,options:function(e){var t=e.serviceData,a=e.formData,n=e.setFormData,r=e.setAlert,o=(a.validationErrors,Object(at.a)(a,["validationErrors"]));return{variables:{serviceId:Object(N.get)(t,"service.id"),dynamicQuestions:o},onRequestFinished:function(){r({alertMsg:"Recebemos sua solicita\xe7\xe3o, em breve responderemos via email.",alertType:"success",showAlert:!0}),n(sc({serviceData:t}))},onRequestError:function(e){r({alertMsg:"Erro ao solicitar servi\xe7o",alertType:"error",showAlert:!0}),n({validationErrors:Object(N.get)(e,"errors",{})})}}}}),dc=Object(Q.a)(d.memo,Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},Yi(e)),{},{title:{marginBottom:e.spacing(4)},subtitlesContainer:{marginBottom:e.spacing(1)},marginLeftContainer:{paddingLeft:e.spacing(4)},benefitsList:{margin:0,padding:0,paddingLeft:"1em"},textContentsContainer:{marginBottom:e.spacing(4)},questionContainer:{marginTop:e.spacing(3)},goBackButton:{marginRight:e.spacing(2)}})}),{withTheme:!0}),h.g,Object(Q.f)("formData","setFormDataRaw",sc),Object(Q.c)({setFormData:function(e){var t=e.setFormDataRaw,a=e.formData;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}),mc,uc)((function(e){var t=e.classes,a=e.serviceData,n=e.serviceLoading,r=e.formData,o=e.setFormData,i=e.createServiceRequestFetch,c=e.createServiceRequestLoading;if(n)return b.a.createElement(se,null);var l=r.validationErrors||{},s=function(){return i(!0)},m=function(e){e.ctrlKey&&13===e.keyCode&&s()},u=a.service;return b.a.createElement(b.a.Fragment,null,b.a.createElement(Fe.a,{className:t.title,variant:"h4"},u.title),b.a.createElement(oe.a,{container:!0,className:t.subtitlesContainer},b.a.createElement(oe.a,{item:!0,xs:6},b.a.createElement(Fe.a,{variant:"subtitle1"},b.a.createElement("b",null,u.subtitle))),b.a.createElement(oe.a,{item:!0,xs:6,className:t.marginLeftContainer},b.a.createElement(Fe.a,{variant:"subtitle1"},b.a.createElement("b",null,"N\xf3s lidamos com tudo")))),b.a.createElement(oe.a,{container:!0,className:t.textContentsContainer},b.a.createElement(oe.a,{item:!0,xs:6},b.a.createElement(Fe.a,{variant:"body2"},u.description)),b.a.createElement(oe.a,{item:!0,xs:6,className:t.marginLeftContainer},b.a.createElement("ul",{className:t.benefitsList},Object(N.map)(u.benefits,(function(e){return b.a.createElement("li",{key:e},b.a.createElement(Fe.a,{variant:"body2"},e))}))))),b.a.createElement(ia.a,{className:"".concat(t.container," ").concat(t.paper)},b.a.createElement(oe.a,{container:!0,item:!0,xs:12,sm:8,md:6,spacing:2},b.a.createElement(oe.a,{item:!0,xs:12},Object(N.map)(u.questions,(function(e){return b.a.createElement("div",{key:e,className:t.questionContainer},b.a.createElement(Fe.a,{variant:"subtitle1"},b.a.createElement("b",null,e)),b.a.createElement(ot,{onKeyDown:m,errors:l[e],disabled:c,value:r[e],onChange:function(t){return o(Object($.a)({},e,t.target.value))},multiline:!0,rows:2,rowsMax:2}))})),b.a.createElement("div",{className:t.actions},b.a.createElement(ie.a,{className:t.goBackButton,component:f.b,to:"/servicos",color:"default",size:"large",disabled:c},"Voltar"),b.a.createElement(ie.a,{variant:"contained",color:"primary",size:"large",onClick:s,disabled:c},c?"Aguarde...":"Enviar"))))))})),bc=Object(d.memo)((function(e){var t=e.classes,a=e.setAlert,n=e.children,r=M.getUserData(),o={name:"".concat(v()(r,"member.name","")," ").concat(v()(r,"member.lastname","")),email:v()(r,"member.email","")};return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:t.container},b.a.createElement("div",{className:t.headerView},b.a.createElement("aside",null,b.a.createElement(Fe.a,{variant:"h5"},b.a.createElement("b",null,"Servi\xe7os"))))),b.a.createElement("div",{className:t.container},b.a.createElement(zi,{pathBase:"/servicos"})),b.a.createElement("div",{className:t.container},b.a.cloneElement(n,{setAlert:a})),L.isProduction&&b.a.createElement(Bi.a,{license:L.livechatId,visitor:o}))})),pc=Object(Q.a)(Object(G.a)(Yi,{withTheme:!0}),(function(e){return function(t){return b.a.createElement(Fi,t,b.a.createElement(e,t))}}))(bc),gc=Object(d.memo)((function(){return b.a.createElement(h.d,null,b.a.createElement(h.b,{exact:!0,path:"/servicos"},b.a.createElement(h.a,{to:{pathname:"/servicos/sobdemanda"}})),b.a.createElement(h.b,{exact:!0,path:"/servicos/sobdemanda"},b.a.createElement(pc,null,b.a.createElement(Xi,null))),b.a.createElement(h.b,{exact:!0,path:"/servicos/recorrentes"},b.a.createElement(pc,null,b.a.createElement(cc,null))),b.a.createElement(h.b,{path:"/servicos/:serviceId/solicitar-servico"},b.a.createElement(Fi,null,b.a.createElement(dc,null))))})),fc=Wi({condition:function(e){return!Xe.includes(e.member.role)}})(gc),hc=Object(d.memo)((function(e){var t=e.classes,a=e.onClose,n=e.setAlert,r=e.formData,c=e.setFormData,l=e.checkEmailStep,s=e.refetch,m=e.setCheckEmailStep,d=e.loading,p=e.setLoading,g=e.errors,f=e.setErrors,h=e.locationsData,E=Object(Ut.a)(),v=Object(zt.a)(E.breakpoints.down("sm")),O=d||Object(N.isEmpty)(r.email),j=Object(N.get)(h,"locations",[]),k=function(e){c(Object(u.a)(Object(u.a)({},r),e))},y=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=16;break}return e.prev=1,f({}),p(!0),e.next=6,Kn.emailCheck(r.email);case 6:m(!1),U.hit("EmailChecked - Success"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),f(Object(N.mapValues)(Object(N.get)(e.t0,"errors",{}),(function(e){return e[0]})));case 13:p(!1),e.next=33;break;case 16:return e.prev=16,f({}),p(!0),e.next=21,Kn.createMember(Object(u.a)({},r));case 21:U.hit("MemberCreated - Success"),n({alertMsg:"Usu\xe1rio criado com sucesso",alertType:"success",showAlert:!0}),p(!1),a(),s(!0),e.next=33;break;case 28:e.prev=28,e.t1=e.catch(16),f(Object(N.mapValues)(Object(N.get)(e.t1,"errors",{}),(function(e){return e[0]}))),n({alertMsg:"N\xe3o foi poss\xedvel criar o usu\xe1rio",alertType:"error",showAlert:!0}),p(!1);case 33:case"end":return e.stop()}}),e,null,[[1,10],[16,28]])})));return function(){return e.apply(this,arguments)}}();return b.a.createElement(kn.a,{fullScreen:v,keepMounted:!0,fullWidth:!l,maxWidth:l?"sm":"md",classes:{paper:t.dialogMemberForm},open:!0},b.a.createElement(An.a,null,"Convidar usu\xe1rio",b.a.createElement(ze.a,{className:t.closeButton,onClick:a,disabled:d},b.a.createElement(Ue.a,null))),b.a.createElement(yn.a,{className:t.content},b.a.createElement(oe.a,{container:!0,direction:"row",spacing:1},l&&b.a.createElement(oe.a,{item:!0,xs:12,className:t.gridSizeMedium},b.a.createElement(ot,{label:"Email",disabled:d,errors:Object(N.get)(g,"email",[]),value:Object(N.get)(r,"email",""),onChangeText:function(e){return k({email:e})}})),!l&&b.a.createElement(b.a.Fragment,null,b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(ot,{label:"E-mail",disabled:!0,errors:Object(N.get)(g,"email",[]),value:Object(N.get)(r,"email",""),onChangeText:function(e){return k({email:e})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ot,{label:"Nome",disabled:d,errors:Object(N.get)(g,"name",[]),value:Object(N.get)(r,"name",""),onChangeText:function(e){return k({name:e})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ot,{label:"Sobrenome",disabled:d,errors:Object(N.get)(g,"lastname",[]),value:Object(N.get)(r,"lastname",""),onChangeText:function(e){return k({lastname:e})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ot,{label:"Cargo",disabled:d,value:Object(N.get)(r,"jobRole",""),onChangeText:function(e){return k({jobRole:e})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(mt,{label:"Telefone celular",disabled:d,value:Object(N.get)(r,"phone",""),onChange:function(e){return k({phone:(e.target.value||"").replace(/[\D]+/g,"").slice(0,15)})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(Fe.a,{variant:"h6",className:t.blockTitle},"Permiss\xe3o"),b.a.createElement(ut,{label:"N\xedvel de acesso",errors:Object(N.get)(g,"role",[]),value:Object(N.get)(r,"role",""),disabled:d,onChange:function(e){return k({role:e.target.value})},options:Ke})),b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(Fe.a,{variant:"h6",className:t.blockTitle},"Locais de acesso"),b.a.createElement(nt.a,{fullWidth:!0,error:!!g.location_ids},g.location_ids&&b.a.createElement(et.a,null,g.location_ids),j.map((function(e){return b.a.createElement(xn.a,{key:e.id,className:t.checkBox,classes:{label:t.checkboxLabel},control:b.a.createElement(Rt.a,{checked:e.checked,disabled:d,onChange:function(){return function(e){var t=[];t=Object(N.includes)(Object(N.get)(r,"locationIds",[]),e)?Object(N.pull)(r.locationIds,e):r.locationIds.concat([e]),c(Object(u.a)(Object(u.a)({},r),{},{locationIds:t}))}(e.id)},value:e.id}),label:e.name})}))))))),b.a.createElement(Cn.a,{className:t.actions},b.a.createElement(oe.a,{container:!0,justify:l?"":"space-between",spacing:2},!l&&b.a.createElement(oe.a,{item:!0,xs:12,sm:8}),b.a.createElement(oe.a,{item:!0,xs:6,sm:l?6:2},b.a.createElement(ie.a,{fullWidth:!0,color:"default",size:"large",variant:"contained",onClick:function(){a()},disabled:d},"CANCELAR")),b.a.createElement(oe.a,{item:!0,xs:6,sm:l?6:2},b.a.createElement(ie.a,{fullWidth:!0,color:"primary",size:"large",variant:"contained",onClick:y,disabled:O},l?"PR\xd3XIMO":"SALVAR")))))})),Ec=ft(Ai.getLocations,{name:"locations"}),vc={role:Ke[0].value,locationIds:[]},Oc=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{actions:{margin:15,marginBottom:20},content:{marginTop:-20,overflowX:"hidden"},dialogMemberForm:{maxWidth:"50rem"},blockTitle:{marginTop:15},checkboxLabel:{fontSize:e.typography.caption.fontSize},gridSizeMedium:{width:400}})}),{withTheme:!0}),Object(Q.f)("formData","setFormData",vc),Object(Q.f)("loading","setLoading",!1),Object(Q.f)("errors","setErrors",{}),Object(Q.f)("checkEmailStep","setCheckEmailStep",!0),Ec)(hc),jc=Object(d.memo)((function(e){var t=e.setLocationOptionChecked,a=e.isLoading,n=e.formData,r=e.setFormData,o=e.classes,i=e.isSubmiting;if(a)return b.a.createElement(se,null);var c=n.locationsOptions,l=n.validationErrors||{};return b.a.createElement(b.a.Fragment,null,b.a.createElement(oe.a,{container:!0,direction:"row",spacing:1},b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ot,{errors:Object(N.get)(l,"name",[]),label:"Nome",disabled:i,value:Object(N.get)(n,"name")||"",onChangeText:function(e){return r({name:e})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ot,{errors:Object(N.get)(l,"lastname",[]),label:"Sobrenome",disabled:i,value:Object(N.get)(n,"lastname")||"",onChangeText:function(e){return r({lastname:e})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ot,{errors:Object(N.get)(l,"email",[]),label:"E-mail",disabled:!0,value:Object(N.get)(n,"email")||"",onChangeText:function(e){return r({email:e})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(mt,{errors:Object(N.get)(l,"phone",[]),label:"Telefone celular",disabled:i,value:Object(N.get)(n,"phone")||"",onChangeText:function(e){return r({phone:e})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ot,{label:"Cargo",value:Object(N.get)(n,"job_role")||"",onChangeText:function(e){return r({job_role:e})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6}),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(Fe.a,{variant:"h6"},"Permiss\xe3o"),b.a.createElement(ut,{errors:Object(N.get)(l,"role",[]),label:"N\xedvel de acesso",value:Object(N.get)(n,"role")||"",disabled:i,onChange:function(e){return r({role:e.target.value})},options:Ke})),b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(Fe.a,{variant:"h6"},"Locais de acesso"),b.a.createElement(nt.a,{fullWidth:!0,error:!!l.location_ids},l.location_ids&&b.a.createElement(et.a,null,l.location_ids),c.map((function(e){return b.a.createElement(xn.a,{key:e.value,classes:{label:o.checkboxLabel},control:b.a.createElement(Rt.a,{checked:e.checked,disabled:i,onChange:function(a){t({locationId:e.value,checked:a.target.checked})},value:e.value}),label:e.label})}))))))})),kc=Object(Q.a)(ne,Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{checkboxLabel:{fontSize:e.typography.caption.fontSize}})}),{withTheme:!0}),Ri,Object(Q.c)({setLocationOptionChecked:function(e){var t=e.formData,a=e.setFormData;return function(e){var n=e.locationId,r=e.checked,o=t.locationsOptions;a({locationsOptions:Object(N.map)(o,(function(e){return e.value===n?Object(u.a)(Object(u.a)({},e),{},{checked:r}):e}))})}}}),Object(Q.e)(["viewer","member"],(function(e){var t=e.member,a=e.viewer,n=e.setFormData;if(!a)return null;var r=Object(N.get)(t,"locations",[]),o=Object(N.get)(a,"member.locations",[]).map((function(e){return{label:e.name,value:e.id,checked:r.some((function(t){return e.id===t.id}))}})),i=Object(u.a)({locationsOptions:o},t);return n(Object(u.a)(Object(u.a)({},i),{},{previousValues:i})),!0})))(jc),yc=Object(d.memo)((function(e){var t=e.member,a=e.isLoading,n=e.open,r=e.classes,o=e.formData,i=e.setFormData,c=e.onClose,l=e.updateMemberFetch,s=e.updateMemberLoading,m=e.blockMemberFetch,u=e.blockMemberLoading,d=Object(Ut.a)(),p=Object(zt.a)(d.breakpoints.down("sm")),g=a,f=s||u,h=Object(N.get)(t,"role","");return b.a.createElement(kn.a,{fullScreen:p,keepMounted:!0,fullWidth:!0,maxWidth:"md",classes:{paper:r.dialogMemberForm},open:n,onClose:function(){return c({shouldRefetch:!1})}},b.a.createElement(An.a,null,"Editar usu\xe1rio",b.a.createElement(ze.a,{className:r.closeButton,onClick:function(){return c({shouldRefetch:!1})}},b.a.createElement(Ue.a,null))),b.a.createElement(yn.a,{className:r.content},b.a.createElement(kc,{member:t,formData:o,setFormData:i,isLoading:g,isSubmiting:f})),b.a.createElement(Cn.a,{className:r.actions},b.a.createElement(oe.a,{container:!0,justify:"space-between",spacing:2},b.a.createElement(oe.a,{item:!0,xs:12,sm:8},"OWNER"!==h&&b.a.createElement(ie.a,{fullWidth:p,color:"secondary",size:"large",variant:p?"outlined":"contained",onClick:function(){window.confirm("Tem certeza em bloquear esse usu\xe1rio?")&&m(!0,"",null,Object(N.get)(t,"id",""))},disabled:g||f},"DESATIVAR USU\xc1RIO")),b.a.createElement(oe.a,{item:!0,xs:6,sm:2},b.a.createElement(ie.a,{fullWidth:!0,color:"default",size:"large",variant:"contained",onClick:function(){return c({shouldRefetch:!1})},disabled:g||f},"CANCELAR")),b.a.createElement(oe.a,{item:!0,xs:6,sm:2},b.a.createElement(ie.a,{fullWidth:!0,color:"primary",size:"large",variant:"contained",onClick:function(){return l(!0).catch((function(){}))},disabled:g||f},"SALVAR")))))})),Cc=ft(Kn.updateMember,{name:"updateMember",init:!1,options:function(e){var t=e.formData,a=e.setFormData,n=e.member,r=e.setAlert,o=e.onClose,i=Object(N.pickBy)(t,(function(e,a){var n=t.previousValues[a];return!Object(N.isEqual)(n,e)})),c={};i.locationsOptions&&(c={locationIds:Object(N.map)(Object(N.pickBy)(i.locationsOptions,{checked:!0}),(function(e){return e.value}))});return{variables:Object(u.a)(Object(u.a)({id:n.id},i),c),onRequestFinished:function(){var e=M.getUserData();n.id===e.member.id&&M.setUserData(Object(N.merge)(e,{member:Object(N.merge)(e.memeber,i)})),r({alertMsg:"Usu\xe1rio alterado com sucesso",alertType:"success",showAlert:!0}),o({shouldRefetch:!0})},onRequestError:function(e){var t=Object(N.get)(e,"error","");r({alertMsg:t||"Erro ao alterar este usu\xe1rio",alertType:"error",showAlert:!0});var n=Object(N.mapValues)(Object(N.get)(e,"errors",{}),(function(e){return e[0]}));a({validationErrors:n})}}}}),Ac=ft(Kn.blockMember,{name:"blockMember",init:!1,options:function(e){var t=e.member,a=e.onClose,n=e.setAlert;return{variables:Object(N.get)(t,"id"),onRequestFinished:function(){n({alertMsg:"Usu\xe1rio bloqueado com sucesso",alertType:"success",showAlert:!0}),a({shouldRefetch:!0})},onRequestError:function(){n({alertMsg:"Erro ao bloquear este usu\xe1rio",alertType:"error",showAlert:!0})}}}}),wc=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{actions:{margin:15,marginBottom:20},content:{marginTop:-20,overflowX:"hidden"},dialogMemberForm:{maxWidth:"50rem"}})}),{withTheme:!0}),Object(Q.f)("formData","setFormDataRaw",{locationsOptions:[],previousValues:{},validationErrors:{}}),Object(Q.c)({setFormData:function(e){var t=e.setFormDataRaw,a=e.formData;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}),Ac,Cc)(yc),Tc=function(e){return Object(u.a)({},ee(e))},xc=Object(Q.a)(Object(Q.f)("openModal","setOpenModal",!1),Object(Q.f)("canResendInivitation","setCanResendInivitation",!0))((function(e){var t=e.classes,a=e.canResendInivitation,n=e.setCanResendInivitation,r=e.setAlert,c=e.member,l=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(!1),e.next=4,Kn.resendInvitationEmail(c.id);case 4:U.hit("NewMemberInvitation - Resend"),r({alertMsg:"Convite enviado com sucesso",alertType:"success",showAlert:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r({alertMsg:"Erro ao enviar email",alertType:"error",showAlert:!0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return b.a.createElement(b.a.Fragment,null,b.a.createElement(ie.a,{className:t.smallScreenResendButton,variant:"outlined",size:"large",onClick:l,disabled:!a},a?"Reenviar convite":"Convite enviado"))})),Sc=ft(Kn.getMember,{name:"member",init:!1,options:function(e){return{variables:e.memberId}}}),Nc=Object(Q.a)(Object(Q.f)("openModal","setOpenModal",!1),Sc,Object(Q.e)(["openModal"],(function(e){var t=e.openModal,a=e.memberFetch;t&&a(!0)})))((function(e){var t=e.memberData,a=e.memberLoading,n=e.refetch,r=e.openModal,c=e.setOpenModal,l=e.setAlert,s=Object(N.get)(t,"member"),m=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shouldRefetch){e.next=4;break}return e.next=4,n(!1);case 4:U.hit("MembersFormModal - Closed"),c(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return b.a.createElement(b.a.Fragment,null,b.a.createElement(ie.a,{variant:"outlined",size:"large",onClick:function(){U.hit("MembersFormModal - Opened"),c(!0)}},"Editar"),r&&b.a.createElement(wc,{isLoading:a,member:s,open:r,onClose:m,setAlert:l}))})),Dc=Object(d.memo)((function(e){var t=e.viewer,a=e.index,n=e.member,r=e.classes,o=e.refetch,i=e.setAlert;if(!t)return null;var c=Object(N.get)(Object(N.find)(Ke,(function(e){return e.value===Object(N.get)(n,"role")})),"label"),l="".concat(Object(N.get)(n,"name")," ").concat(Object(N.get)(n,"lastname")),s=Object(N.get)(n,"email"),m=Object(N.get)(n,"photo_url"),u=Object(N.get)(n,"locations"),d=Object(N.map)(u,(function(e){return e.name})).join(", "),p=Xe.includes(t.member.role),g=!0===n.must_change_password;return b.a.createElement(Lt.a,{className:a%2?r.bgWhite:r.bgGray},b.a.createElement(Ft.a,{className:r.tableSmallCell},b.a.createElement("div",{className:r.avatarNameContainer},b.a.createElement(aa,{name:l,photoUrl:m}),b.a.createElement("span",{className:"".concat(r.cellText," ").concat(r.userName)},l))),b.a.createElement(Ft.a,{className:r.tableSmallCell},b.a.createElement("span",{className:r.cellText},s)),b.a.createElement(Ft.a,{className:r.tableSmallCell},b.a.createElement("span",{className:r.cellText},c)),b.a.createElement(Ft.a,{className:r.tableSmallCell},b.a.createElement("span",{className:r.cellText},d)),b.a.createElement(Ft.a,{className:r.tableMediumCell},b.a.createElement(oe.a,{container:!0,item:!0},b.a.createElement(oe.a,{item:!0,xs:12},p&&b.a.createElement(Nc,{memberId:n.id,refetch:o,setAlert:i})),b.a.createElement(oe.a,{item:!0,xs:12},g&&b.a.createElement(xc,{member:n,refetch:o,setAlert:i,classes:r})))))})),Mc=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},Tc(e)),{},{cellText:{color:"#313131",fontSize:14},userName:{marginRight:5,marginLeft:10},avatarNameContainer:{display:"flex",alignItems:"center"},smallScreenResendButton:{marginTop:10}})}),{withTheme:!0}),Ri)(Dc),Ic=Object(d.memo)((function(e){var t=e.membersData,a=e.membersLoading,n=e.openCreateMemberModal,r=e.setOpenCreateMemberModal,o=e.classes,i=e.membersFetch,c=e.setAlert,l=M.getUserData(),s=Object(N.get)(l,"member.id"),m=Object(N.get)(t,"members");return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:o.container},b.a.createElement("div",{className:o.headerView},b.a.createElement("aside",null,b.a.createElement(Fe.a,{variant:"h6"},b.a.createElement("b",null,"Usu\xe1rios (".concat(Object(N.size)(m),")")))),b.a.createElement("aside",null,b.a.createElement(ie.a,{size:"large",color:"primary",variant:"contained",onClick:function(){r(!0),U.hit("NewMemberModal - Opened")}},"CONVIDAR USU\xc1RIO")))),b.a.createElement("div",{className:o.container},b.a.createElement(ia.a,{className:o.tablePaper},b.a.createElement(It.a,null,b.a.createElement(Bt.a,null,b.a.createElement(Lt.a,null,b.a.createElement(Ft.a,{className:o.tableCell},"NOME"),b.a.createElement(Ft.a,{className:o.tableCell},"EMAIL"),b.a.createElement(Ft.a,{className:o.tableCell},"PERMISS\xc3O DE ACESSO"),b.a.createElement(Ft.a,{className:o.tableCell},"LOCAIS"))),b.a.createElement(qt.a,null,a?b.a.createElement(Lt.a,null,b.a.createElement(Ft.a,{colSpan:5,align:"center"},b.a.createElement(se,null))):Object(N.size)(m)?m.map((function(e,t){return b.a.createElement(Mc,{loggedMemberId:s,refetch:i,setAlert:c,index:t,key:e.id,member:e,loading:a})})):b.a.createElement(Lt.a,null,b.a.createElement(Ft.a,{className:o.empty,colSpan:5,align:"center"},"Nenhum usu\xe1rio cadastrado")),n&&b.a.createElement(Oc,{onClose:function(){r(!1)},setAlert:c,refetch:i}))))))})),Bc=ft(Kn.getMembers,{name:"members",options:function(e){var t=e.setAlert;return{onRequestError:function(){t({alertMsg:"Erro ao carregar dados do servidor",alertType:"error",showAlert:!0})}}}}),Lc=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},Tc(e)),{},{container:{marginBottom:30,marginTop:30},empty:{backgroundColor:"#EEE"},tableCell:{fontSize:14},titleTableCell:{fontSize:20}})}),{withTheme:!0}),Object(Q.f)("openCreateMemberModal","setOpenCreateMemberModal",!1),Wi({condition:function(e){return!Xe.includes(e.member.role)}}),Bc)(Ic),Fc=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=t.showAlert,o=t.alertMsg,i=t.alertType,c=null;return r&&(c=b.a.createElement(Ge,{message:o,type:i,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}})),b.a.createElement("div",{className:n.root},b.a.createElement(Sa,{alertBox:c}),b.a.createElement("section",null,b.a.createElement("div",{className:n.container},b.a.createElement("div",{className:n.headerView},b.a.createElement("aside",null,b.a.createElement(Fe.a,{variant:"h5"},b.a.createElement("b",null,"Configura\xe7\xf5es"))))),b.a.createElement("div",{className:n.container},b.a.createElement(Ra,null)),b.a.createElement("div",{className:n.container},b.a.createElement(Lc,{setAlert:a}))))})),Rc=Object(Q.a)(Object(G.a)(Tc,{withTheme:!0}),Object(Q.f)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}))(Fc),Pc=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.WrappedComponent,o=a.showAlert,i=a.alertMsg,c=a.alertType,l=null;return o&&(l=b.a.createElement(Ge,{message:i,type:c,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}})),b.a.createElement("div",{className:t.root},b.a.createElement(Sa,{alertBox:l}),b.a.createElement("section",null,b.a.createElement("div",{className:t.container},b.a.createElement("div",{className:t.headerView},b.a.createElement("aside",null,b.a.createElement(Fe.a,{variant:"h5"},b.a.createElement("b",null,"Configura\xe7\xf5es"))))),b.a.createElement("div",{className:t.container},b.a.createElement(Ra,{setAlert:n})),b.a.createElement("div",{className:t.container},b.a.createElement(r,{setAlert:n}))))})),_c=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)({},ee(e))}),{withTheme:!0}),Object(Q.f)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}))(Pc),Wc=function(e){return function(t){return b.a.createElement(_c,Object.assign({},t,{WrappedComponent:e}))}},qc=[{label:"AC",value:"AC"},{label:"AL",value:"AL"},{label:"AP",value:"AP"},{label:"AM",value:"AM"},{label:"BA",value:"BA"},{label:"CE",value:"CE"},{label:"DF",value:"DF"},{label:"ES",value:"ES"},{label:"GO",value:"GO"},{label:"MA",value:"MA"},{label:"MT",value:"MT"},{label:"MS",value:"MS"},{label:"MG",value:"MG"},{label:"PA",value:"PA"},{label:"PB",value:"PB"},{label:"PR",value:"PR"},{label:"PE",value:"PE"},{label:"PI",value:"PI"},{label:"RJ",value:"RJ"},{label:"RN",value:"RN"},{label:"RS",value:"RS"},{label:"RO",value:"RO"},{label:"RR",value:"RR"},{label:"SC",value:"SC"},{label:"SP",value:"SP"},{label:"SE",value:"SE"},{label:"TO",value:"TO"}],Uc=Object(d.memo)((function(e){var t=e.formData,a=e.setFormData,n=e.isLoading;if(n)return b.a.createElement(se,null);var r=t.validationErrors||{};return b.a.createElement(oe.a,{container:!0,direction:"row",spacing:1},b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ot,{errors:r.name,label:"Apelido",placeholder:"Endere\xe7o principal, Nome da sede, etc",disabled:n,value:t.name,onChange:function(e){return a({name:e.target.value})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ot,{errors:r.address,label:"Endere\xe7o completo",placeholder:"Rua Monteiro Lobato, 555",disabled:n,value:t.address,onChange:function(e){return a({address:e.target.value})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ot,{errors:r.complement,label:"Complemento",disabled:n,value:t.complement,onChange:function(e){return a({complement:e.target.value})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ot,{errors:r.neighborhood,label:"Bairro",disabled:n,value:t.neighborhood,onChange:function(e){return a({neighborhood:e.target.value})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ot,{errors:r.city,label:"Cidade",disabled:n,value:t.city,onChange:function(e){return a({city:e.target.value})}})),b.a.createElement(oe.a,{item:!0,xs:6,sm:3},b.a.createElement(ut,{errors:r.state,label:"Estado",disabled:n,value:t.state,onChange:function(e){return a({state:e.target.value})},options:qc,emptyOptionLabel:"Estado"})),b.a.createElement(oe.a,{item:!0,xs:6,sm:3},b.a.createElement(ct,{errors:r.zip_code,label:"CEP",disabled:n,value:t.zip_code,onChangeText:function(e){return a({zip_code:e})}})))})),zc=Object(d.memo)((function(e){var t=e.classes,a=e.open,n=e.onClose,r=e.modalTitle,o=e.formData,i=e.setFormData,c=e.onSubmit,l=e.isLoading,s=Object(Ut.a)(),m=Object(zt.a)(s.breakpoints.down("sm"));return b.a.createElement(kn.a,{fullScreen:m,keepMounted:!0,fullWidth:!0,maxWidth:"md",classes:{paper:t.dialogMemberForm},open:a,onClose:n},b.a.createElement(An.a,null,r,b.a.createElement(ze.a,{className:t.closeButton,onClick:function(){return n({shouldRefetch:!1})}},b.a.createElement(Ue.a,null))),b.a.createElement(yn.a,{className:t.content},b.a.createElement(Uc,{formData:o,setFormData:i,isLoading:l})),b.a.createElement(Cn.a,{className:t.actions},b.a.createElement(oe.a,{container:!0,justify:"flex-end",spacing:2},b.a.createElement(oe.a,{item:!0,xs:6,sm:2},b.a.createElement(ie.a,{fullWidth:!0,color:"default",size:"large",variant:"contained",onClick:n,disabled:l},"CANCELAR")),b.a.createElement(oe.a,{item:!0,xs:6,sm:2},b.a.createElement(ie.a,{fullWidth:!0,color:"primary",size:"large",variant:"contained",onClick:c,disabled:l},"SALVAR")))))})),Vc=Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{actions:{margin:15,marginBottom:20},content:{marginTop:-20,overflowX:"hidden"},dialogMemberForm:{maxWidth:"50rem"}})}),{withTheme:!0})(zc),Hc=Object(d.memo)((function(e){var t=e.isModalOpen,a=e.setIsModalOpen,n=e.onClose,r=e.formData,o=e.setFormData,i=e.updateLocationFetch,c=e.updateLocationLoading;return b.a.createElement(b.a.Fragment,null,b.a.createElement(ie.a,{variant:"outlined",size:"large",onClick:function(){U.hit("EditLocationModal - Opened"),a(!0)}},"EDITAR"),t&&b.a.createElement(Vc,{open:t,onClose:n,modalTitle:"Editar Local",formData:r,setFormData:o,onSubmit:function(){return i(!0).catch((function(){}))},isLoading:c}))})),Yc=ft(Ai.updateLocation,{name:"updateLocation",init:!1,options:function(e){var t=e.location,a=e.formData.changedFields,n=e.setFormData,r=e.setAlert,o=e.onUpdated,i=e.onClose;return{variables:{id:t.id,changes:a},onRequestFinished:function(){r({alertMsg:"Local criado alterado sucesso",alertType:"success",showAlert:!0}),o(),i()},onRequestError:function(e){r({alertMsg:"Erro ao alterar este local",alertType:"error",showAlert:!0}),n({validationErrors:Object(N.get)(e,"errors",{})})}}}}),Qc=Object(Q.a)(Object(Q.f)("isModalOpen","setIsModalOpen",!1),Uo((function(e){return e.location})),Object(Q.c)({onClose:function(e){var t=e.resetFormData,a=e.setIsModalOpen;return function(){U.hit("EditLocationModal - Closed"),t(),a(!1)}}}),Yc)(Hc),Gc=Object(d.memo)((function(e){var t=e.classes,a=e.setAlert,n=e.refetch,r=e.index,o=e.location,i=e.toggleActiveFetch,c=e.toggleActiveLoading,l=e.isActive,s=e.setIsActive,m=o||{},u=m.name,d=m.complement,p=m.address,g=m.city,f=m.state,h=d?"".concat(p,", ").concat(d):p,E=g&&f?"".concat(g,"/").concat(f):"";return b.a.createElement(Lt.a,{className:r%2?t.bgWhite:t.bgGray},b.a.createElement(Ft.a,{className:t.tableSmallCell},b.a.createElement("span",{className:t.cellText},u)),b.a.createElement(Ft.a,{className:t.tableSmallCell},b.a.createElement("span",{className:t.cellText},h)),b.a.createElement(Ft.a,{className:t.tableSmallCell},b.a.createElement("span",{className:t.cellText},E)),b.a.createElement(Ft.a,{className:t.tableSmallCell},b.a.createElement(eo.a,{color:"primary",disabled:c,checked:l,onChange:function(){s(!l),i(!0)}})),b.a.createElement(Ft.a,{className:t.tableSmallCell},b.a.createElement(Qc,{setAlert:a,onUpdated:n,location:o})))})),Jc=ft(Ai.toggleActive,{name:"toggleActive",init:!1,options:function(e){var t=e.location,a=e.refetch,n=e.setAlert,r=e.isActive,o=e.setIsActive;return{variables:t.id,onRequestFinished:function(){a()},onRequestError:function(){n({alertMsg:"Erro ao desabilitar este local",alertType:"error",showAlert:!0}),o(!r)}}}}),Kc=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{cellText:{color:"#313131",fontSize:14}})}),{withTheme:!0}),Object(Q.f)("isActive","setIsActive",(function(e){var t=e.location;return Object(N.isEmpty)(t.deleted_at)})),Jc)(Gc),Xc=Object(d.memo)((function(e){var t=e.locationsData,a=e.locationsLoading,n=e.locationsFetch,r=e.setAlert,o=e.classes,i=Object(N.get)(t,"locations",[]);return b.a.createElement(It.a,null,b.a.createElement(Bt.a,null,b.a.createElement(Lt.a,null,b.a.createElement(Ft.a,{className:o.tableCell},"NOME"),b.a.createElement(Ft.a,{className:o.tableCell},"ENDERE\xc7O"),b.a.createElement(Ft.a,{className:o.tableCell},"CIDADE"),b.a.createElement(Ft.a,{className:o.tableCell},"HABILITAR"),b.a.createElement(Ft.a,{className:o.tableCell}))),b.a.createElement(qt.a,null,a?b.a.createElement(Lt.a,null,b.a.createElement(Ft.a,{colSpan:4,align:"center"},b.a.createElement(se,null))):Object(N.size)(i)?i.map((function(e,t){return b.a.createElement(Kc,{key:e.id,setAlert:r,index:t,location:e,refetch:n})})):b.a.createElement(Lt.a,null,b.a.createElement(Ft.a,{className:o.empty,colSpan:4,align:"center"},"Nenhum local cadastrado"))))})),Zc=Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{empty:{backgroundColor:"#EEE"},tableCell:{fontSize:14}})}),{withTheme:!0})(Xc),$c={validationErrors:{},name:"",address:"",neighborhood:"",city:"",state:"",zip_code:"",complement:""},el=Object(d.memo)((function(e){var t=e.isModalOpen,a=e.setIsModalOpen,n=e.onClose,r=e.formData,o=e.setFormData,i=e.createLocationFetch,c=e.createLocationLoading;return b.a.createElement(b.a.Fragment,null,b.a.createElement(ie.a,{color:"primary",size:"large",variant:"contained",onClick:function(){U.hit("NewLocationModal - Opened"),a(!0)}},"NOVO LOCAL"),t&&b.a.createElement(Vc,{open:t,onClose:n,modalTitle:"Novo Local",formData:r,setFormData:o,onSubmit:function(){return i(!0)},isLoading:c}))})),tl=ft(Ai.createLocation,{name:"createLocation",init:!1,options:function(e){var t=e.formData,a=e.setFormData,n=e.setAlert,r=e.onCreated,o=e.onClose;t.validationErrors;return{variables:Object(at.a)(t,["validationErrors"]),onRequestFinished:function(){n({alertMsg:"Local criado com sucesso",alertType:"success",showAlert:!0}),r(),o()},onRequestError:function(e){n({alertMsg:"Erro ao criar local",alertType:"error",showAlert:!0}),a({validationErrors:Object(N.get)(e,"errors",{})})}}}}),al=Object(Q.a)(Object(Q.f)("isModalOpen","setIsModalOpen",!1),Object(Q.f)("formData","setFormDataRaw",$c),Object(Q.c)({setFormData:function(e){var t=e.setFormDataRaw,a=e.formData;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}),Object(Q.c)({onClose:function(e){var t=e.setFormData,a=e.setIsModalOpen;return function(){U.hit("NewLocationModal - Closed"),t($c),a(!1)}}}),tl)(el),nl=Object(d.memo)((function(e){var t=e.locationsData,a=e.locationsLoading,n=e.locationsFetch,r=e.classes,o=e.setAlert;return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:r.headerContainer},b.a.createElement(Fe.a,{variant:"h6"},b.a.createElement("b",null,"Locais (".concat(Object(N.get)(t,"meta.totalCount",0),")"))),b.a.createElement(al,{setAlert:o,onCreated:n})),b.a.createElement(ia.a,{className:r.tablePaper},b.a.createElement(Zc,{setAlert:o,locationsData:t,locationsLoading:a,locationsFetch:n})))})),rl=ft(Ai.getLocations,{name:"locations",options:function(e){var t=e.setAlert;return{variables:!0,onRequestFinished:function(e){var t=Object(N.reject)(Object(N.get)(e,"locations",[]),(function(e){return Object(N.get)(e,"deleted_at")}));M.setUserData(Object(N.set)(M.getUserData(),"member.locations",t))},onRequestError:function(){t({alertMsg:"Erro ao carregar dados do servidor",alertType:"error",showAlert:!0})}}}}),ol=Object(Q.a)(Wc,Wi({condition:function(e){return!Xe.includes(e.member.role)}}),Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:30,marginBottom:30}})}),{withTheme:!0}),rl)(nl),il=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=e.updateMemberFetch,o=e.updateMemberLoading,i=e.errors,c=e.email,l=e.name,s=e.lastname,m=e.setName,u=e.setLastname,d=e.jobRole,p=e.setJobRole,g=t.showAlert,f=t.alertMsg,h=t.alertType,E=null;g&&(E=b.a.createElement(Ge,{message:f,type:h,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var O=o;return b.a.createElement("div",{className:n.root},b.a.createElement(Sa,{alertBox:E}),b.a.createElement("section",null,b.a.createElement("div",{className:n.container},b.a.createElement("div",{className:n.headerView},b.a.createElement("aside",null,b.a.createElement(Fe.a,{variant:"h5"},b.a.createElement("b",null,"Configura\xe7\xf5es"))))),b.a.createElement("div",{className:n.container},b.a.createElement(Ra,null)),b.a.createElement("br",null),b.a.createElement("div",{className:n.container},b.a.createElement(ia.a,{className:n.paper},b.a.createElement(oe.a,{container:!0,item:!0,xs:12,sm:6,md:4},b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(ot,{errors:v()(i,"name",[]),label:"Nome",className:n.input,disabled:O,value:l,onChange:function(e){return m(e.target.value)}})),b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(ot,{errors:v()(i,"lastname",[]),label:"Sobrenome",className:n.input,disabled:O,value:s,onChange:function(e){return u(e.target.value)}})),b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(ot,{disabled:!0,label:"Email",className:n.input,value:c})),b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(ot,{errors:v()(i,"jobRole",[]),label:"Departamento",className:n.input,value:d,disabled:O,onChange:function(e){return p(e.target.value)}})),b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement("div",{className:n.actions},b.a.createElement(ie.a,{onClick:function(){return r(!0)},size:"large",color:"primary",variant:"contained",disabled:O},"Atualizar"))))))))})),cl=ft(Pa.updateMember,{name:"updateMember",init:!1,options:function(e){var t=e.name,a=e.lastname,n=e.jobRole,r=e.setAlert,c=e.setName,l=e.setLastname,s=e.setJobRole,m=e.setErrors;return{variables:{name:t,lastname:a,jobRole:n},onRequestFinished:function(){var e=Object(i.a)(o.a.mark((function e(){var i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.getEnterpriseUser();case 3:i=e.sent,d=v()(i,"enterprise_user"),M.setUserData(Object(u.a)(Object(u.a)({},d),{buildings:Nt()(v()(d,"buildings"),["name"])})),c(t),l(a),s(n),r({alertMsg:"Perfil atualizado com sucesso",alertType:"success",showAlert:!0}),m({}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),r({alertMsg:"Erro ao atualizar perfil",alertType:"error",showAlert:!0});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),onRequestError:function(e){m(v()(e,"errors",{})),r({alertMsg:"Erro ao atualizar perfil",alertType:"error",showAlert:!0})}}}}),ll=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{input:{marginBottom:0}})}),{withTheme:!0}),h.g,Object(Q.f)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Q.f)("disabled","setDisabled",!1),Object(Q.f)("name","setName",""),Object(Q.f)("lastname","setLastname",""),Object(Q.f)("email","setEmail",""),Object(Q.f)("jobRole","setJobRole",""),Object(Q.f)("errors","setErrors",{}),cl,Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.setName,a=e.setLastname,n=e.setEmail,r=e.setJobRole,o=M.getUserData();t(v()(o,"member.name")),a(v()(o,"member.lastname")),n(v()(o,"member.email")),r(v()(o,"member.job_role"))}}))(il),sl=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=e.password,o=e.errors,i=e.confirmPassword,c=e.setPassword,l=e.setConfirmPassword,s=e.updateMemberFetch,m=e.updateMemberLoading,u=t.showAlert,d=t.alertMsg,p=t.alertType,g=null;u&&(g=b.a.createElement(Ge,{message:d,type:p,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var f=m;return b.a.createElement("div",{className:n.root},b.a.createElement(Sa,{alertBox:g}),b.a.createElement("section",null,b.a.createElement("div",{className:n.container},b.a.createElement("div",{className:n.headerView},b.a.createElement("aside",null,b.a.createElement(Fe.a,{variant:"h5"},b.a.createElement("b",null,"Configura\xe7\xf5es"))))),b.a.createElement("div",{className:n.container},b.a.createElement(Ra,null)),b.a.createElement("br",null),b.a.createElement("div",{className:n.container},b.a.createElement(ia.a,{className:n.paper},b.a.createElement(oe.a,{container:!0,item:!0,xs:12,sm:6,md:4},b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(ot,{errors:v()(o,"password",[]),label:"Nova senha",type:"password",className:n.input,disabled:f,value:r,onChange:function(e){return c(e.target.value)}})),b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(ot,{label:"Confirmar nova senha",type:"password",className:n.input,disabled:f,value:i,onChange:function(e){return l(e.target.value)}})),b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement("div",{className:n.actions},b.a.createElement(ie.a,{onClick:function(){r===i?s(!0):a({alertMsg:"As senhas est\xe3o diferentes",alertType:"error",showAlert:!0})},size:"large",color:"primary",variant:"contained",disabled:f},"Atualizar"))))))))})),ml=ft(Pa.updateMemberPassword,{name:"updateMember",init:!1,options:function(e){var t=e.password,a=e.setAlert,n=e.setPassword,r=e.setConfirmPassword,o=e.setErrors;return{variables:{password:t},onRequestFinished:function(){a({alertMsg:"Perfil atualizado com sucesso",alertType:"success",showAlert:!0}),n(""),r(""),o({})},onRequestError:function(e){o(v()(e,"errors",{})),a({alertMsg:"Erro ao atualizar perfil",alertType:"error",showAlert:!0})}}}}),ul=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},ee(e)),{},{input:{marginBottom:0}})}),{withTheme:!0}),Object(Q.f)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Q.f)("password","setPassword",""),Object(Q.f)("confirmPassword","setConfirmPassword",""),Object(Q.f)("errors","setErrors",{}),ml)(sl),dl=function(e){return Object(u.a)({},ee(e))},bl=Object(d.memo)((function(e){var t=e.classes,a=e.onClose,n=e.formData,r=e.setFormData,c=e.ticketCategory,l=e.setErrors,s=e.loading,m=e.errors,d=e.assignees,p=e.setLoading,g=e.setAlert,f=e.refetch,h=e.open,E=s||Object(N.isEmpty)(n.title),v=Object(Ut.a)(),O=Object(zt.a)(v.breakpoints.down("sm")),j=Object(N.get)(n,"formQuestions",[]),k=function(e){r(Object(u.a)(Object(u.a)({},n),e))},y=function(e,t,a){j[a][e]=t,k({formQuestions:Object(N.cloneDeep)(j)})},C=function(){var e=!1;return k({formQuestions:Object(N.cloneDeep)(j.map((function(t){var a=Object(N.isEmpty)(t.question),n=bi.includes(t.field_type)&&Object(N.isEmpty)(t.options);return e||(e=a||n),Object(u.a)(Object(u.a)({},t),{},{optionsError:n,questionError:a})})))}),e},A=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C()){e.next=19;break}return p(!0),e.prev=2,t=Object(u.a)({id:c.id},n),e.next=6,ei.updateCategory(t);case 6:return U.hit("TicketCategoryUpdated - Success"),g({alertMsg:"Categoria atualizada com sucesso",alertType:"success",showAlert:!0}),p(!1),e.next=11,f(!0);case 11:a(),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),l(Object(N.mapValues)(Object(N.get)(e.t0,"errors",{}),(function(e){return Object(N.first)(e)}))),g({alertMsg:"Erro ao atualizar categoria",alertType:"error",showAlert:!0}),p(!1);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return h?b.a.createElement(kn.a,{fullScreen:O,keepMounted:!0,fullWidth:!0,maxWidth:"sm",classes:{paper:t.dialogMemberForm},open:!0},b.a.createElement(An.a,null,"Editar categoria",b.a.createElement(ze.a,{className:t.closeButton,onClick:a,disabled:s},b.a.createElement(Ue.a,null))),b.a.createElement(yn.a,{className:t.content},b.a.createElement(oe.a,{container:!0,direction:"row",spacing:1},b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(ot,{disabled:s,label:"T\xedtulo",errors:Object(N.get)(m,"title",[]),value:Object(N.get)(n,"title",""),onChange:function(e){return k({title:e.target.value})}})),b.a.createElement(oe.a,{item:!0,xs:7,sm:6},b.a.createElement(ut,{disabled:s,errors:Object(N.get)(m,"assignee_id",[]),label:"Respons\xe1vel",value:Object(N.get)(n,"assigneeId",""),onChange:function(e){return k({assigneeId:e.target.value})},emptyOptionLabel:"Nenhum respons\xe1vel",options:d.map((function(e){return{label:"".concat(e.name," ").concat(e.lastname),value:e.id}}))})),b.a.createElement(oe.a,{item:!0,xs:5,sm:6},b.a.createElement(ot,{type:"tel",disabled:s,label:"Prazo de resolu\xe7\xe3o (em dias)",errors:Object(N.get)(m,"deadline_in_days",[]),value:Object(N.get)(n,"deadlineInDays",""),onChange:function(e){return k({deadlineInDays:(e.target.value||"").replace(/[\D]+/g,"")})}})),b.a.createElement(oe.a,{item:!0,xs:12},Object(N.map)(j,(function(e,a){return b.a.createElement(oe.a,{container:!0,direction:"row",spacing:1,key:a.toString()},b.a.createElement(oe.a,{item:!0,xs:2,sm:1},b.a.createElement(nt.a,{fullWidth:!0,margin:"normal"},b.a.createElement(ie.a,{onClick:function(){return e=a,j.splice(e,1),void k({formQuestions:Object(N.cloneDeep)(j)});var e},variant:"contained",disabled:s,className:t.deleteVisitorButton},"-"))),b.a.createElement(oe.a,{item:!0,xs:10,sm:11},b.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!Object(N.get)(e,"questionError")},b.a.createElement(Le.a,{type:"text",disabled:s,label:"T\xedtulo da pergunta",value:Object(N.get)(e,"question",""),error:!!Object(N.get)(e,"questionError"),InputLabelProps:{shrink:!0},onChange:function(e){return y("question",e.target.value,a)},variant:"outlined"}),Object(N.get)(e,"questionError")&&b.a.createElement(et.a,null,"n\xe3o pode ficar em branco"))),b.a.createElement(oe.a,{item:!0,xs:2,sm:1}),b.a.createElement(oe.a,{item:!0,xs:6,sm:8},b.a.createElement(ut,{disabled:s,label:"Tipo do campo resposta",value:Object(N.get)(e,"field_type",""),onChange:function(e){return y("field_type",e.target.value,a)},options:di,optionValueField:"key"})),b.a.createElement(oe.a,{item:!0,xs:4,sm:3},b.a.createElement(Tn.a,{className:t.toggleRequired},b.a.createElement(xn.a,{control:b.a.createElement(eo.a,{color:"primary",disabled:s,checked:!!Object(N.get)(e,"required"),value:"",onChange:function(){return y("required",!Object(N.get)(e,"required"),a)}}),label:b.a.createElement("small",null,"Obrigat\xf3rio")}))),b.a.createElement(oe.a,{item:!0,xs:2,sm:1}),bi.includes(Object(N.get)(e,"field_type"))&&b.a.createElement(oe.a,{item:!0,xs:10,sm:11},b.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!Object(N.get)(e,"optionsError")},b.a.createElement(Le.a,{type:"text",disabled:s,label:"Op\xe7\xf5es de respostas",placeholder:"Separe por v\xedrgula, ex: Item1,Item2,Item3",value:Object(N.get)(e,"options",""),error:!!Object(N.get)(e,"optionsError"),InputLabelProps:{shrink:!0},onChange:function(e){return y("options",e.target.value,a)},variant:"outlined"}),Object(N.get)(e,"optionsError")&&b.a.createElement(et.a,null,"n\xe3o pode ficar em branco"))))}))))),b.a.createElement(Cn.a,{className:t.actions},b.a.createElement(oe.a,{container:!0,justify:"space-between",spacing:2},b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ie.a,{fullWidth:O,color:"primary",size:"large",variant:"outlined",disabled:s,onClick:function(){j.push({question:"",field_type:"TEXT_FIELD",options:"",required:!1}),k({formQuestions:Object(N.cloneDeep)(j)})}},"ADICIONAR PERGUNTA")),b.a.createElement(oe.a,{item:!0,xs:6,sm:3},b.a.createElement(ie.a,{fullWidth:!0,color:"default",size:"large",variant:"contained",onClick:a,disabled:s},"CANCELAR")),b.a.createElement(oe.a,{item:!0,xs:6,sm:3},b.a.createElement(ie.a,{fullWidth:!0,color:"primary",size:"large",variant:"contained",onClick:A,disabled:E},"SALVAR"))))):null})),pl=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},dl(e)),{},{actions:{margin:15,marginBottom:20},toggleRequired:{marginTop:20,marginLeft:20},content:{marginTop:-20,overflowX:"hidden"},dialogMemberForm:{maxWidth:"50rem"},deleteVisitorButton:{fontWeight:"bold",backgroundColor:"#EE3C3C",color:"#FFF","&:hover":{backgroundColor:"#EE3C3C"},maxWidth:"40px",maxHeight:"40px",minWidth:"40px",minHeight:"40px",marginTop:"5px",marginLeft:"10px"}})}),{withTheme:!0}),Object(Q.f)("formData","setFormData",{}),Object(Q.f)("loading","setLoading",!1),Object(Q.f)("errors","setErrors",{}),Object(Q.e)(["open"],(function(e){var t=e.open,a=e.setFormData,n=e.ticketCategory;t?(U.hit("TicketCategory - Opened"),a({title:Object(N.get)(n,"title",""),assigneeId:Object(N.get)(n,"assignee_id",""),deadlineInDays:Object(N.get)(n,"deadline_in_days",""),formQuestions:Object(N.get)(n,"ticket_form_questions",[])})):U.hit("TicketCategory - Closed")})),Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.setFormData,a=e.ticketCategory;t({title:Object(N.get)(a,"title",""),assigneeId:Object(N.get)(a,"assignee_id",""),deadlineInDays:Object(N.get)(a,"deadline_in_days",""),formQuestions:Object(N.get)(a,"ticket_form_questions",[])})}}))(bl),gl=Object(Q.a)(Object(Q.f)("openModal","setOpenModal",!1))((function(e){var t=e.ticketCategory,a=e.ticketCategoryLoading,n=e.refetch,r=e.openModal,c=e.setOpenModal,l=e.setAlert,s=e.assignees,m=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U.hit("TicketCategoryModal - Closed"),c(!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return b.a.createElement(b.a.Fragment,null,b.a.createElement(ie.a,{variant:"outlined",size:"large",onClick:function(){U.hit("TicketCategoryModal - Opened"),c(!0)}},"Editar"),b.a.createElement(pl,{assignees:s,isLoading:a,ticketCategory:t,open:r,onClose:m,setAlert:l,refetch:n}))})),fl=Object(d.memo)((function(e){var t=e.viewer,a=e.index,n=e.classes,r=e.setAlert,c=e.ticketCategory,l=e.loading,s=e.setLoading,m=e.assignees,u=e.refetch,d=e.isManager,p=e.setChecked,g=e.checked,f=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,ei.toggleCategory(c.id);case 4:p(!g),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r({alertMsg:"Erro ao alterar categoria do ticket",alertType:"error",showAlert:!0});case 10:s(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),h=Object(N.get)(c,"assignee"),E=Object(N.get)(c,"deadline_in_days"),v="",O="";return h&&(v="".concat(h.name," ").concat(h.lastname),O=h.photoUrl),t?b.a.createElement(Lt.a,{className:a%2?n.bgWhite:n.bgGray},b.a.createElement(Ft.a,{className:n.tableSmallCell},b.a.createElement("span",{className:n.cellText},Object(N.get)(c,"title"))),b.a.createElement(Ft.a,{className:n.tableSmallCell},b.a.createElement("div",{className:n.avatarNameContainer},h&&b.a.createElement(aa,{name:v,photoUrl:O}),b.a.createElement("span",{className:"".concat(n.cellText," ").concat(n.userName)},v))),b.a.createElement(Ft.a,{className:n.tableSmallCell},b.a.createElement("span",{className:n.cellText},E?"".concat(E," ").concat(E>1?"dias \xfateis":"dia \xfatil"):"")),b.a.createElement(Ft.a,{className:n.tableExtraSmallCell},d&&b.a.createElement(eo.a,{disabled:l,checked:g,onChange:f,color:"primary"})),b.a.createElement(Ft.a,{className:n.tableMediumCell},d&&b.a.createElement(gl,{assignees:m,ticketCategory:c,setAlert:r,refetch:u}))):null})),hl=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},dl(e)),{},{cellText:{color:"#313131",fontSize:14},userName:{marginRight:5,marginLeft:10},avatarNameContainer:{display:"flex",alignItems:"center"},smallScreenResendButton:{marginTop:10}})}),{withTheme:!0}),Object(Q.f)("checked","setChecked",!1),Object(Q.f)("loading","setLoading",!1),Ri,Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.setChecked,a=e.ticketCategory;t(Object(N.isEmpty)(a.deleted_at))}}))(fl),El=Object(d.memo)((function(e){var t=e.classes,a=e.onClose,n=e.setAlert,r=e.formData,c=e.setFormData,l=e.refetch,s=e.loading,m=e.setLoading,d=e.errors,p=e.setErrors,g=e.assignees,f=s||Object(N.isEmpty)(r.title),h=Object(Ut.a)(),E=Object(zt.a)(h.breakpoints.down("sm")),v=function(e){c(Object(u.a)(Object(u.a)({},r),e))},O=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,ei.createCategory(r);case 4:U.hit("TicketCategory - Created"),n({alertMsg:"Categoria criada com sucesso",alertType:"success",showAlert:!0}),a(),l(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),p(Object(N.mapValues)(Object(N.get)(e.t0,"errors",{}),(function(e){return e[0]}))),n({alertMsg:"Erro ao criar categoria",alertType:"error",showAlert:!0});case 14:m(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return b.a.createElement(kn.a,{fullScreen:E,keepMounted:!0,fullWidth:!0,maxWidth:"md",classes:{paper:t.dialogMemberForm},open:!0},b.a.createElement(An.a,null,"Nova categoria",b.a.createElement(ze.a,{className:t.closeButton,onClick:a,disabled:s},b.a.createElement(Ue.a,null))),b.a.createElement(yn.a,{className:t.content},b.a.createElement(oe.a,{container:!0,direction:"row",spacing:1},b.a.createElement(b.a.Fragment,null,b.a.createElement(oe.a,{item:!0,xs:12},b.a.createElement(ot,{disabled:s,label:"T\xedtulo",errors:Object(N.get)(d,"title",[]),value:Object(N.get)(r,"title",""),onChange:function(e){return v({title:e.target.value})}})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ut,{label:"Respons\xe1vel",value:Object(N.get)(r,"assigneeId",""),disabled:s,onChange:function(e){return v({assigneeId:e.target.value})},options:g.map((function(e){return{label:"".concat(e.name," ").concat(e.lastname),value:e.id}})),emptyOptionLabel:"Nenhum respons\xe1vel"})),b.a.createElement(oe.a,{item:!0,xs:12,sm:6},b.a.createElement(ot,{label:"Prazo de resolu\xe7\xe3o (em dias)",type:"tel",disabled:s,value:Object(N.get)(r,"deadlineInDays",""),onChange:function(e){return v({deadlineInDays:(e.target.value||"").replace(/[\D]+/g,"")})}}))))),b.a.createElement(Cn.a,{className:t.actions},b.a.createElement(oe.a,{container:!0,justify:"space-between",spacing:2},b.a.createElement(oe.a,{item:!0,xs:12,sm:8}),b.a.createElement(oe.a,{item:!0,xs:6,sm:2},b.a.createElement(ie.a,{fullWidth:!0,color:"default",size:"large",variant:"contained",onClick:a,disabled:s},"CANCELAR")),b.a.createElement(oe.a,{item:!0,xs:6,sm:2},b.a.createElement(ie.a,{fullWidth:!0,color:"primary",size:"large",variant:"contained",onClick:O,disabled:f},"SALVAR")))))})),vl=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},dl(e)),{},{actions:{margin:15,marginBottom:20},content:{marginTop:-20,overflowX:"hidden"},dialogMemberForm:{maxWidth:"50rem"},blockTitle:{marginTop:15},checkboxLabel:{fontSize:e.typography.caption.fontSize},gridSizeMedium:{width:400}})}),{withTheme:!0}),Object(Q.f)("formData","setFormData",{}),Object(Q.f)("loading","setLoading",!1),Object(Q.f)("errors","setErrors",{}))(El),Ol=Object(d.memo)((function(e){var t=e.ticketCategoriesData,a=e.ticketCategoriesLoading,n=e.openTicketCategoryModal,r=e.setOpenTicketCategoryModal,o=e.classes,i=e.setAlert,c=e.ticketCategoriesFetch,l=e.ticketAssigneesData,s=e.ticketAssigneesLoading,m=M.getUserData(),u=Xe.includes(Object(N.get)(m,"member.role")),d=s||a,p=Object(N.get)(t,"ticket_categories"),g=Object(N.get)(l,"members",[]);return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:o.container},b.a.createElement("div",{className:o.headerView},b.a.createElement("aside",null,b.a.createElement(Fe.a,{variant:"h6"},b.a.createElement("b",null,"Categorias (".concat(Object(N.size)(p),")")))),b.a.createElement("aside",null,u&&b.a.createElement(ie.a,{size:"large",color:"primary",variant:"contained",onClick:function(){U.hit("TicketCategory - Opened"),r(!0)}},"Nova Categoria")))),b.a.createElement("div",{className:o.container},b.a.createElement(ia.a,{className:o.tablePaper},b.a.createElement(It.a,null,b.a.createElement(Bt.a,null,b.a.createElement(Lt.a,null,b.a.createElement(Ft.a,{className:o.tableCell},"T\xcdTULO"),b.a.createElement(Ft.a,{className:o.tableCell},"RESPONS\xc1VEL"),b.a.createElement(Ft.a,{className:o.tableCell},"PRAZO DE RESOLU\xc7\xc3O"),u&&b.a.createElement(Ft.a,{className:o.tableCell},"HABILITAR"),b.a.createElement(Ft.a,{colSpan:1}))),b.a.createElement(qt.a,null,d?b.a.createElement(Lt.a,null,b.a.createElement(Ft.a,{colSpan:u?5:4,align:"center"},b.a.createElement(se,null))):Object(N.size)(p)?p.map((function(e,t){return b.a.createElement(hl,{isManager:u,assignees:g,setAlert:i,index:t,key:e.id,ticketCategory:e,isLoading:d,refetch:c})})):b.a.createElement(Lt.a,null,b.a.createElement(Ft.a,{className:o.empty,colSpan:u?5:4,align:"center"},"Nenhuma categoria cadastrada")),u&&n&&b.a.createElement(vl,{assignees:g,onClose:function(){U.hit("TicketCategory - Closed"),r(!1)},setAlert:i,refetch:c}))))))})),jl=ft(ei.getCategories,{name:"ticketCategories",options:function(e){var t=e.setAlert;return{variables:!0,onRequestError:function(){t({alertMsg:"Erro ao carregar dados do servidor",alertType:"error",showAlert:!0})}}}}),kl=ft(no.getAssignables,{name:"ticketAssignees"}),yl=Object(Q.a)(Object(G.a)((function(e){return Object(u.a)(Object(u.a)({},dl(e)),{},{container:{marginBottom:30,marginTop:30},empty:{backgroundColor:"#EEE"},tableCell:{fontSize:14},titleTableCell:{fontSize:20}})}),{withTheme:!0}),Object(Q.f)("openTicketCategoryModal","setOpenTicketCategoryModal",!1),Wi({condition:function(e){return!Xe.includes(e.member.role)}}),jl,kl)(Ol),Cl=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=t.showAlert,o=t.alertMsg,i=t.alertType,c=null;return r&&(c=b.a.createElement(Ge,{message:o,type:i,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}})),b.a.createElement("div",{className:n.root},b.a.createElement(Sa,{alertBox:c}),b.a.createElement("section",null,b.a.createElement("div",{className:n.container},b.a.createElement("div",{className:n.headerView},b.a.createElement("aside",null,b.a.createElement(Fe.a,{variant:"h5"},b.a.createElement("b",null,"Configura\xe7\xf5es"))))),b.a.createElement("div",{className:n.container},b.a.createElement(Ra,null)),b.a.createElement("div",{className:n.container},b.a.createElement(yl,{setAlert:a}))))})),Al=Object(Q.a)(Object(G.a)(dl,{withTheme:!0}),Object(Q.f)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}))(Cl),wl=fc,Tl=fc,xl=fc;Y.setup(),A.a.locale(L.locale);var Sl=y()(j()(Be,(function(e,t){return e.submenus?j()(e.submenus,(function(t,a){return Object(u.a)(Object(u.a)({},t),{},{path:"".concat(e.path).concat(t.path),key:a,page:n[a]})})):Object(u.a)(Object(u.a)({},e),{},{key:t,page:n[t]})}))),Nl=ne(function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setIOSManifest(),this.setState({loading:!0},Object(i.a)(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!M.isLoggedIn()){t.next=7;break}return t.next=4,P.getEnterpriseUser();case 4:a=t.sent,n=v()(a,"enterprise_user"),M.setUserData(n);case 7:U.trackScreenView("Home"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),401===v()(t.t0,"response.status")&&M.clear();case 13:return t.prev=13,e.setState({loading:!1}),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,10,13,16]])}))))}},{key:"setIOSManifest",value:function(){L.isiOS&&document.querySelector('link[rel="manifest"]').setAttribute("rel","no-on-ios")}},{key:"render",value:function(){var e=this.state.loading;return b.a.createElement(T.a,{theme:de},b.a.createElement(w.a,null),b.a.createElement(d.Suspense,{fallback:b.a.createElement(se,{hasRefreshMsg:!0})},e?b.a.createElement(se,{hasRefreshMsg:!0}):b.a.createElement(f.a,null,b.a.createElement(h.d,null,j()(Sl,(function(e){return b.a.createElement(h.b,{key:e.path,exact:e.exact,path:e.path,render:function(t){try{if(e.private&&M.isLoggedIn()||!e.private){var a=z(e.page,e.trackPage);return b.a.createElement(a,t)}var n="".concat(t.location.pathname).concat(t.location.search);return D.save("redirectUrl",n),b.a.createElement(h.a,{to:{pathname:"/",state:{from:t.location}}})}catch(r){return b.a.createElement(h.a,{to:{pathname:"/",state:{from:t.location}}})}}})}))))))}}]),a}(d.PureComponent));g.a.render(b.a.createElement(Nl,null),document.querySelector("main"))}},[[343,1,2]]]);
//# sourceMappingURL=main.45b37036.chunk.js.map