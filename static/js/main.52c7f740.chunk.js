(this["webpackJsonplobby-portal"]=this["webpackJsonplobby-portal"]||[]).push([[0],{273:function(e,t,a){e.exports=a(430)},387:function(e,t,a){e.exports=a.p+"static/media/logo.7f12e1c7.png"},394:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAIAAACyr5FlAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAAB3RJTUUH4wkCEAUF6ibKzAAABgVJREFUeNrt3c9rHGUcx/Hv80xmk02y2Da1rYhIaS8WKVKLhR4UtIIXqYciCPoHaEXwIHgoSPXsoVQRCqInT0UUPPUgFEvRigp6EW1r1QraGpM0PzY72Xm+HlpUmv20JZWZCXm/yG0hOzt5Z+aZZ9hnwpbsqAGDxLo3AM1FHJCIAxJxQCIOSMQBiTggEQck4oBEHJCIAxJxQCIOSMQBiTggEQck4oBEHJCIAxJxQCIOSMQBiTggEQck4oBEHJCIAxJxQCIOSMQBiTggEQck4oBEHJCIAxJxQBqq/i3dvUxe9wdfZbIYQggVv2nVcaTkW7ev2/vI3ZV/0lXM3U6f/O2ns9MxVrrXKo/DfddDm9889ihx3Dp3O/jciXM/TkWrdK8x5oBEHJCIAxJxQCIOSMQBqYZJMMXdpyYXiyKtzYtcN8tbccOGkVDtZMYNNCiOhfn+qy+e/Pbry1nWlL1TpVT6jp0TR97bN95p1b0t1zQojpT8159nz/44la3JCbLSvXNHKzXpxkKD4ghmMVq0UPEkcUN4ac05oVzFgBQScUAiDkjEAYk4IBEHJOKARByQiAMScUAiDkjEAYk4IBEHJOKARByQiAMScUAiDkjEAYk4IBEHJOKARByQiANSDd94K4pyZmrxurXxQrDZ2aLsN+jLgKg6jizGU59ePPD4R8tfSskvnJtZm9+FbKaq4wjBpqd6f00uDnw1xuoX24RUw2klBFubiyysOgxIIREHJOKARByQ6ljZx83U4kYxVLu6N26k8jiSldvypYfbA14qvHViIf5Z0kdDVB6He//+1vyhDdcXECzMpKHvevFSaVndewVmVt9pxZbHYUydNwwDUkjEAYk4IBEHJOKARByQiAMScUAiDkjEAYk4IBEHJOKARByQiAMScUAiDkjEAYk4IBEHJOKARByQiAMScUAiDkjEAYk4IBEHJOKARByQiAMScUAiDkjEAYk4INUQR+iL5b8ysxYLCTZI9XGEMJvC0rI63LwV0oaMdeOao44jx2RpXR+w2GgrlNtyYxXSxqg8jmjxz3LwSrTB+rtHfJQ4mqLyOILFqZSdLWz5E5mSLT0wXO5oWVn3XoGZ1XO1Unj+Zc/6g4Yd6+PiMx0bCQw8mqCOOILln3fj5UFnFrfiibHe/jHiaII64oiWne/np7sD3tzNR8PCy+uLfaOWuHCpWU2TYIUPH58L02nAwSNZ2pzNH57o7R+zIbNU8w5ay+pYGN/MMsu/6rVOLPSeHh8w/EyW7srm39jYf3Bk5IPZ7GxhS252s0exiM7dzX0VHIKSuadmbWdNcZhZ4e13Z/q7h8ut+YDDQzIfC4vPdorHRvPT3fzMYnZ+KVxJ8kImefy9DMX1O9fd1q0fnrizbY2XSr/n3k6jHqtbXxzRsh+W2m/NzL8+4aODLk/czC1tyXoHxntPjYeFFLo++CwTLMykzkuXsh+Wrjt+pJSePLD9lcN7vGzWP+Vybpa34thYXveG/Ku+OMws2vAnc+W9Q93n19mQGH66WWkWzMejj4vfEyy0gg0NKMzNRsfzTZtH6/yYq1bdd2X71j42037/ivVvNm/uN/vB/63uOIKFrrePTLXfmQ4LXvvm4L8a8NcIFro++vb02GuT2YW+Zdx6a4oGxGFmwaxvwx/OdV64NHx8LswlEmmCZsRhZsEsWvZ9MX5osnPw8vDH89fu3GbBIqHUo9arleWi2ZLnn3XzM4vl9rzYO9LfPVJuy9NE5u1gQ7U+kthvf9TrvoKxczBPXss8XtiSHa3+XW/J1XsrIyGtj2lTljZm3omWDaojWCg8P9VdPh/vye/buXHXns2erOzf3gSkW79MtxOIm5Ur+g1u9s0Xf1z85UoIlf5zNDiOf1x9Du1Nd6p41HlyTw2bll6BLIaKy7DGnVYGCmaZrXjcEUOIGWOWlWjMgBTNQxyQiAMScUAiDkjEAYk4IBEHJOKARByQiAMScUAiDkjEAYk4IBEHJOKARByQiAMScUAiDkjEAYk4IBEHJOKARByQiAMScUAiDkjEAYk4IBEHJOKARByQiAMScUD6G10PmszN3ukhAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTA5LTA1VDEwOjIyOjM3LTAzOjAwPlqg0AAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wOS0wMlQxNjowNTowNS0wMzowMLG7i7YAAAAASUVORK5CYII="},396:function(e,t,a){},430:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"Signin",(function(){return ye})),a.d(n,"Spaces",(function(){return st})),a.d(n,"SpaceCalendar",(function(){return ea})),a.d(n,"Visitors",(function(){return Ra})),a.d(n,"Deliveries",(function(){return qa})),a.d(n,"Members",(function(){return pn}));var r=a(13),o=a.n(r),i=a(21),l=a(20),c=a(15),s=a(23),m=a(24),u=a(25),d=(a(275),a(0)),p=a.n(d),g=a(12),b=a.n(g),h=a(105),f=a(44),v=a(6),E=a.n(v),y=a(69),k=a.n(y),w=a(11),C=a.n(w),x=a(508),O=a(507),A=a(231),j=a.n(A),M={save:function(e,t){return localStorage.setItem(e,JSON.stringify(t))},get:function(e){try{var t=localStorage.getItem(e);return JSON.parse(t)}catch(a){return{}}},delete:function(e){return localStorage.removeItem(e)}},B={setUserToken:function(e){return M.save("userToken",e)},getUserToken:function(){return M.get("userToken")||""},setUserData:function(e){return M.save("userData",e)},getUserData:function(){return M.get("userData")||{}},clear:function(){M.delete("userToken"),M.delete("userData")},getAuthToken:function(){var e=M.get("userToken");if(e)return e;throw new Error("No authToken")},getBearerToken:function(){var e=M.get("userToken");return"Bearer: ".concat(e)},isLoggedIn:function(){var e=M.get("userToken");return!!e},isAuthorized:function(e){return e&&"unauthorized"!==e.error}},S=a(232),D={companyName:"Lobby",appName:"Lobby Portal",appNamespace:a.n(S)()("Lobby Portal"),apiURL:"https://api.lobby.tech",wsURL:"wss://api.lobby.tech",env:"production",apiRequestTimeout:1e4,mixpanelToken:"edc68e4e1788a9a91e92f329276c65f7",locale:"pt-br",isiOS:!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)},N=function(e){var t=E()(e,"response.data");return t||(t={error:E()(e,"message")}),t},T={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return new Promise(function(){var r=Object(i.a)(o.a.mark((function r(i,l){var c,s,m,u;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c=B.getBearerToken(),s=j.a.create({baseURL:"".concat(D.apiURL,"/").concat(D.appNamespace),timeout:D.apiRequestTimeout,headers:{"Content-Type":"application/json",Authorization:c},responseType:"json"}),r.next=5,s[e](t,a,n);case 5:return m=r.sent,u=m.data,r.abrupt("return",i(u));case 10:return r.prev=10,r.t0=r.catch(0),r.abrupt("return",l(N(r.t0)));case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e,t){return r.apply(this,arguments)}}())},get:function(e,t){return this.request("get",e,{params:t})},post:function(e,t,a){return this.request("post",e,t,a)},put:function(e,t,a){return this.request("put",e,t,a)},delete:function(e,t,a){return this.request("delete",e,t,a)}},I={getEnterpriseUser:function(){return T.get("/enterprise_user")},setCurrentBuilding:function(e){return T.put("/enterprise_user",{building_id:e})}},F=a(108),R=a.n(F),L=a(233),V=a.n(L);R.a.init(D.mixpanelToken);var W={prepareTrackUser:function(){var e=B.getUserData();if(e&&E()(e,"member.id")){var t={app_id:D.appNamespace,app_name:D.appName,user_id:E()(e,"member.id"),email:E()(e,"member.email"),phone:E()(e,"member.phone"),name:"".concat(E()(e,"member.name")," ").concat(E()(e,"member.lastname")),company:E()(e,"member.company.name"),company_id:E()(e,"member.company.id"),building:E()(e,"building.name"),building_id:E()(e,"building.id"),created_at:E()(e,"member.created_at"),verified_at:E()(e,"member.verified_at")};return R.a.identify(t.user_id),R.a.people.set(t),t}return{}},hit:function(e,t){var a=this.prepareTrackUser(),n=V()(t,a);return R.a.track(e,n)},trackScreenView:function(e){this.hit("".concat(e," - Viewed"),{screen:e})}},Y=function(e,t){return function(a){return Object(d.useEffect)((function(){return W.trackScreenView(t)})),p.a.createElement(e,a)}},H=a(483),z=a(479),P=a(59),_=a(154),U=a(5),q=function(e){return{progress:{margin:e.spacing(2)},middle:{marginTop:20},center:{justifyContent:"center",textAlign:"center"}}},Q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={slowConnection:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.hasRefreshMsg&&(this.timeoutConnection=setTimeout((function(){e.setState({slowConnection:!0})}),D.apiRequestTimeout))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutConnection)}},{key:"render",value:function(){var e=this.props,t=e.hasRefreshMsg,a=e.classes,n=e.theme.mainColor,r=this.state.slowConnection;return p.a.createElement(z.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:a.middle},p.a.createElement(H.a,{color:n,className:a.progress,variant:"indeterminate",disableShrink:!0,thickness:5}),p.a.createElement(P.a,{variant:"h6"},"Carregando..."),t&&r?p.a.createElement("div",{className:a.center},p.a.createElement("br",null),p.a.createElement(P.a,{variant:"h6"},"H\xe1 problemas de conex\xe3o com a internet"),p.a.createElement(_.a,{onClick:function(){return window.location.reload()},size:"large",color:"primary",variant:"contained"},p.a.createElement("b",null,"Recarregar"))):null)}}]),t}(d.PureComponent),G=Object(U.a)(q,{withTheme:!0})(Q),X=a(254),J=a(148),Z=Object(X.a)({palette:{primary:{main:"#1177FF"},secondary:{main:J.a[500]},background:{default:"#FFFFFF"}},typography:{useNextVariants:!0},containerWidth:1024,menuWidth:240}),K=a(238),$=a.n(K),ee=a(235),te=a.n(ee),ae=a(237),ne=a.n(ae),re=a(236),oe=a.n(re),ie={Signin:{label:"Signin",trackPage:"Signin",path:"/",icon:p.a.createElement(te.a,null),exact:!0,hideMenu:!0},Visitors:{label:"Visitantes",trackPage:"Visitors",path:"/visitantes",icon:p.a.createElement(oe.a,null)},SpaceCalendar:{label:"Espa\xe7os",trackPage:"SpaceCalendar",path:"/espacos/:id",hideMenu:!0},Spaces:{label:"Reservas",trackPage:"Spaces",path:"/espacos",icon:p.a.createElement(ne.a,null)},Members:{label:"Usu\xe1rios",trackPage:"Members",path:"/usuarios",icon:p.a.createElement($.a,null)}},le=a(486),ce={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center"},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},se={postSignin:function(e,t){var a={email:e,password:t};return T.post("/auth/signin",a)}},me=a(511),ue=a(485),de=a(137),pe=a.n(de),ge=a(431),be=a(149),he=a(484),fe=function(e){return{success:{backgroundColor:be.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:"#1177FF"},warning:{backgroundColor:he.a[700]},closeIcon:{fontSize:20,opacity:.9,justifyContent:"center"},message:{fontSize:20,display:"flex",alignItems:"center"}}},ve=Object(d.memo)((function(e){var t=e.message,a=e.type,n=e.actionButton,r=e.onClickAction,o=e.onClose,i=e.classes,l=[];return n&&l.push(p.a.createElement(_.a,{key:"action",color:"inherit",variant:"outlined",className:i[a||"info"]||i.info,onClick:r},n)),o&&l.push(p.a.createElement(ge.a,{key:"action",color:"inherit",onClick:o},p.a.createElement(pe.a,{className:i.closeIcon}))),p.a.createElement(me.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!0,autoHideDuration:o?3e3:null,onClose:function(){return o&&o()}},p.a.createElement(ue.a,{className:i[a||"info"]||i.info,message:p.a.createElement("span",{className:i.message},t),action:l}))})),Ee=Object(U.a)(fe,{withTheme:!0})(ve),ye=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",errorMsg:"",submit:!1},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password,l=a.props.history;a.setState({submit:!0},Object(i.a)(o.a.mark((function e(){var t,i,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n||!r){e.next=14;break}return e.next=4,se.postSignin(n,r);case 4:return t=e.sent,i=t.token,B.setUserToken(i),e.next=9,I.getEnterpriseUser();case 9:return c=e.sent,s=E()(c,"enterprise_user"),B.setUserData(s),a.setState({submit:!1},(function(){return l.push("/visitantes")})),e.abrupt("return",!0);case 14:throw new Error("Blank fields");case 17:return e.prev=17,e.t0=e.catch(0),a.setState({submit:!1,errorMsg:"Credencial inv\xe1lida, tente novamente."}),e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e,null,[[0,17]])}))))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.history;try{B.isLoggedIn()&&e.push("/visitantes")}catch(t){B.clear()}}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,r=t.password,o=t.submit,i=t.errorMsg;return p.a.createElement("div",{style:ce.container},p.a.createElement("div",{style:ce.content},i&&p.a.createElement(Ee,{message:i,type:"warning",onClose:function(){return e.setState({errorMsg:""})}}),p.a.createElement("img",{src:a(387),width:150,alt:D.appName,style:ce.logo}),p.a.createElement(P.a,{component:"h1",variant:"h5"},"Portal da empresa"),p.a.createElement("form",{onSubmit:this.onSubmit,style:ce.form},p.a.createElement(le.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Email",type:"text",disabled:o,value:n,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({username:t.target.value.toLowerCase()})}}),p.a.createElement(le.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Senha",type:"password",disabled:o,value:r,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({password:t.target.value})}}),p.a.createElement(_.a,{disabled:o,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:ce.button,type:"submit"},o?"Carregando...":"Entrar"))))}}]),t}(d.PureComponent),ke=a(45),we=a.n(ke),Ce=a(247),xe=a.n(Ce),Oe=a(8),Ae=a(7),je=a(46),Me=function(e,t){var a=t.name,n=void 0===a?null:a,r=t.init,g=void 0===r||r,b=t.options,h=void 0===b?function(){return{}}:b;return function(t){return function(a){function r(){var t,a;Object(l.a)(this,r);for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return(a=Object(s.a)(this,(t=Object(m.a)(r)).call.apply(t,[this].concat(u)))).state={loading:!0,reloadedMsg:"",error:null,data:null},a.loadingProperty=n?"".concat(n,"Loading"):"loading",a.reloadedMsgProperty=n?"".concat(n,"ReloadedMsg"):"reloadedMsg",a.errorProperty=n?"".concat(n,"Error"):"error",a.dataProperty=n?"".concat(n,"Data"):"data",a.clearProperty=n?"".concat(n,"Clear"):"clear",a.fetchProperty=n?"".concat(n,"Fetch"):"fetch",a.resolveOptions=function(e){return Object(je.a)({},h(a.props),{},e)},a.loadDataSource=function(){var t=Object(i.a)(o.a.mark((function t(n,r){var i,l,c,s,m;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.resolveOptions(r),l=E()(i,"variables"),c=E()(i,"onRequestFinished"),s=E()(i,"onRequestError"),t.prev=4,t.next=7,e(l);case 7:if(m=t.sent,!c){t.next=11;break}return t.next=11,c(m);case 11:return t.abrupt("return",n(null,m));case 14:if(t.prev=14,t.t0=t.catch(4),!s){t.next=19;break}return t.next=19,s(t.t0);case 19:return t.abrupt("return",n(t.t0,null));case 20:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e,a){return t.apply(this,arguments)}}(),a.fetch=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(o,i){a.setState({loading:e},(function(){a.loadDataSource((function(e,r){a.setState({data:r,error:e,loading:!1,reloadedMsg:t},(function(){return e?i(e):o(r),n&&n()}))}),r)}))}))},a.clear=function(e){return a.setState({data:null},e)},a}return Object(u.a)(r,a),Object(c.a)(r,[{key:"componentDidMount",value:function(){g?this.fetch(!0):this.setState({loading:!1,data:{}})}},{key:"render",value:function(){var e,a=Object(je.a)({},this.props,(e={},Object(Ae.a)(e,this.errorProperty,this.state.error),Object(Ae.a)(e,this.dataProperty,this.state.data),Object(Ae.a)(e,this.loadingProperty,this.state.loading),Object(Ae.a)(e,this.reloadedMsgProperty,this.state.reloadedMsg),Object(Ae.a)(e,this.fetchProperty,this.fetch),Object(Ae.a)(e,this.clearProperty,this.clear),e));return p.a.createElement(t,a)}}]),r}(d.PureComponent)}},Be={getSpace:function(e){return T.get("/spaces/".concat(e))},getSpaces:function(e){return T.get("/buildings/".concat(e,"/spaces"))}},Se=a(488),De=a(489),Ne=a(491),Te=a(490),Ie=Object(d.memo)((function(e){var t=e.classes,a=e.space,n=e.history,r=E()(a,"in_maintenance"),o=r?t.cardDisabled:t.card;return p.a.createElement(z.a,{item:!0,xs:4},p.a.createElement(Se.a,{className:o,onClick:function(){r||n.push("/espacos/".concat(a.id))}},p.a.createElement(De.a,null,p.a.createElement(Te.a,{className:t.media,image:a.photo_url,title:a.name}),p.a.createElement(Ne.a,null,p.a.createElement(P.a,{variant:"h6"},p.a.createElement("small",null,a.name,"\xa0"),r&&p.a.createElement("small",{className:t.danger},"(Manuten\xe7\xe3o)"))))))})),Fe=Object(Oe.a)(Object(U.a)((function(){return{card:{marginBottom:10},cardDisabled:{marginBottom:10,background:"#EDEDED"},danger:{color:"red"},media:{height:100}}}),{withTheme:!0}),f.f)(Ie),Re=a(31),Le=a.n(Re),Ve=a(492),We=a(493),Ye=a(513),He=a(487),ze=a(435),Pe=a(495),_e=a(446),Ue=a(494),qe=a(509),Qe=a(244),Ge=a.n(Qe),Xe=a(246),Je=a.n(Xe),Ze=a(245),Ke=a.n(Ze),$e=a(441),et=a(496),tt=a(497),at={isTablet:function(){return window.innerWidth<1280},isMobile:function(){return window.innerWidth<720}},nt=Object.values(ie).filter((function(e){return!e.hideMenu})),rt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={companyName:"",userName:"",userDataError:!1,sideMenuOpen:!1,buildings:[],currentBuildingId:""},a.loadData=Object(i.a)(o.a.mark((function e(){var t,n,r,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=B.getUserData(),n=E()(t,"buildings",[]),r=E()(t,"building_id",""),i=E()(t,"member.name",""),l=E()(t,"member.company.name",""),!Le()(n)||!r){e.next=10;break}a.setState({buildings:n,currentBuildingId:r,userName:i,companyName:l}),e.next=11;break;case 10:throw new Error("No buildings");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),a.setState({userDataError:{error:"unauthorized"}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),a.onLogout=function(){if(window.confirm("Voc\xea deseja sair?")){var e=a.props.history;W.hit("Logout"),B.clear(),e.push("/")}},a.onToggleSideMenu=function(){var e=a.state.sideMenuOpen;a.setState({sideMenuOpen:!e})},a.onChangePage=function(e,t){a.props.history.push(nt[t].path)},a.onSetCurrentBuilding=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.key,a.state.currentBuildingId===r){e.next=16;break}return e.prev=3,e.next=6,I.setCurrentBuilding(r);case 6:(i=B.getUserData()).building_id=r,B.setUserData(i),W.hit("Building - Changed"),window.location.href="/",e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),a.setState({userDataError:{error:"unauthorized"}});case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,a){return e.apply(this,arguments)}}(),a.renderErrorAlertBox=function(e){var t=a.props.history;return B.isAuthorized(e)?p.a.createElement(Ee,{type:"error",message:"Erro ao carregar dados do servidor",actionButton:p.a.createElement("b",null,"Recarregar"),onClickAction:function(){return window.location.reload()}}):p.a.createElement(Ee,{type:"error",message:"Sua sess\xe3o expirou, fa\xe7a login novamente",actionButton:p.a.createElement("b",null,"Fazer login"),onClickAction:function(){B.clear(),t.push("/")}})},a.renderWebappUpdateAlertBox=function(){return p.a.createElement(Ee,{type:"success",message:"Uma nova atualiza\xe7\xe3o foi instalada.",actionButton:p.a.createElement("b",null,"Continuar"),onClickAction:function(){return window.location.reload()}})},a.renderAlerts=function(){var e=a.props,t=e.alertBox,n=e.webappUpdated,r=e.error,o=a.state.userDataError,i=r||o;return n?a.renderWebappUpdateAlertBox():i?a.renderErrorAlertBox(i):t||null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.history,r=this.state,o=r.userName,i=r.sideMenuOpen,l=r.buildings,c=r.currentBuildingId,s=r.companyName;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:t.root},p.a.createElement(qe.a,{lgUp:!0},p.a.createElement(Ve.a,{position:"fixed",className:t.appBar},p.a.createElement(We.a,null,p.a.createElement(ge.a,{color:"inherit","aria-label":"open drawer",onClick:this.onToggleSideMenu,edge:"start"},p.a.createElement(Ge.a,null)),p.a.createElement("div",{className:t.right},p.a.createElement("span",{className:t.userName},o),p.a.createElement(_.a,{className:t.logoutButton,onClick:this.onLogout},"Sair"))))),p.a.createElement(Ye.a,{classes:{paper:t.drawer},variant:at.isTablet()?"persistent":"permanent",anchor:"left",open:i,ModalProps:{keepMounted:!0}},at.isTablet()&&p.a.createElement("div",{className:t.closeMenuIcon},p.a.createElement(ge.a,{color:"inherit",size:"medium",onClick:this.onToggleSideMenu},p.a.createElement(Ke.a,null))),p.a.createElement("div",{className:t.logoContainer},p.a.createElement("img",{src:a(394),alt:D.appName,className:t.logo}),p.a.createElement("span",{className:t.companyName},s)),p.a.createElement(Ue.a,{className:t.divider}),p.a.createElement(He.a,null,p.a.createElement($e.a,null,p.a.createElement(ze.a,{variant:"outlined"},p.a.createElement(_e.a,{className:t.towerSelect,value:c,onChange:this.onSetCurrentBuilding},l.map((function(e){return p.a.createElement(Pe.a,{key:e.id,value:e.id},e.name)})))))),p.a.createElement(He.a,null,nt.map((function(e,a){var r=Object.values(e.submenus||{}),o=Boolean(Le()(r)),i={};return o||(i={component:h.b,to:e.path,selected:e.path===n.location.pathname}),p.a.createElement("div",{key:a.toString()},p.a.createElement($e.a,Object.assign({button:!0,key:e.path},i),e.icon&&p.a.createElement(et.a,{className:t.listItemIcon},e.icon),p.a.createElement(tt.a,{className:o?t.listItemTextNoIcon:t.listItemText,primary:e.label})),o&&p.a.createElement(He.a,{className:t.submenu},r.map((function(a){var r="".concat(e.path).concat(a.path);return p.a.createElement($e.a,{button:!0,key:r,component:h.b,to:r,selected:r===n.location.pathname},p.a.createElement(et.a,{className:t.listItemIcon},a.icon),p.a.createElement(tt.a,{className:t.listItemText,primary:a.label}))}))))}))),p.a.createElement(Ue.a,{className:t.divider}),!at.isTablet()&&p.a.createElement(He.a,null,p.a.createElement($e.a,null,p.a.createElement(tt.a,null,o),p.a.createElement(et.a,null,p.a.createElement(_.a,{onClick:this.onLogout,className:t.logoutItem},p.a.createElement(Je.a,null)))))),this.renderAlerts()))}}]),t}(d.PureComponent),ot=Object(Oe.a)(Object(U.a)((function(e){return{appBar:{backgroundColor:"#200085",marginLeft:e.menuWidth,width:"calc(100%-".concat(e.menuWidth,"px)")},root:{flexGrow:1,display:"flex",marginBottom:at.isTablet()?90:40},right:{position:"absolute",right:5,top:15},userName:{color:"#fff",fontSize:16,marginRight:10},divider:{background:"#333"},towerSelect:{width:200,color:"#FFF",borderColor:"#2000AA",backgroundColor:"#2000AA",marginTop:10},logoutButton:{color:"red",fontSize:16,fontWeight:"bold",textTransform:"none"},logoutItem:{color:"red",fontSize:16,fontWeight:"bold",textTransform:"none",justifyContent:"flex-end",alignSelf:"flex-end"},tabItem:{fontWeight:"bold",fontSize:16},drawer:{width:e.menuWidth,flexShrink:0,background:"#200085",color:"#FFF"},logoContainer:{display:"flex",marginLeft:15,marginTop:15,marginBottom:10,color:"#FFF",wordBreak:"break-word"},logo:{width:48,height:48,marginRight:5},companyName:{fontSize:14,fontWeight:"bold",color:"#FFF",display:"flex",alignItems:"center"},checkIcon:{marginRight:10},closeMenuIcon:{marginTop:10,marginLeft:10},listItemIcon:{color:"#FFF"},listItemText:{marginLeft:-15,color:"#FFF"},listItemTextNoIcon:{marginTop:15,marginLeft:20,color:"#FFF"},submenu:{paddingLeft:20}}}),{withTheme:!0}),f.f,Object(Oe.d)("webappUpdated","setWebappUpdated",!1))(rt),it=B.getUserData(),lt=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.spacesData,o=e.spacesError,i=e.spacesLoading,l=a.showAlert,c=a.alertMsg,s=a.alertType,m=null;l&&(m=p.a.createElement(Ee,{message:c,type:s,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}}));var u=E()(r,"spaces",[]);return p.a.createElement("div",{className:t.root},p.a.createElement(ot,{alertBox:m,error:o}),p.a.createElement("section",null,p.a.createElement("div",{className:t.container},p.a.createElement("div",{className:t.headerView},p.a.createElement("aside",{className:t.headerTitle},p.a.createElement(P.a,{variant:"h4"},p.a.createElement("b",null,"Reserva de espa\xe7os"))))),p.a.createElement("div",{className:t.container},p.a.createElement(z.a,{container:!0,spacing:1},i?p.a.createElement(G,null):we()(u)?p.a.createElement("div",{className:t.centerHeaderView},p.a.createElement(xe.a,{className:t.emptyHeaderIcon}),p.a.createElement("span",{className:t.emptyHeaderTitle},p.a.createElement(P.a,{variant:"h5"},"Este pr\xe9dio n\xe3o possui espa\xe7o para reserva"))):u.map((function(e){return p.a.createElement(Fe,{key:e.id,space:e})}))))))})),ct=Me(Be.getSpaces,{name:"spaces",options:function(){return{variables:E()(it,"building_id")}}}),st=Object(Oe.a)(Object(U.a)((function(e){return{root:{flexGrow:1,marginRight:20,marginLeft:20},container:Object(Ae.a)({width:"auto",height:"100%",maxHeight:"100%",paddingLeft:at.isTablet()?10:e.menuWidth/2,paddingRight:10,marginBottom:40},e.breakpoints.up(e.containerWidth+2*e.spacing(3)),{width:e.containerWidth,marginLeft:"auto",marginRight:"auto"}),headerView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"flex-start"},centerHeaderView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center",alignItems:"center",marginTop:120},emptyHeaderIcon:{fontSize:65},emptyHeaderTitle:{marginLeft:10},headerTitle:{marginTop:10}}}),{withTheme:!0}),Object(Oe.d)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),ct)(lt),mt=a(35),ut=a.n(mt),dt=a(151),pt=a.n(dt),gt=a(152),bt=a.n(gt),ht={getBookings:function(e){var t=e.spaceId,a=e.from,n=e.to;return T.get("/spaces/".concat(t,"/space_bookings?from=").concat(C()(a).toISOString(),"&to=").concat(C()(n).toISOString()))},createBookings:function(e){var t={title:E()(e,"title"),space_id:E()(e,"spaceId"),booking_date:E()(e,"bookingDate"),periods:E()(e,"periods",[])};return T.post("/space_bookings",t)},cancelBooking:function(e){return T.put("/space_bookings/".concat(e,"/cancel"))}},ft=(a(396),a(397),a(2)),vt=a.n(ft),Et=a(109),yt=a(251),kt=a.n(yt),wt={calendar:{height:575},pastBox:{backgroundColor:"#777",borderColor:"#555"},ownerBox:{backgroundColor:"#1177FF"},busyBox:{backgroundColor:"#92b4bf"}},Ct=Object(Et.c)(C.a),xt=[{key:Et.b.WEEK,value:"Semanal"},{key:Et.b.MONTH,value:"Mensal"}],Ot=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.onNavigate,r=t.view,o=t.loading;return p.a.createElement("div",{className:"rbc-toolbar"},p.a.createElement("div",{className:"rbc-btn-group"},xt.map((function(t){var a=t.key,n=t.value,i=r===a?"rbc-active":"",l=e.view.bind(null,a);return p.a.createElement("button",{key:a,type:"button",disabled:o,className:i,onClick:l},n)}))),p.a.createElement("b",{className:"rbc-toolbar-label"},o?"Carregando...":a),p.a.createElement("div",{className:"rbc-btn-group"},p.a.createElement("button",{type:"button",disabled:o,onClick:function(){return n("PREV")}},"\u2190"),p.a.createElement("button",{type:"button",disabled:o,onClick:function(){return n("TODAY")}},"Hoje"),p.a.createElement("button",{type:"button",disabled:o,onClick:function(){return n("NEXT")}},"\u2192")))}}]),t}(kt.a);Ot.propTypes={loading:vt.a.bool};var At=Object(d.memo)((function(e){var t=e.data,a=e.view,n=e.onView,r=e.onRangeChange,o=e.loading,i=e.eventComponent,l=e.onSelectBooking;return p.a.createElement(Et.a,{resizable:!0,events:t,localizer:Ct,view:a,onView:n,startAccessor:"from",endAccessor:"to",step:30,onRangeChange:r,scrollToTime:C()(6,"HH").toDate(),culture:D.locale,eventPropGetter:function(e){return{style:(t=e,C()(t.bookingDate).isBefore()?wt.pastBox:t.busy?wt.busyBox:wt.ownerBox)};var t},components:{event:i,toolbar:function(e){return p.a.createElement(Ot,Object.assign({loading:o},e))}},style:wt.calendar,onSelectEvent:l})}));At.propTypes={data:vt.a.array,eventComponent:vt.a.func,onView:vt.a.func,view:vt.a.string,loading:vt.a.bool,onSelectBooking:vt.a.func,onRangeChange:vt.a.func};var jt=At,Mt=a(442),Bt=a(443),St=a(444),Dt=a(498),Nt=a(510),Tt=a(437),It=a(500),Ft=a(501),Rt=a(106),Lt=a(27),Vt=a(499),Wt=a(252),Yt=a.n(Wt),Ht=a(107),zt=a.n(Ht),Pt={getCalendar:function(e){var t=e.spaceId,a=e.bookingDate;return e.readOnly?new Promise((function(e){return e({})})):T.get("/spaces/".concat(t,"/space_calendars?booking_date=").concat(C()(a).toISOString()))}},_t=C()().add(1,"day").toDate(),Ut=function(){return{title:"",busy:!1,bookingDate:_t,periods:zt()([])}},qt=Object(d.memo)((function(e){var t=e.classes,a=e.open,n=e.setOpen,r=e.calendarLoading,l=e.isMonthView,c=e.space,s=e.bookingData,m=e.calendarFetch,u=e.submitBookingFetch,d=e.submitBookingLoading,g=e.cancelBookingFetch,b=e.cancelBookingLoading,h=e.readOnly,f=e.openModalButton,v=e.setBookingState,E=e.calendar,y=e.setCalendar,w=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(!0),W.hit("SpaceBookingModal - Viewed"),e.next=5,m(!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(Ut());case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),x=function(){W.hit("SpaceBookingModal - Closed"),h||v(Ut()),n(!1)},O=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y([]),v({bookingDate:t,periods:zt()([])}),e.next=5,m(!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(Ut());case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),A=function(e,t){var a=s.periods;try{var n=JSON.parse(e.currentTarget.value);t?(a.push(n),v({periods:a})):v({periods:a.filter((function(e){return e.label!==n.label}))})}catch(r){v(Ut())}},j=s.id,M=s.title,B=s.bookingDate,S=s.periods,N=s.busy,T=d||r,I=j&&h,F=C()(B).isBefore(),R=!h&&Le()(E);return p.a.createElement(p.a.Fragment,null,f?p.a.createElement("div",{className:l?t.monthViewButton:t.timeViewButton,onClick:w},f):p.a.createElement(_.a,{onClick:w,size:"large",variant:"contained",color:"primary"},"Nova reserva"),p.a.createElement(Mt.a,{open:Boolean(a),maxWidth:"md",onClose:x,keepMounted:!0},p.a.createElement(z.a,{container:!0,justify:"center",className:t.container},p.a.createElement(z.a,{item:!0,xs:6},p.a.createElement(Dt.a,null,c.name),p.a.createElement(Bt.a,{className:t.dialogContent},p.a.createElement("div",{dangerouslySetInnerHTML:{__html:c.description}}))),p.a.createElement(z.a,{item:!0,xs:6},p.a.createElement(Dt.a,null,h?M:"Reservar espa\xe7o"),p.a.createElement(Bt.a,{className:t.dialogContent},!h&&p.a.createElement(ze.a,{className:t.inputField},p.a.createElement(le.a,{fullWidth:!0,label:"Tit\xfalo",margin:"normal",disabled:T||h,InputLabelProps:{shrink:!0},value:M,onChange:function(e){return v({title:e.target.value})}})),p.a.createElement(ze.a,{className:t.inputField},p.a.createElement(Lt.a,{libInstance:C.a,utils:Rt.a,locale:D.locale},p.a.createElement(Vt.a,{className:t.calendarInputField,label:"Data da reserva",invalidDateMessage:"Formato inv\xe1lido",variant:"dialog",disabled:T||h,value:B,onChange:O,minDate:_t,format:"DD/MM/YYYY",cancelLabel:"Cancelar",minDateMessage:""}))),p.a.createElement(ze.a,{className:t.checkboxArea},p.a.createElement(Tt.a,{className:t.inputLabel},"Hor\xe1rios"),r?p.a.createElement("div",{className:t.loading},p.a.createElement(G,null)):p.a.createElement(It.a,null,I?k()(S,(function(e){var a="".concat(C()(e.from).format("HH:mm"),"-").concat(C()(e.to).format("HH:mm"));return p.a.createElement(Ft.a,{key:a,label:a,classes:{label:t.period},control:p.a.createElement(Nt.a,{checked:!0,disabled:!0})})})):Le()(E)?k()(E,(function(e){var a="".concat(e.from,"-").concat(C()(e.to,"HH:mm").add(1,"minute").format("HH:mm")),n=T||h||!e.available,r=e.available?t.period:t.periodBusy,o=!n&&!we()(Yt()(S,(function(e){return e.label===a})));return p.a.createElement(Ft.a,{key:a,label:a,classes:{label:r},control:p.a.createElement(Nt.a,{color:"primary",checked:o,disabled:n,onChange:A,value:JSON.stringify(Object(je.a)({},e,{label:a}))})})})):p.a.createElement("span",{className:t.error},p.a.createElement("br",null),"N\xe3o h\xe1 hor\xe1rios dispon\xedveis nessa data")))),p.a.createElement(St.a,{className:t.dialogAction},N||F?p.a.createElement(_.a,{onClick:x,size:"large"},"Fechar"):I?p.a.createElement(p.a.Fragment,null,p.a.createElement(_.a,{onClick:x,size:"large",disabled:b},"Fechar"),p.a.createElement(_.a,{onClick:function(){window.confirm("Tem certeza em realizar essa a\xe7\xe3o?")&&g(!0)},size:"large",color:"secondary",variant:"contained",disabled:b},"Remover")):p.a.createElement(p.a.Fragment,null,p.a.createElement(_.a,{onClick:x,disabled:T,size:"large"},"Fechar"),p.a.createElement(_.a,{onClick:function(){return u(!0)},size:"large",color:"primary",variant:"contained",disabled:T||!R,className:t.submitButton},d?"Reservando...":"Reservar")))))))})),Qt=Me(Pt.getCalendar,{name:"calendar",options:function(e){var t=e.space,a=e.setCalendar,n=e.readOnly,r=e.bookingData.bookingDate;return{variables:{spaceId:E()(t,"id"),readOnly:n,bookingDate:r},onRequestFinished:function(e){a(E()(e,"space_calendars",[]))},onRequestError:function(){a([])}}}}),Gt=Me(ht.createBookings,{name:"submitBooking",init:!1,options:function(e){var t=e.bookingData,a=e.setBookingState,n=e.setOpen,r=e.space,o=e.onRequestBooking;return{variables:Object(je.a)({},t,{spaceId:E()(r,"id")}),onRequestFinished:function(){W.hit("SpaceBooking - Added",{}),a(Ut()),n(!1),o()},onRequestError:o}}}),Xt=Me(ht.cancelBooking,{name:"cancelBooking",init:!1,options:function(e){var t=e.bookingData,a=e.onRequestBooking,n=e.setOpen;return{variables:E()(t,"id"),onRequestFinished:function(){W.hit("SpaceBooking - Canceled",{}),n(!1),a()},onRequestError:a}}}),Jt=Object(Oe.a)(Object(U.a)({container:{flexGrow:1,paddingBottom:15},calendarInputField:{width:180,marginBottom:10},inputField:{display:"block",width:265,marginBottom:20},checkboxArea:{marginBottom:20},inputLabel:{fontSize:12},period:{fontSize:12},periodBusy:{fontSize:12,textDecoration:"line-through"},timeViewButton:{width:"100vw",minWidth:"100vw",maxWidth:"100vw",height:"100vh",maxHeight:"100vh",minHeight:"100vh",marginLeft:-10,paddingLeft:10,marginTop:-20,paddingTop:20},monthViewButton:{width:"100vw",minWidth:"100vw",maxWidth:"100vw",marginLeft:-10,paddingLeft:10,marginTop:-20,paddingTop:20},loading:{width:275},error:{color:"red"},dialogContent:{marginTop:-20,minWidth:320,width:320,maxWidth:320},dialogAction:{paddingLeft:20,paddingRight:20},center:{display:"flex",justifyContent:"center",textAlign:"center"}},{withTheme:!0}),Object(Oe.d)("open","setOpen",!1),Object(Oe.d)("bookingData","setBookingData",Ut()),Object(Oe.d)("calendar","setCalendar",[]),Object(Oe.d)("disableAction","setDisableAction",!1),Object(Oe.c)({setBookingState:function(e){var t=e.setBookingData,a=e.bookingData;return function(e){t(Object(je.a)({},a,{},e))}}}),Object(Oe.b)({componentDidMount:function(){var e=this.props,t=e.selectedBookingData,a=e.setBookingData,n=e.space;if(t){var r=t.event,o=r.id,i=r.title,l=r.from,c=r.to;a({id:o,title:i,bookingDate:r.bookingDate,busy:r.busy,spaceId:n.id,periods:[{from:l,to:c,label:"".concat(l,"-").concat(c)}]})}}}),Qt,Xt,Gt)(qt),Zt=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.bookingsFetch,l=e.match,c=e.setRangeDates,s=e.bookingsData,m=e.bookingsError,u=e.bookingsLoading,d=e.spaceData,g=e.spaceError,b=e.spaceLoading,h=e.calendarView,f=e.setCalendarView,v=a.showAlert,y=a.alertMsg,w=a.alertType,x=function(e){return n({alertMsg:e,alertType:"error",showAlert:!0})},O=function(e){return n({alertMsg:e,alertType:"success",showAlert:!0})},A=null;v&&(A=p.a.createElement(Ee,{message:y,type:w,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}}));var j=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.params.id,e.prev=1,a=ut()(t)?{spaceId:n,from:pt()(t),to:bt()(t)}:{spaceId:n,from:t.start,to:t.end},c({from:a.from,to:a.to}),e.next=6,r(!0,"",null,{variables:a});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),x(E()(e.t0,"error")||"Erro ao atualizar calend\xe1rio");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}a=E()(t,"errors.periods",[]).join(", "),x(a||"Ocorreu um erro ao reservar espa\xe7o"),e.next=9;break;case 6:return O("Reservado com sucesso"),e.next=9,r(!0);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),x("Erro ao atualizar calend\xe1rio");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}a=E()(t,"errors.booking_date",[]).join(", "),x(a||"Ocorreu um erro ao cancelar esta reserva"),e.next=9;break;case 6:return O("Reserva cancelada com sucesso"),e.next=9,r(!0);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),x("Erro ao atualizar calend\xe1rio");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),S=E()(d,"space",{}),D=E()(s,"space_bookings",[]),N=g||m,T=k()(D,(function(e){return{id:e.id,title:e.title||"N\xe3o dispon\xedvel",bookingDate:C()(e.booking_date).toDate(),from:C()(e.booking_date).hour(pt()(e.from.split(":"))).minute(bt()(e.from.split(":"))).toDate(),to:C()(e.booking_date).hour(pt()(e.to.split(":"))).minute(bt()(e.to.split(":"))).add(1,"minute").toDate(),busy:!e.title}}));return p.a.createElement("div",{className:t.root},p.a.createElement(ot,{alertBox:A,error:N}),p.a.createElement("section",null,!b&&p.a.createElement("div",{className:t.container},p.a.createElement("div",{className:t.headerView},p.a.createElement("aside",{className:t.headerTitle},p.a.createElement(P.a,{variant:"h4"},p.a.createElement("b",null,S.name))),p.a.createElement("aside",{className:t.newBooking},p.a.createElement(Jt,{space:S,onRequestBooking:M})))),p.a.createElement("div",{className:t.container},b?p.a.createElement(G,null):p.a.createElement(jt,{data:T,onView:f,onRangeChange:j,view:h,loading:u,eventComponent:function(e){return p.a.createElement(Jt,{readOnly:!0,space:S,isMonthView:"month"===h,onRequestBooking:B,selectedBookingData:e,openModalButton:p.a.createElement(p.a.Fragment,null,e.title)})}}))))})),Kt=Me(Be.getSpace,{name:"space",options:function(e){return{variables:e.match.params.id}}}),$t=Me(ht.getBookings,{name:"bookings",options:function(e){var t=e.match.params.id,a=e.rangeDates;return{variables:{spaceId:t,from:a.from,to:a.to}}}}),ea=Object(Oe.a)(Object(U.a)((function(e){return{root:{flexGrow:1,marginRight:20,marginLeft:20},container:Object(Ae.a)({width:"auto",height:"100%",maxHeight:"100%",paddingLeft:at.isTablet()?10:e.menuWidth/2,paddingRight:10,marginBottom:40},e.breakpoints.up(e.containerWidth+2*e.spacing(3)),{width:e.containerWidth,marginLeft:"auto",marginRight:"auto"}),headerView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"flex-start"},headerTitle:{marginTop:10},newBooking:{paddingTop:15}}}),{withTheme:!0}),Object(Oe.d)("rangeDates","setRangeDates",{from:C()().startOf("week").toDate(),to:C()().endOf("week").toDate()}),Object(Oe.d)("calendarView","setCalendarView","week"),Object(Oe.d)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Kt,$t)(Zt),ta=a(144),aa=a.n(ta),na=a(145),ra=a.n(na),oa=a(73),ia=a.n(oa),la={getVisitors:function(e){var t=e.page,a=void 0===t?0:t,n=e.perPage,r=void 0===n?20:n,o=e.month,i=void 0===o?11:o,l=e.year;return T.get("/visitors",{page:a,per_page:r,month:i,year:l})},createVisitors:function(e){var t=e.visitorData,a={company_id:e.companyId,visitor_company:e.visitorCompany,visit_hour:e.visitTime,visit_date:e.visitDate,host_member_id:e.hostMemberId},n=t.map((function(e){return Object(je.a)({},e,{},a)}));return T.post("/visitors",{visitors:n})},deleteVisitor:function(e){return T.put("/visitors/".concat(e,"/cancel"))}},ca={getMembers:function(){return T.get("/members")},updateBuildingRole:function(e){var t=e.memberId,a=e.buildingId,n=e.role;return T.put("/enterprise_users/update_role",{member_id:t,building_id:a,role:n})},setBlocked:function(e){var t=e.memberId,a=e.updatingAttributes;return T.put("/members/".concat(t,"/blocked"),a)}},sa={getHasFrontdesk:function(){return T.get("/building_company/has_frontdesk")}},ma=a(436),ua=a(512),da=a(439),pa=a(253),ga=a.n(pa),ba=function(){return{submitButton:{fontWeight:"bold"},dialogContent:{minWidth:660,maxWidth:660},inputField:{marginTop:-15,padding:"0 10px",width:"100%"},calendarInputField:{marginTop:10},selectLabel:{position:"relative",fontSize:14,paddingBottom:3},inputLabel:{padding:"20px 12px"},selectBox:{paddingTop:16},button:{fontWeight:"bold",margin:"0 20px"},addVisitorButton:{fontWeight:"bold",marginTop:"15px",maxWidth:"40px",maxHeight:"40px",minWidth:"40px",minHeight:"40px",marginRight:"10px"},deleteVisitorButton:{fontWeight:"bold",marginTop:"15px",backgroundColor:"#EE3C3C",color:"#FFF","&:hover":{backgroundColor:"#EE3C3C"},maxWidth:"40px",maxHeight:"40px",minWidth:"40px",minHeight:"40px",marginRight:"10px"},visitorsContainer:{display:"flex",justifyContent:"space-between"},buttonContainer:{display:"flex",justifyContent:"flex-end"},actions:{marginTop:30,marginBottom:10,display:"flex",justifyContent:"center"}}},ha=B.getUserData(),fa=function(){return{visitorData:zt()([{name:"",email:""}]),visitorCompany:"",visitTime:C()(new Date).add(1,"hour").minute(0).toDate(),visitDate:new Date,hostMemberId:E()(ha,"member.id","")}},va=Object(d.memo)((function(e){var t=e.classes,a=e.open,n=e.setOpen,r=e.loading,o=e.setMemberState,i=e.members,l=e.companyHasFrontdesk,c=e.memberData,s=e.submitFetch,m=e.submitLoading,u=e.submitError,d=function(){var e=c.visitorData;e.splice(1,0,{name:"",email:""}),o({visitorData:e})},g=function(){W.hit("VisitorModal - Closed"),o(fa()),n(!1)},b=ga()(E()(u,"errors",{}),(function(e){return e[0]})),h=c.visitorCompany,f=c.visitTime,v=c.visitDate,y=c.hostMemberId,k=c.visitorData;return p.a.createElement("div",null,p.a.createElement(_.a,{onClick:function(){W.hit("VisitorModal - Viewed"),o(fa()),n(!0)},size:"large",variant:"contained",color:"primary"},"Novo visitante"),p.a.createElement(Mt.a,{open:a,maxWidth:"md",onClose:g,keepMounted:!0},p.a.createElement(Dt.a,null,"Novo visitante"),p.a.createElement(Bt.a,{className:t.dialogContent},r?p.a.createElement(G,null):l?p.a.createElement(z.a,{container:!0,spacing:2},k.map((function(e,a){return p.a.createElement(p.a.Fragment,{key:a.toString()},p.a.createElement(z.a,{item:!0,xs:6},p.a.createElement(ze.a,{error:!!b.name,className:t.inputField},p.a.createElement(le.a,{error:!!b.name,fullWidth:!0,label:"Nome do visitante",margin:"normal",InputLabelProps:{shrink:!0},value:k[a].name,disabled:m,onChange:function(e){return function(e,t){var a=c.visitorData;a[t].name=e.target.value,o({visitorData:a})}(e,a)}}),b.name&&p.a.createElement(da.a,null,b.name))),p.a.createElement(z.a,{item:!0,xs:5},p.a.createElement(ze.a,{error:!!b.email,className:t.inputField},p.a.createElement(le.a,{error:!!b.email,fullWidth:!0,label:"E-mail do visitante",margin:"normal",InputLabelProps:{shrink:!0},value:k[a].email,disabled:m,onChange:function(e){return function(e,t){var a=c.visitorData;a[t].email=e.target.value,o({visitorData:a})}(e,a)}}),b.email&&p.a.createElement(da.a,null,b.email))),p.a.createElement(z.a,{item:!0,xs:1},p.a.createElement("div",{className:t.buttonContainer},a?p.a.createElement(_.a,{tabIndex:"-1",onClick:function(){return function(e){var t=c.visitorData;t.splice(e,1),o({visitorData:t})}(a)},variant:"contained",disabled:m,className:t.deleteVisitorButton},"-"):p.a.createElement(_.a,{onClick:d,color:"primary",variant:"contained",disabled:m,className:t.addVisitorButton},"+"))))})),p.a.createElement(p.a.Fragment,null,p.a.createElement(z.a,{item:!0,xs:6},p.a.createElement(ze.a,{className:t.inputField,error:!!b.visitorCompany},p.a.createElement(le.a,{error:!!b.visitorCompany,fullWidth:!0,label:"Empresa do visitante/evento",margin:"normal",InputLabelProps:{shrink:!0},value:h,disabled:m,onChange:function(e){return o({visitorCompany:e.target.value})}}),b.visitorCompany&&p.a.createElement(da.a,null,b.visitorCompany))),p.a.createElement(z.a,{item:!0,xs:6},p.a.createElement(ze.a,{className:t.inputField,error:!!b.host_member},p.a.createElement(ma.a,{className:t.inputLabel,id:"hostMemberId"},"Pessoa visitada"),p.a.createElement(_e.a,{labelId:"hostMemberId",placeholder:E()(ha,"member.name",""),fullWidth:!0,className:t.selectBox,value:y,disabled:m,onChange:function(e){return o({hostMemberId:e.target.value})}},i.map((function(e){return p.a.createElement(Pe.a,{key:e.id,value:e.id},"".concat(e.name," ").concat(e.lastname))}))),b.members&&p.a.createElement(da.a,null,b.members)))),p.a.createElement(p.a.Fragment,null,p.a.createElement(z.a,{item:!0,xs:6},p.a.createElement(ze.a,{className:t.inputField,error:!!b.visitorCompany},p.a.createElement(Lt.a,{libInstance:C.a,utils:Rt.a,locale:D.locale},p.a.createElement(Vt.a,{className:t.calendarInputField,style:ba.components,label:"Data da visita",invalidDateMessage:"Formato inv\xe1lido",variant:"dialog",value:v,disabled:m,onChange:function(e){return o({visitDate:e})},minDate:new Date,format:"DD/MM/YYYY",cancelLabel:"Cancelar"})))),p.a.createElement(z.a,{item:!0,xs:6},p.a.createElement(ze.a,{className:t.inputField,error:!!b.visitorCompany},p.a.createElement(Lt.a,{libInstance:C.a,utils:Rt.a,locale:D.locale},p.a.createElement(ua.a,{className:t.calendarInputField,style:ba.components,ampm:!1,minutesStep:5,variant:"dialog",label:"Hor\xe1rio",value:f,disabled:m,onChange:function(e){return o({visitTime:e})},cancelLabel:"Cancelar"})))))):p.a.createElement("div",null,"Fun\xe7\xe3o indispon\xedvel, contacte a administra\xe7\xe3o do pr\xe9dio para habilitar")),!r&&p.a.createElement(St.a,{className:t.actions},p.a.createElement(_.a,{onClick:g,size:"large",disabled:m},l?"Cancelar":"Fechar"),l&&p.a.createElement(_.a,{onClick:function(){return s(!0)},size:"large",color:"primary",variant:"contained",disabled:m,style:ba.submitButton},m?"Autorizando...":"Autorizar"))))})),Ea=Me(la.createVisitors,{name:"submit",init:!1,options:function(e){var t=e.onCreateVisitor,a=e.memberData,n=e.setOpen,r=e.setMemberState,o=e.companyId;return{variables:Object(je.a)({},a,{companyId:o}),onRequestFinished:function(){W.hit("NewVisitor - Added"),n(!1),r(fa()),t()},onRequestError:function(e){t(e)}}}}),ya=Object(Oe.a)(Object(U.a)(ba,{withTheme:!0}),Object(Oe.d)("open","setOpen",!1),Object(Oe.d)("memberData","setMemberData",fa()),Object(Oe.c)({setMemberState:function(e){var t=e.setMemberData,a=e.memberData;return function(e){t(Object(je.a)({},a,{},e))}}}),Ea)(va),ka=a(504),wa=a(506),Ca=a(503),xa=a(505),Oa=a(502),Aa=a(110),ja={cancel:{marginRight:10},textField:{backgroundColor:"#fff"},saveButton:{paddingRight:25,paddingLeft:25,paddingTop:15,paddingBottom:15,color:"#FFF",backgroundColor:be.a[500],"&:hover":{backgroundColor:be.a[200]},"&:active":{backgroundColor:be.a[400]},"&:focus":{backgroundColor:be.a[500]},fontWeight:"bold",width:150},cancelButton:{paddingRight:25,paddingLeft:25,paddingTop:15,paddingBottom:15,color:"#FFF",backgroundColor:J.a[500],"&:hover":{backgroundColor:J.a[300]},"&:active":{backgroundColor:J.a[500]},"&:focus":{backgroundColor:J.a[800]},fontWeight:"bold",width:150},tableCell:{color:"#003f54",fontSize:16,width:150,maxWidth:150,minWidth:150,wordBreak:"break-word"},tableSmallCell:{color:"#003f54",fontSize:16,width:90,maxWidth:90,minWidth:90,wordBreak:"break-word"},tableLargeCell:{color:"#003f54",fontSize:16,width:300,maxWidth:300,minWidth:300,wordBreak:"break-word"},bgGray:{backgroundColor:"#EEE"},bgWhite:{backgroundColor:"#FFF"},containerButton:{display:"flex",justifyContent:"flex-start"},light:{color:"#999"},clearButton:{display:"flex",justifyContent:"center",alignItems:"center",padding:7,marginLeft:5,borderRadius:50,borderWidth:0,borderStyle:"none",borderImage:"none",backgroundColor:"#EE3C3C",cursor:"pointer",color:"#fff","&:hover":{color:"#fff",backgroundColor:"#EE2C3C"}}},Ma={ACCEPTED:"Autorizado",PENDING:"Pendente",CANCELED:"Cancelado"},Ba=Object(d.memo)((function(e){var t=e.index,a=e.visitor,n=e.CancelVisitor,r=E()(a,"id"),o="".concat(E()(a,"name")," ").concat(E()(a,"visitor_company")||""),i="".concat(E()(a,"host_member.name")," ").concat(E()(a,"host_member.lastname")),l=E()(a,"host_member.email"),c="".concat(E()(a,"inviter.name")," ").concat(E()(a,"inviter.lastname")),s=E()(a,"inviter.email"),m=E()(a,"visit_date"),u=C()(E()(a,"visit_hour")),d=E()(a,"checkin_at"),g=C()(m).hour(u.hour()).minute(u.minute());return p.a.createElement(Oa.a,{style:t%2?ja.bgWhite:ja.bgGray},p.a.createElement(Ca.a,{style:ja.tableCell},m?"".concat(C()(m).format("DD/MM/YYYY")):"--",p.a.createElement("br",null),u?"".concat(C()(u).format("HH:mm")):"--"),p.a.createElement(Ca.a,{style:ja.tableCell},Ma[a.status],p.a.createElement("br",null),d?C()(d).format("DD/MM/YY HH:mm"):""),p.a.createElement(Ca.a,{style:ja.tableCell},o),p.a.createElement(Ca.a,{style:ja.tableCell},i,p.a.createElement("br",null),p.a.createElement("small",null,l)),p.a.createElement(Ca.a,{style:ja.tableCell},c,p.a.createElement("br",null),p.a.createElement("small",null,s)),p.a.createElement(Ca.a,{style:ja.tableSmallCell},"ACCEPTED"!==a.status&&C()(g).isAfter(C()())&&p.a.createElement("button",{type:"button",style:ja.clearButton,onClick:function(){return n(r)}},p.a.createElement(pe.a,null))))})),Sa={container:{marginBottom:40,paddingTop:20},empty:{backgroundColor:"#EEE"},paper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},tableCell:{fontSize:18,width:140,maxWidth:140,minWidth:140}},Da=Object(d.memo)((function(e){var t=e.visitors,a=e.loading,n=e.onCancelVisitor;return p.a.createElement("div",{style:Sa.container},p.a.createElement(Aa.a,{style:Sa.paper},p.a.createElement(ka.a,null,p.a.createElement(xa.a,null,p.a.createElement(Oa.a,null,p.a.createElement(Ca.a,{style:Sa.tableCell},"DATA VISITA"),p.a.createElement(Ca.a,{style:Sa.tableCell},"STATUS"),p.a.createElement(Ca.a,{style:Sa.tableCell},"VISITANTE"),p.a.createElement(Ca.a,{style:Sa.tableCell},"VISITA PARA"),p.a.createElement(Ca.a,{style:Sa.tableCell},"CRIADO POR"),p.a.createElement(Ca.a,{style:Sa.tableCell},"A\xc7\xc3O"))),p.a.createElement(wa.a,null,a?p.a.createElement(Oa.a,null,p.a.createElement(Ca.a,{colSpan:6,align:"center"},p.a.createElement(G,null))):Le()(t)?t.map((function(e,t){return p.a.createElement(Ba,{index:t,key:e.id,visitor:e,loading:a,CancelVisitor:n})})):p.a.createElement(Oa.a,null,p.a.createElement(Ca.a,{style:Sa.empty,colSpan:6,align:"center"},"Nenhum visitante registrado"))))))})),Na=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.setMonth,r=e.setYear,l=e.setVisitors,c=e.hasFrontdeskData,s=e.setDisableSeeMore,m=e.visitorsFetch,u=e.visitors,d=e.page,g=e.setPage,b=e.hasFrontdeskLoading,h=e.setHideSeeMore,f=e.membersData,v=e.visitorsError,y=e.visitorsLoading,k=e.disableSeeMore,w=e.classes,x=e.month,O=e.year,A=e.hideSeeMore,j=e.totalVisitors,M=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,i,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=C()(t.target.value,"YYYY-MM"),s(!0),g(0),n(a.month()),r(a.year()),e.next=8,m(!0);case 8:i=e.sent,c=ia()(E()(i,"visitors",[]),"id"),l(c),s(!1),h(we()(c)),u={select_month:a.month()+1,select_year:a.year()},W.hit("Visitors - FilteredByMonth",u),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),s(!1),h(!0);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),g(d+1),e.next=5,m(!1);case 5:t=e.sent,a=E()(t,"visitors",[]),l(ia()(aa()(u,a),"id")),s(!1),h(we()(a)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),s(!1),l(u),h(!0);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Deseja cancelar a visita?")){e.next=12;break}return e.prev=1,e.next=4,la.deleteVisitor(t);case 4:return e.next=6,m(!0);case 6:a({alertMsg:"Visitante cancelado com sucesso",alertType:"success",showAlert:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a({alertMsg:"Ocorreu um erro no cancelamento da visita",alertType:"error",showAlert:!0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}a({alertMsg:"Ocorreu um erro ao registrar visitante",alertType:"error",showAlert:!0}),e.next=13;break;case 4:return e.prev=4,a({alertMsg:"Visitante autorizado com sucesso",alertType:"success",showAlert:!0}),e.next=8,m(!0);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),a({alertMsg:"Ocorreu um erro atualizar lista de visitantes",alertType:"error",showAlert:!0});case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),T=Boolean(!y&&!((Le()(u)||1)===j)),I=E()(B.getUserData(),"member.company.id"),F=t.showAlert,R=t.alertMsg,L=t.alertType,V=null;F&&(V=p.a.createElement(Ee,{message:R,type:L,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var Y=E()(f,"members",[]),H=E()(c,"has_frontdesk",!1),z=b||y;return p.a.createElement("div",{className:w.root},p.a.createElement(ot,{alertBox:V,error:v}),p.a.createElement("section",null,p.a.createElement("div",{className:w.container},p.a.createElement("div",{className:w.headerView},p.a.createElement("aside",{className:w.headerTitle},p.a.createElement(P.a,{variant:"h4"},p.a.createElement("b",null,j?"Visitantes (".concat(j,")"):"Visitantes")),p.a.createElement(ze.a,{className:w.inputField,fullWidth:!0},p.a.createElement(_e.a,{fullWidth:!0,className:w.button,value:C()().month(x).year(O).format("YYYY-MM"),onChange:M},ra()(6,(function(e){var t=C()().subtract(e,"month");return p.a.createElement(Pe.a,{key:t.format("YYYY-MM"),value:t.format("YYYY-MM")},t.format("MMMM YYYY"))}))))),p.a.createElement("aside",{className:w.newVisitor},p.a.createElement(ya,{loading:z,setAlert:a,members:Y,companyId:I,onCreateVisitor:N,companyHasFrontdesk:H})))),p.a.createElement("div",{className:w.container},p.a.createElement(Da,{visitors:u,loading:y,onCancelVisitor:D}),T&&!A&&p.a.createElement("div",{className:w.buttonContainer},p.a.createElement(_.a,{className:w.showMoreButton,onClick:S,size:"large",variant:"contained",color:"primary",disabled:k},k?"Carregando":"Ver Mais")))))})),Ta=Me(sa.getHasFrontdesk,{name:"hasFrontdesk"}),Ia=Me(ca.getMembers,{name:"members"}),Fa=Me(la.getVisitors,{name:"visitors",options:function(e){var t=e.page,a=e.month,n=e.year,r=e.setVisitors,o=e.setHideSeeMore,i=e.setTotalVisitors;return{variables:{page:t,perPage:20,month:a+1,year:n},onRequestFinished:function(e){var t=ia()(E()(e,"visitors",[]),"id"),a=E()(e,"meta.total",0);r(t),o(we()(t)),i(a)}}}}),Ra=Object(Oe.a)(Object(U.a)((function(e){return{root:{flexGrow:1,marginRight:20,marginLeft:20},container:Object(Ae.a)({width:"auto",height:"100%",maxHeight:"100%",paddingLeft:at.isTablet()?10:e.menuWidth/2,paddingRight:10,marginBottom:40},e.breakpoints.up(e.containerWidth+2*e.spacing(3)),{width:e.containerWidth,marginLeft:"auto",marginRight:"auto"}),headerView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"flex-start"},headerTitle:{marginTop:10},createNotificationButton:{backgroundColor:"#1177FF",border:"none",width:200,height:50},button:{marginTop:20},buttonContainer:{display:"flex",justifyContent:"center"},showMoreButton:{width:220},newVisitor:{paddingTop:15}}}),{withTheme:!0}),Object(Oe.d)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Oe.d)("totalVisitors","setTotalVisitors",0),Object(Oe.d)("visitors","setVisitors",[]),Object(Oe.d)("hideSeeMore","setHideSeeMore",!1),Object(Oe.d)("disableSeeMore","setDisableSeeMore",!1),Object(Oe.d)("page","setPage",0),Object(Oe.d)("month","setMonth",C()().month()),Object(Oe.d)("year","setYear",C()().year()),Ta,Ia,Fa)(Na),La={getDeliveries:function(e){var t=e.page,a=void 0===t?0:t,n=e.perPage,r=void 0===n?10:n,o=e.month,i=void 0===o?1:o,l=e.year;return T.get("/deliveries",{page:a,per_page:r,month:i,year:l})}},Va={cancel:{marginRight:10},textField:{backgroundColor:"#fff"},tableCell:{color:"#003f54",fontSize:16},tableSmallCell:{color:"#003f54",fontSize:16,width:160,maxWidth:160,minWidth:160,wordBreak:"break-word"},tableMediumCell:{color:"#003f54",fontSize:16,width:200,maxWidth:200,minWidth:200,wordBreak:"break-word"},bgGray:{backgroundColor:"#EEE"},bgWhite:{backgroundColor:"#FFF"}},Wa={package:"Encomenda",food:"Comida"},Ya={member_receive:"Ocupante desceu",expedition_receive:"Expedi\xe7\xe3o recebeu",office_delivery:"Entregue no escrit\xf3rio",expedition_delivery:"Expedi\xe7\xe3o entregou"},Ha=Object(d.memo)((function(e){var t=e.index,a=e.delivery,n="".concat(E()(a,"member.name")," ").concat(E()(a,"member.lastname")),r=E()(a,"member.email"),o=E()(a,"member.company.name"),i=C()(E()(a,"created_at")).format("DD/MM/YY HH:mm"),l=E()(a,"delivery_method"),c=E()(a,"delivery_type");return p.a.createElement(Oa.a,{style:t%2?Va.bgWhite:Va.bgGray},p.a.createElement(Ca.a,{style:Va.tableSmallCell},i),p.a.createElement(Ca.a,{style:Va.tableSmallCell},Ya[l]),p.a.createElement(Ca.a,{style:Va.tableSmallCell},Wa[c]),p.a.createElement(Ca.a,{style:Va.tableMediumCell},n,p.a.createElement("br",null),o,p.a.createElement("br",null),p.a.createElement("small",null,r)))})),za={container:{marginBottom:40,paddingTop:20},empty:{backgroundColor:"#EEE"},paper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},tableCell:{fontSize:18}},Pa=Object(d.memo)((function(e){var t=e.deliveries,a=e.loading;return p.a.createElement("div",{style:za.container},p.a.createElement(Aa.a,{style:za.paper},p.a.createElement(ka.a,null,p.a.createElement(xa.a,null,p.a.createElement(Oa.a,null,p.a.createElement(Ca.a,{style:za.tableCell},"DATA"),p.a.createElement(Ca.a,{style:za.tableCell},"ENTREGA"),p.a.createElement(Ca.a,{style:za.tableCell},"TIPO"),p.a.createElement(Ca.a,{style:za.tableCell},"OCUPANTE"))),p.a.createElement(wa.a,null,a?p.a.createElement(Oa.a,null,p.a.createElement(Ca.a,{colSpan:4,align:"center"},p.a.createElement(G,null))):Le()(t)?t.map((function(e,t){return p.a.createElement(Ha,{index:t,key:e.id,delivery:e,loading:a})})):p.a.createElement(Oa.a,null,p.a.createElement(Ca.a,{style:za.empty,colSpan:4,align:"center"},"Nenhuma entrega registrada"))))))})),_a=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={alertMsg:"",alertType:"",showAlert:!1},a.clearAlert=function(){return a.setState({showAlert:!1,alertMsg:""})},a.renderAlertBox=function(){var e=a.state,t=e.alertMsg,n=e.alertType;return e.showAlert?p.a.createElement(Ee,{message:t,type:n,onClose:a.clearAlert}):null},a.onSelectMonth=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,i,l,c,s,m,u,d,p,g,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.setMonth,i=n.setYear,l=n.setDeliveries,c=n.setPage,s=n.setDisableSeeMore,m=n.setHideSeeMore,u=n.deliveriesFetch,e.prev=1,d=C()(t.target.value,"YYYY-MM"),s(!0),c(0),r(d.month()),i(d.year()),e.next=9,u(!0);case 9:p=e.sent,g=ia()(E()(p,"deliveries",[]),"id"),l(g),s(!1),m(we()(g)),b={select_month:d.month()+1,select_year:d.year()},W.hit("Deliveries - FilteredByMonth",b),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),s(!1),m(!0);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),a.onSeeMore=Object(i.a)(o.a.mark((function e(){var t,n,r,i,l,c,s,m,u,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.deliveries,r=t.setDeliveries,i=t.page,l=t.setPage,c=t.deliveriesFetch,s=t.setHideSeeMore,m=t.setDisableSeeMore,e.prev=1,m(!0),l(i+1),e.next=6,c(!1);case 6:u=e.sent,d=ia()(E()(u,"deliveries",[]),"id"),r(aa()(n,d)),m(!1),s(we()(d)),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),m(!1),r(n),s(!0);case 18:case"end":return e.stop()}}),e,null,[[1,13]])}))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.deliveries,a=e.deliveriesLoading,n=e.deliveriesError,r=e.classes,o=e.month,i=e.year,l=e.hideSeeMore,c=e.disableSeeMore,s=e.totalDeliveries,m=n,u=Boolean(!a&&!((Le()(t)||1)===s));return p.a.createElement("div",{className:r.root},p.a.createElement(ot,{alertBox:this.renderAlertBox(),error:m}),p.a.createElement("section",null,p.a.createElement("div",{className:r.container},p.a.createElement("div",{className:r.headerView},p.a.createElement("aside",{className:r.headerTitle},p.a.createElement(P.a,{variant:"h4"},p.a.createElement("b",null,s?"Entregas (".concat(s,")"):"Entregas")),p.a.createElement(ze.a,{className:r.inputField,fullWidth:!0},p.a.createElement(_e.a,{fullWidth:!0,className:r.button,value:C()().month(o).year(i).format("YYYY-MM"),onChange:this.onSelectMonth},ra()(6,(function(e){var t=C()().subtract(e,"month");return p.a.createElement(Pe.a,{key:t.format("YYYY-MM"),value:t.format("YYYY-MM")},t.format("MMMM YYYY"))}))))))),p.a.createElement("div",{className:r.container},p.a.createElement(Pa,{deliveries:t,loading:a}),u&&!l&&p.a.createElement("div",{className:r.buttonContainer},p.a.createElement(_.a,{className:r.showMoreButton,onClick:this.onSeeMore,size:"large",variant:"contained",color:"primary",disabled:c},c?"Carregando":"Ver Mais")))))}}]),t}(d.PureComponent),Ua=Me(La.getDeliveries,{name:"deliveries",options:function(e){var t=e.page,a=e.month,n=e.year,r=e.setDeliveries,o=e.setHideSeeMore,i=e.setTotalDeliveries;return{variables:{page:t,perPage:20,month:a+1,year:n},onRequestFinished:function(e){var t=ia()(E()(e,"deliveries",[]),"id"),a=E()(e,"meta.total",0);r(t),o(we()(t)),i(a)}}}}),qa=Object(Oe.a)(Object(U.a)((function(e){return{root:{flexGrow:1,marginRight:20,marginLeft:20},container:Object(Ae.a)({width:"auto",height:"100%",maxHeight:"100%",paddingLeft:at.isTablet()?10:e.menuWidth/2,paddingRight:10,marginBottom:40},e.breakpoints.up(e.containerWidth+2*e.spacing(3)),{width:e.containerWidth,marginLeft:"auto",marginRight:"auto"}),headerView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"flex-start"},headerTitle:{marginTop:10},createNotificationButton:{backgroundColor:"#1177FF",border:"none",width:200,height:50},button:{marginTop:20},buttonContainer:{display:"flex",justifyContent:"center"},showMoreButton:{width:220}}}),{withTheme:!0}),Object(Oe.d)("totalDeliveries","setTotalDeliveries",0),Object(Oe.d)("deliveries","setDeliveries",[]),Object(Oe.d)("hideSeeMore","setHideSeeMore",!1),Object(Oe.d)("disableSeeMore","setDisableSeeMore",!1),Object(Oe.d)("page","setPage",0),Object(Oe.d)("month","setMonth",C()().month()),Object(Oe.d)("year","setYear",C()().year()),Ua)(_a),Qa=a(38),Ga=Object(Oe.a)(Object(Oe.d)("viewer","setViewer",null),Object(Oe.b)({componentDidMount:function(){var e=B.getUserData();this.props.setViewer(e)}})),Xa={progress:{marginRight:10,marginTop:12}},Ja=Object(d.memo)((function(e){var t=e.classes;return p.a.createElement(H.a,{size:18,color:"primary",className:t.progress,variant:"indeterminate",disableShrink:!0,thickness:5})}));Ja.propTypes={classes:vt.a.object};var Za=Object(Oe.a)(Object(U.a)(Xa,{withTheme:!0}))(Ja),Ka=function(){return{checkBoxLoadingView:{display:"flex",alignItems:"flex-end",justifyContent:"flex-start",height:20,cursor:"pointer",marginLeft:7},checkBoxView:{display:"flex",alignItems:"center",justifyContent:"flex-start",height:20,cursor:"pointer",marginLeft:-10,marginTop:15},checkBoxViewMembers:{display:"flex",alignItems:"center",justifyContent:"flex-start",height:20,cursor:"pointer",marginLeft:-10},checkbox:{marginTop:10}}},$a=Object(U.a)(Ka,{withTheme:!0})((function(e){var t=e.classes,a=e.blockedAt,n=e.loading,r=e.onConfirmBlock;return p.a.createElement("div",null,n?p.a.createElement("div",{className:t.checkBoxLoadingView},p.a.createElement(Za,null),p.a.createElement("span",null,"Desativar usu\xe1rio")):p.a.createElement("label",{className:t.checkBoxViewMembers},p.a.createElement(Nt.a,{checked:a,style:Ka.checkbox,onChange:function(){window.confirm("Tem certeza em realizar essa a\xe7\xe3o?")&&r()}}),"Desativar usu\xe1rio"))})),en={cancel:{marginRight:10},textField:{backgroundColor:"#fff"},tableCell:{color:"#003f54",fontSize:16},tableSmallCell:{color:"#003f54",fontSize:16,height:30,width:160,maxWidth:160,minWidth:160,wordBreak:"break-word"},tableMediumCell:{color:"#003f54",fontSize:16,width:200,maxWidth:200,minWidth:200,wordBreak:"break-word"},bgGray:{backgroundColor:"#EEE"},bgWhite:{backgroundColor:"#FFF"}},tn=[{label:"Colaborador",value:"MEMBER"},{label:"Recep\xe7\xe3o",value:"COMPANY_RECEPTIONIST"},{label:"Admin",value:"COMPANY_MANAGER"}],an=Object(d.memo)((function(e){var t=e.updateBuildingRoleLoading,a=e.role,n=e.onChangeRole;return t?p.a.createElement("div",{className:en.checkBoxView},p.a.createElement(Za,null),p.a.createElement("span",{className:en.roleLoadingLabel},"Atualizando...")):p.a.createElement("div",{className:en.checkBoxView},p.a.createElement(_e.a,{className:en.towerSelect,value:a,onChange:n},tn.map((function(e){return p.a.createElement(Pe.a,{key:e.value,value:e.value},e.label)}))))}));an.propTypes={role:vt.a.string,onChangeRole:vt.a.func,updateBuildingRoleLoading:vt.a.bool};var nn=Object(d.memo)((function(e){var t=e.viewer,a=e.index,n=e.member,r=e.loggedMemberId,o=e.updateBuildingRoleLoading,i=e.updateBuildingRoleFetch,l=e.memberBlockedAtLoading,c=e.memberBlockedAtFetch;if(!t)return null;var s=Object(Qa.get)(n,"enterprise_user.buildings_enterprise_users"),m=Object(Qa.find)(s,(function(e){return e.building_id===t.building_id})),u=Object(Qa.get)(m,"role","MEMBER"),d=Object(Qa.get)(t,"buildings_enterprise_users"),g=Object(Qa.find)(d,(function(e){return e.building_id===t.building_id})),b=Object(Qa.get)(g,"role"),h="".concat(Object(Qa.get)(n,"name")," ").concat(Object(Qa.get)(n,"lastname")),f=Object(Qa.get)(n,"email"),v=Object(Qa.get)(n,"phone"),E=Boolean(Object(Qa.get)(n,"building_member.blocked_at"));return p.a.createElement(Oa.a,{style:a%2?en.bgWhite:en.bgGray},p.a.createElement(Ca.a,{style:en.tableSmallCell},h),p.a.createElement(Ca.a,{style:en.tableSmallCell},"COMPANY_MANAGER"===b&&n.id!==t.member.id?p.a.createElement(an,{updateBuildingRoleLoading:o,role:u,onChangeRole:function(e,a){var r=a.props.value,o={variables:{memberId:n.id,buildingId:t.building_id,role:r}};i(!0,"",null,o).catch((function(){}))}}):Object(Qa.get)(Object(Qa.find)(tn,(function(e){return e.value===u})),"label")),p.a.createElement(Ca.a,{style:en.tableSmallCell},f),p.a.createElement(Ca.a,{style:en.tableSmallCell},v),p.a.createElement(Ca.a,{style:en.tableCell},r!==n.id&&p.a.createElement($a,{loading:l,blockedAt:!!E,onConfirmBlock:function(){return c(!0)}})))})),rn=Me(ca.updateBuildingRole,{name:"updateBuildingRole",init:!1,options:function(e){var t=e.refetch,a=e.setAlert;return{onRequestFinished:t,onRequestError:function(){a({alertMsg:"Ocorreu um erro na atualiza\xe7\xe3o desse papel",alertType:"error",showAlert:!0})}}}}),on=Me(ca.setBlocked,{name:"memberBlockedAt",init:!1,options:function(e){var t=e.refetch,a=e.member;return{variables:{memberId:a.id,updatingAttributes:{blocked_at:!a.building_member.blocked_at}},onRequestFinished:t}}}),ln=Object(Oe.a)(rn,Ga,on)(nn),cn={container:{marginBottom:40,paddingTop:20},empty:{backgroundColor:"#EEE"},paper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},tableCell:{fontSize:18}},sn=Object(d.memo)((function(e){var t=e.members,a=e.loading,n=e.refetch,r=e.setAlert,o=e.loggedMemberId;return p.a.createElement("div",{style:cn.container},p.a.createElement(Aa.a,{style:cn.paper},p.a.createElement(ka.a,null,p.a.createElement(xa.a,null,p.a.createElement(Oa.a,null,p.a.createElement(Ca.a,{style:cn.tableCell},"NOME"),p.a.createElement(Ca.a,{style:cn.tableCell},"CARGO"),p.a.createElement(Ca.a,{style:cn.tableCell},"EMAIL"),p.a.createElement(Ca.a,{style:cn.tableCell},"CELULAR"),p.a.createElement(Ca.a,{style:cn.tableCell},"A\xc7\xc3O"))),p.a.createElement(wa.a,null,a?p.a.createElement(Oa.a,null,p.a.createElement(Ca.a,{colSpan:5,align:"center"},p.a.createElement(G,null))):Le()(t)?t.map((function(e,t){return p.a.createElement(ln,{loggedMemberId:o,refetch:n,setAlert:r,index:t,key:e.id,member:e,loading:a})})):p.a.createElement(Oa.a,null,p.a.createElement(Ca.a,{style:cn.empty,colSpan:5,align:"center"},"Nenhum usu\xe1rio cadastrado"))))))})),mn=B.getUserData(),un=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={alertMsg:"",alertType:"",showAlert:!1},a.clearAlert=function(){return a.setState({showAlert:!1,alertMsg:""})},a.setAlert=function(e){var t=e.alertMsg,n=e.alertType,r=e.showAlert;return a.setState({alertMsg:t,alertType:n,showAlert:r})},a.renderAlertBox=function(){var e=a.state,t=e.alertMsg,n=e.alertType;return e.showAlert?p.a.createElement(Ee,{message:t,type:n,onClose:a.clearAlert}):null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.membersData,a=e.membersLoading,n=e.membersError,r=e.membersFetch,o=e.classes,i=E()(t,"members"),l=n,c=Le()(i),s=E()(mn,"member.id");return p.a.createElement("div",{className:o.root},p.a.createElement(ot,{alertBox:this.renderAlertBox(),error:l}),p.a.createElement("section",null,p.a.createElement("div",{className:o.container},p.a.createElement("div",{className:o.headerView},p.a.createElement("aside",{className:o.headerTitle},p.a.createElement(P.a,{variant:"h4"},p.a.createElement("b",null,c?"Usu\xe1rios (".concat(c,")"):"Usu\xe1rios"))))),p.a.createElement("div",{className:o.container},p.a.createElement(sn,{loggedMemberId:s,refetch:function(){return r(!1)},setAlert:this.setAlert,members:i,loading:a}))))}}]),t}(d.PureComponent),dn=Me(ca.getMembers,{name:"members"}),pn=Object(Oe.a)(Object(U.a)((function(e){return{root:{flexGrow:1,marginRight:20,marginLeft:20},container:Object(Ae.a)({width:"auto",height:"100%",maxHeight:"100%",paddingLeft:at.isTablet()?10:e.menuWidth/2,paddingRight:10,marginBottom:40},e.breakpoints.up(e.containerWidth+2*e.spacing(3)),{width:e.containerWidth,marginLeft:"auto",marginRight:"auto"}),headerView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"flex-start"},headerTitle:{marginTop:10}}}),{withTheme:!0}),dn)(un);C.a.locale(D.locale);var gn=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0},Object(i.a)(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return D.isiOS&&document.querySelector('link[rel="manifest"]').setAttribute("rel","no-on-ios"),t.prev=1,t.next=4,I.getEnterpriseUser();case 4:a=t.sent,n=E()(a,"enterprise_user"),B.setUserData(n),W.trackScreenView("Home"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),B.setUserData(null);case 13:return t.prev=13,e.setState({loading:!1}),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])}))))}},{key:"render",value:function(){var e=this.state.loading;return p.a.createElement(O.a,{theme:Z},p.a.createElement(x.a,null),p.a.createElement(d.Suspense,{fallback:p.a.createElement(G,{hasRefreshMsg:!0})},e?p.a.createElement(G,{hasRefreshMsg:!0}):p.a.createElement(h.a,null,p.a.createElement(f.c,null,k()(ie,(function(e,t){return e.submenus?k()(e.submenus,(function(t,a){return p.a.createElement(f.a,{key:"".concat(e.path).concat(t.path),exact:t.exact,path:"".concat(e.path).concat(t.path),component:Y(n[a],t.trackPage)})})):p.a.createElement(f.a,{key:e.path,exact:e.exact,path:e.path,component:Y(n[t],e.trackPage)})}))))))}}]),t}(d.PureComponent);b.a.render(p.a.createElement(gn,null),document.querySelector("main"))}},[[273,1,2]]]);
//# sourceMappingURL=main.52c7f740.chunk.js.map