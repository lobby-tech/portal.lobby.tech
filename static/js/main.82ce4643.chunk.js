(this["webpackJsonplobby-portal"]=this["webpackJsonplobby-portal"]||[]).push([[0],{122:function(e,t,n){e.exports=n(243)},241:function(e,t,n){e.exports=n.p+"static/media/logo.7f12e1c7.png"},243:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"Signin",(function(){return se}));var r=n(20),o=n.n(r),i=n(30),s=n(31),c=n(35),u=n(32),l=n(36),p=n(0),m=n.n(p),h=n(7),g=n.n(h),f=n(109),d=n(27),b=n(24),v=n.n(b),y=n(67),k=n.n(y),E=n(290),w=n(285),C=n(105),S=n.n(C),x={save:function(e,t){return localStorage.setItem(e,JSON.stringify(t))},get:function(e){try{var t=localStorage.getItem(e);return JSON.parse(t)}catch(n){return{}}},delete:function(e){return localStorage.removeItem(e)}},j={setUserToken:function(e){return x.save("userToken",e)},getUserToken:function(){return x.get("userToken")||""},setUserData:function(e){return x.save("userData",e)},getUserData:function(){return x.get("userData")||{}},clear:function(){x.delete("userToken"),x.delete("userData")},getAuthToken:function(){var e=x.get("userToken");if(e)return e;throw new Error("No authToken")},getBearerToken:function(){var e=x.get("userToken");return"Bearer: ".concat(e)},isLoggedIn:function(){var e=x.get("userToken");return!!e},isAuthorized:function(e){return e&&"unauthorized"!==e.error}},O=n(106),T={companyName:"Lobby",appName:"Lobby Portal",appNamespace:n.n(O)()("Lobby Portal"),apiURL:"https://api.lobby.tech",wsURL:"wss://api.lobby.tech",env:"production",apiRequestTimeout:1e4,googleAnalyticsId:"xxxx",locale:"pt-br",isiOS:!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)},N=function(e){var t=v()(e,"response.data");return t||(t={error:v()(e,"message")}),t},U={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return new Promise((function(r,i){var s,c,u,l;return o.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,s=j.getBearerToken(),c=S.a.create({baseURL:"".concat(T.apiURL,"/").concat(T.appNamespace),timeout:T.apiRequestTimeout,headers:{"Content-Type":"application/json",Authorization:s},responseType:"json"}),p.next=5,o.a.awrap(c[e](t,n,a));case 5:return u=p.sent,l=u.data,p.abrupt("return",r(l));case 10:return p.prev=10,p.t0=p.catch(0),p.abrupt("return",i(N(p.t0)));case 13:case"end":return p.stop()}}),null,null,[[0,10]])}))},get:function(e,t){return this.request("get",e,{params:t})},post:function(e,t,n){return this.request("post",e,t,n)},put:function(e,t,n){return this.request("put",e,t,n)},delete:function(e,t,n){return this.request("delete",e,t,n)}},D={getEnterpriseUser:function(){return U.get("/enterprise_users")},setCurrentBuilding:function(e){return U.put("/enterprise_users",{building_id:e})}},I=n(112),L=n(55);L.a.initialize(T.googleAnalyticsId);var M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e){L.a.set(Object(I.a)({page:e},t)),L.a.pageview(e)},a=function(t){return Object(p.useEffect)((function(){n(t.location.pathname)})),m.a.createElement(e,t)};return a},P=n(279),R=n(275),A=n(244),F=n(280),q=n(5),z=function(e){return{progress:{margin:e.spacing(2)},middle:{marginTop:20},center:{justifyContent:"center",textAlign:"center"}}},B=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={slowConnection:!1},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.hasRefreshMsg&&(this.timeoutConnection=setTimeout((function(){e.setState({slowConnection:!0})}),T.apiRequestTimeout))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutConnection)}},{key:"render",value:function(){var e=this.props,t=e.hasRefreshMsg,n=e.classes,a=e.theme.mainColor,r=this.state.slowConnection;return m.a.createElement(R.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:n.middle},m.a.createElement(P.a,{color:a,className:n.progress,variant:"indeterminate",disableShrink:!0,thickness:5}),m.a.createElement(A.a,{variant:"h6"},"Carregando..."),t&&r?m.a.createElement("div",{className:n.center},m.a.createElement("br",null),m.a.createElement(A.a,{variant:"h6"},"H\xe1 problemas de conex\xe3o com a internet"),m.a.createElement(F.a,{onClick:function(){return window.location.reload()},size:"large",color:"primary",variant:"contained"},m.a.createElement("b",null,"Recarregar"))):null)}}]),t}(p.PureComponent),W=Object(q.a)(z,{withTheme:!0})(B),_=n(111),J=Object(_.a)({palette:{primary:{main:"#1177FF"},secondary:{main:"#00F8C9"},background:{default:"#FFFFFF"}},typography:{useNextVariants:!0},containerWidth:1024,menuWidth:240}),H=n(107),V=n.n(H),G={Signin:{label:"Signin",path:"/",icon:m.a.createElement(V.a,null),exact:!0,hideMenu:!0}},K=n(286),Q={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center"},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},X={postSignin:function(e,t){var n={email:e,password:t};return U.post("/auth/signin",n)}},Y=n(289),Z=n(284),$=n(108),ee=n.n($),te=n(283),ne=n(281),ae=n(282),re=function(e){return{success:{backgroundColor:ne.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:"#1177FF"},warning:{backgroundColor:ae.a[700]},closeIcon:{fontSize:20,opacity:.9,justifyContent:"center"},message:{fontSize:20,display:"flex",alignItems:"center"}}},oe=Object(p.memo)((function(e){var t=e.message,n=e.type,a=e.actionButton,r=e.onClickAction,o=e.onClose,i=e.classes,s=[];return a&&s.push(m.a.createElement(F.a,{key:"action",color:"inherit",variant:"outlined",className:i[n||"info"]||i.info,onClick:r},a)),o&&s.push(m.a.createElement(te.a,{key:"action",color:"inherit",onClick:o},m.a.createElement(ee.a,{className:i.closeIcon}))),m.a.createElement(Y.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!0,autoHideDuration:o?3e3:null,onClose:function(){return o&&o()}},m.a.createElement(Z.a,{className:i[n||"info"]||i.info,message:m.a.createElement("span",{className:i.message},t),action:s}))})),ie=Object(q.a)(re,{withTheme:!0})(oe),se=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",errorMsg:"",submit:!1},n.onSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password,i=n.props.history;n.setState({submit:!0},(function(){var e,t,s,c;return o.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(u.prev=0,!a||!r){u.next=14;break}return u.next=4,o.a.awrap(X.postSignin(a,r));case 4:return e=u.sent,t=e.token,j.setUserToken(t),u.next=9,o.a.awrap(D.getEnterpriseUser());case 9:return s=u.sent,c=v()(s,"enterprise_user"),j.setUserData(c),n.setState({submit:!1},(function(){return i.push("/")})),u.abrupt("return",!0);case 14:throw new Error("Blank fields");case 17:return u.prev=17,u.t0=u.catch(0),n.setState({submit:!1,errorMsg:"Credencial inv\xe1lida, tente novamente."}),u.abrupt("return",!0);case 21:case"end":return u.stop()}}),null,null,[[0,17]])}))},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.history;try{j.isLoggedIn()&&e.push("/")}catch(t){j.clear()}}},{key:"render",value:function(){var e=this,t=this.state,a=t.username,r=t.password,o=t.submit,i=t.errorMsg;return m.a.createElement("div",{style:Q.container},m.a.createElement("div",{style:Q.content},i&&m.a.createElement(ie,{message:i,type:"warning",onClose:function(){return e.setState({errorMsg:""})}}),m.a.createElement("img",{src:n(241),width:150,alt:T.appName,style:Q.logo}),m.a.createElement(A.a,{component:"h1",variant:"h5"},"Painel de gest\xe3o"),m.a.createElement("form",{onSubmit:this.onSubmit,style:Q.form},m.a.createElement(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Email",type:"text",disabled:o,value:a,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({username:t.target.value.toLowerCase()})}}),m.a.createElement(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Senha",type:"password",disabled:o,value:r,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({password:t.target.value})}}),m.a.createElement(F.a,{disabled:o,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:Q.button,type:"submit"},o?"Carregando...":"Entrar"))))}}]),t}(p.PureComponent),ce=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0},(function(){var t,n;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return T.isiOS&&document.querySelector('link[rel="manifest"]').setAttribute("rel","no-on-ios"),a.prev=1,a.next=4,o.a.awrap(D.getEnterpriseUser());case 4:t=a.sent,n=v()(t,"enterprise_user"),j.setUserData(n),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),j.setUserData(null);case 12:return a.prev=12,e.setState({loading:!1}),a.finish(12);case 15:case"end":return a.stop()}}),null,null,[[1,9,12,15]])}))}},{key:"render",value:function(){var e=this.state.loading;return m.a.createElement(w.a,{theme:J},m.a.createElement(E.a,null),m.a.createElement(p.Suspense,{fallback:m.a.createElement(W,{hasRefreshMsg:!0})},e?m.a.createElement(W,{hasRefreshMsg:!0}):m.a.createElement(f.a,null,m.a.createElement(d.c,null,k()(G,(function(e,t){return e.submenus?k()(e.submenus,(function(t,n){return m.a.createElement(d.a,{key:"".concat(e.path).concat(t.path),exact:t.exact,path:"".concat(e.path).concat(t.path),component:M(a[n])})})):m.a.createElement(d.a,{key:e.path,exact:e.exact,path:e.path,component:M(a[t])})}))))))}}]),t}(p.PureComponent);g.a.render(m.a.createElement(ce,null),document.querySelector("main"))}},[[122,1,2]]]);
//# sourceMappingURL=main.82ce4643.chunk.js.map