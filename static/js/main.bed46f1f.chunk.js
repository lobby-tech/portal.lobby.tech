(this["webpackJsonplobby-portal"]=this["webpackJsonplobby-portal"]||[]).push([[0],{221:function(e,t,a){e.exports=a.p+"static/media/logo.7f12e1c7.png"},325:function(e,t,a){e.exports=a(480)},454:function(e,t,a){e.exports=a.p+"static/media/slack-integration.9c4865bb.png"},455:function(e,t){e.exports="data:image/png;base64,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"},459:function(e,t,a){},480:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"Signin",(function(){return Fe})),a.d(n,"CreatePassword",(function(){return Ye})),a.d(n,"ResetPassword",(function(){return qe})),a.d(n,"Slack",(function(){return Ea})),a.d(n,"Spaces",(function(){return Ia})),a.d(n,"SpaceCalendar",(function(){return En})),a.d(n,"Visitors",(function(){return Vn})),a.d(n,"Members",(function(){return el})),a.d(n,"MyProfile",(function(){return nl})),a.d(n,"ChangePassword",(function(){return ll})),a.d(n,"Tickets",(function(){return fo})),a.d(n,"NewTicket",(function(){return To})),a.d(n,"TicketCategories",(function(){return kl}));var r=a(11),o=a.n(r),l=a(17),i=a(40),c=a(41),s=a(50),m=a(51),u=a(8),d=(a(327),a(0)),p=a.n(d),g=a(18),b=a.n(g),f=a(52),h=a(28),E=a(7),v=a.n(E),k=a(53),y=a.n(k),C=a(275),O=a.n(C),A=a(13),j=a.n(A),w=a(592),S=a(591),T=a(276),x=a.n(T),N=a(4),I={save:function(e,t){return localStorage.setItem(e,JSON.stringify(t))},get:function(e){try{var t=localStorage.getItem(e);return JSON.parse(t)}catch(a){return console.log(a),{}}},delete:function(e){return localStorage.removeItem(e)}},D={setUserToken:function(e){return I.save("userToken",e)},getUserToken:function(){return I.get("userToken")||""},setUserData:function(e){return I.save("userData",e)},getUserData:function(){return I.get("userData")||{}},clear:function(){I.delete("userToken"),I.delete("userData")},getAuthToken:function(){var e=I.get("userToken");if(e)return e;throw new Error("No authToken")},getBearerToken:function(){var e=I.get("userToken");return"Bearer: ".concat(e)},isLoggedIn:function(){var e=I.get("userToken");return!!e},isAuthorized:function(e){return e&&"unauthorized"!==e.error}},M=a(277),B="production",L={companyName:"Lobby",appName:"Lobby Portal",appNamespace:a.n(M)()("Lobby Portal"),apiURL:"https://api.lobby.tech",wsURL:"wss://api.lobby.tech",env:B,isDevelopment:!1,isStaging:!1,isProduction:!0,slackClientId:"760439175683.1126241376992",slackOAuthURL:"https://slack.com/oauth/v2/authorize",slackOAuthScope:"commands,users:read,users:read.email,chat:write",slackOAuthUserScope:"users:read,users:read.email,chat:write",slackRedirectURL:"".concat("https://api.lobby.tech","/lobby_portal/slack/integrate"),apiRequestTimeout:12500,mixpanelToken:"edc68e4e1788a9a91e92f329276c65f7",sentryDsn:Object({NODE_ENV:"production",PUBLIC_URL:"https://portal.lobby.tech",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_SERVER_URL:"https://api.lobby.tech",REACT_APP_WS_URL:"wss://api.lobby.tech",REACT_APP_MIXPANEL:"edc68e4e1788a9a91e92f329276c65f7",REACT_APP_SENTRY_DSN:"https://2748b8ba3ed240008b5c6b1494dca6e4@o280883.ingest.sentry.io/1505434",REACT_APP_SLACK_CLIENT_ID:"760439175683.1126241376992",REACT_APP_TITLE:"Lobby Portal"}).SENTRY_DSN,locale:"pt-br",isiOS:!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)},P=function(e){var t=Object(N.get)(e,"response.data");return t||(t={error:Object(N.get)(e,"message")}),t},R={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return new Promise(function(){var i=Object(l.a)(o.a.mark((function l(i,c){var s,m,u,d;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,s=D.getBearerToken(),m=x.a.create({baseURL:"".concat(L.apiURL,"/").concat(L.appNamespace),timeout:L.apiRequestTimeout,headers:{"Content-Type":"application/json",Authorization:s},responseType:"json",onUploadProgress:Object(N.get)(r,"onUploadProgress")}),o.next=5,m[e](t,a,n);case 5:return u=o.sent,d=u.data,o.abrupt("return",i(d));case 10:return o.prev=10,o.t0=o.catch(0),o.abrupt("return",c(P(o.t0)));case 13:case"end":return o.stop()}}),l,null,[[0,10]])})));return function(e,t){return i.apply(this,arguments)}}())},get:function(e,t,a){return this.request("get",e,{params:t},a)},post:function(e,t,a,n){return this.request("post",e,t,a,n)},put:function(e,t,a,n){return this.request("put",e,t,a,n)},delete:function(e,t,a,n){return this.request("delete",e,t,a,n)}},F={getEnterpriseUser:function(){return R.get("/enterprise_user")},setCurrentBuilding:function(e){return R.put("/enterprise_user",{building_id:e})}},W=a(144),U=a.n(W),_=a(278),z=a.n(_);U.a.init(L.mixpanelToken);var Y={prepareTrackUser:function(){var e=D.getUserData();if(e&&v()(e,"member.id")){var t={app_id:L.appNamespace,app_name:L.appName,user_id:v()(e,"member.id"),email:v()(e,"member.email"),phone:v()(e,"member.phone"),name:"".concat(v()(e,"member.name")," ").concat(v()(e,"member.lastname")),company:v()(e,"member.company.name"),company_id:v()(e,"member.company.id"),created_at:v()(e,"member.created_at"),verified_at:v()(e,"member.verified_at")};return U.a.identify(t.user_id),U.a.people.set(t),t}return{}},hit:function(e,t){var a=this.prepareTrackUser(),n=z()(t,a);return U.a.track(e,n)},trackScreenView:function(e){this.hit("".concat(e," - Viewed"),{screen:e})}},H=function(e,t){return function(a){return Object(d.useEffect)((function(){"development"!==L.env&&Y.trackScreenView(t)})),p.a.createElement(e,a)}},q=a(593),V=a(58),G=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"setup",value:function(){L.isProduction&&(q.a({dsn:L.sentryDsn,environment:L.env}),V.b("server",L.apiUrl))}},{key:"capture",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.length>1&&void 0!==r[1]?r[1]:{},t&&(L.isProduction?(n=this.getViewerData(),V.c(n),Object.keys(a).forEach((function(e){V.b(e,a[e])})),V.a(t)):console.warn(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getViewerData",value:function(){try{var e=D.getUserData();if(e&&e.id){var t=e.member||e;return{id:t.id,email:t.email}}return{}}catch(a){return{}}}}]),e}(),Q=a(6),J=a(9),K=a(80),X=a.n(K),Z=a(2),$=a.n(Z),ee=a(38),te=function(e){var t;return{container:(t={width:"auto",height:"100%",maxHeight:"100%",marginBottom:20},Object(ee.a)(t,e.breakpoints.up("md"),{paddingLeft:e.menuWidth,width:"calc(100%-".concat(2*e.menuWidth,"px)"),minWidth:"calc(100%-".concat(2*e.menuWidth,"px)"),maxWidth:"calc(100%-".concat(2*e.menuWidth,"px)"),marginLeft:"auto",marginRight:"auto"}),Object(ee.a)(t,e.breakpoints.up("xl"),{width:e.maxContainerWidth,minWidth:e.maxContainerWidth,maxWidth:e.maxContainerWidth,marginLeft:"auto",marginRight:"auto"}),t),root:Object(ee.a)({flexGrow:1,marginRight:10,marginLeft:10},e.breakpoints.up("md"),{marginRight:40,marginLeft:40}),fab:{position:"fixed",zIndex:1e3,bottom:e.spacing(2),right:e.spacing(2)},headerView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"flex-start",whiteSpace:"nowrap"},centerHeaderView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center",alignItems:"center",marginTop:120},tableCell:{color:"#003f54",fontSize:14,height:"auto",wordBreak:"break-word"},tableExtraSmallCell:{color:"#003f54",fontSize:14,height:"auto",width:120,maxWidth:120,minWidth:120,wordBreak:"break-word"},tableSmallCell:{color:"#003f54",fontSize:14,height:"auto",width:160,maxWidth:160,minWidth:160,wordBreak:"break-word"},tableMediumCell:{color:"#003f54",fontSize:14,height:"auto",width:180,maxWidth:180,minWidth:180,wordBreak:"break-word"},bgGray:{backgroundColor:"#EEE"},bgWhite:{backgroundColor:"#FFF"},roleSelect:{fontSize:14},inputBox:{marginTop:10},selectBox:{width:200,marginTop:10},center:{display:"flex",justifyContent:"center",textAlign:"center"},textCenter:{textAlign:"center"},emptyHeaderIcon:{fontSize:32},emptyHeaderTitle:{marginLeft:10},paper:{padding:20,paddingBottom:30},input:{marginTop:20},actions:{marginTop:20,display:"flex",width:"100%",justifyContent:"flex-end"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}},ae=Object(d.memo)((function(e){var t=e.classes;return p.a.createElement("div",{className:t.outterContainer},p.a.createElement(X.a,{className:t.emptyHeaderIcon}),p.a.createElement("b",{className:t.emptyHeaderTitle},"Ocorreu um problema, por favor, tente mais tarde"))}));ae.propTypes={classes:$.a.object};var ne=Object(J.a)((function(e){return Object(u.a)(Object(u.a)({},te(e)),{},{outterContainer:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center",alignItems:"center"}})}),{withTheme:!0})(ae),re=Object(Q.a)(Object(Q.e)("hasError","setHasError",!1),Object(Q.b)({componentDidCatch:function(e,t){G.capture(e,{extra:t}),(0,this.props.setHasError)(!0)}}),(function(e){return function(t){return t.hasError?p.a.createElement(ne,null):p.a.createElement(e,t)}})),oe=a(555),le=a(554),ie=a(147),ce=function(e){return{progress:{margin:e.spacing(2)},middle:{marginTop:20},center:{justifyContent:"center",textAlign:"center"}}},se=function(e){Object(m.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={slowConnection:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.hasRefreshMsg&&(this.timeoutConnection=setTimeout((function(){e.setState({slowConnection:!0})}),L.apiRequestTimeout))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutConnection)}},{key:"render",value:function(){var e=this.props,t=e.hasRefreshMsg,a=e.classes,n=e.theme.mainColor,r=this.state.slowConnection;return p.a.createElement(le.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:a.middle},p.a.createElement(oe.a,{color:n,className:a.progress,variant:"indeterminate",disableShrink:!0,thickness:5}),p.a.createElement("b",null,"Carregando..."),t&&r?p.a.createElement("div",{className:a.center},p.a.createElement("br",null),p.a.createElement("b",null,"H\xe1 problemas de conex\xe3o com a internet"),p.a.createElement(ie.a,{onClick:function(){return window.location.reload()},size:"large",color:"primary",variant:"contained"},p.a.createElement("b",null,"Recarregar"))):null)}}]),a}(d.PureComponent),me=Object(J.a)(ce,{withTheme:!0})(se),ue=a(301),de=a(191),pe=Object(ue.a)({palette:{primary:{main:"#1177FF"},secondary:{main:de.a[500]},background:{default:"#F5F5F5"}},typography:{useNextVariants:!0},maxContainerWidth:1440,menuWidth:200}),ge=a(194),be=a.n(ge),fe=a(283),he=a.n(fe),Ee=a(282),ve=a.n(Ee),ke=a(284),ye=a.n(ke),Ce={Signin:{label:"Signin",trackPage:"Signin",path:"/",icon:p.a.createElement(be.a,null),exact:!0,hideMenu:!0,private:!1},ResetPassword:{label:"Recuperar senha",trackPage:"ResetPassword",path:"/recuperar-senha",icon:p.a.createElement(be.a,null),hideMenu:!0,private:!1},CreatePassword:{label:"Criar senha",trackPage:"CreatePassword",path:"/criar-senha",icon:p.a.createElement(be.a,null),hideMenu:!0,private:!1},NewTicket:{label:"Novo ticket",trackPage:"NewTicket",path:"/tickets/novo",hideMenu:!0,private:!0},Tickets:{label:"Tickets",trackPage:"Tickets",path:"/tickets/:id*",icon:p.a.createElement(ve.a,null),private:!0},Visitors:{label:"Visitantes",trackPage:"Visitors",path:"/visitantes",icon:p.a.createElement(he.a,null),private:!0,buildingFeature:!0},SpaceCalendar:{label:"Espa\xe7os",trackPage:"SpaceCalendar",path:"/espacos/:id",hideMenu:!0,private:!0},Spaces:{label:"Reservas",trackPage:"Spaces",path:"/espacos",icon:p.a.createElement(ye.a,null),private:!0,buildingFeature:!0},MyProfile:{label:"Meu perfil",trackPage:"MyProfile",path:"/configuracoes/meu-perfil",settingsMenu:!0,private:!0},ChangePassword:{label:"Mudar senha",trackPage:"ChangePassword",path:"/configuracoes/mudar-senha",settingsMenu:!0,private:!0},Members:{label:"Usu\xe1rios",trackPage:"Members",path:"/configuracoes/usuarios",settingsMenu:!0,private:!0},Slack:{label:"Slack",trackPage:"Slack",path:"/configuracoes/slack",settingsMenu:!0,private:!0},TicketCategories:{label:"Categorias",trackPage:"TicketCategories",path:"/configuracoes/categorias",settingsMenu:!0,private:!0}},Oe=a(304),Ae=a(66),je={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center",textAlign:"center",paddingLeft:5,paddingRight:5},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},we={postSignin:function(e,t){var a={email:e,password:t};return R.post("/auth/signin",a)}},Se=a(600),Te=a(557),xe=a(35),Ne=a.n(xe),Ie=a(197),De=a(193),Me=a(556),Be=function(e){return{success:{backgroundColor:De.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:"#1177FF"},warning:{backgroundColor:Me.a[700]},closeIcon:{fontSize:20,opacity:.9,justifyContent:"center"},message:{fontSize:20,display:"flex",alignItems:"center"}}},Le=Object(d.memo)((function(e){var t=e.message,a=e.type,n=e.actionButton,r=e.onClickAction,o=e.onClose,l=e.classes,i=[];return n&&i.push(p.a.createElement(ie.a,{key:"action",color:"inherit",variant:"outlined",className:l[a||"info"]||l.info,onClick:r},n)),o&&i.push(p.a.createElement(Ie.a,{key:"action",color:"inherit",onClick:o},p.a.createElement(Ne.a,{className:l.closeIcon}))),p.a.createElement(Se.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!0,autoHideDuration:o?3e3:null,onClose:function(){return o&&o()}},p.a.createElement(Te.a,{className:l[a||"info"]||l.info,message:p.a.createElement("span",{className:l.message},t),action:i}))})),Pe=Object(J.a)(Be,{withTheme:!0})(Le),Re=Object(d.memo)((function(){return p.a.createElement("p",null,"Acessando portal voc\xea concorda com ",p.a.createElement("a",{href:"https://lobby.tech/termos-de-uso/",target:"_blank",rel:"noopener noreferrer"},"termos de uso"))})),Fe=function(e){Object(m.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",errorMsg:"",submit:!1},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password,i=e.props.history;e.setState({submit:!0},Object(l.a)(o.a.mark((function t(){var a,l,c,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!n||!r){t.next=14;break}return t.next=4,we.postSignin(n,r);case 4:return a=t.sent,l=a.token,D.setUserToken(l),t.next=9,F.getEnterpriseUser();case 9:return c=t.sent,s=v()(c,"enterprise_user"),D.setUserData(s),setTimeout((function(){e.setState({submit:!1});var t=I.get("redirectUrl");if(t)I.delete("redirectUrl"),i.push(t);else{var a=v()(s,"member.company.has_ticket_support",!1);i.push(a?"/tickets":"/visitantes")}}),10),t.abrupt("return",!0);case 14:throw new Error("Blank fields");case 17:return t.prev=17,t.t0=t.catch(0),e.setState({submit:!1,errorMsg:"Credencial inv\xe1lida, tente novamente."}),t.abrupt("return",!0);case 21:case"end":return t.stop()}}),t,null,[[0,17]])}))))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.history;try{if(D.isLoggedIn()){var t=D.getUserData(),a=v()(t,"member.company.has_ticket_support",!1);e.push(a?"/tickets":"/visitantes")}}catch(n){D.clear()}}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,r=t.password,o=t.submit,l=t.errorMsg;return p.a.createElement("div",{style:je.container},p.a.createElement("div",{style:je.content},l&&p.a.createElement(Pe,{message:l,type:"warning",onClose:function(){return e.setState({errorMsg:""})}}),p.a.createElement("img",{src:a(221),width:150,alt:L.appName,style:je.logo}),p.a.createElement(Ae.a,{component:"h1",variant:"h5"},"Portal da empresa"),p.a.createElement("form",{onSubmit:this.onSubmit,style:je.form},p.a.createElement(Oe.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Email",type:"text",disabled:o,value:n,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({username:t.target.value.toLowerCase()})}}),p.a.createElement(Oe.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Senha",type:"password",disabled:o,value:r,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({password:t.target.value})}}),p.a.createElement(ie.a,{disabled:o,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:je.button,type:"submit"},o?"Carregando...":"Entrar")),p.a.createElement("p",null,p.a.createElement(f.b,{to:"/recuperar-senha"},"Esqueci minha senha")),p.a.createElement(Re,null)))}}]),n}(d.PureComponent),We=a(21),Ue=a.n(We),_e={verifyIfCanResetPassword:function(e,t){var a={id:e,code:t};return R.post("/password/verify",a)},changePassword:function(e,t,a){var n={id:e,code:t,password:a};return R.put("/password/change",n)},resetPassword:function(e){var t={email:e};return R.post("/password/reset",t)}},ze={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center",textAlign:"center",paddingLeft:5,paddingRight:5},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},Ye=function(e){Object(m.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={memberId:"",recoveryCode:"",password:"",confirmPassword:"",msg:"",msgType:"",hideForm:!0,loading:!0,submit:!1,email:""},e.onSubmit=function(t){t.preventDefault();var a=e.props.history,n=e.state,r=n.confirmPassword,i=n.password,c=n.memberId,s=n.recoveryCode;e.setState({submit:!0},Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!r||!i||r!==i){t.next=9;break}if(!(Ue()(i)>=6)){t.next=7;break}return t.next=5,_e.changePassword(c,s,i);case 5:return e.setState({msg:"Senha atualizada, redirecionando para tela de login...",msgType:"success",memberId:"",recoveryCode:"",confirmPassword:"",password:""},(function(){D.clear(),setTimeout((function(){a.replace("/")}),2e3)})),t.abrupt("return",!0);case 7:return e.sendAlert("Informe uma senha com m\xednimo de ".concat(6," caracteres."),"warning"),t.abrupt("return",!0);case 9:e.sendAlert("As senhas est\xe3o em branco ou diferentes.","warning"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e.sendAlert("N\xe3o foi poss\xedvel alterar senha.","warning");case 15:return t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])}))))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.history,n=t.location;this.setState({submit:!0,loading:!0,memberId:"",recoveryCode:""},Object(l.a)(o.a.mark((function t(){var r,l,i,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=new URLSearchParams(n.search),l=r.get("id"),i=r.get("code"),c=r.get("email"),!l||!i){t.next=10;break}return t.next=8,_e.verifyIfCanResetPassword(l,i);case 8:return e.setState({submit:!1,loading:!1,hideForm:!1,memberId:l,recoveryCode:i,email:c}),t.abrupt("return",!0);case 10:throw new Error("Invalid URL query");case 13:t.prev=13,t.t0=t.catch(0),a.replace("/recuperar-senha");case 16:return t.abrupt("return",!0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])}))))}},{key:"sendAlert",value:function(e,t){this.setState({submit:!1,msg:e,msgType:t})}},{key:"clearAlert",value:function(){this.setState({submit:!1,msg:"",msgType:""})}},{key:"render",value:function(){var e=this,t=this.state,n=t.email,r=t.confirmPassword,o=t.password,l=t.submit,i=t.loading,c=t.hideForm,s=t.msg,m=t.msgType;return p.a.createElement("div",{style:ze.container},p.a.createElement("div",{style:ze.content},s&&m&&p.a.createElement(Pe,{message:s,type:m,onClose:function(){return e.clearAlert}}),i?p.a.createElement(me,null):p.a.createElement(p.a.Fragment,null,p.a.createElement("img",{src:a(221),width:150,alt:L.appName,style:ze.logo}),p.a.createElement(Ae.a,{component:"h1",variant:"h5"},c?"Link inv\xe1lido para definir senha":"Definir senha"),p.a.createElement(Oe.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Email",disabled:!0,value:n,InputLabelProps:{shrink:!0}}),!c&&p.a.createElement("form",{onSubmit:this.onSubmit,style:ze.form},p.a.createElement(Oe.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Senha",type:"password",disabled:l,value:o,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({password:t.target.value})}}),p.a.createElement(Oe.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Confirmar senha",type:"password",disabled:l,value:r,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({confirmPassword:t.target.value})}}),p.a.createElement(ie.a,{disabled:l,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:ze.button,type:"submit"},l?"Carregando...":"Entrar"))),p.a.createElement("p",null,p.a.createElement(f.b,{to:"/"},"Voltar para home")),p.a.createElement(Re,null)))}}]),n}(d.PureComponent),He={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center",textAlign:"center",paddingLeft:5,paddingRight:5},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},qe=function(e){Object(m.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",msg:"",msgType:"",submit:!1},e.onSubmit=function(t){t.preventDefault();var a=e.state.email;e.setState({submit:!0},Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!a){t.next=6;break}return t.next=4,_e.resetPassword(a);case 4:return e.setState({submit:!1,email:"",msgType:"success",msg:"Enviamos para seu email um link de recupera\xe7\xe3o de senha."}),t.abrupt("return",!0);case 6:throw new Error("Blank fields");case 9:return t.prev=9,t.t0=t.catch(0),e.setState({submit:!1,msg:"Email inv\xe1lido ou inexistente.",msgType:"warning"}),t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])}))))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.email,r=t.submit,o=t.msg,l=t.msgType;return p.a.createElement("div",{style:He.container},p.a.createElement("div",{style:He.content},o&&p.a.createElement(Pe,{message:o,type:l,onClose:function(){return e.setState({msg:"",msgType:""})}}),p.a.createElement("img",{src:a(221),width:150,alt:L.appName,style:He.logo}),p.a.createElement(Ae.a,{component:"h1",variant:"h5"},"Informe o seu email e receba instru\xe7\xf5es para criar nova senha"),p.a.createElement("form",{onSubmit:this.onSubmit,style:He.form},p.a.createElement(Oe.a,{variant:"outlined",margin:"normal",fullWidth:!0,placeholder:"Seu email de acesso",label:"Email",type:"email",disabled:r,value:n,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({email:t.target.value.toLowerCase()})}}),p.a.createElement(ie.a,{disabled:r,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:He.button,type:"submit"},r?"Carregando...":"Enviar")),p.a.createElement("p",null,p.a.createElement(f.b,{to:"/"},"Voltar para home")),p.a.createElement(Re,null)))}}]),n}(d.PureComponent),Ve=a(287),Ge=a.n(Ve),Qe=a(61),Je=a.n(Qe),Ke=a(126),Xe=a.n(Ke),Ze=a(564),$e=a(565),et=a(566),tt=a(567),at=a(595),nt=a(485),rt=a(499),ot=a(305),lt=a(568),it=a(569),ct=a(27),st=a(563),mt=a(601),ut=a(98),dt=a.n(ut),pt=a(559),gt=a(192),bt=a(560),ft=a(190),ht=a(561),Et=a(562),vt={width:32,height:32,minWidth:32,minHeight:32},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"a",t={a:"gold",b:"gold",c:"gold",d:"purple",e:"purple",f:"purple",g:"black",h:"black",i:"black",j:"blue",k:"blue",l:"blue",m:"green",n:"green",o:"green",p:"brown",q:"brown",r:"brown",s:"pink",t:"pink",u:"pink",v:"red",w:"red",y:"red",x:"lime",z:"lime"};return t[e.toLowerCase()]},yt=Object(d.memo)((function(e){var t=e.classes,a=e.name,n=e.photoUrl,r=dt()(a)||"";return p.a.createElement(mt.a,{alt:a,src:n,className:t[kt(r)]},r.toUpperCase())})),Ct=Object(J.a)((function(e){return{black:Object(u.a)({color:"white",backgroundColor:"black"},vt),purple:Object(u.a)({color:e.palette.getContrastText(pt.a[500]),backgroundColor:pt.a[500]},vt),red:Object(u.a)({color:"white",backgroundColor:de.a[300]},vt),green:Object(u.a)({color:e.palette.getContrastText(De.a[800]),backgroundColor:De.a[800]},vt),blue:Object(u.a)({color:e.palette.getContrastText(gt.a[800]),backgroundColor:gt.a[800]},vt),brown:Object(u.a)({color:e.palette.getContrastText(bt.a[500]),backgroundColor:bt.a[500]},vt),pink:Object(u.a)({color:e.palette.getContrastText(ft.a[500]),backgroundColor:ft.a[500]},vt),gold:Object(u.a)({color:"white",backgroundColor:ht.a[900]},vt),lime:Object(u.a)({color:"white",backgroundColor:Et.a[800]},vt)}}),{withTheme:!0})(yt),Ot=[{label:"Acesso limitado",value:"MEMBER"},{label:"Acesso completo (exceto usu\xe1rios)",value:"USER"},{label:"Acesso completo",value:"ADMIN"},{label:"Propriet\xe1rio da conta",value:"OWNER"}],At=[{label:"Acesso limitado",value:"MEMBER"},{label:"Acesso completo (exceto usu\xe1rios)",value:"USER"},{label:"Acesso completo",value:"ADMIN"}],jt=["ADMIN","OWNER"],wt=["USER","ADMIN","OWNER"],St=function(e){return Object(u.a)(Object(u.a)({},te(e)),{},{slackBox:{paddingTop:60,paddingBottom:50},slackIntegration:{marginLeft:25},floatButton:{marginBottom:5,marginLeft:10},tableCheckBox:{width:10,paddingTop:20,paddingBottom:0,margin:0,border:0,paddingLeft:0},tableUser:{paddingTop:20,paddingBottom:10,marginLeft:0,paddingLeft:0},tableInvite:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",padding:0,paddingTop:20,paddingBottom:0,margin:0,border:0},selectFilter:{width:180,minWidth:80},formControl:{margin:10},profileMenuContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start",width:"100%"},userName:{marginLeft:15}})},Tt=Object(d.memo)((function(e){var t=e.users,a=e.classes,n=e.onRevoke,r=e.isRevokeDisabled,o=e.locations,l=e.companyName,i=e.checkedAll,c=e.setCheckedAll,s=e.selectedLocations,m=e.setSelectedLocations,u=e.canDisconnect,d=e.selectedRole,g=e.setSelectedRole,b=e.isInviteDisabled,f=e.onShowMore,h=e.setDisableShowMore,E=e.selectedUsers,k=e.setSelectedUsers,y=e.onInvite,C=e.nextCursor,O=e.disableShowMore,A=function(e){var t=e.target,a=t.checked,n=t.value;k(a?E.concat(n):E.filter((function(e){return e!==n})))},j=Object(ct.a)(),w=Object(st.a)(j.breakpoints.down("xs")),S=Ue()(d)&&Ue()(s)&&Ue()(E),T=b||!S;return p.a.createElement("section",null,p.a.createElement("div",{className:a.container},p.a.createElement("div",{className:a.headerView},p.a.createElement("aside",null,p.a.createElement(Ae.a,{variant:"h6"},p.a.createElement("b",null,"Slack conectado: ".concat(l)))),p.a.createElement("aside",null,u&&p.a.createElement(ie.a,{onClick:n,color:"default",variant:"outlined",className:a.floatButton,disabled:r},"Desconectar Slack")))),p.a.createElement("div",{className:a.container},p.a.createElement(Ze.a,{size:w?"small":"medium"},p.a.createElement($e.a,null,p.a.createElement(et.a,null,p.a.createElement(tt.a,{className:a.tableCheckBox},p.a.createElement(at.a,{checked:i,onChange:function(e){var a=e.target.checked;c(a),k(a?t.map((function(e){return JSON.stringify(e)})):[])},disabled:b,color:"primary"})),p.a.createElement(tt.a,{className:a.tableUser},!w&&p.a.createElement("b",null,"USU\xc1RIOS (".concat(Ue()(E),")"))),p.a.createElement(tt.a,{className:a.tableInvite,colSpan:w?2:1},p.a.createElement(nt.a,{className:a.formControl},p.a.createElement(rt.a,{displayEmpty:!0,className:a.selectFilter,input:p.a.createElement(ot.a,null),value:d,onChange:function(e){g(e.target.value)},disabled:b,variant:"outlined"},p.a.createElement(lt.a,{value:"",disabled:!0},"Permiss\xe3o"),At.map((function(e){return p.a.createElement(lt.a,{key:e.value,value:e.value},e.label)})))),p.a.createElement(nt.a,{className:a.formControl},p.a.createElement(rt.a,{multiple:!0,displayEmpty:!0,className:a.selectFilter,input:p.a.createElement(ot.a,null),value:s,onChange:function(e){m(e.target.value)},disabled:b,variant:"outlined",renderValue:function(e){var t=Ue()(e);return t?"".concat(t," ").concat(t>1?"locais":"local"):"Local"}},o.map((function(e){return p.a.createElement(lt.a,{key:e.id,value:e.id},e.name)})))),p.a.createElement(nt.a,{className:a.formControl},p.a.createElement(ie.a,{color:"primary",size:"medium",variant:"contained",className:a.floatButton,disabled:T,onClick:function(){try{var e={role:d,locationIds:s,slackUsers:E.map((function(e){return JSON.parse(e)}))};y(e)}catch(t){k([]),m([]),g("")}}},"Convidar"))))),p.a.createElement(it.a,null,t.map((function(e){var t=JSON.stringify(e);return p.a.createElement(et.a,{key:e.email},p.a.createElement(tt.a,{className:a.tableCheckBox},p.a.createElement(at.a,{checked:E.includes(t),onChange:A,disabled:b,value:t,color:"primary"})),p.a.createElement(tt.a,{colSpan:2,className:a.tableUser},p.a.createElement("div",{className:a.profileMenuContainer},p.a.createElement(Ct,{name:v()(e,"name"),photoUrl:v()(e,"photo_url","")}),p.a.createElement("span",{className:a.userName},p.a.createElement("b",null,v()(e,"name")),p.a.createElement("br",null),p.a.createElement(Ae.a,{variant:"body2",color:"textSecondary",component:"small"},v()(e,"email"))))))})),C&&p.a.createElement(et.a,null,p.a.createElement(tt.a,{colSpan:3,className:a.textCenter},p.a.createElement(ie.a,{color:"primary",size:"medium",variant:"contained",disabled:O,onClick:function(){h(!0),f()}},"Ver mais usu\xe1rios")))))))})),xt=Object(Q.a)(Object(J.a)(St,{withTheme:!0}),Object(Q.e)("checkedAll","setCheckedAll",!0),Object(Q.e)("selectedLocations","setSelectedLocations",[]),Object(Q.e)("selectedUsers","setSelectedUsers",[]),Object(Q.e)("selectedRole","setSelectedRole",""),Object(Q.e)("disableShowMore","setDisableShowMore",!1),Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.users;(0,e.setSelectedUsers)(t.map((function(e){return JSON.stringify(e)})))}}),Object(Q.d)(["users"],(function(e){var t=e.users,a=e.setDisableShowMore,n=e.setCheckedAll,r=e.setSelectedUsers;a(!1),n(!0),r(t.map((function(e){return JSON.stringify(e)})))})))(Tt),Nt=a(148),It=Object(d.memo)((function(e){var t=e.classes,n=e.onInstallLobby,r=e.onAuthUser,o=e.onRevoke,l=e.isDisabled,i=D.getUserData(),c=v()(i,"member.slack_user_id"),s=v()(i,"member.company.slack_team_id");return p.a.createElement("div",{className:t.container},p.a.createElement(Nt.a,{className:t.paper},p.a.createElement("section",{className:t.slackBox},p.a.createElement("div",{className:t.textCenter},p.a.createElement("img",{src:a(454),alt:"Integra\xe7\xe3o Lobby com Slack",className:t.slackIntegration}),p.a.createElement("br",null),p.a.createElement("br",null),p.a.createElement(Ae.a,{variant:"h6",component:"strong"},p.a.createElement("b",null,"Crie tickets atrav\xe9s do Slack")),p.a.createElement("br",null),p.a.createElement(Ae.a,{variant:"body2",color:"textSecondary"},p.a.createElement("b",null,"Leva menos de um minuto"))),p.a.createElement("br",null),p.a.createElement("div",{className:t.textCenter},p.a.createElement(Ae.a,{variant:"subtitle2"},"Colaboradores poder\xe3o criar tickets",p.a.createElement("br",null),"via atalho Lobby ou comando",p.a.createElement("b",null," /lobby "),"no Slack"),p.a.createElement("br",null),s?c?p.a.createElement(ie.a,{onClick:o,size:"large",color:"default",variant:"outlined",disabled:l},"Desconectar Slack"):p.a.createElement(ie.a,{onClick:r,size:"large",color:"primary",variant:"contained",disabled:l},"Integrar Slack"):p.a.createElement(ie.a,{onClick:n,size:"large",color:"primary",variant:"contained",disabled:l},"Instalar Lobby no Slack")))))})),Dt=Object(Q.a)(Object(J.a)(St,{withTheme:!0}))(It),Mt=a(574),Bt=a(492),Lt=a(598),Pt=a(558),Rt=a(596),Ft=a(573),Wt=a(303),Ut=a(289),_t=a.n(Ut),zt=a(288),Yt=a.n(zt),Ht=a(290),qt=a.n(Ht),Vt=a(490),Gt=a(570),Qt=a(571),Jt=a(572),Kt=Object.values(Ce).filter((function(e){return!e.hideMenu&&!e.settingsMenu})),Xt=Kt.filter((function(e){return!e.buildingFeature})),Zt=Kt.filter((function(e){return e.buildingFeature})),$t=function(e){Object(m.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={userDataError:!1,sideMenuOpen:!1,profileMenuAnchor:null},e.onLogout=function(){e.setState({profileMenuAnchor:null},(function(){if(window.confirm("Voc\xea deseja sair?")){var t=e.props.history;Y.hit("Logout"),D.clear(),t.push("/")}}))},e.onSettings=function(){e.setState({profileMenuAnchor:null},(function(){var t=e.props.history;Y.hit("Settings"),t.push("/configuracoes/meu-perfil")}))},e.onToggleSideMenu=function(){var t=e.state.sideMenuOpen;e.setState({sideMenuOpen:!t})},e.onChangePage=function(t,a){e.props.history.push(Kt[a].path)},e.onToggleProfileMenu=function(t){return e.setState({profileMenuAnchor:t.currentTarget})},e.prepareMenu=function(e){var t=D.getUserData(),a=v()(t,"member.has_spaces",!1),n=v()(t,"member.has_visitors",!1),r=v()(t,"member.company.has_ticket_support",!1);return e.filter((function(e){return!(!n&&e.path.includes("/visitantes"))&&(!(!a&&e.path.includes("/espacos"))&&!(!r&&e.path.includes("/tickets")))}))},e.renderErrorAlertBox=function(t){var a=e.props.history;return D.isAuthorized(t)?p.a.createElement(Pe,{type:"error",message:"Erro ao carregar dados do servidor",actionButton:p.a.createElement("b",null,"Recarregar"),onClickAction:function(){return window.location.reload()}}):p.a.createElement(Pe,{type:"error",message:"Sua sess\xe3o expirou, fa\xe7a login novamente",actionButton:p.a.createElement("b",null,"Fazer login"),onClickAction:function(){D.clear(),a.push("/")}})},e.renderWebappUpdateAlertBox=function(){return p.a.createElement(Pe,{type:"success",message:"Uma nova atualiza\xe7\xe3o foi instalada.",actionButton:p.a.createElement("b",null,"Continuar"),onClickAction:function(){return window.location.reload()}})},e.renderAlerts=function(){var t=e.props,a=t.alertBox,n=t.webappUpdated,r=t.error,o=e.state.userDataError,l=r||o;return a||(n?e.renderWebappUpdateAlertBox():l?e.renderErrorAlertBox(l):null)},e}return Object(c.a)(n,[{key:"renderSideMenuList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this.props,n=a.classes,r=a.history,o=this.prepareMenu(e);return Ue()(o)?p.a.createElement(Pt.a,{component:"nav",subheader:p.a.createElement(Gt.a,{component:"div"},p.a.createElement(Ae.a,{variant:"body2",color:"textSecondary",component:"small"},p.a.createElement("strong",{className:n.listItemHeaderText},t)))},o.map((function(e,t){var a=Object.values(e.submenus||{}),o=Boolean(Ue()(a)),l={};return o||(l={component:f.b,to:e.path.replace(/:[\w*]+/g,""),selected:e.path.includes(r.location.pathname)}),p.a.createElement("div",{key:t.toString()},p.a.createElement(Vt.a,Object.assign({button:!o,key:e.path},l),e.icon&&p.a.createElement(Qt.a,{className:n.listItemIcon},e.icon),p.a.createElement(Jt.a,{className:n.listItemText,disableTypography:!0,primary:e.label})),o&&p.a.createElement(Pt.a,{className:n.submenuList},a.map((function(t){var a="".concat(e.path).concat(t.path);return p.a.createElement(Vt.a,{button:!0,className:n.submenuItem,key:a,component:f.b,to:a.replace(/:[\w*]+/g,""),selected:a===r.location.pathname},t.icon&&p.a.createElement(Qt.a,{className:n.listItemIcon},t.icon),p.a.createElement(Jt.a,{className:n.listItemText,disableTypography:!0,primary:t.label}))}))))}))):null}},{key:"renderSideMenu",value:function(e){var t=this.props.classes,n=this.state.sideMenuOpen;return p.a.createElement(Lt.a,{classes:{paper:t.drawer},variant:e?"persistent":"permanent",anchor:"left",open:n,ModalProps:{keepMounted:!e}},p.a.createElement("div",{className:t.headerLogoContainer},e&&p.a.createElement("div",{className:t.closeMenuIcon},p.a.createElement(Ie.a,{size:"medium",onClick:this.onToggleSideMenu},p.a.createElement(Yt.a,null))),p.a.createElement("div",{className:t.logoContainer},p.a.createElement(f.b,{to:"/"},p.a.createElement("img",{src:a(455),alt:L.appName,className:t.logo})))),p.a.createElement(Ft.a,{className:t.divider}),this.renderSideMenuList(Xt),this.renderSideMenuList(Zt,"RECURSOS DO PR\xc9DIO"),p.a.createElement(Pt.a,{component:"nav",subheader:p.a.createElement(Gt.a,{component:"div"},p.a.createElement(Ae.a,{variant:"body2",color:"textSecondary",component:"small"},p.a.createElement("strong",{className:t.listItemHeaderText},"PRECISA DE AJUDA?")))},p.a.createElement(Vt.a,{button:!0,component:"a",href:"mailto:ajuda@lobby.tech?subject=Preciso de ajuda",target:"_blank"},p.a.createElement(Jt.a,{className:t.listItemLink,disableTypography:!0,primary:"Email: ajuda@lobby.tech"})),p.a.createElement(Vt.a,{button:!0,component:"a",href:"https://wa.me/5511997781301",target:"_blank"},p.a.createElement(Jt.a,{className:t.listItemLink,disableTypography:!0,primary:"Whatsapp: (11) 99778-1301"}))))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.profileMenuAnchor,n=D.getUserData(),r=v()(n,"member.name",""),o=v()(n,"member.lastname",""),l=v()(n,"member.photo_url",""),i="".concat(r," ").concat(o);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:t.root},p.a.createElement(Mt.a,{position:"fixed",className:t.appBar},p.a.createElement(Bt.a,null,p.a.createElement(Ie.a,{"aria-label":"open drawer",onClick:this.onToggleSideMenu,edge:"start"},p.a.createElement(_t.a,null)),p.a.createElement("div",{className:t.profileMenuContainer},p.a.createElement(Ct,{name:i,photoUrl:l}),p.a.createElement("span",{className:t.userName,onClick:this.onToggleProfileMenu},i),p.a.createElement(Ie.a,{size:"medium",onClick:this.onToggleProfileMenu},p.a.createElement(qt.a,null)),p.a.createElement(Wt.a,{keepMounted:!0,PaperProps:{style:{marginTop:35}},anchorEl:a,open:Boolean(a),onClose:function(){return e.setState({profileMenuAnchor:null})},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},p.a.createElement(lt.a,{onClick:this.onSettings},"Configura\xe7\xf5es"),p.a.createElement(lt.a,{onClick:this.onLogout},"Sair"))))),p.a.createElement(Rt.a,{smDown:!0},this.renderSideMenu(!1)),p.a.createElement(Rt.a,{mdUp:!0},this.renderSideMenu(!0)),this.renderAlerts()))}}]),n}(d.PureComponent),ea=Object(Q.a)(Object(J.a)((function(e){var t;return{root:Object(ee.a)({display:"flex",marginBottom:85},e.breakpoints.up("md"),{marginBottom:95}),drawer:(t={},Object(ee.a)(t,e.breakpoints.up("md"),{width:e.menuWidth,flexShrink:0}),Object(ee.a)(t,"background","#FAFAFA"),Object(ee.a)(t,"color","#313131"),t),appBar:{backgroundColor:"#FAFAFA",width:"calc(100%-".concat(e.menuWidth,"px)"),borderBottom:"1px solid rgba(0, 0, 0, 0.12)",boxShadow:"none"},profileMenuContainer:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%",marginRight:-15},userName:{color:"#313131",fontSize:14,cursor:"pointer",marginRight:5,marginLeft:10},towerSelect:{width:200,color:"#313131",borderColor:"#FAFAFA",backgroundColor:"#FAFAFA",marginTop:10},logoutButton:{color:"red",fontSize:16,fontWeight:"bold",textTransform:"none"},headerLogoContainer:{width:"100%",display:"flex",paddingTop:5,paddingBottom:2,paddingRight:20},logoContainer:Object(ee.a)({marginLeft:0,color:"#313131",paddingTop:5},e.breakpoints.up("md"),{paddingTop:9,paddingBottom:4,marginLeft:15}),closeMenuIcon:{display:"inline-block",color:"#313131",marginLeft:0},logo:{width:105,height:39},checkIcon:{marginRight:10},listItemIcon:{color:"#313131",fontSize:12},listItemText:{marginLeft:-25,fontSize:12,color:"#313131"},listItemLink:{fontSize:12,color:"#313131"},listItemHeaderText:{fontSize:12},submenuList:{marginBottom:-8,marginTop:-8},submenuItem:{paddingLeft:75}}}),{withTheme:!0}),h.g,Object(Q.e)("webappUpdated","setWebappUpdated",!1))($t),ta=a(594),aa=a(575),na=a(223),ra=a.n(na),oa=Object.values(Ce).filter((function(e){return!e.hideMenu&&e.settingsMenu})),la=Object(d.memo)((function(e){var t=e.history;return p.a.createElement(Nt.a,{square:!0},p.a.createElement(ta.a,{value:ra()(oa,(function(e){return t.location.pathname===e.path})),indicatorColor:"primary",textColor:"primary",scrollButtons:"auto",variant:"scrollable",onChange:function(e,a){return t.push(oa[a].path)}},oa.map((function(e,t){return p.a.createElement(aa.a,{key:e.path,label:e.label,index:t})}))))}));la.propTypes={history:$.a.object};var ia=Object(h.g)(la),ca={updateMember:function(e){var t=e.name,a=e.lastname,n=e.jobRole;return R.put("/member",{name:t,lastname:a,job_role:n})},updateMemberPassword:function(e){var t=e.password;return R.put("/member/change_password",{password:t})},revokeSlackUser:function(){return R.put("/member/revoke_slack")}},sa=a(291),ma=a.n(sa),ua={inviteUsers:function(e){var t=e.role,a=e.locationIds,n=e.slackUsers,r={role:t,location_ids:a,slack_users:y()(n,(function(e){var t=v()(e,"name","").trim().split(" ");return{name:dt()(t),lastname:ma()(t,1).join(" "),email:v()(e,"email")}}))};return R.post("/slack/invite",r)},listUsers:function(e){var t=e.canInvite,a=e.nextCursor;return t?R.get("/slack/users",{cursor:a}):null}},da=function(e,t){var a=t.name,n=void 0===a?null:a,r=t.init,g=void 0===r||r,b=t.options,f=void 0===b?function(){return{}}:b;return function(t){return function(a){Object(m.a)(d,a);var r=Object(s.a)(d);function d(){var t;Object(i.a)(this,d);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(t=r.call.apply(r,[this].concat(c))).state={loading:!0,reloadedMsg:"",error:null,data:null},t.loadingProperty=n?"".concat(n,"Loading"):"loading",t.reloadedMsgProperty=n?"".concat(n,"ReloadedMsg"):"reloadedMsg",t.errorProperty=n?"".concat(n,"Error"):"error",t.dataProperty=n?"".concat(n,"Data"):"data",t.clearProperty=n?"".concat(n,"Clear"):"clear",t.fetchProperty=n?"".concat(n,"Fetch"):"fetch",t.resolveOptions=function(e){return Object(u.a)({},f(t.props),{},e)},t.loadDataSource=function(){var a=Object(l.a)(o.a.mark((function a(n,r){var l,i,c,s,m;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l=t.resolveOptions(r),i=v()(l,"variables"),c=v()(l,"onRequestFinished"),s=v()(l,"onRequestError"),m=null,a.prev=5,a.next=8,e(i);case 8:m=a.sent,a.next=17;break;case 11:if(a.prev=11,a.t0=a.catch(5),!s){a.next=16;break}return a.next=16,s(a.t0);case 16:return a.abrupt("return",n(a.t0,null));case 17:if(!c){a.next=20;break}return a.next=20,c(m);case 20:return a.abrupt("return",n(null,m));case 21:case"end":return a.stop()}}),a,null,[[5,11]])})));return function(e,t){return a.apply(this,arguments)}}(),t.fetch=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(o,l){t.setState({loading:e},(function(){t.loadDataSource((function(e,r){t.setState({data:r,error:e,loading:!1,reloadedMsg:a},(function(){return e?l(e):o(r),n&&n()}))}),r)}))}))},t.clear=function(e){return t.setState({data:null,error:null,loading:!1},e)},t}return Object(c.a)(d,[{key:"componentDidMount",value:function(){g?this.fetch(!0):this.setState({loading:!1,data:{}})}},{key:"render",value:function(){var e,a=Object(u.a)({},this.props,(e={},Object(ee.a)(e,this.errorProperty,this.state.error),Object(ee.a)(e,this.dataProperty,this.state.data),Object(ee.a)(e,this.loadingProperty,this.state.loading),Object(ee.a)(e,this.reloadedMsgProperty,this.state.reloadedMsg),Object(ee.a)(e,this.fetchProperty,this.fetch),Object(ee.a)(e,this.clearProperty,this.clear),e));return p.a.createElement(t,a)}}]),d}(d.PureComponent)}},pa={ok:"Conta Slack integrada com sucesso",not_authorized:"N\xe3o foi poss\xedvel integrar sua conta Slack",wrong_member:"\xc9 necess\xe1rio logar no Slack com mesmo email de login Lobby"},ga=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.revokeSlackFetch,o=e.revokeSlackLoading,l=e.canInvite,i=e.slackUsers,c=e.slackUsersFetch,s=e.slackUsersLoading,m=e.inviteSlackUsersFetch,u=e.inviteSlackUsersLoading,d=e.nextCursor,g=a.showAlert,b=a.alertMsg,f=a.alertType,h=null;g&&(h=p.a.createElement(Pe,{message:b,type:f,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}}));var E=D.getUserData(),k=v()(E,"member.company.name"),y=v()(E,"member.company.slack_team_id"),C=v()(E,"member.slack_user_id"),O=Je()(v()(E,"member.locations",[]),["name"]),A=function(){window.confirm("Tem certeza em realizar essa a\xe7\xe3o?")&&(Y.hit("SlackIntegration - RevokeUser"),r(!0))};return p.a.createElement("div",{className:t.root},p.a.createElement(ea,{alertBox:h}),p.a.createElement("section",null,p.a.createElement("div",{className:t.container},p.a.createElement("div",{className:t.headerView},p.a.createElement("aside",null,p.a.createElement(Ae.a,{variant:"h5"},p.a.createElement("b",null,"Configura\xe7\xf5es"))))),p.a.createElement("div",{className:t.container},p.a.createElement(ia,null)),p.a.createElement("br",null),s?p.a.createElement(me,null):l&&Ue()(i)?p.a.createElement(xt,{users:i,onRevoke:A,onInvite:function(e){m(!0,"",null,{variables:e})},onShowMore:function(){return c(!1)},isRevokeDisabled:o,isInviteDisabled:u,canDisconnect:Boolean(C),nextCursor:d,locations:O,companyName:k}):p.a.createElement(Dt,{onAuthUser:function(){Y.hit("SlackIntegration - AuthUser");var e="".concat(L.slackOAuthURL,"?scope=").concat(L.slackOAuthScope,"&team=").concat(y);e+="&client_id=".concat(L.slackClientId,"&user_scope=").concat(L.slackOAuthUserScope),e+="&redirect_uri=".concat(L.slackRedirectURL),window.location.href=e},onInstallLobby:function(){Y.hit("SlackIntegration - InstallLobby");var e="".concat(L.slackOAuthURL,"?scope=").concat(L.slackOAuthScope);e+="&client_id=".concat(L.slackClientId,"&user_scope=").concat(L.slackOAuthUserScope),e+="&redirect_uri=".concat(L.slackRedirectURL),window.location.href=e},onRevoke:A,isDisabled:o})))})),ba=da(ca.revokeSlackUser,{name:"revokeSlack",init:!1,options:function(e){var t=e.setAlert;return{onRequestFinished:function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({alertMsg:"A conta Slack foi desconectada",alertType:"success",showAlert:!0}),a=D.getUserData(),Ge()(a,"member.slack_user_id",null),D.setUserData(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRequestError:function(){t({alertMsg:"Erro ao desconectar conta Slack",alertType:"error",showAlert:!0})}}}}),fa=da(ua.listUsers,{name:"slackUsers",options:function(e){var t=e.setAlert,a=e.slackUsers,n=e.setSlackUsers,r=e.setNextCursor,o=e.nextCursor;return{variables:{canInvite:e.canInvite,nextCursor:o},onRequestFinished:function(e){var t=a.concat(v()(e,"users",[]));n(Je()(Xe()(t,"email"),["name"])),r(v()(e,"next_cursor",""))},onRequestError:function(){t({alertMsg:"Erro ao carregar lista de usu\xe1rios slack",alertType:"error",showAlert:!0})}}}}),ha=da(ua.inviteUsers,{name:"inviteSlackUsers",init:!1,options:function(e){var t=e.setAlert,a=e.slackUsersFetch;return{onRequestFinished:function(){t({alertMsg:"Convite enviado com sucesso",alertType:"success",showAlert:!0}),a(!0)},onRequestError:function(){t({alertMsg:"Erro ao carregar convidar usu\xe1rios slack",alertType:"error",showAlert:!0})}}}}),Ea=Object(Q.a)(h.g,Object(J.a)(St,{withTheme:!0}),Object(Q.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Q.e)("canInvite","setCanInvite",!1),Object(Q.e)("slackUsers","setSlackUsers",[]),Object(Q.e)("nextCursor","setNextCursor",""),ba,fa,ha,Object(Q.b)({componentDidMount:function(){var e=this;return Object(l.a)(o.a.mark((function t(){var a,n,r,l,i,c,s,m,u,d,p;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props,n=a.location,r=a.setAlert,l=a.setCanInvite,i=new URLSearchParams(n.search),c=i.get("status"),s=D.getUserData(),m=v()(s,"member.role"),u=v()(s,"member.company.slack_team_id"),d=v()(s,"member.slack_user_id"),p=jt.includes(m)&&u&&d,l(Boolean(p)),c&&(r({alertMsg:pa[c],alertType:"ok"===c?"success":"error",showAlert:!0}),window.history.pushState("","","/#/configuracoes/slack"));case 10:case"end":return t.stop()}}),t)})))()}}))(ga),va=a(56),ka=a.n(va),ya={getSpace:function(e){return R.get("/spaces/".concat(e))},getSpaces:function(e){return e?R.get("/buildings/".concat(e,"/spaces")):null}},Ca=a(576),Oa=a(577),Aa=a(579),ja=a(578),wa=Object(d.memo)((function(e){var t=e.classes,a=e.space,n=e.history,r=v()(a,"in_maintenance"),o=r?t.cardDisabled:t.card;return p.a.createElement(le.a,{item:!0,xs:12,sm:6,md:4},p.a.createElement(Ca.a,{className:o,onClick:function(){r||n.push("/espacos/".concat(a.id))}},p.a.createElement(Oa.a,null,p.a.createElement(ja.a,{className:t.media,image:a.photo_url,title:a.name}),p.a.createElement(Aa.a,null,p.a.createElement(Ae.a,{variant:"h6"},p.a.createElement("small",null,a.name,"\xa0"),r&&p.a.createElement("small",{className:t.danger},"(Manuten\xe7\xe3o)"))))))})),Sa=Object(Q.a)(Object(J.a)((function(){return{card:{marginBottom:10},cardDisabled:{marginBottom:10,background:"#EDEDED"},danger:{color:"red"},media:{height:100}}}),{withTheme:!0}),h.g)(wa),Ta=v()(D.getUserData(),"buildings[0].id"),xa=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.spacesData,i=e.spacesError,c=e.spacesFetch,s=e.spacesLoading,m=e.setBuildingId,u=e.buildingId,d=a.showAlert,g=a.alertMsg,b=a.alertType,f=null;d&&(f=p.a.createElement(Pe,{message:g,type:b,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}}));var h=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.target.value),c(!0),a={select_building:t.target.value},Y.hit("Spaces - FilteredByBuilding",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=v()(r,"spaces",[]),k=Je()(v()(D.getUserData(),"buildings",[]),["name"]);return p.a.createElement("div",{className:t.root},p.a.createElement(ea,{alertBox:f,error:i}),p.a.createElement("section",null,p.a.createElement("div",{className:t.container},p.a.createElement("div",{className:t.headerView},p.a.createElement("aside",null,p.a.createElement(Ae.a,{variant:"h5"},p.a.createElement("b",null,Ue()(E)?"Reserva de espa\xe7os (".concat(Ue()(E),")"):"Reserva de espa\xe7os")))),p.a.createElement("br",null),p.a.createElement(le.a,{container:!0,spacing:1},p.a.createElement(le.a,{item:!0,xs:6,sm:3,md:2},p.a.createElement(nt.a,{fullWidth:!0},p.a.createElement(Oe.a,{select:!0,label:"Pr\xe9dio",value:u,SelectProps:{native:!0},InputLabelProps:{shrink:!0},onChange:h},k.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.name)}))))))),p.a.createElement("div",{className:t.container},p.a.createElement(le.a,{container:!0,spacing:1},s?p.a.createElement(me,null):ka()(E)?p.a.createElement("div",{className:t.centerHeaderView},p.a.createElement(X.a,{className:t.emptyHeaderIcon}),p.a.createElement("b",{className:t.emptyHeaderTitle},"Este pr\xe9dio n\xe3o possui espa\xe7o para reserva")):E.map((function(e){return p.a.createElement(Sa,{key:e.id,space:e})}))))))})),Na=da(ya.getSpaces,{name:"spaces",options:function(e){return{variables:e.buildingId}}}),Ia=Object(Q.a)(Object(J.a)((function(e){return Object(u.a)({},te(e))}),{withTheme:!0}),Object(Q.e)("buildingId","setBuildingId",Ta),Object(Q.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Na)(xa),Da=a(39),Ma=a.n(Da),Ba=a(195),La=a.n(Ba),Pa={getBookings:function(e){var t=e.spaceId,a=e.from,n=e.to;return R.get("/spaces/".concat(t,"/space_bookings?from=").concat(j()(a).toISOString(),"&to=").concat(j()(n).toISOString()))},createBookings:function(e){var t={title:v()(e,"title"),space_id:v()(e,"spaceId"),booking_date:v()(e,"bookingDate"),periods:v()(e,"periods",[])};return R.post("/space_bookings",t)},cancelBooking:function(e){return R.put("/space_bookings/".concat(e,"/cancel"))}},Ra=(a(459),a(460),a(146)),Fa=a(295),Wa=a.n(Fa),Ua={calendar:{height:575},pastBox:{backgroundColor:"#777",borderColor:"#555"},ownerBox:{backgroundColor:"#1177FF"},busyBox:{backgroundColor:"#92b4bf"}},_a=Object(Ra.c)(j.a),za=[{key:Ra.b.WEEK,value:"Semanal"},{key:Ra.b.MONTH,value:"Mensal"}],Ya=function(e){Object(m.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.onNavigate,r=t.view,o=t.loading;return p.a.createElement("div",{className:"rbc-toolbar"},p.a.createElement("div",{className:"rbc-btn-group"},za.map((function(t){var a=t.key,n=t.value,l=r===a?"rbc-active":"",i=e.view.bind(null,a);return p.a.createElement("button",{key:a,type:"button",disabled:o,className:l,onClick:i},n)}))),p.a.createElement("b",{className:"rbc-toolbar-label"},o?"Carregando...":a),p.a.createElement("div",{className:"rbc-btn-group"},p.a.createElement("button",{type:"button",disabled:o,onClick:function(){return n("PREV")}},"\u2190"),p.a.createElement("button",{type:"button",disabled:o,onClick:function(){return n("TODAY")}},"Hoje"),p.a.createElement("button",{type:"button",disabled:o,onClick:function(){return n("NEXT")}},"\u2192")))}}]),a}(Wa.a);Ya.propTypes={loading:$.a.bool};var Ha=Object(d.memo)((function(e){var t=e.data,a=e.view,n=e.onView,r=e.onRangeChange,o=e.loading,l=e.eventComponent,i=e.onSelectBooking;return p.a.createElement(Ra.a,{resizable:!0,events:t,localizer:_a,view:a,onView:n,startAccessor:"from",endAccessor:"to",step:30,onRangeChange:r,scrollToTime:j()(6,"HH").toDate(),culture:L.locale,eventPropGetter:function(e){return{style:(t=e,j()(t.bookingDate).isBefore()?Ua.pastBox:t.busy?Ua.busyBox:Ua.ownerBox)};var t},components:{event:l,toolbar:function(e){return p.a.createElement(Ya,Object.assign({loading:o},e))}},style:Ua.calendar,onSelectEvent:i})}));Ha.propTypes={data:$.a.array,eventComponent:$.a.func,onView:$.a.func,view:$.a.string,loading:$.a.bool,onSelectBooking:$.a.func,onRangeChange:$.a.func};var qa=Ha,Va=a(493),Ga=a(494),Qa=a(495),Ja=a(580),Ka=a(487),Xa=a(582),Za=a(583),$a=a(70),en=a(33),tn=a(581),an=a(296),nn=a.n(an),rn=a(142),on=a.n(rn),ln={getCalendar:function(e){var t=e.spaceId,a=e.bookingDate;return e.readOnly?new Promise((function(e){return e({})})):R.get("/spaces/".concat(t,"/space_calendars?booking_date=").concat(j()(a).toISOString()))}},cn=j()().add(1,"day").toDate(),sn=function(){return{title:"",busy:!1,bookingDate:cn,periods:on()([])}},mn=Object(d.memo)((function(e){var t=e.classes,a=e.open,n=e.setOpen,r=e.calendarLoading,i=e.isMonthView,c=e.space,s=e.bookingData,m=e.calendarFetch,d=e.submitBookingFetch,g=e.submitBookingLoading,b=e.cancelBookingFetch,f=e.cancelBookingLoading,h=e.readOnly,E=e.openModalButton,v=e.setBookingState,k=e.calendar,C=e.setCalendar,O=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(!0),Y.hit("SpaceBookingModal - Viewed"),e.next=5,m(!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(sn());case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),A=function(){Y.hit("SpaceBookingModal - Closed"),h||v(sn()),n(!1)},w=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C([]),v({bookingDate:t,periods:on()([])}),e.next=5,m(!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(sn());case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),S=function(e,t){var a=s.periods;try{var n=JSON.parse(e.currentTarget.value);t?(a.push(n),v({periods:a})):v({periods:a.filter((function(e){return e.label!==n.label}))})}catch(r){v(sn())}},T=s.id,x=s.title,N=s.bookingDate,I=s.periods,D=s.busy,M=g||r,B=T&&h,P=j()(N).isBefore(),R=!h&&Ue()(k),F=Object(ct.a)(),W=Object(st.a)(F.breakpoints.down("sm"));return p.a.createElement(p.a.Fragment,null,E?p.a.createElement("div",{className:i?t.monthViewButton:t.timeViewButton,onClick:O},E):p.a.createElement(ie.a,{onClick:O,size:"large",variant:"contained",color:"primary",className:W?t.fab:null},"Reservar"),p.a.createElement(Va.a,{open:Boolean(a),maxWidth:"md",onClose:A,keepMounted:!0},p.a.createElement(le.a,{container:!0,className:t.container},p.a.createElement(le.a,{item:!0,xs:12,sm:12,md:6},p.a.createElement(Ja.a,null,c.name),p.a.createElement(Ga.a,{className:t.dialogContent},p.a.createElement("div",{dangerouslySetInnerHTML:{__html:c.description}}))),p.a.createElement(le.a,{item:!0,xs:12,sm:12,md:6},p.a.createElement(Ja.a,null,h?x:"Reservar espa\xe7o",p.a.createElement(Ie.a,{className:t.closeButton,onClick:A},p.a.createElement(Ne.a,null))),p.a.createElement(Ga.a,{className:t.dialogContent},!h&&p.a.createElement(nt.a,{className:t.inputField},p.a.createElement(Oe.a,{fullWidth:!0,label:"Tit\xfalo",margin:"normal",disabled:M||h,InputLabelProps:{shrink:!0},value:x,onChange:function(e){return v({title:e.target.value})}})),p.a.createElement(nt.a,{className:t.inputField},p.a.createElement(en.a,{libInstance:j.a,utils:$a.a,locale:L.locale},p.a.createElement(tn.a,{className:t.calendarInputField,label:"Data da reserva",invalidDateMessage:"Formato inv\xe1lido",variant:"dialog",disabled:M||h,value:N,onChange:w,minDate:cn,format:"DD/MM/YYYY",cancelLabel:"Cancelar",minDateMessage:""}))),p.a.createElement(nt.a,{className:t.checkboxArea},p.a.createElement(Ka.a,{className:t.inputLabel},"Hor\xe1rios"),r?p.a.createElement("div",{className:t.loading},p.a.createElement(me,null)):p.a.createElement(Xa.a,null,B?y()(I,(function(e){var a="".concat(j()(e.from).format("HH:mm"),"-").concat(j()(e.to).format("HH:mm"));return p.a.createElement(Za.a,{key:a,label:a,classes:{label:t.period},control:p.a.createElement(at.a,{checked:!0,disabled:!0})})})):Ue()(k)?y()(k,(function(e){var a="".concat(e.from,"-").concat(j()(e.to,"HH:mm").add(1,"minute").format("HH:mm")),n=M||h||!e.available,r=e.available?t.period:t.periodBusy,o=!n&&!ka()(nn()(I,(function(e){return e.label===a})));return p.a.createElement(Za.a,{key:a,label:a,classes:{label:r},control:p.a.createElement(at.a,{color:"primary",checked:o,disabled:n,onChange:S,value:JSON.stringify(Object(u.a)(Object(u.a)({},e),{},{label:a}))})})})):p.a.createElement("span",{className:t.error},p.a.createElement("br",null),"N\xe3o h\xe1 hor\xe1rios dispon\xedveis nessa data")))),p.a.createElement(Qa.a,{className:t.dialogAction},D||P?p.a.createElement(ie.a,{onClick:A,size:"large"},"Fechar"):B?p.a.createElement(p.a.Fragment,null,p.a.createElement(ie.a,{onClick:A,size:"large",disabled:f},"Fechar"),p.a.createElement(ie.a,{onClick:function(){window.confirm("Tem certeza em realizar essa a\xe7\xe3o?")&&b(!0)},size:"large",color:"secondary",variant:"contained",disabled:f},"Remover")):p.a.createElement(p.a.Fragment,null,p.a.createElement(ie.a,{onClick:A,disabled:M,size:"large"},"Fechar"),p.a.createElement(ie.a,{onClick:function(){return d(!0)},size:"large",color:"primary",variant:"contained",disabled:M||!R,className:t.submitButton},g?"Reservando...":"Reservar")))))))})),un=da(ln.getCalendar,{name:"calendar",options:function(e){var t=e.space,a=e.setCalendar,n=e.readOnly,r=e.bookingData.bookingDate;return{variables:{spaceId:v()(t,"id"),readOnly:n,bookingDate:r},onRequestFinished:function(e){a(v()(e,"space_calendars",[]))},onRequestError:function(){a([])}}}}),dn=da(Pa.createBookings,{name:"submitBooking",init:!1,options:function(e){var t=e.bookingData,a=e.setBookingState,n=e.setOpen,r=e.space,o=e.onRequestBooking;return{variables:Object(u.a)(Object(u.a)({},t),{},{spaceId:v()(r,"id")}),onRequestFinished:function(){Y.hit("SpaceBooking - Added",{}),a(sn()),n(!1),o()},onRequestError:o}}}),pn=da(Pa.cancelBooking,{name:"cancelBooking",init:!1,options:function(e){var t=e.bookingData,a=e.onRequestBooking,n=e.setOpen;return{variables:v()(t,"id"),onRequestFinished:function(){Y.hit("SpaceBooking - Canceled",{}),n(!1),a()},onRequestError:a}}}),gn=Object(Q.a)(Object(J.a)((function(e){return Object(u.a)({},te(e),{container:{flexGrow:1,paddingBottom:15},calendarInputField:{maxWidth:180,marginBottom:10},inputField:{display:"block",maxWidth:265,marginBottom:20},checkboxArea:{marginBottom:20},inputLabel:{fontSize:12},period:{fontSize:12},periodBusy:{fontSize:12,textDecoration:"line-through"},timeViewButton:{width:"100vw",minWidth:"100vw",maxWidth:"100vw",height:"100vh",maxHeight:"100vh",minHeight:"100vh",marginLeft:-10,paddingLeft:10,marginTop:-20,paddingTop:20},monthViewButton:{width:"100vw",minWidth:"100vw",maxWidth:"100vw",marginLeft:-10,paddingLeft:10,marginTop:-20,paddingTop:20},loading:{width:275},error:{color:"red"},dialogContent:{marginTop:-20},dialogAction:{paddingLeft:20,paddingRight:20}})}),{withTheme:!0}),Object(Q.e)("open","setOpen",!1),Object(Q.e)("bookingData","setBookingData",sn()),Object(Q.e)("calendar","setCalendar",[]),Object(Q.e)("disableAction","setDisableAction",!1),Object(Q.c)({setBookingState:function(e){var t=e.setBookingData,a=e.bookingData;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}),Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.selectedBookingData,a=e.setBookingData,n=e.space;if(t){var r=t.event,o=r.id,l=r.title,i=r.from,c=r.to;a({id:o,title:l,bookingDate:r.bookingDate,busy:r.busy,spaceId:n.id,periods:[{from:i,to:c,label:"".concat(i,"-").concat(c)}]})}}}),un,pn,dn)(mn),bn=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.bookingsFetch,i=e.match,c=e.setRangeDates,s=e.bookingsData,m=e.bookingsError,u=e.bookingsLoading,d=e.spaceData,g=e.spaceError,b=e.spaceLoading,f=e.calendarView,h=e.setCalendarView,E=a.showAlert,k=a.alertMsg,C=a.alertType,O=function(e){return n({alertMsg:e,alertType:"error",showAlert:!0})},A=function(e){return n({alertMsg:e,alertType:"success",showAlert:!0})},w=null;E&&(w=p.a.createElement(Pe,{message:k,type:C,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}}));var S=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.params.id,e.prev=1,a=Ma()(t)?{spaceId:n,from:dt()(t),to:La()(t)}:{spaceId:n,from:t.start,to:t.end},c({from:a.from,to:a.to}),e.next=6,r(!0,"",null,{variables:a});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),O(v()(e.t0,"error")||"Erro ao atualizar calend\xe1rio");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}a=v()(t,"errors.periods",[]).join(", "),O(a||"Ocorreu um erro ao reservar espa\xe7o"),e.next=9;break;case 6:return A("Reservado com sucesso"),e.next=9,r(!0);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),O("Erro ao atualizar calend\xe1rio");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}a=v()(t,"errors.booking_date",[]).join(", "),O(a||"Ocorreu um erro ao cancelar esta reserva"),e.next=9;break;case 6:return A("Reserva cancelada com sucesso"),e.next=9,r(!0);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),O("Erro ao atualizar calend\xe1rio");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),N=v()(d,"space",{}),I=v()(s,"space_bookings",[]),D=g||m,M=y()(I,(function(e){return{id:e.id,title:e.title||"N\xe3o dispon\xedvel",bookingDate:j()(e.booking_date).toDate(),from:j()(e.booking_date).hour(dt()(e.from.split(":"))).minute(La()(e.from.split(":"))).toDate(),to:j()(e.booking_date).hour(dt()(e.to.split(":"))).minute(La()(e.to.split(":"))).add(1,"minute").toDate(),busy:!e.title}}));return p.a.createElement("div",{className:t.root},p.a.createElement(ea,{alertBox:w,error:D}),p.a.createElement("section",null,!b&&p.a.createElement("div",{className:t.container},p.a.createElement("div",{className:t.headerView},p.a.createElement("aside",null,p.a.createElement(Ae.a,{variant:"h5"},p.a.createElement("b",null,N.name))),p.a.createElement("aside",{className:t.newBooking},p.a.createElement(gn,{space:N,onRequestBooking:T})))),p.a.createElement("div",{className:t.container},b?p.a.createElement(me,null):p.a.createElement(qa,{data:M,onView:h,onRangeChange:S,view:f,loading:u,eventComponent:function(e){return p.a.createElement(gn,{readOnly:!0,space:N,isMonthView:"month"===f,onRequestBooking:x,selectedBookingData:e,openModalButton:p.a.createElement(p.a.Fragment,null,e.title)})}}))))})),fn=da(ya.getSpace,{name:"space",options:function(e){return{variables:e.match.params.id}}}),hn=da(Pa.getBookings,{name:"bookings",options:function(e){var t=e.match.params.id,a=e.rangeDates;return{variables:{spaceId:t,from:a.from,to:a.to}}}}),En=Object(Q.a)(Object(J.a)((function(e){return Object(u.a)({},te(e))}),{withTheme:!0}),Object(Q.e)("rangeDates","setRangeDates",{from:j()().startOf("week").toDate(),to:j()().endOf("week").toDate()}),Object(Q.e)("calendarView","setCalendarView","week"),Object(Q.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),fn,hn)(bn),vn=a(297),kn=a.n(vn),yn=a(184),Cn=a.n(yn),On={getVisitors:function(e){var t=e.page,a=void 0===t?0:t,n=e.perPage,r=void 0===n?20:n,o=e.month,l=void 0===o?11:o,i=e.year,c=e.buildingId;return c?R.get("/visitors",{page:a,per_page:r,month:l,year:i,building_id:c}):null},createVisitors:function(e){var t=e.visitorData,a={company_id:e.companyId,visitor_company:e.visitorCompany,visit_hour:e.visitTime,visit_date:e.visitDate,host_member_id:e.hostMemberId,building_id:e.buildingId},n=t.map((function(e){return Object(u.a)({},e,{},a)}));return R.post("/visitors",{visitors:n})},deleteVisitor:function(e){return R.put("/visitors/".concat(e,"/cancel"))}},An={getMembers:function(){return R.get("/members")},getMember:function(e){return R.get("/members/".concat(e))},blockMember:function(e){return R.put("/members/".concat(e,"/block"))},updateMember:function(e){var t=e.id,a=e.name,n=e.lastname,r=e.phone,o=e.role,l=e.job_role,i=e.locationIds;return R.put("/members/".concat(t),{id:t,name:a,lastname:n,phone:r,role:o,job_role:l,location_ids:i})},emailCheck:function(e){return R.get("/members/email_check",{email:e})},createMember:function(e){var t=e.name,a=e.lastname,n=e.phone,r=e.role,o=e.email,l=e.jobRole,i=e.locationIds;return R.post("/members",{name:t,lastname:a,phone:n,role:r,email:o,job_role:l,location_ids:i})},resendInvitationEmail:function(e){return R.get("/members/resend_invitation_email",{id:e})}},jn=a(285),wn=a(486),Sn=a(603),Tn=a(489),xn=a(124),Nn=a.n(xn),In=function(e){return Object(u.a)({},te(e),{submitButton:{fontWeight:"bold"},dialogContent:{maxWidth:660},inputField:{marginTop:-15,padding:"0 10px",width:"100%"},calendarInputField:{marginTop:10},selectLabel:{position:"relative",fontSize:14,paddingBottom:3},inputLabel:{padding:"20px 12px"},selectBox:{paddingTop:16},button:{fontWeight:"bold",margin:"0 20px"},addVisitorButton:{fontWeight:"bold",marginTop:"15px",maxWidth:"40px",maxHeight:"40px",minWidth:"40px",minHeight:"40px",marginRight:"10px"},deleteVisitorButton:{fontWeight:"bold",marginTop:"15px",backgroundColor:"#EE3C3C",color:"#FFF","&:hover":{backgroundColor:"#EE3C3C"},maxWidth:"40px",maxHeight:"40px",minWidth:"40px",minHeight:"40px",marginRight:"10px"},visitorsContainer:{display:"flex",justifyContent:"space-between"},buttonContainer:{display:"flex",justifyContent:"flex-end"},actions:{marginTop:30,marginBottom:10,display:"flex",justifyContent:"center"}})},Dn=function(){var e=D.getUserData();return{visitorData:on()([{name:"",email:""}]),visitorCompany:"",visitTime:j()(new Date).add(1,"hour").minute(0).toDate(),visitDate:new Date,hostMemberId:v()(e,"member.id",""),buildingId:v()(e,"buildings[0].id","")}},Mn=Object(d.memo)((function(e){var t=e.classes,a=e.open,n=e.setOpen,r=e.loading,o=e.setMemberState,l=e.members,i=e.memberData,c=e.buildings,s=e.submitFetch,m=e.submitLoading,u=e.submitError,d=function(){var e=i.visitorData;e.splice(1,0,{name:"",email:""}),o({visitorData:e})},g=function(){Y.hit("VisitorModal - Closed"),o(Dn()),n(!1)},b=Object(ct.a)(),f=Object(st.a)(b.breakpoints.down("sm")),h=Nn()(v()(u,"errors",{}),(function(e){return e[0]})),E=i.visitorCompany,k=i.visitTime,y=i.visitDate,C=i.hostMemberId,O=i.visitorData,A=i.buildingId,w=r||m;return p.a.createElement("div",null,p.a.createElement(ie.a,{onClick:function(){Y.hit("VisitorModal - Viewed"),o(Dn()),n(!0)},size:"large",variant:"contained",color:"primary",className:f?t.fab:null},"Nova visita"),p.a.createElement(Va.a,{open:a,maxWidth:"md",onClose:g,keepMounted:!0},p.a.createElement(Ja.a,null,"Novo visitante",p.a.createElement(Ie.a,{className:t.closeButton,onClick:g},p.a.createElement(Ne.a,null))),p.a.createElement(Ga.a,{className:t.dialogContent},p.a.createElement(le.a,{container:!0,spacing:2},O.map((function(e,a){return p.a.createElement(p.a.Fragment,{key:a.toString()},p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{error:!!h.name,className:t.inputField},p.a.createElement(Oe.a,{error:!!h.name,fullWidth:!0,label:"Nome do visitante",margin:"normal",InputLabelProps:{shrink:!0},value:O[a].name,disabled:w,onChange:function(e){return function(e,t){var a=i.visitorData;a[t].name=e.target.value,o({visitorData:a})}(e,a)}}),h.name&&p.a.createElement(Tn.a,null,h.name))),p.a.createElement(le.a,{item:!0,xs:10,sm:5},p.a.createElement(nt.a,{error:!!h.email,className:t.inputField},p.a.createElement(Oe.a,{error:!!h.email,fullWidth:!0,label:"E-mail do visitante",margin:"normal",InputLabelProps:{shrink:!0},value:O[a].email,disabled:w,onChange:function(e){return function(e,t){var a=i.visitorData;a[t].email=e.target.value,o({visitorData:a})}(e,a)}}),h.email&&p.a.createElement(Tn.a,null,h.email))),p.a.createElement(le.a,{item:!0,xs:2,sm:1},p.a.createElement("div",{className:t.buttonContainer},a?p.a.createElement(ie.a,{tabIndex:"-1",onClick:function(){return function(e){var t=i.visitorData;t.splice(e,1),o({visitorData:t})}(a)},variant:"contained",disabled:w,className:t.deleteVisitorButton},"-"):p.a.createElement(ie.a,{onClick:d,color:"primary",variant:"contained",disabled:w,className:t.addVisitorButton},"+"))))})),p.a.createElement(p.a.Fragment,null,p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{className:t.inputField,error:!!h.visitorCompany},p.a.createElement(Oe.a,{error:!!h.visitorCompany,fullWidth:!0,label:"Empresa do visitante/evento",margin:"normal",InputLabelProps:{shrink:!0},value:E,disabled:w,onChange:function(e){return o({visitorCompany:e.target.value})}}),h.visitorCompany&&p.a.createElement(Tn.a,null,h.visitorCompany))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{className:t.inputField,error:!!h.host_member},p.a.createElement(wn.a,{shrink:!0,className:t.inputLabel},"Pessoa visitada"),p.a.createElement(jn.a,{fullWidth:!0,className:t.selectBox,value:C,disabled:w,onChange:function(e){return o({hostMemberId:e.target.value})}},l.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},"".concat(e.name," ").concat(e.lastname))}))),h.members&&p.a.createElement(Tn.a,null,h.members)))),p.a.createElement(p.a.Fragment,null,p.a.createElement(le.a,{item:!0,xs:6},p.a.createElement(nt.a,{className:t.inputField,error:!!h.visitorCompany},p.a.createElement(en.a,{libInstance:j.a,utils:$a.a,locale:L.locale},p.a.createElement(tn.a,{className:t.calendarInputField,style:In.components,label:"Data da visita",invalidDateMessage:"Formato inv\xe1lido",variant:"dialog",value:y,disabled:w,onChange:function(e){return o({visitDate:e})},minDate:new Date,format:"DD/MM/YYYY",cancelLabel:"Cancelar"})))),p.a.createElement(le.a,{item:!0,xs:6},p.a.createElement(nt.a,{className:t.inputField,error:!!h.visitorCompany},p.a.createElement(en.a,{libInstance:j.a,utils:$a.a,locale:L.locale},p.a.createElement(Sn.a,{className:t.calendarInputField,style:In.components,ampm:!1,minutesStep:5,variant:"dialog",label:"Hor\xe1rio",value:k,disabled:w,onChange:function(e){return o({visitTime:e})},cancelLabel:"Cancelar"})))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{className:t.inputField},p.a.createElement(wn.a,{shrink:!0,className:t.inputLabel},"Pr\xe9dio"),p.a.createElement(jn.a,{fullWidth:!0,className:t.selectBox,value:A,disabled:w,onChange:function(e){return o({buildingId:e.target.value})}},c.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.name)})))))))),p.a.createElement(Qa.a,{className:t.actions},p.a.createElement(ie.a,{onClick:g,size:"large",disabled:w},"Cancelar"),p.a.createElement(ie.a,{onClick:function(){return s(!0)},size:"large",color:"primary",variant:"contained",disabled:w,style:In.submitButton},m?"Autorizando...":"Autorizar"))))})),Bn=da(On.createVisitors,{name:"submit",init:!1,options:function(e){var t=e.onCreateVisitor,a=e.memberData,n=e.setOpen,r=e.setMemberState,o=e.companyId;return{variables:Object(u.a)(Object(u.a)({},a),{},{companyId:o}),onRequestFinished:function(){Y.hit("NewVisitor - Added"),n(!1),r(Dn()),t()},onRequestError:function(e){t(e)}}}}),Ln=Object(Q.a)(Object(J.a)(In,{withTheme:!0}),Object(Q.e)("open","setOpen",!1),Object(Q.e)("memberData","setMemberData",Dn()),Object(Q.c)({setMemberState:function(e){var t=e.setMemberData,a=e.memberData;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}),Bn)(Mn),Pn=function(e){return Object(u.a)(Object(u.a)({},te(e)),{},{createNotificationButton:{backgroundColor:"#1177FF",border:"none",width:200,height:50},button:{marginTop:20,marginRight:20},buttonContainer:{display:"flex",justifyContent:"center"},showMoreButton:{width:220,marginBottom:50}})},Rn={ACCEPTED:"Autorizado",PENDING:"Pendente",CANCELED:"Cancelado"},Fn=Object(d.memo)((function(e){var t=e.classes,a=e.index,n=e.visitor,r=e.isSmallScreen,o=e.fields,l=e.onCancelVisitor,i=v()(n,"id"),c="".concat(v()(n,"name")," ").concat(v()(n,"visitor_company")||""),s="".concat(v()(n,"host_member.name")," ").concat(v()(n,"host_member.lastname")),m=v()(n,"host_member.email"),u="".concat(v()(n,"inviter.name")," ").concat(v()(n,"inviter.lastname")),d=v()(n,"inviter.email"),g=v()(n,"visit_date"),b=g?"".concat(j()(g).format("DD/MM/YYYY")):"--",f=j()(v()(n,"visit_hour")),h=f?"".concat(j()(f).format("HH:mm")):"--",E=v()(n,"checkin_at"),k=E?j()(E).format("DD/MM/YY HH:mm"):"",y=j()(g).hour(f.hour()).minute(f.minute()),C="ACCEPTED"!==n.status&&j()(y).isAfter(j()().startOf("day"));if(r){var O=["".concat(b," ").concat(h),"".concat(Rn[n.status]).concat(k?" \xe0s ".concat(k):""),c,"".concat(s," (").concat(d,")"),"".concat(u," (").concat(d,")")],A=o.slice(0,-1);return p.a.createElement(et.a,{className:a%2?t.bgWhite:t.bgGray},p.a.createElement(tt.a,{colSpan:Ue()(o)},p.a.createElement(le.a,{container:!0,spacing:3},p.a.createElement(le.a,{item:!0,xs:10},A.map((function(e,t){return p.a.createElement("div",{key:t.toString()},p.a.createElement("strong",null,e),p.a.createElement("br",null),p.a.createElement("span",null,O[t]))}))),p.a.createElement(le.a,{item:!0,xs:2},C&&p.a.createElement("button",{type:"button",className:t.clearButton,onClick:function(){return l(i)}},p.a.createElement(Ne.a,null))))))}return p.a.createElement(et.a,{className:a%2?t.bgWhite:t.bgGray},p.a.createElement(tt.a,{className:t.tableCell},b,p.a.createElement("br",null),h),p.a.createElement(tt.a,{className:t.tableCell},Rn[n.status],p.a.createElement("br",null),k),p.a.createElement(tt.a,{className:t.tableCell},c),p.a.createElement(tt.a,{className:t.tableCell},s,p.a.createElement("br",null),p.a.createElement("small",null,m)),p.a.createElement(tt.a,{className:t.tableCell},u,p.a.createElement("br",null),p.a.createElement("small",null,d)),p.a.createElement(tt.a,{className:t.tableSmallCell},C&&p.a.createElement("button",{type:"button",className:t.clearButton,onClick:function(){return l(i)}},p.a.createElement(Ne.a,null))))})),Wn=Object(J.a)((function(e){return Object(u.a)({},Pn(e),{clearButton:{display:"flex",justifyContent:"center",alignItems:"center",padding:7,marginLeft:5,borderRadius:50,borderWidth:0,borderStyle:"none",borderImage:"none",backgroundColor:"#EE3C3C",cursor:"pointer",color:"#fff","&:hover":{color:"#fff",backgroundColor:"#EE2C3C"}}})}),{withTheme:!0})(Fn),Un=["Data visita","Status","Visitante","Visita para","Criado por","A\xe7\xe3o"],_n=Object(d.memo)((function(e){var t=e.classes,a=e.visitors,n=e.loading,r=e.onCancelVisitor,o=Object(ct.a)(),l=Object(st.a)(o.breakpoints.down("sm")),i=l?1:Ue()(Un);return p.a.createElement("div",{className:t.container},p.a.createElement(Nt.a,{className:t.paper},p.a.createElement(Ze.a,null,p.a.createElement($e.a,null,p.a.createElement(et.a,null,l?p.a.createElement(tt.a,{className:t.tableCell},"VISITAS REGISTRADAS"):Un.map((function(e,a){return p.a.createElement(tt.a,{className:t.tableCell,key:a.toString()},e.toUpperCase())})))),p.a.createElement(it.a,null,n?p.a.createElement(et.a,null,p.a.createElement(tt.a,{colSpan:i,align:"center"},p.a.createElement(me,null))):Ue()(a)?a.map((function(e,t){return p.a.createElement(Wn,{index:t,key:e.id,visitor:e,loading:n,onCancelVisitor:r,fields:Un,isSmallScreen:l})})):p.a.createElement(et.a,null,p.a.createElement(tt.a,{className:t.empty,colSpan:i,align:"center"},"Nenhum visitante registrado"))))))})),zn=Object(J.a)({container:{marginBottom:40,paddingTop:20},empty:{backgroundColor:"#EEE"},paper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},tableCell:{fontSize:14,width:140,maxWidth:140,minWidth:140}},{withTheme:!0})(_n),Yn=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.setBuildingId,r=e.setMonth,i=e.setYear,c=e.setVisitors,s=e.setDisableSeeMore,m=e.membersData,u=e.visitors,d=e.page,g=e.setPage,b=e.buildingId,f=e.setHideSeeMore,h=e.visitorsFetch,E=e.visitorsLoading,k=e.visitorsError,y=e.disableSeeMore,C=e.classes,O=e.month,A=e.year,w=e.hideSeeMore,S=e.totalVisitors,T=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=j()(t.target.value,"YYYY-MM"),r(a.month()),i(a.year()),N(),n={select_month:a.month()+1,select_year:a.year()},Y.hit("Visitors - FilteredByMonth",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t.target.value),N(),a={select_building:t.target.value},Y.hit("Visitors - FilteredByBuilding",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),g(0),e.next=5,h(!0);case 5:t=e.sent,a=Xe()(v()(t,"visitors",[]),"id"),c(a),s(!1),f(ka()(a)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),s(!1),f(!0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),g(d+1),e.next=5,h(!1);case 5:t=e.sent,a=v()(t,"visitors",[]),c(Xe()(kn()(u,a),"id")),s(!1),f(ka()(a)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),s(!1),c(u),f(!0);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Deseja cancelar a visita?")){e.next=12;break}return e.prev=1,e.next=4,On.deleteVisitor(t);case 4:return e.next=6,h(!0);case 6:a({alertMsg:"Visitante cancelado com sucesso",alertType:"success",showAlert:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a({alertMsg:"Ocorreu um erro no cancelamento da visita",alertType:"error",showAlert:!0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}a({alertMsg:"Ocorreu um erro ao registrar visitante",alertType:"error",showAlert:!0}),e.next=13;break;case 4:return e.prev=4,a({alertMsg:"Visitante autorizado com sucesso",alertType:"success",showAlert:!0}),e.next=8,h(!0);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),a({alertMsg:"Ocorreu um erro atualizar lista de visitantes",alertType:"error",showAlert:!0});case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),L=Boolean(!E&&!((Ue()(u)||1)===S)),P=D.getUserData(),R=v()(P,"member.company.id"),F=Je()(v()(P,"buildings",[]),["name"]),W=t.showAlert,U=t.alertMsg,_=t.alertType,z=null;W&&(z=p.a.createElement(Pe,{message:U,type:_,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var H=v()(m,"members",[]),q=E,V=q;return p.a.createElement("div",{className:C.root},p.a.createElement(ea,{alertBox:z,error:k}),p.a.createElement("section",null,p.a.createElement("div",{className:C.container},p.a.createElement("div",{className:C.headerView},p.a.createElement("aside",null,p.a.createElement(Ae.a,{variant:"h5"},p.a.createElement("b",null,S?"Visitantes (".concat(S,")"):"Visitantes")),p.a.createElement("br",null),p.a.createElement(le.a,{container:!0,spacing:2},p.a.createElement(le.a,{item:!0,xs:6},p.a.createElement(nt.a,{fullWidth:!0},p.a.createElement(Oe.a,{select:!0,label:"Pr\xe9dio",disabled:V,value:b,SelectProps:{native:!0},InputLabelProps:{shrink:!0},onChange:x},F.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),p.a.createElement(le.a,{item:!0,xs:6},p.a.createElement(nt.a,{fullWidth:!0},p.a.createElement(Oe.a,{select:!0,label:"M\xeas",disabled:V,value:j()().month(O).year(A).format("YYYY-MM"),SelectProps:{native:!0},InputLabelProps:{shrink:!0},onChange:T},Cn()(6,(function(e){var t=j()().subtract(e,"month");return p.a.createElement("option",{key:t.format("YYYY-MM"),value:t.format("YYYY-MM")},t.format("MMMM YYYY"))}))))))),p.a.createElement("aside",null,p.a.createElement(Ln,{loading:q,setAlert:a,members:H,companyId:R,onCreateVisitor:B,buildings:F})))),p.a.createElement("div",{className:C.container},p.a.createElement(zn,{visitors:u,loading:E,onCancelVisitor:M}),L&&!w&&p.a.createElement("div",{className:C.buttonContainer},p.a.createElement(ie.a,{className:C.showMoreButton,onClick:I,size:"medium",variant:"contained",color:"primary",disabled:y},y?"Carregando":"Ver Mais")))))})),Hn=da(An.getMembers,{name:"members"}),qn=da(On.getVisitors,{name:"visitors",options:function(e){var t=e.page,a=e.month,n=e.year,r=e.buildingId,o=e.setVisitors,l=e.setHideSeeMore,i=e.setTotalVisitors;return{variables:{page:t,perPage:20,month:a+1,year:n,buildingId:r},onRequestFinished:function(e){var t=Xe()(v()(e,"visitors",[]),"id"),a=v()(e,"meta.total",0);o(t),l(ka()(t)),i(a)}}}}),Vn=Object(Q.a)(Object(J.a)(Pn,{withTheme:!0}),Object(Q.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Q.e)("buildingId","setBuildingId",v()(D.getUserData(),"buildings[0].id")),Object(Q.e)("totalVisitors","setTotalVisitors",0),Object(Q.e)("visitors","setVisitors",[]),Object(Q.e)("hideSeeMore","setHideSeeMore",!1),Object(Q.e)("disableSeeMore","setDisableSeeMore",!1),Object(Q.e)("page","setPage",0),Object(Q.e)("month","setMonth",j()().month()),Object(Q.e)("year","setYear",j()().year()),Hn,qn)(Yn),Gn=a(597),Qn=a(589),Jn=a(590),Kn=a(300),Xn=a.n(Kn),Zn=a(302),$n=a(115),er=a.n($n),tr=a(298),ar=a.n(tr),nr=a(143),rr={PRIORITIES:[{label:"Baixa",key:"LOW"},{label:"M\xe9dia",key:"NORMAL"},{label:"Alta",key:"HIGH"}],KANBAN_STATUSES:[{label:"Pendente",key:"PENDING"},{label:"Em andamento",key:"IN_PROGRESS"},{label:"Conclu\xeddo",key:"DONE"}],STATUSES:[{label:"Pendente",key:"PENDING"},{label:"Em andamento",key:"IN_PROGRESS"},{label:"Conclu\xeddo",key:"DONE"}],STATUS_PENDING:"PENDING",STATUS_IN_PROGRESS:"IN_PROGRESS",STATUS_DONE:"DONE",PRIORITY_LOW:"LOW",PRIORITY_NORMAL:"NORMAL",PRIORITY_HIGH:"HIGH"},or={kanban:{display:"inline-flex",userSelect:"none",alignItems:"center",justifyContent:"center",height:640},column:{margin:10,display:"flex",flexDirection:"column",marginBottom:10,minWidth:320,height:640},columnLoading:{transition:"background-color 500ms fade-out 1s",backgroundColor:"rgba(96, 115, 137, 0.04)"},columnHeader:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:1,borderLeft:"1px solid rgba(96, 115, 137, 0.12)",borderRight:"1px solid rgba(96, 115, 137, 0.12)",borderTop:"1px solid rgba(96, 115, 137, 0.12)",backgroundColor:"rgba(96, 115, 137, 0.04)",transition:"background-color 0.1s ease",height:50,userSelect:"none"},columnTitle:{padding:10,transition:"background-color ease 0.2s",flexGrow:1,userSelect:"none",position:"relative",fontSize:14,fontWeight:600,color:"#515c6a"},columnTitleLoading:{color:"rgb(224, 224, 224)"},list:{backgroundColor:"rgba(96, 115, 137, 0.04)",display:"flex",flexDirection:"column",padding:10,borderRadius:1,borderLeft:"1px solid rgba(96, 115, 137, 0.12)",borderRight:"1px solid rgba(96, 115, 137, 0.12)",borderBottom:"1px solid rgba(96, 115, 137, 0.12)",paddingBottom:0,transition:"background-color 0.1s ease, opacity 0.1s ease",userSelect:"none",minHeight:250,marginBottom:10},card:{cursor:"pointer",height:"auto"},cardContent:{boxShadow:"2px 2px 1px rgba(0,0,0,0.2)",flexGrow:1,flexBasis:"100%",display:"flex",flexDirection:"column",marginBottom:8}},lr=Object(d.memo)((function(e){var t=e.provided,a=void 0===t?{}:t,n=e.children;return p.a.createElement("a",Object.assign({style:or.card,ref:a.innerRef},a.draggableProps,a.dragHandleProps),n)}));lr.propTypes={children:$.a.any,provided:$.a.any};var ir=Object(d.memo)((function(e){var t=e.provided,a=e.renderCard,n=e.row,r=e.cardWrapperStyle,o=e.disableDragDrop;return p.a.createElement(lr,{provided:o?{}:t},p.a.createElement("div",{style:Object(u.a)({},or.cardContent,{},r)},a(n)))})),cr=Object(d.memo)((function(e){var t=e.provided,a=void 0===t?{}:t,n=e.style,r=e.children;return p.a.createElement("div",Object.assign({style:Object(u.a)({},or.list,{},n),ref:a.innerRef},a.droppableProps),r)}));cr.propTypes={children:$.a.any,provided:$.a.any,style:$.a.any};var sr=Object(d.memo)((function(e){var t=e.column,a=e.cardWrapperStyle,n=e.renderCard,r=e.disableDragDrop;return y()(v()(t,"rows",[]),(function(e,t){return r?p.a.createElement(ir,{key:t,row:e,renderCard:n,cardWrapperStyle:a,disableDragDrop:r}):p.a.createElement(nr.b,{key:e.id,draggableId:e.id,index:t},(function(o,l){return p.a.createElement(ir,{key:t,row:e,provided:o,dragSnapshot:l,renderCard:n,cardWrapperStyle:a,disableDragDrop:r})}))}))})),mr=Object(d.memo)((function(e){var t=e.listStatus,a=e.column,n=e.disableDragDrop,r=(e.loading,e.renderCard),o=e.columnStyle,l=e.cardWrapperStyle;return n?p.a.createElement(cr,{style:o},p.a.createElement(sr,{column:a,renderCard:r,disableDragDrop:n,cardWrapperStyle:l})):p.a.createElement(nr.c,{droppableId:t||"ROW",isDropDisabled:!1,type:"ROW"},(function(e){return p.a.createElement(cr,{style:o,provided:e},p.a.createElement(sr,{column:a,renderCard:r,disableDragDrop:n,cardWrapperStyle:l}),e.placeholder)}))}));mr.propTypes={listStatus:$.a.string,renderCard:$.a.func,loading:$.a.bool,column:$.a.object,columnStyle:$.a.object,cardWrapperStyle:$.a.object,disableDragDrop:$.a.bool};var ur=mr,dr=Object(d.memo)((function(e){var t=e.index,a=e.column,n=e.renderCard,r=e.columnStyle,o=e.columnWrapperStyle,l=e.cardWrapperStyle,i=e.columnTitleStyle,c=e.columnHeaderStyle,s=e.disableDragDrop,m=e.loading;return p.a.createElement("div",{style:Object(u.a)({},or.column,{},o)},p.a.createElement("header",{style:Object(u.a)({},or.columnHeader,{},c)},p.a.createElement("h4",{style:Object(u.a)({},or.columnTitle,{},i,{},m?or.columnTitleLoading:{})},"".concat(v()(a,"title")," (").concat(Ue()(v()(a,"rows")),")"))),p.a.createElement(ur,{key:t,columnStyle:r,column:a,loading:m,listStatus:v()(a,"status"),renderCard:n,cardWrapperStyle:l,disableDragDrop:s}))}));dr.propTypes={index:$.a.number,renderCard:$.a.func,loading:$.a.bool,column:$.a.object,columnWrapperStyle:$.a.object,columnStyle:$.a.object,columnTitleStyle:$.a.object,columnHeaderStyle:$.a.object,cardWrapperStyle:$.a.object,disableDragDrop:$.a.bool};var pr=dr,gr=rr.KANBAN_STATUSES,br=function(e,t){return y()(e,(function(e){return e.status})).indexOf(t)},fr=function(e){return y()(gr,(function(t,a){var n=v()(t,"key"),r=ar()(e,(function(e){return e.status===n}));return{index:a,status:n,title:v()(t,"label","").toUpperCase(),rows:r}}))},hr=Object(d.memo)((function(e){var t=e.columns,a=e.setColumns,n=e.onDragEnd,r=e.renderCard,o=e.loading,l=e.columnWrapperStyle,i=e.cardWrapperStyle,c=e.columnStyle,s=e.columnHeaderStyle,m=e.columnTitleStyle,d=e.disableDragDrop;return p.a.createElement(nr.a,{onDragEnd:function(e){var r=e.source,o=e.destination;if(!(!o||r.droppableId===o.droppableId&&r.index===o.index)){var l=er()(t),i=br(t,r.droppableId),c=br(t,o.droppableId);if(r.droppableId!==o.droppableId){var s=er()(t[i].rows),m=er()(t[c].rows),u=s.splice(r.index,1),d=Object(Zn.a)(u,1)[0];m.splice(o.index,0,d),l[i].rows=er()(s),l[c].rows=er()(m)}else{var p=l[i].rows[r.index],g=l[c].rows[o.index];l[i].rows[r.index]=g,l[c].rows[o.index]=p}a(er()(l)),n(e)}}},p.a.createElement("div",{style:or.kanban},Cn()(Ue()(gr),(function(e){return p.a.createElement(pr,{key:e,index:e,loading:o,column:t[e],renderCard:r,columnHeaderStyle:s,columnTitleStyle:m,columnStyle:Object(u.a)({},c,{},o?or.columnLoading:{}),columnWrapperStyle:l,cardWrapperStyle:i,disableDragDrop:d})}))))})),Er=Object(Q.a)(Object(Q.e)("columns","setColumns",[]),Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.data;(0,e.setColumns)(fr(t))}}),Object(Q.d)(["data","loading"],(function(e){var t=e.data;(0,e.setColumns)(fr(t))})))(hr),vr=a(602),kr=a(584),yr=a(189),Cr={card:{padding:0,width:300,height:"auto",minHeight:"auto",maxHeight:"auto"},cardContent:{marginBottom:0,paddingBottom:5},cardAction:{marginTop:10,marginBottom:15,display:"inline-flex",width:"100%",alignItems:"center",justifyContent:"space-between"},cardTitle:{lineHeight:"1.5em",marginBottom:5},cardChipToday:{float:"right",backgroundColor:de.a[700],color:"white"},cardChipTomorrow:{float:"right",backgroundColor:ht.a[700],color:"white"},cardChipExpired:{float:"right",backgroundColor:de.a[200],color:"white"},cardChipFarFromExpiration:{float:"right",backgroundColor:yr.a[200],color:"black"},cardAvatar:{display:"inline-flex",width:"100%",height:"auto",minHeight:"auto",maxHeight:"auto",alignItems:"center"},cardAvatarName:{marginLeft:10,marginTop:0,lineHeight:"1.2em"}},Or=Object(d.memo)((function(e){var t=e.ticket,a=e.loading,n=e.onClickCard,r="".concat(v()(t,"requester.name")," ").concat(v()(t,"requester.lastname","")),o=v()(t,"assignee"),l="".concat(v()(o,"name")," ").concat(v()(o,"lastname","")),i=v()(o,"photo_url"),c=v()(t,"created_at")?"".concat(j()(t.created_at).fromNow()," por "):"",s=v()(t,"title",""),m=v()(t,"category.title","");return p.a.createElement(p.a.Fragment,null,p.a.createElement(Ca.a,{style:Cr.card,onClick:function(){a||n(t)}},p.a.createElement(Aa.a,{style:Cr.cardContent},!a&&function(e){if(e){var t=j()(e).format("MMM D"),a=j()().startOf("day"),n=j()(e).startOf("day"),r=n.isSame(a,"day"),o=1===n.diff(a,"days"),l=n.isBefore(a,"day");return r?p.a.createElement(vr.a,{label:t,size:"small",style:Cr.cardChipToday}):o?p.a.createElement(vr.a,{label:t,size:"small",style:Cr.cardChipTomorrow}):l?p.a.createElement(vr.a,{label:t,size:"small",style:Cr.cardChipExpired}):p.a.createElement(vr.a,{label:t,size:"small",style:Cr.cardChipFarFromExpiration})}return null}(v()(t,"deadline")),p.a.createElement(Ae.a,{variant:"subtitle1",style:Cr.cardTitle},a?p.a.createElement(kr.a,{animation:"wave"}):p.a.createElement("b",null,s)),a?p.a.createElement(kr.a,{animation:"wave",width:150}):p.a.createElement(Ae.a,{variant:"body2",color:"textSecondary",component:"small"},c,p.a.createElement("b",null,r)),p.a.createElement("div",{style:Cr.cardAction},p.a.createElement("div",{style:Cr.cardAvatar},a?p.a.createElement(kr.a,{animation:"wave",width:100}):o&&p.a.createElement(p.a.Fragment,null,p.a.createElement(Ct,{name:l,photoUrl:i}),p.a.createElement(Ae.a,{variant:"subtitle1",style:Cr.cardAvatarName},p.a.createElement("small",null,l)))),p.a.createElement(Ae.a,{variant:"body2",color:"textSecondary",component:"small"},a?p.a.createElement(kr.a,{animation:"wave",width:50}):m)))))})),Ar=Object(Q.a)(h.g)(Or),jr=a(496),wr=a(588),Sr=a(299),Tr=a.n(Sr),xr={getTickets:function(e){return R.get("/tickets",{location_id:v()(e,"locationId"),assignee_id:v()(e,"assigneeId"),category_id:v()(e,"categoryId"),deadline:v()(e,"deadline"),priority:v()(e,"priority")})},getTicket:function(e){return e?R.get("/tickets/".concat(e)):null},getTicketByCode:function(e){return e?R.get("/tickets/codes/".concat(e)):null},updateTicket:function(e){var t={id:v()(e,"id"),title:v()(e,"title"),priority:v()(e,"priority"),deadline:v()(e,"deadline"),location_id:v()(e,"location.id"),assignee_id:v()(e,"assignee.id"),category_id:v()(e,"category.id")};return R.put("/tickets/".concat(v()(e,"id")),t)},moveTicket:function(e){var t=e.id,a=e.status,n=e.position,r=e.location_id;return R.put("/tickets/".concat(t,"/move"),{status:a,position:n,location_id:r})},archiveTicket:function(e){var t=e.id;return R.put("/tickets/".concat(t,"/archive"))},postTicket:function(e){return R.post("/tickets",e)},getAssignables:function(){return R.get("/tickets/assignables")}},Nr={getComments:function(e){return e?R.get("/tickets/".concat(e,"/ticket_comments")):null},sendComment:function(e){var t=e.id,a=e.content,n=e.isInternal,r=e.attachmentData,o=null;return r&&(o={id:r.id,storage:r.storage,metadata:r.metadata}),R.post("/tickets/".concat(t,"/ticket_comments"),{content:a,is_internal:n,attachment_data:o})}},Ir={isTablet:function(){return window.innerWidth<1280},isMobile:function(){return window.innerWidth<720}},Dr=a(586),Mr=a(585),Br=a(587),Lr=Object(d.memo)((function(e){var t=e.file,a=e.onRemoveFile,n=e.outterContainerClassName,r=e.disabled,o=e.classes,l=Object(N.get)(t,"progressPercent")<100;return p.a.createElement("div",{className:"".concat(o.outterContainer," ").concat(n)},p.a.createElement(ie.a,{variant:"outlined",size:"large",onClick:function(){return t.url&&window.open(t.url,"_blank")},disabled:r||l},p.a.createElement("div",null,p.a.createElement("div",{className:o.innerButtonContainer},p.a.createElement(Mr.a,null),p.a.createElement("div",null,p.a.createElement("span",{className:o.filename},Object(N.get)(t,"metadata.filename")),p.a.createElement("br",null),p.a.createElement("small",{className:o.sizeText},Math.round(Object(N.get)(t,"metadata.size")/1e3),"KB"))),l&&p.a.createElement(Dr.a,{className:o.progressBar,variant:"determinate",value:t.progressPercent}))),!r&&a&&p.a.createElement(Br.a,{onClick:function(){return a(t)},className:o.cancelButton}))})),Pr=Object(J.a)((function(e){return Object(u.a)(Object(u.a)({},te(e)),{},{outterContainer:{display:"inline-block",position:"relative"},innerButtonContainer:{display:"flex",textAlign:"left",lineHeight:1},filename:{fontSize:"calc(".concat(e.typography.button.fontSize," * 0.8)")},sizeText:{fontSize:"calc(".concat(e.typography.button.fontSize," * 0.6)")},progressBar:{position:"absolute",left:0,bottom:0,width:"100%"},cancelButton:{position:"absolute",top:-12,right:-12,cursor:"pointer"}})}))(Lr),Rr=Object(d.memo)((function(e){var t=e.comment,a=e.classes,n=v()(t,"is_internal")?" - Interno":"",r=v()(t,"is_internal")?a.internalBallon:"";return p.a.createElement("div",null,p.a.createElement("div",{className:a.userNameContainer},p.a.createElement(Ct,{name:v()(t,"member.name",""),photoUrl:v()(t,"member.photo_url","")}),p.a.createElement(Ae.a,{variant:"subtitle2",component:"b",className:a.userName},"".concat(v()(t,"member.name")," ").concat(v()(t,"member.lastname"))),p.a.createElement(Ae.a,{variant:"subtitle2",component:"b",color:"textSecondary",className:a.userJobRole},v()(t,"member.job_role")?"- ".concat(v()(t,"member.job_role")):"")),p.a.createElement("div",{className:a.content},p.a.createElement("div",{className:"".concat(a.baloon," ").concat(r)},t.attachment_data&&p.a.createElement(Pr,{file:t.attachment_data,outterContainerClassName:a.previewButtonContainer}),t.content&&p.a.createElement("div",{className:t.attachment_data&&a.contentWithMargin},(t.content||"").split("\n").map((function(e,t){return p.a.createElement("span",{key:"".concat(Date.now(),"_").concat(t.toString())},e,p.a.createElement("br",null))})))),p.a.createElement(Ae.a,{variant:"body2",color:"textSecondary",component:"small"},"".concat(j()(v()(t,"created_at")).calendar()).concat(n))))})),Fr=Object(J.a)((function(){return{userNameContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginTop:15},userName:{marginLeft:10},userJobRole:{marginLeft:5},content:{marginLeft:40,marginBottom:20},baloon:{backgroundColor:"#E0E0E0",borderRadius:5,paddingLeft:15,paddingRight:15,paddingTop:10,paddingBottom:10,marginBottom:5,height:"auto",wordBreak:"break-word",whiteSpace:"pre-line"},internalBallon:{backgroundColor:"#fff3d7"},previewButtonContainer:{backgroundColor:"white"},contentWithMargin:{marginTop:10}}}),{withTheme:!0})(Rr),Wr={genericUploadsParams:function(){return R.get("/uploads/params")},uploadToApi:function(e){var t=e.file,a=e.progressHandler;return R.post("/uploads/upload",t.formData,null,{onUploadProgress:function(e){var n=Math.round(100*e.loaded/e.total);a({progressPercent:n<95?n:95,originalFileName:t.name})}}).then((function(e){var t=e.id,a=e.storage,n=e.metadata;return{id:t,storage:a,metadata:{filename:n.filename,size:n.size,mime_type:n.mime_type},progressPercent:100}}))}},Ur=function(e){var t,a,n=e.file,r=e.progressHandler,o=new Promise((function(e,n){t=e,a=n}));o.cancelUpload=function(){o.wasCanceled=!0,a(new Error("REQUEST CANCELED"))};var l=function(e){o.wasCanceled||r(Object(u.a)(Object(u.a)(Object(u.a)({},n),e),{},{cancelUpload:o.cancelUpload,wasCanceled:o.wasCanceled}))};return l({progressPercent:0}),(0,Wr.uploadToApi)({file:n,progressHandler:l}).then(t).catch(a),o},_r=Object(d.memo)((function(e){var t=e.accept,a=e.onChange,n=e.buttonProps,r=e.disabled,o=null;return p.a.createElement(p.a.Fragment,null,p.a.createElement(ie.a,Object.assign({color:"primary",variant:"outlined",size:"large",onClick:function(){return o&&o.click()},startIcon:p.a.createElement(Mr.a,null),disabled:r},n),"Anexar"),p.a.createElement("input",{type:"file",accept:t,style:{display:"none"},ref:function(e){o=e},onChange:function(e){return function(e){var t=Object(N.map)(e,(function(e){var t=function(e){return{metadata:{size:e.size,filename:e.name,mime_type:e.type},originalFileObj:e}}(e),a=new FileReader,n=new FormData;return n.append("file",e),new Promise((function(r){a.onload=function(e){r(Object(N.merge)(t,{url:e.target.result,data:e.target.result,base64Data:e.target.result,formData:n}))},a.readAsDataURL(e)}))}));return Promise.all(t)}(e.target.files).then((function(e){return a(e[0])}))}}))})),zr=Object(d.memo)((function(e){var t=e.file,a=e.setFile,n=e.onFileChange,r=e.disabled;return t&&t.progressPercent?p.a.createElement(Pr,{disabled:r,file:t,onRemoveFile:function(e){return e.cancelUpload||a(null)}}):p.a.createElement(_r,{disabled:r,accept:"image/*,.doc,.docx,.xls,.xlsx,.pdf,.xml",onChange:n})})),Yr=da(Nr.sendComment,{name:"sendTicketComment",init:!1,options:function(e){var t=e.setFile,a=e.onAttachmentSent,n=e.onUploadError;return{onRequestFinished:function(){t(null),a&&a()},onRequestError:function(e){n(e)}}}}),Hr=Object(Q.a)(Object(Q.e)("file","setFile",null),Yr,Object(Q.c)({onFileChange:function(e){var t=e.ticketId,a=e.onUploadError,n=e.setFile,r=e.sendTicketCommentFetch;return function(e){Ur({file:e,progressHandler:function(t){var a=t.progressPercent;a<100&&n(Object(u.a)(Object(u.a)({},e),{},{progressPercent:a}))}}).catch((function(e){n(null),a&&a(e)})).then((function(a){var o=Object(u.a)(Object(u.a)(Object(u.a)({},e),a),{},{progressPercent:99});n(o),r(!0,null,null,{variables:{id:t,attachmentData:o,content:null,isInternal:!1}})}))}}}))(zr),qr=rr.PRIORITIES,Vr=rr.STATUSES,Gr=rr.KANBAN_STATUSES,Qr=Object(d.memo)((function(e){var t=e.setAlert,a=e.classes,n=e.assignees,r=e.categories,o=e.open,l=e.onClose,i=e.setCurrentTicketState,c=e.currentTicket,s=e.formData.validationErrors,m=e.ticketLoading,d=e.theme,g=e.isEditing,b=e.setIsEditing,f=e.updateTicketFetch,h=e.updateTicketLoading,E=e.ticketCommentsFetch,v=e.ticketCommentsData,k=e.ticketCommentsLoading,y=e.commentMessage,C=e.setCommentMessage,O=e.setCloseModal,A=e.sendTicketCommentFetch,w=e.sendTicketCommentLoading,S=e.moveTicketFetch,T=e.moveTicketLoading,x=e.archiveTicketFetch,I=e.archiveTicketLoading;if(!o)return null;var M=Ir.isMobile(),B=D.getUserData(),P=Object(N.sortBy)(Object(N.get)(B,"member.locations",[]),["name"]),R=Object(N.get)(B,"member.role","MEMBER"),F=wt.includes(R),W=Object(N.sortBy)(Object(N.get)(v,"ticket_comments",[]),["created_at"]).reverse(),U=Object(N.get)(c,"requester.id"),_=Object(N.get)(B,"member.id"),z=Object(N.get)(c,"status"),H=Boolean(Object(N.get)(c,"archived_at")),q=F&&!H,V=q||!H&&(U&&_&&_===U),G=!V||w||k,Q=h||T||m,J=!q,K=G||Object(N.isEmpty)(Object(N.get)(y,"content","")),X="".concat(Object(N.get)(c,"requester.name","")," ").concat(Object(N.get)(c,"requester.lastname","")),Z=Object(N.get)(c,"created_at")?j()(c.created_at).fromNow():"",$=Object(N.get)(c,"code",""),ee=Object(N.get)(c,"title",""),te="".concat(H?"Ticket arquivado - ":"").concat(ee),ae=Object(N.isEmpty)(Object(N.get)(c,"priority"))?"":Object(N.get)(c,"priority"),ne=Object(N.get)(c,"location.id"),re=Object(N.get)(c,"category.id"),ce=Object(N.sortBy)(Object(N.uniqBy)([Object(N.get)(c,"category",{})].concat(r||[]),"id"),"title"),se=Object(N.get)(c,"assignee.id"),ue=Object(N.get)(c,"deadline",null),de=I||Q;if(J){ae=Object(N.get)(Object(N.find)(qr,(function(e){return e.key===ae})),"label",""),ne=Object(N.get)(Object(N.find)(P,(function(e){return e.id===ne})),"name",""),re=Object(N.get)(Object(N.find)(r,(function(e){return e.id===re})),"title",""),z=Object(N.get)(Object(N.find)(Vr,(function(e){return e.key===z})),"label",""),ue=Object(N.isEmpty)(ue)?"":j()(ue).format("DD/MM/YYYY");var pe=Object(N.find)(n,(function(e){return e.id===se}));se=pe?"".concat(Object(N.get)(pe,"name","")," ").concat(Object(N.get)(pe,"lastname","")):"Nenhum respons\xe1vel"}var ge=Object(ct.a)(),be=Object(st.a)(ge.breakpoints.down("sm")),fe=d.mainColor,he=function(){Y.hit("TicketModal - Closed"),O(!0),b(!1),l()},Ee=function(){window.document.getElementById("title").focus(),b(!0)},ve=function(e){q&&(O(!1),i(e),f(!0))};return p.a.createElement(Va.a,{open:o,fullScreen:be,onClose:he,keepMounted:!0,fullWidth:!0,maxWidth:"md"},p.a.createElement(le.a,{container:!0},p.a.createElement(le.a,{item:!0,xs:12,sm:12,md:5,className:a.bgGray},p.a.createElement(Ja.a,null,p.a.createElement(Oe.a,{multiline:!0,id:"title",disabled:Q,InputProps:{disableUnderline:!0,style:{fontSize:20,width:M?300:350,backgroundColor:g?"#E0E0E0":"",borderRadius:g?5:"",paddingLeft:5},endAdornment:p.a.createElement(jr.a,{position:"end"},!M&&!g&&p.a.createElement(Ie.a,{onClick:Ee,disabled:Q},h?p.a.createElement(oe.a,{color:fe,className:a.progress,variant:"indeterminate",disableShrink:!0,thickness:5,size:25}):!g&&p.a.createElement(Tr.a,null)))},value:te,onFocus:Ee,onKeyDown:function(e){13!==e.keyCode||Object(N.isEmpty)(c.title)||(ve({title:ee}),b(!1))},onBlur:function(){ve({title:ee}),b(!1)},onChange:function(e){return t=e.target.value,void(q&&i({title:t}));var t}},s.title&&p.a.createElement(Tn.a,null,"T\xedtulo n\xe3o pode ficar em branco")),p.a.createElement("br",null),p.a.createElement(Ae.a,{variant:"body2",color:"textSecondary",component:"small"},m?"":"#".concat($," - ").concat(Z," por "),p.a.createElement("b",null,X)),p.a.createElement(Ie.a,{className:a.closeButton,onClick:he},p.a.createElement(Ne.a,null))),p.a.createElement(Ga.a,{className:a.ticketContent},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!s.status},p.a.createElement(Oe.a,{error:!!s.status,label:"Status",select:q,value:z,disabled:Q,InputProps:{readOnly:J},InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return function(e){if(q){O(!1);var t={variables:{id:c.id,status:e}};i({status:e}),S(!0,"",null,t)}}(e.target.value)},variant:"outlined"},Gr.map((function(e){return p.a.createElement("option",{value:e.key,key:e.key},e.label)}))),s.status&&p.a.createElement(Tn.a,null,s.status)),Object(N.size)(P)>1&&p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!s.location_id},p.a.createElement(Oe.a,{error:!!s.location_id,label:"Local",select:q,value:ne,disabled:Q,InputProps:{readOnly:J},InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return function(e){if(q){O(!1);var t={variables:{id:c.id,location_id:e}};i({location:{id:e}}),S(!0,"",null,t)}}(e.target.value)},variant:"outlined"},P.map((function(e){return p.a.createElement("option",{value:e.id,key:e.id},e.name)}))),s.location_id&&p.a.createElement(Tn.a,null,s.location_id)),p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!s.category_id},p.a.createElement(Oe.a,{error:!!s.category_id,label:"Categoria",select:q,value:re,disabled:Q,InputProps:{readOnly:J},SelectProps:{native:!0},InputLabelProps:{shrink:!0},onChange:function(e){return ve({category:{id:e.target.value}})},variant:"outlined"},ce.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.title)}))),s.category_id&&p.a.createElement(Tn.a,null,s.category_id)),p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!s.assignee_id},p.a.createElement(Oe.a,{error:!!s.assignee_id,label:"Respons\xe1vel",select:q,value:se,disabled:Q,InputProps:{readOnly:J},SelectProps:{native:!0},InputLabelProps:{shrink:!0},onChange:function(e){return ve({assignee:{id:e.target.value}})},variant:"outlined"},p.a.createElement("option",{value:""},"Nenhum respons\xe1vel"),n.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},"".concat(e.name," ").concat(e.lastname))}))),s.assignee_id&&p.a.createElement(Tn.a,null,s.assignee_id)),p.a.createElement(le.a,{container:!0,direction:"row",justify:"center",spacing:1},p.a.createElement(le.a,{item:!0,xs:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!s.deadline},J?p.a.createElement(Oe.a,{error:!!s.deadline,label:"Prazo",value:ue,disabled:Q,InputProps:{readOnly:J},InputLabelProps:{shrink:!0},variant:"outlined"}):p.a.createElement(en.a,{libInstance:j.a,utils:$a.a,locale:L.locale},p.a.createElement(tn.a,{autoOk:!0,label:"Prazo",clearable:!0,animateYearScrolling:!0,disabled:Q,InputProps:{readOnly:J},invalidDateMessage:"Formato inv\xe1lido",minDateMessage:"",variant:"outlined",inputVariant:"outlined",InputLabelProps:{shrink:!0},value:ue,onChange:function(e){return ve({deadline:e})},minDate:new Date,format:"DD/MM/YYYY",cancelLabel:"Cancelar",clearLabel:"Limpar"})),s.deadline&&p.a.createElement(Tn.a,null,s.deadline))),p.a.createElement(le.a,{item:!0,xs:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!s.priority},p.a.createElement(Oe.a,{error:!!s.priority,select:q,label:"Prioridade",value:ae,disabled:Q,InputProps:{readOnly:J},InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return ve({priority:e.target.value})},variant:"outlined"},qr.map((function(e){return p.a.createElement("option",{value:e.key,key:e.key},e.label)}))),s.priority&&p.a.createElement(Tn.a,null,s.priority))))),p.a.createElement(Qa.a,{className:a.ticketActions},!H&&F&&p.a.createElement(ie.a,{color:"default",size:"large",variant:"contained",onClick:function(){q&&window.confirm("Tem certeza em arquivar esse ticket?")&&x(c)},disabled:de},"ARQUIVAR"))),p.a.createElement(le.a,{item:!0,xs:12,sm:12,md:7},p.a.createElement(Ja.a,null,"Atividade"),p.a.createElement(Ga.a,{className:a.commentContent},p.a.createElement("div",{className:a.commentArea},k?p.a.createElement(me,null):Object(N.map)(W,(function(e){return p.a.createElement(Fr,{key:e.id,comment:e})}))),p.a.createElement("div",{className:a.commentHeaderContainer},p.a.createElement(Ae.a,{variant:"h6"},"Comentar"),F&&p.a.createElement(Za.a,{className:a.isInternalSwitch,control:p.a.createElement(wr.a,{checked:y.isInternal,onChange:function(){return C(Object(u.a)(Object(u.a)({},y),{},{isInternal:!y.isInternal}))},color:"primary"}),label:"Interno",disabled:G})),p.a.createElement(nt.a,{fullWidth:!0,margin:"normal"},p.a.createElement(Oe.a,{variant:"filled",multiline:!0,rows:3,rowsMax:3,placeholder:"Escreva seu coment\xe1rio aqui...",InputLabelProps:{shrink:!0},value:y.content,onChange:function(e){return C(Object(u.a)(Object(u.a)({},y),{},{content:e.target.value}))},disabled:G}))),p.a.createElement(Qa.a,{className:a.commentActions},p.a.createElement(Hr,{ticketId:Object(N.get)(c,"id"),disabled:de,onAttachmentSent:function(){return E(!0)},onUploadError:function(){t({alertMsg:"Erro ao tentar enviar arquivo.",alertType:"error",showAlert:!0})}}),p.a.createElement(ie.a,{color:"primary",size:"large",variant:"contained",onClick:function(){V&&(O(!1),A(!0))},disabled:K},"ENVIAR")))))})),Jr=da(Nr.getComments,{name:"ticketComments",init:!1,options:function(e){var t=e.ticket;return{variables:Object(N.get)(t,"id")}}}),Kr=da(Nr.sendComment,{name:"sendTicketComment",init:!1,options:function(e){var t=e.currentTicket,a=e.commentMessage,n=e.setCommentMessage,r=e.onClose,o=e.ticketCommentsFetch;return{variables:Object(u.a)({id:Object(N.get)(t,"id")},a),onRequestFinished:function(){n(ao),o(!1)},onRequestError:function(e){Y.hit("TicketModal - Closed"),r(e,"Erro ao enviar um coment\xe1rio para esse ticket")}}}}),Xr=da(xr.moveTicket,{name:"moveTicket",init:!1,options:function(e){var t=e.onClose,a=e.closeModal,n=e.currentTicket,r=e.setFormData;return{onRequestFinished:function(){a&&(Y.hit("TicketModal - Closed"),t(null,"Ticket #".concat(n.code," atualizado com sucesso")))},onRequestError:function(e){var a=Object(N.mapValues)(Object(N.get)(e,"errors",{}),(function(e){return e[0]}));if(Object(N.isEmpty)(a)){Y.hit("TicketModal - Closed");var n=Object(N.get)(e,"error","Erro ao atualizar esse ticket");t(e,n)}else r({validationErrors:a})}}}}),Zr=da(xr.getTicket,{name:"ticket",init:!1,options:function(e){var t=e.ticket,a=e.setCurrentTicket,n=e.onClose;return{variables:Object(N.get)(t,"id"),onRequestFinished:function(e){a(Object(N.get)(e,"ticket"))},onRequestError:function(e){Y.hit("TicketModal - Closed"),n(e,"Erro ao abrir esse ticket")}}}}),$r=da(xr.updateTicket,{name:"updateTicket",init:!1,options:function(e){var t=e.currentTicket,a=e.onClose,n=e.closeModal,r=e.setFormData;return{variables:t,onRequestFinished:function(){n&&(Y.hit("TicketModal - Closed"),a(null,"Ticket #".concat(t.code," atualizado com sucesso")))},onRequestError:function(e){var t=Object(N.mapValues)(Object(N.get)(e,"errors",{}),(function(e){return e[0]}));r({validationErrors:t})}}}}),eo=da(xr.archiveTicket,{name:"archiveTicket",init:!1,options:function(e){var t=e.currentTicket,a=e.onClose;return{variables:{id:t.id},onRequestFinished:function(){Y.hit("Ticket - Archived"),a(null,"Ticket #".concat(t.code," arquivado com sucesso"))},onRequestError:function(e){a(e,"Erro ao arquivar ticket #".concat(t.code))}}}}),to={validationErrors:{}},ao={content:"",isInternal:!1},no=Object(Q.a)(Object(J.a)((function(e){return Object(u.a)(Object(u.a)({},te(e)),{},{ticketContent:{marginTop:-20},ticketActions:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end",alignSelf:"flex-end",paddingLeft:25,paddingRight:25,marginTop:22},commentHeaderContainer:{display:"flex",alignItems:"center"},isInternalSwitch:{marginLeft:"1rem"},commentContent:{marginTop:-20,paddingLeft:20,paddingRight:20},commentArea:{height:315,minHeight:315,maxHeight:315,marginBottom:15,overflowY:"scroll"},commentActions:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"flex-end",alignSelf:"flex-end",paddingLeft:20,paddingRight:20,paddingBottom:20},title:{marginBottom:0},editButton:{position:"absolute",right:e.spacing(75),top:e.spacing(1),color:e.palette.grey[500]}})}),{withTheme:!0}),Object(Q.e)("formData","setFormDataRaw",to),Object(Q.c)({setFormData:function(e){var t=e.setFormDataRaw,a=e.formData;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}),Object(Q.e)("currentTicket","setCurrentTicket",{}),Object(Q.e)("commentMessage","setCommentMessage",ao),Object(Q.e)("closeModal","setCloseModal",!1),Object(Q.e)("isEditing","setIsEditing",!1),Jr,Kr,$r,Xr,eo,Zr,Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.ticket,a=e.setCurrentTicket,n=e.setCommentMessage;a(t),n(ao)}}),Object(Q.d)(["open"],(function(e){var t=e.open,a=e.setCommentMessage,n=e.setCurrentTicket,r=e.setFormData,o=e.ticketFetch,l=e.ticketCommentsFetch;t&&(r(to),n({}),a(ao),o(!0),l(!0))})),Object(Q.c)({setCurrentTicketState:function(e){var t=e.setCurrentTicket,a=e.currentTicket;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}))(Qr),ro={wrapper:{marginLeft:0,marginRight:10},header:{backgroundColor:"#FFF",padding:10,paddingTop:0,paddingBottom:0,height:60,width:"100%",borderTopLeftRadius:5,borderTopRightRadius:5},headerTitle:{color:"#313131"},column:{width:"100%",backgroundColor:"#E0E0E0",height:640,overflowY:"scroll"}},oo=Object(d.memo)((function(e){var t=e.tickets,a=e.categories,n=e.assignees,r=e.loading,o=e.onClickCard,l=e.onCloseCardModal,i=e.lockBoard,c=e.ticketToOpenModal,s=e.onDragCard,m=e.setAlert;return p.a.createElement(p.a.Fragment,null,p.a.createElement(Er,{data:t||[],disableDragDrop:i,loading:r,renderCard:function(e){return p.a.createElement(Ar,{ticket:e,loading:r,onClickCard:o,onCloseModal:l})},onDragEnd:function(e){var t=e.draggableId,a=e.destination,n={variables:{id:t,status:v()(a,"droppableId"),position:v()(a,"index")}};s(n)},columnStyle:ro.column,columnHeaderStyle:ro.header,columnTitleStyle:ro.headerTitle,columnWrapperStyle:ro.wrapper}),p.a.createElement(no,{open:!!c,ticket:c,categories:a,assignees:n,onClose:l,setAlert:m}))}));oo.propTypes={setAlert:$.a.func,tickets:$.a.array,categories:$.a.array,assignees:$.a.array,lockBoard:$.a.bool,loading:$.a.bool,ticketToOpenModal:$.a.object,onCloseCardModal:$.a.func,onDragCard:$.a.func,onClickCard:$.a.func};var lo=Object(Q.a)(Object(J.a)(ro,{withTheme:!0}))(oo),io={getCategories:function(e){var t={};return e&&(t={deleted:e}),R.get("/ticket_categories",t)},updateCategory:function(e){var t=e.id,a={id:t,title:e.title,assignee_id:e.assigneeId,deadline_in_days:e.deadlineInDays};return R.put("/ticket_categories/".concat(t),a)},createCategory:function(e){var t={title:e.title,deadline_in_days:e.deadlineInDays,assignee_id:e.assigneeId};return R.post("/ticket_categories",t)},toggleCategory:function(e){return R.put("/ticket_categories/".concat(e,"/toggle_active"))}},co=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=e.assigneeId,i=e.setAssigneeId,c=e.code,s=e.setCode,m=e.deadline,u=e.setDeadline,d=e.locationId,g=e.setLocationId,b=e.ticketsFetch,h=e.ticketsData,E=e.ticketByCodeFetch,k=e.priority,y=e.setPriority,C=e.ticketsError,O=e.ticketsLoading,A=e.ticketCategoriesData,w=e.ticketLoading,S=e.ticketCategoriesError,T=e.ticketCategoriesLoading,x=e.categoryId,N=e.setCategoryId,I=e.ticketAssigneesData,M=e.ticketAssigneesError,B=e.ticketAssigneesLoading,P=e.ticketToOpenModal,R=e.setTicketToOpenModal,F=e.ticketByCodeLoading,W=e.moveTicketFetch,U=D.getUserData();if(v()(U,"member.company.has_ticket_support")){var _=Object(ct.a)(),z=Object(st.a)(_.breakpoints.down("sm")),H=Je()(v()(U,"member.locations",[]),["name"]),q="MEMBER"===v()(U,"member.role","MEMBER"),V=v()(h,"tickets",[]),G=Je()(v()(A,"ticket_categories",[]),["title"]),Q=Je()(v()(I,"members",[]),["name","lastname"]),J=O||T||B||F||w,K=J,Z=rr.PRIORITIES,$=C||S||M,ee=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(!1,"",null,t);case 2:b(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e){var t=e.target.value.replace(/[\D]+/g,"");c!==t&&s(t)},ae=function(){if(Ue()(c)&&Ir.isMobile()){var e={select_code:c};Y.hit("Tickets - FilteredByCode",e),R(null),E(!0)}},ne=function(e){if(Ue()(c)&&13===e.keyCode){var t={select_code:c};Y.hit("Tickets - FilteredByCode",t),R(null),E(!0)}},re=function(e){var t=ka()(e.target.value)?void 0:e.target.value;i(t);var a={select_assignee:t};Y.hit("Tickets - FilteredByAssignee",a),b(!0)},oe=function(e){u(e),Y.hit("Tickets - FilteredByDeadline"),b(!0)},ce=function(e){var t=ka()(e.target.value)?void 0:e.target.value;y(t);var a={priority:k};Y.hit("Tickets - FilteredByPriority",a),b(!0)},se=function(e){var t=ka()(e.target.value)?void 0:e.target.value;N(t);var a={select_category:t};Y.hit("Tickets - FilteredByCategory",a),b(!0)},me=function(e){var t=ka()(e.target.value)?void 0:e.target.value;g(t);var a={select_building:t};Y.hit("Tickets - FilteredByBuilding",a),b(!0)},ue=t.showAlert,de=t.alertMsg,pe=t.alertType,ge=null;ue&&(ge=p.a.createElement(Pe,{message:de,type:pe,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var be=function(){return p.a.createElement(le.a,{container:!0,spacing:3},p.a.createElement(le.a,{item:!0,xs:6,sm:1},p.a.createElement(nt.a,{fullWidth:!0},p.a.createElement(Oe.a,{label:"Busca",placeholder:"N\u02da",disabled:K,value:c,type:"tel",InputLabelProps:{shrink:!0},onKeyDown:ne,onBlur:ae,onChange:te}))),Ue()(H)>1?p.a.createElement(le.a,{item:!0,xs:6,sm:2},p.a.createElement(nt.a,{fullWidth:!0},p.a.createElement(Oe.a,{select:!0,label:"Local",className:n.filterSelect,disabled:K,value:d,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:me},p.a.createElement("option",{value:""},"Todos"),H.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.name)}))))):p.a.createElement(p.a.Fragment,null),q?p.a.createElement(p.a.Fragment,null):p.a.createElement(le.a,{item:!0,xs:6,sm:2},p.a.createElement(nt.a,{fullWidth:!0},p.a.createElement(Oe.a,{select:!0,label:"Respons\xe1vel",className:n.filterSelect,disabled:K,value:r,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:re},p.a.createElement("option",{value:""},"Todos"),Q.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},"".concat(e.name," ").concat(e.lastname))}))))),p.a.createElement(le.a,{item:!0,xs:6,sm:2},p.a.createElement(nt.a,{fullWidth:!0},p.a.createElement(Oe.a,{select:!0,label:"Categoria",className:n.filterSelect,disabled:K,value:x,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:se},p.a.createElement("option",{value:""},"Todos"),G.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.title)}))))),p.a.createElement(le.a,{item:!0,xs:6,sm:2},p.a.createElement(nt.a,{fullWidth:!0},p.a.createElement(Oe.a,{select:!0,label:"Prioridade",className:n.filterSelect,disabled:K,value:k,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:ce},p.a.createElement("option",{value:""},"Todos"),Z.map((function(e){return p.a.createElement("option",{key:e.key,value:e.key},e.label)}))))),p.a.createElement(le.a,{item:!0,xs:6,sm:2},p.a.createElement(nt.a,{fullWidth:!0},p.a.createElement(en.a,{libInstance:j.a,utils:$a.a,locale:L.locale},p.a.createElement(tn.a,{autoOk:!0,label:"Prazo",clearable:!0,animateYearScrolling:!0,className:n.filterSelect,disabled:K,invalidDateMessage:"Formato inv\xe1lido",InputLabelProps:{shrink:!0},value:m,onChange:oe,format:"DD/MM/YYYY",cancelLabel:"Cancelar",clearLabel:"Limpar"})))))};return p.a.createElement("div",{className:n.root},p.a.createElement(ea,{alertBox:ge,error:$}),p.a.createElement("section",null,p.a.createElement("div",{className:n.container},p.a.createElement("div",{className:n.headerView},p.a.createElement("aside",null,p.a.createElement(Ae.a,{variant:"h5"},p.a.createElement("b",null,Ue()(V)?"Tickets (".concat(Ue()(V),")"):"Tickets")),p.a.createElement("br",null),z?p.a.createElement(Gn.a,null,p.a.createElement(Qn.a,{expandIcon:p.a.createElement(Xn.a,null)},p.a.createElement(Ae.a,{variant:"subtitle1"},"Filtros")),p.a.createElement(Jn.a,null,be())):be()),p.a.createElement("aside",null,p.a.createElement(ie.a,{variant:"contained",component:f.b,to:"/tickets/novo",color:"primary",size:"large",disabled:K,className:z?n.fab:null},"Novo ticket")))),p.a.createElement("div",{className:n.container},p.a.createElement(le.a,{container:!0},p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement(lo,{lockBoard:q,tickets:V,ticketToOpenModal:P,categories:G,assignees:Q,loading:J,onClickCard:function(e){R(e),window.history.pushState("","","/#/tickets/".concat(e.id))},onDragCard:ee,onCloseCardModal:function(e,t){R(null),b(!1),window.history.pushState("","","/#/tickets"),t&&a({alertMsg:t,alertType:e?"error":"success",showAlert:!0})},setAlert:a}))))))}return p.a.createElement("div",{className:n.root},p.a.createElement(ea,null),p.a.createElement("section",null,p.a.createElement("div",{className:n.container},p.a.createElement(le.a,{container:!0,spacing:1},p.a.createElement("div",{className:n.centerHeaderView},p.a.createElement(X.a,{className:n.emptyHeaderIcon}),p.a.createElement("b",{className:n.emptyHeaderTitle},"Essa conta n\xe3o possui o servi\xe7o de tickets"))))))})),so=da(io.getCategories,{name:"ticketCategories"}),mo=da(xr.getAssignables,{name:"ticketAssignees"}),uo=da(xr.moveTicket,{name:"moveTicket",init:!1}),po=da(xr.getTicketByCode,{name:"ticketByCode",init:!1,options:function(e){var t=e.setAlert,a=e.setCode,n=e.setTicketToOpenModal,r=e.code;return{variables:r,onRequestFinished:function(e){var t=v()(e,"ticket");n(t),a(""),window.history.pushState("","","/#/tickets/".concat(t.id))},onRequestError:function(){n(null),t({alertMsg:"Ticket ".concat(r," n\xe3o foi identificado"),alertType:"warning",showAlert:!0}),window.history.pushState("","","/#/tickets")}}}}),go=da(xr.getTicket,{name:"ticket",init:!1,options:function(e){var t=e.match,a=e.setAlert,n=e.setTicketToOpenModal;return{variables:v()(t,"params.id"),onRequestFinished:function(e){var t=v()(e,"ticket");n(t),window.history.pushState("","","/#/tickets/".concat(t.id))},onRequestError:function(){n(null),a({alertMsg:"Este ticket n\xe3o foi identificado",alertType:"warning",showAlert:!0}),window.history.pushState("","","/#/tickets")}}}}),bo=da(xr.getTickets,{name:"tickets",init:!1,options:function(e){return{variables:{locationId:e.locationId,assigneeId:e.assigneeId,categoryId:e.categoryId,deadline:e.deadline,priority:e.priority}}}}),fo=Object(Q.a)(Object(J.a)((function(e){return Object(u.a)({},te(e),{closeTicket:{cursor:"pointer",fontSize:14,fontWeight:"bold",marginRight:3},filterSelect:{minWidth:115}})}),{withTheme:!0}),h.g,Object(Q.e)("assigneeId","setAssigneeId"),Object(Q.e)("code","setCode",""),Object(Q.e)("ticketToOpenModal","setTicketToOpenModal"),Object(Q.e)("categoryId","setCategoryId"),Object(Q.e)("locationId","setLocationId"),Object(Q.e)("priority","setPriority"),Object(Q.e)("deadline","setDeadline",null),Object(Q.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),bo,go,po,so,mo,uo,Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.ticketsFetch,a=e.ticketFetch,n=e.ticketToOpenModal,r=e.match,o=v()(r,"params.id");ka()(n)&&t(!0),Ue()(o)&&a(!1)}}))(co),ho=Object(d.memo)((function(e){var t=e.value,a=e.onChange,n=e.disabled,r=e.onUploadProgress,o=e.onUploadSuccess,l=e.onUploadError;return t&&(t.progressPercent||t.id)?p.a.createElement(Pr,{file:t,onRemoveFile:function(e){return e.cancelUpload||a(null)},disabled:n}):p.a.createElement(_r,{accept:"image/*,.doc,.docx,.xls,.xlsx,.pdf,.xml",onChange:function(e){Ur({file:e,progressHandler:function(t){var n=t.progressPercent,o=Object(N.merge)(e,{progressPercent:n});a(o),r&&r(o)}}).catch(l).then((function(t){var n=Object(N.merge)(e,t);a(n),o&&o(n)}))},disabled:n})})),Eo=function(e){return Object(u.a)(Object(u.a)({},te(e)),{},{cancel:{marginRight:20},checkboxControl:{margin:e.spacing(2)}})},vo=Object(d.memo)((function(e){var t=e.id,a=e.classes,n=e.required,r=e.disabled,o=e.question,l=e.options,i=e.fieldType,c=e.showBlankError,s=e.onChangeQuestion,m=e.onCheckOption,u=c&&n;return"CHECKBOX"===i?p.a.createElement(nt.a,{component:"fieldset",className:a.checkboxControl,fullWidth:!0,error:u},p.a.createElement(Tn.a,{component:"legend"},o),p.a.createElement(Xa.a,null,l.map((function(e){return p.a.createElement(Za.a,{key:e,label:e,control:p.a.createElement(at.a,{color:"primary",disabled:r,onChange:function(a){return m(e,a.target.checked,t)}})})}))),u&&p.a.createElement(Tn.a,null,"selecione uma op\xe7\xe3o")):"SELECT"===i?p.a.createElement(nt.a,{fullWidth:!0,error:u},p.a.createElement(Oe.a,{select:!0,label:o,className:a.input,disabled:r,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return s(e.target.value,t)},variant:"outlined"},l.map((function(e){return p.a.createElement("option",{key:e,value:e},e)}))),u&&p.a.createElement(Tn.a,null,"selecione uma op\xe7\xe3o")):p.a.createElement(nt.a,{fullWidth:!0,error:u},p.a.createElement(Oe.a,{label:o,className:a.input,multiline:"TEXT_AREA"===i,rows:"TEXT_AREA"===i?4:1,rowsMax:"TEXT_AREA"===i?4:1,disabled:r,InputLabelProps:{shrink:!0},onChange:function(e){return s(e.target.value,t)},variant:"outlined"}),u&&p.a.createElement(Tn.a,null,"este campo est\xe1 em branco"))})),ko=Object(Q.a)(Object(J.a)(Eo,{withTheme:!0}))(vo),yo=rr.PRIORITIES,Co=rr.PRIORITY_NORMAL,Oo=function(){var e=D.getUserData(),t=wt.includes(Object(N.get)(e,"member.role")),a=Object(N.sortBy)(Object(N.get)(e,"member.locations",[]),["name"]);return{title:"",description:"",category_id:"",deadline:null,priority:t?Co:null,source:"PORTAL",location_id:Object(N.get)(a,"[0].id"),attachment_data:null,ticket_form_questions:Object(N.clone)([])}},Ao=function(e,t){var a=Object(N.find)(e,(function(e){return e.id===t})),n=Object(N.get)(a,"ticket_form_questions",[]);return Object(N.map)(n,(function(e){var t="SELECT"===Object(N.get)(e,"field_type")?Object(N.compact)(Object(N.first)(Object(N.get)(e,"options"))):[];return Object(u.a)(Object(u.a)({},e),{},{value:t})}))},jo=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.ticket,o=e.setTicketState,l=e.ticketLoading,i=e.ticketError,c=e.ticketFetch,s=e.ticketCategoriesLoading,m=e.categories,u=e.setShowQuestionError,d=e.isUploading,g=e.setIsUploading,b=e.showQuestionError,h=D.getUserData();if(Object(N.get)(h,"member.company.has_ticket_support")){var E=a.showAlert,v=a.alertMsg,k=a.alertType,y=a.actionButton,C=a.onClickAction,O=null;E&&(O=p.a.createElement(Pe,{message:v,type:k,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1,actionButton:""})},actionButton:y,onClickAction:C}));var A=wt.includes(Object(N.get)(h,"member.role")),w=Object(N.sortBy)(Object(N.get)(h,"member.locations",[]),["name"]),S=Object(N.mapValues)(Object(N.get)(i,"errors",{}),(function(e){return e[0]})),T=s||l,x=T||d,I=function(){var e=Object(N.get)(r,"ticket_form_questions",[]),t=Object(N.reject)(e,(function(e){return!e.required}));return Boolean(Object(N.size)(Object(N.reject)(t,(function(e){return Object(N.size)(e.value)}))))},M=function(e,t){var a=Object(N.get)(r,"ticket_form_questions",[]),n=Object(N.findIndex)(a,(function(e){return e.id===t}));Object(N.set)(r,"ticket_form_questions[".concat(n,"].value"),[e]),u(I())},B=function(e,t,a){var n=Object(N.get)(r,"ticket_form_questions",[]),o=Object(N.findIndex)(n,(function(e){return e.id===a})),l=n[o].value;l=t?l.concat(e):l.filter((function(t){return t!==e})),Object(N.set)(r,"ticket_form_questions[".concat(o,"].value"),l),u(I())},P=Object(N.get)(r,"ticket_form_questions",[]);return p.a.createElement("div",{className:t.root},p.a.createElement(ea,{alertBox:O}),p.a.createElement("section",null,p.a.createElement("div",{className:t.container},p.a.createElement("div",{className:t.headerView},p.a.createElement("aside",null,p.a.createElement(Ae.a,{variant:"h5"},p.a.createElement("b",null,"Novo ticket"))))),p.a.createElement("br",null),p.a.createElement("form",{className:t.container},p.a.createElement(Nt.a,{className:t.paper},p.a.createElement(Ae.a,{variant:"h6"},p.a.createElement("b",null,"Solicita\xe7\xe3o")),p.a.createElement(le.a,{container:!0,item:!0,xs:12,sm:8,md:6,spacing:2},p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement(nt.a,{fullWidth:!0,error:!!S.title},p.a.createElement(Oe.a,{label:"T\xedtulo",error:!!S.title,className:t.input,disabled:T,placeholder:"Ex.: Banheiro entupido, m\xe1quina de caf\xe9 com defeito, etc",value:Object(N.get)(r,"title",""),onChange:function(e){return o({title:e.target.value})},variant:"outlined",InputLabelProps:{shrink:!0}}),S.title&&p.a.createElement(Tn.a,null,S.title)),p.a.createElement(nt.a,{fullWidth:!0,error:!!S.comments},p.a.createElement(Oe.a,{label:"Descri\xe7\xe3o",multiline:!0,rows:4,rowsMax:4,error:!!S.comments,className:t.input,disabled:T,placeholder:"Descreva mais detalhes sobre esta ocorr\xeancia...",value:Object(N.get)(r,"description",""),onChange:function(e){return o({description:e.target.value})},variant:"outlined",InputLabelProps:{shrink:!0}}),S.comments&&p.a.createElement(Tn.a,null,S.comments)),Object(N.size)(w)>1&&p.a.createElement(nt.a,{fullWidth:!0,error:!!S.location_id},p.a.createElement(Oe.a,{select:!0,label:"Local",error:!!S.location_id,className:t.input,disabled:T,value:Object(N.get)(r,"location_id"),InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return o({location_id:e.target.value})},variant:"outlined"},Object(N.map)(w,(function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.name)}))),S.location_id&&p.a.createElement(Tn.a,null,S.location_id)),p.a.createElement(nt.a,{fullWidth:!0,error:!!S.category_id},p.a.createElement(Oe.a,{select:!0,label:"Categoria",error:!!S.category_id,className:t.input,disabled:T,value:Object(N.get)(r,"category_id"),InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){var t=e.target.value;o({category_id:t,ticket_form_questions:Ao(m,t)}),u(!1)},variant:"outlined"},Object(N.map)(m,(function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.title)}))),S.category_id&&p.a.createElement(Tn.a,null,S.category_id)),Object(N.map)(P,(function(e){return p.a.createElement(ko,{key:Object(N.get)(e,"id"),id:Object(N.get)(e,"id"),question:Object(N.get)(e,"question"),options:Object(N.get)(e,"options"),fieldType:Object(N.get)(e,"field_type"),required:Object(N.get)(e,"required"),disabled:x,showBlankError:b,onChangeQuestion:M,onCheckOption:B})})))),A&&p.a.createElement(p.a.Fragment,null,p.a.createElement("br",null),p.a.createElement(Ae.a,{variant:"h6"},p.a.createElement("b",null,"Deadline")),p.a.createElement(le.a,{container:!0,item:!0,xs:12,sm:8,md:6,spacing:2},p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0},p.a.createElement(en.a,{libInstance:j.a,utils:$a.a,locale:L.locale},p.a.createElement(tn.a,{autoOk:!0,label:"Prazo",clearable:!0,animateYearScrolling:!0,className:t.input,disabled:T,invalidDateMessage:"Formato inv\xe1lido",variant:"outlined",inputVariant:"outlined",InputLabelProps:{shrink:!0},value:Object(N.get)(r,"deadline"),onChange:function(e){return o({deadline:e})},minDate:new Date,format:"DD/MM/YYYY",cancelLabel:"Cancelar",clearLabel:"Limpar"})))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0,error:!!S.priority},p.a.createElement(Oe.a,{select:!0,label:"Prioridade",error:!!S.priority,className:t.input,disabled:T,value:Object(N.get)(r,"priority"),InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return o({priority:e.target.value})},variant:"outlined"},Object(N.map)(yo,(function(e){return p.a.createElement("option",{value:e.key,key:e.key},e.label)}))),S.priority&&p.a.createElement(Tn.a,null,S.priority))))),p.a.createElement("br",null),p.a.createElement(Ae.a,{variant:"h6"},p.a.createElement("b",null,"Mais detalhes")),p.a.createElement("br",null),p.a.createElement(le.a,{container:!0,item:!0,xs:12,sm:8,md:6,spacing:2},p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement("div",null,p.a.createElement(ho,{value:Object(N.get)(r,"attachment_data",null),onChange:function(e){o({attachment_data:e}),g(Object(N.get)(e,"progressPercent",100)<100)},disabled:T})),p.a.createElement("div",{className:t.actions},p.a.createElement(ie.a,{component:f.b,to:"/tickets",color:"default",size:"large",disabled:T,className:t.cancel},"Voltar"),p.a.createElement(ie.a,{variant:"contained",color:"primary",size:"large",disabled:x,onClick:function(){var e=I();u(e),e||c(!0)}},x?"Aguarde...":"Enviar"))))))))}return p.a.createElement("div",{className:t.root},p.a.createElement(ea,null),p.a.createElement("section",null,p.a.createElement("div",{className:t.container},p.a.createElement(le.a,{container:!0,spacing:1},p.a.createElement("div",{className:t.centerHeaderView},p.a.createElement(X.a,{className:t.emptyHeaderIcon}),p.a.createElement("b",{className:t.emptyHeaderTitle},"Essa conta n\xe3o possui o servi\xe7o de tickets"))))))})),wo=da(io.getCategories,{name:"ticketCategories",options:function(e){var t=e.setTicketState,a=e.setCategories,n=e.selectedCategory;return{onRequestFinished:function(e){var r=Object(N.sortBy)(Object(N.get)(e,"ticket_categories",[]),["title"]),o=Object(N.find)(r,(function(e){return Object(N.toLower)(e.title)===Object(N.toLower)(n)})),l=Object(N.get)(o,"id")||Object(N.get)(r,"[0].id");a(r),t({category_id:l,ticket_form_questions:Ao(r,l)})}}}}),So=da(xr.postTicket,{name:"ticket",init:!1,options:function(e){var t=e.ticket,a=e.setTicketState,n=e.setAlert,r=e.categories,o=e.history;return{variables:t,onRequestFinished:function(e){document.querySelector("form").reset();var t=Object(N.get)(r,"[0].id");a(Object(u.a)(Object(u.a)({},Oo()),{},{category_id:t,ticket_form_questions:Ao(r,t)}));var l=Object(N.get)(e,"ticket.id");n({alertMsg:"Ticket registrado com sucesso",alertType:"success",showAlert:!0,actionButton:"Ver ticket",onClickAction:function(){return o.push("/tickets/".concat(l))}})},onRequestError:function(){n({alertMsg:"Erro ao registrar esse ticket",alertType:"error",showAlert:!0})}}}}),To=Object(Q.a)(Object(J.a)(Eo,{withTheme:!0}),h.g,Object(Q.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Q.e)("ticket","setTicket",Oo),Object(Q.e)("categories","setCategories",[]),Object(Q.e)("showQuestionError","setShowQuestionError",!1),Object(Q.e)("isUploading","setIsUploading",!1),Object(Q.e)("selectedCategory","setSelectedCategory"),Object(Q.c)({setTicketState:function(e){var t=e.setTicket,a=e.ticket;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}),wo,So,Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.location,a=e.setTicketState,n=e.setSelectedCategory,r=new URLSearchParams(t.search),o=(r.get("utm_source")||"").toUpperCase();n(r.get("category")||r.get("categoria")),"QRCODE"===o&&a({source:"QRCODE"})}}))(jo),xo=Object(Q.a)(Object(Q.e)("viewer","setViewer",null),Object(Q.b)({componentDidMount:function(){var e=D.getUserData();this.props.setViewer(e)}})),No=Object(d.memo)((function(e){var t=e.messageText,a=e.classes;return p.a.createElement("div",{className:a.root},p.a.createElement(ea,null),p.a.createElement("section",null,p.a.createElement(le.a,{container:!0,spacing:1},p.a.createElement("div",{className:a.centerHeaderView},p.a.createElement(X.a,{className:a.emptyHeaderIcon}),p.a.createElement("b",{className:a.emptyHeaderTitle},t)))))}));No.propTypes={classes:$.a.object,messageText:$.a.string};var Io=Object(J.a)((function(e){return Object(u.a)({},te(e))}),{withTheme:!0})(No),Do=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.condition,a=e.messageText,n=void 0===a?"Voc\xea n\xe3o possui permiss\xe3o de acesso a esta tela.":a;return function(e){return xo((function(a){return a.viewer?t(a.viewer)?p.a.createElement(Io,{messageText:n}):p.a.createElement(e,a):null}))}},Mo={getLocations:function(){return R.get("/locations")}},Bo=Object(d.memo)((function(e){var t=e.classes,a=e.onClose,n=e.setAlert,r=e.formData,i=e.setFormData,c=e.checkEmailStep,s=e.refetch,m=e.setCheckEmailStep,d=e.loading,g=e.setLoading,b=e.errors,f=e.setErrors,h=e.locationsData,E=Object(ct.a)(),v=Object(st.a)(E.breakpoints.down("sm")),k=d||Object(N.isEmpty)(r.email),y=Object(N.get)(h,"locations",[]),C=function(e){i(Object(u.a)({},r,{},e))},O=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=16;break}return e.prev=1,f({}),g(!0),e.next=6,An.emailCheck(r.email);case 6:m(!1),Y.hit("EmailChecked - Success"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),f(Object(N.mapValues)(Object(N.get)(e.t0,"errors",{}),(function(e){return e[0]})));case 13:g(!1),e.next=33;break;case 16:return e.prev=16,f({}),g(!0),e.next=21,An.createMember(Object(u.a)({},r));case 21:Y.hit("MemberCreated - Success"),n({alertMsg:"Usu\xe1rio criado com sucesso",alertType:"success",showAlert:!0}),g(!1),a(),s(!0),e.next=33;break;case 28:e.prev=28,e.t1=e.catch(16),f(Object(N.mapValues)(Object(N.get)(e.t1,"errors",{}),(function(e){return e[0]}))),n({alertMsg:"N\xe3o foi poss\xedvel criar o usu\xe1rio",alertType:"error",showAlert:!0}),g(!1);case 33:case"end":return e.stop()}}),e,null,[[1,10],[16,28]])})));return function(){return e.apply(this,arguments)}}();return p.a.createElement(Va.a,{fullScreen:v,keepMounted:!0,fullWidth:!c,maxWidth:c?"sm":"md",classes:{paper:t.dialogMemberForm},open:!0},p.a.createElement(Ja.a,null,"Convidar usu\xe1rio",p.a.createElement(Ie.a,{className:t.closeButton,onClick:a,disabled:d},p.a.createElement(Ne.a,null))),p.a.createElement(Ga.a,{className:t.content},p.a.createElement(le.a,{container:!0,direction:"row",spacing:1},c&&p.a.createElement(le.a,{item:!0,xs:12,className:t.gridSizeMedium},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!b.email},p.a.createElement(Oe.a,{label:"Email",disabled:d,error:!!b.email,value:Object(N.get)(r,"email",""),InputLabelProps:{shrink:!0},onChange:function(e){return C({email:e.target.value})},variant:"outlined"}),b.email&&p.a.createElement(Tn.a,null,b.email))),!c&&p.a.createElement(p.a.Fragment,null,p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!b.email},p.a.createElement(Oe.a,{label:"E-mail",disabled:!0,error:!!b.email,value:Object(N.get)(r,"email",""),InputLabelProps:{shrink:!0},onChange:function(e){return C({email:e.target.value})},variant:"outlined"}),b.email&&p.a.createElement(Tn.a,null,b.email))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!b.name},p.a.createElement(Oe.a,{label:"Nome",disabled:d,error:!!b.name,value:Object(N.get)(r,"name",""),InputLabelProps:{shrink:!0},onChange:function(e){return C({name:e.target.value})},variant:"outlined"}),b.name&&p.a.createElement(Tn.a,null,b.name))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!b.lastname},p.a.createElement(Oe.a,{label:"Sobrenome",disabled:d,error:!!b.lastname,value:Object(N.get)(r,"lastname",""),InputLabelProps:{shrink:!0},onChange:function(e){return C({lastname:e.target.value})},variant:"outlined"}),b.lastname&&p.a.createElement(Tn.a,null,b.lastname))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal"},p.a.createElement(Oe.a,{label:"Cargo",disabled:d,value:Object(N.get)(r,"jobRole",""),InputLabelProps:{shrink:!0},onChange:function(e){return C({jobRole:e.target.value})},variant:"outlined"}))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal"},p.a.createElement(Oe.a,{type:"tel",label:"Telefone celular",disabled:d,value:Object(N.get)(r,"phone",""),InputLabelProps:{shrink:!0},onChange:function(e){return C({phone:(e.target.value||"").replace(/[\D]+/g,"").slice(0,15)})},variant:"outlined"}))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(Ae.a,{variant:"h6",className:t.blockTitle},"Permiss\xe3o"),p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!b.role},p.a.createElement(Oe.a,{select:!0,SelectProps:{native:!0},label:"N\xedvel de acesso",error:!!b.role,value:Object(N.get)(r,"role",""),disabled:d,InputLabelProps:{shrink:!0},onChange:function(e){return C({role:e.target.value})},variant:"outlined"},Ot.map((function(e){return p.a.createElement("option",{value:e.value,key:e.value},e.label)}))),b.role&&p.a.createElement(Tn.a,null,b.role))),p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement(Ae.a,{variant:"h6",className:t.blockTitle},"Locais de acesso"),p.a.createElement(nt.a,{fullWidth:!0,error:!!b.locationIds},y.map((function(e){return p.a.createElement(Za.a,{key:e.id,className:t.checkBox,classes:{label:t.checkboxLabel},control:p.a.createElement(at.a,{checked:e.checked,disabled:d,onChange:function(){return function(e){var t=[];t=Object(N.includes)(Object(N.get)(r,"locationIds",[]),e)?Object(N.pull)(r.locationIds,e):r.locationIds.concat([e]),i(Object(u.a)({},r,{locationIds:t}))}(e.id)},value:e.id}),label:e.name})}))))))),p.a.createElement(Qa.a,{className:t.actions},p.a.createElement(le.a,{container:!0,justify:c?"":"space-between",spacing:2},!c&&p.a.createElement(le.a,{item:!0,xs:12,sm:8}),p.a.createElement(le.a,{item:!0,xs:6,sm:c?6:2},p.a.createElement(ie.a,{fullWidth:!0,color:"default",size:"large",variant:"contained",onClick:function(){a()},disabled:d},"CANCELAR")),p.a.createElement(le.a,{item:!0,xs:6,sm:c?6:2},p.a.createElement(ie.a,{fullWidth:!0,color:"primary",size:"large",variant:"contained",onClick:O,disabled:k},c?"PR\xd3XIMO":"SALVAR")))))})),Lo=da(Mo.getLocations,{name:"locations"}),Po={role:Ot[0].value,locationIds:[]},Ro=Object(Q.a)(Object(J.a)((function(e){return Object(u.a)({},te(e),{actions:{margin:15,marginBottom:20},content:{marginTop:-20,overflowX:"hidden"},dialogMemberForm:{maxWidth:"50rem"},blockTitle:{marginTop:15},checkboxLabel:{fontSize:e.typography.caption.fontSize},gridSizeMedium:{width:400}})}),{withTheme:!0}),Object(Q.e)("formData","setFormData",Po),Object(Q.e)("loading","setLoading",!1),Object(Q.e)("errors","setErrors",{}),Object(Q.e)("checkEmailStep","setCheckEmailStep",!0),Lo)(Bo),Fo=Object(d.memo)((function(e){var t=e.setLocationOptionChecked,a=e.isLoading,n=e.formData,r=e.setFormData,o=e.classes,l=e.isSubmiting;if(a)return p.a.createElement(me,null);var i=n.locationsOptions,c=n.validationErrors||{};return p.a.createElement(p.a.Fragment,null,p.a.createElement(le.a,{container:!0,direction:"row",spacing:1},p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal"},p.a.createElement(Oe.a,{error:!!c.name,label:"Nome",disabled:l,value:Object(N.get)(n,"name",""),InputLabelProps:{shrink:!0},onChange:function(e){return r({name:e.target.value})},variant:"outlined"}),c.name&&p.a.createElement(Tn.a,null,c.name))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal"},p.a.createElement(Oe.a,{error:!!c.lastname,label:"Sobrenome",disabled:l,value:Object(N.get)(n,"lastname",""),InputLabelProps:{shrink:!0},onChange:function(e){return r({lastname:e.target.value})},variant:"outlined"}),c.lastname&&p.a.createElement(Tn.a,null,c.lastname))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal"},p.a.createElement(Oe.a,{error:!!c.email,label:"E-mail",disabled:!0,value:Object(N.get)(n,"email",""),InputLabelProps:{shrink:!0},onChange:function(e){return r({email:e.target.value})},variant:"outlined"}),c.email&&p.a.createElement(Tn.a,null,c.email))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal"},p.a.createElement(Oe.a,{type:"tel",error:!!c.phone,label:"Telefone celular",disabled:l,value:Object(N.get)(n,"phone",""),InputLabelProps:{shrink:!0},onChange:function(e){r({phone:(e.target.value||"").replace(/[\D]+/g,"").slice(0,15)})},variant:"outlined"}),c.phone&&p.a.createElement(Tn.a,null,c.phone))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal"},p.a.createElement(Oe.a,{label:"Cargo",value:Object(N.get)(n,"job_role",""),InputLabelProps:{shrink:!0},onChange:function(e){return r({job_role:e.target.value})},variant:"outlined"}))),p.a.createElement(le.a,{item:!0,xs:12,sm:6}),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(Ae.a,{variant:"h6"},"Permiss\xe3o"),p.a.createElement(nt.a,{fullWidth:!0,margin:"normal"},p.a.createElement(Oe.a,{select:!0,SelectProps:{native:!0},error:!!c.role,label:"N\xedvel de acesso",value:Object(N.get)(n,"role",""),disabled:l,InputLabelProps:{shrink:!0},onChange:function(e){return r({role:e.target.value})},variant:"outlined"},Ot.map((function(e){return p.a.createElement("option",{value:e.value,key:e.value},e.label)}))),c.role?p.a.createElement(Tn.a,null,c.role):null)),p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement(Ae.a,{variant:"h6"},"Locais de acesso"),p.a.createElement(nt.a,{fullWidth:!0},i.map((function(e){return p.a.createElement(Za.a,{key:e.value,classes:{label:o.checkboxLabel},control:p.a.createElement(at.a,{checked:e.checked,disabled:l,onChange:function(a){t({locationId:e.value,checked:a.target.checked})},value:e.value}),label:e.label})})),c.location_ids&&p.a.createElement(Tn.a,null,c.location_ids)))))})),Wo=Object(Q.a)(re,Object(J.a)((function(e){return Object(u.a)({},te(e),{checkboxLabel:{fontSize:e.typography.caption.fontSize}})}),{withTheme:!0}),xo,Object(Q.c)({setLocationOptionChecked:function(e){var t=e.formData,a=e.setFormData;return function(e){var n=e.locationId,r=e.checked,o=t.locationsOptions;a({locationsOptions:Object(N.map)(o,(function(e){return e.value===n?Object(u.a)(Object(u.a)({},e),{},{checked:r}):e}))})}}}),Object(Q.d)(["viewer","member"],(function(e){var t=e.member,a=e.viewer,n=e.setFormData;if(!a)return null;var r=Object(N.get)(t,"locations",[]),o=Object(N.get)(a,"member.locations",[]).map((function(e){return{label:e.name,value:e.id,checked:r.some((function(t){return e.id===t.id}))}})),l=Object(u.a)({locationsOptions:o},t);return n(Object(u.a)(Object(u.a)({},l),{},{previousValues:l})),!0})))(Fo),Uo=Object(d.memo)((function(e){var t=e.member,a=e.isLoading,n=e.open,r=e.classes,o=e.formData,l=e.setFormData,i=e.onClose,c=e.updateMemberFetch,s=e.updateMemberLoading,m=e.blockMemberFetch,u=e.blockMemberLoading,d=Object(ct.a)(),g=Object(st.a)(d.breakpoints.down("sm")),b=a,f=s||u,h=Object(N.get)(t,"role","");return p.a.createElement(Va.a,{fullScreen:g,keepMounted:!0,fullWidth:!0,maxWidth:"md",classes:{paper:r.dialogMemberForm},open:n,onClose:function(){return i({shouldRefetch:!1})}},p.a.createElement(Ja.a,null,"Editar usu\xe1rio",p.a.createElement(Ie.a,{className:r.closeButton,onClick:function(){return i({shouldRefetch:!1})}},p.a.createElement(Ne.a,null))),p.a.createElement(Ga.a,{className:r.content},p.a.createElement(Wo,{member:t,formData:o,setFormData:l,isLoading:b,isSubmiting:f})),p.a.createElement(Qa.a,{className:r.actions},p.a.createElement(le.a,{container:!0,justify:"space-between",spacing:2},p.a.createElement(le.a,{item:!0,xs:12,sm:8},"OWNER"!==h&&p.a.createElement(ie.a,{fullWidth:g,color:"secondary",size:"large",variant:g?"outlined":"contained",onClick:function(){window.confirm("Tem certeza em bloquear esse usu\xe1rio?")&&m(!0,"",null,Object(N.get)(t,"id",""))},disabled:b||f},"DESATIVAR USU\xc1RIO")),p.a.createElement(le.a,{item:!0,xs:6,sm:2},p.a.createElement(ie.a,{fullWidth:!0,color:"default",size:"large",variant:"contained",onClick:function(){return i({shouldRefetch:!1})},disabled:b||f},"CANCELAR")),p.a.createElement(le.a,{item:!0,xs:6,sm:2},p.a.createElement(ie.a,{fullWidth:!0,color:"primary",size:"large",variant:"contained",onClick:function(){return c(!0).catch((function(){}))},disabled:b||f},"SALVAR")))))})),_o=da(An.updateMember,{name:"updateMember",init:!1,options:function(e){var t=e.formData,a=e.setFormData,n=e.member,r=e.setAlert,o=e.onClose,l=Object(N.pickBy)(t,(function(e,a){var n=t.previousValues[a];return!Object(N.isEqual)(n,e)})),i={};l.locationsOptions&&(i={locationIds:Object(N.map)(Object(N.pickBy)(l.locationsOptions,{checked:!0}),(function(e){return e.value}))});return{variables:Object(u.a)(Object(u.a)({id:n.id},l),i),onRequestFinished:function(){r({alertMsg:"Usu\xe1rio alterado com sucesso",alertType:"success",showAlert:!0}),o({shouldRefetch:!0})},onRequestError:function(e){var t=Object(N.get)(e,"error","");r({alertMsg:t||"Erro ao alterar este usu\xe1rio",alertType:"error",showAlert:!0});var n=Object(N.mapValues)(Object(N.get)(e,"errors",{}),(function(e){return e[0]}));a({validationErrors:n})}}}}),zo=da(An.blockMember,{name:"blockMember",init:!1,options:function(e){var t=e.member,a=e.onClose,n=e.setAlert;return{variables:Object(N.get)(t,"id"),onRequestFinished:function(){n({alertMsg:"Usu\xe1rio bloqueado com sucesso",alertType:"success",showAlert:!0}),a({shouldRefetch:!0})},onRequestError:function(){n({alertMsg:"Erro ao bloquear este usu\xe1rio",alertType:"error",showAlert:!0})}}}}),Yo=Object(Q.a)(Object(J.a)((function(e){return Object(u.a)({},te(e),{actions:{margin:15,marginBottom:20},content:{marginTop:-20,overflowX:"hidden"},dialogMemberForm:{maxWidth:"50rem"}})}),{withTheme:!0}),Object(Q.e)("formData","setFormDataRaw",{locationsOptions:[],previousValues:{},validationErrors:{}}),Object(Q.c)({setFormData:function(e){var t=e.setFormDataRaw,a=e.formData;return function(e){t(Object(u.a)(Object(u.a)({},a),e))}}}),zo,_o)(Uo),Ho=function(e){return Object(u.a)({},te(e))},qo=Object(Q.a)(Object(Q.e)("openModal","setOpenModal",!1),Object(Q.e)("canResendInivitation","setCanResendInivitation",!0))((function(e){var t=e.classes,a=e.canResendInivitation,n=e.setCanResendInivitation,r=e.setAlert,i=e.member,c=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(!1),e.next=4,An.resendInvitationEmail(i.id);case 4:Y.hit("NewMemberInvitation - Resend"),r({alertMsg:"Convite enviado com sucesso",alertType:"success",showAlert:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r({alertMsg:"Erro ao enviar email",alertType:"error",showAlert:!0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return p.a.createElement(p.a.Fragment,null,p.a.createElement(ie.a,{className:t.smallScreenResendButton,variant:"outlined",size:"large",onClick:c,disabled:!a},a?"Reenviar convite":"Convite enviado"))})),Vo=da(An.getMember,{name:"member",init:!1,options:function(e){return{variables:e.memberId}}}),Go=Object(Q.a)(Object(Q.e)("openModal","setOpenModal",!1),Vo,Object(Q.d)(["openModal"],(function(e){var t=e.openModal,a=e.memberFetch;t&&a(!0)})))((function(e){var t=e.memberData,a=e.memberLoading,n=e.refetch,r=e.openModal,i=e.setOpenModal,c=e.setAlert,s=Object(N.get)(t,"member"),m=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shouldRefetch){e.next=4;break}return e.next=4,n(!1);case 4:Y.hit("MembersFormModal - Closed"),i(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p.a.createElement(p.a.Fragment,null,p.a.createElement(ie.a,{variant:"outlined",size:"large",onClick:function(){Y.hit("MembersFormModal - Opened"),i(!0)}},"Editar"),r&&p.a.createElement(Yo,{isLoading:a,member:s,open:r,onClose:m,setAlert:c}))})),Qo=Object(d.memo)((function(e){var t=e.viewer,a=e.index,n=e.member,r=e.classes,o=e.refetch,l=e.setAlert;if(!t)return null;var i=Object(N.get)(Object(N.find)(Ot,(function(e){return e.value===Object(N.get)(n,"role")})),"label"),c="".concat(Object(N.get)(n,"name")," ").concat(Object(N.get)(n,"lastname")),s=Object(N.get)(n,"email"),m=Object(N.get)(n,"photo_url"),u=jt.includes(t.member.role),d=!0===n.must_change_password;return p.a.createElement(et.a,{className:a%2?r.bgWhite:r.bgGray},p.a.createElement(tt.a,{className:r.tableSmallCell},p.a.createElement("div",{className:r.avatarNameContainer},p.a.createElement(Ct,{name:c,photoUrl:m}),p.a.createElement("span",{className:"".concat(r.cellText," ").concat(r.userName)},c))),p.a.createElement(tt.a,{className:r.tableSmallCell},p.a.createElement("span",{className:r.cellText},s)),p.a.createElement(tt.a,{className:r.tableSmallCell},p.a.createElement("span",{className:r.cellText},i)),p.a.createElement(tt.a,{className:r.tableMediumCell},p.a.createElement(le.a,{container:!0,item:!0},p.a.createElement(le.a,{item:!0,xs:12},u&&p.a.createElement(Go,{memberId:n.id,refetch:o,setAlert:l})),p.a.createElement(le.a,{item:!0,xs:12},d&&p.a.createElement(qo,{member:n,refetch:o,setAlert:l,classes:r})))))})),Jo=Object(Q.a)(Object(J.a)((function(e){return Object(u.a)(Object(u.a)({},Ho(e)),{},{cellText:{color:"#313131",fontSize:14},userName:{marginRight:5,marginLeft:10},avatarNameContainer:{display:"flex",alignItems:"center"},smallScreenResendButton:{marginTop:10}})}),{withTheme:!0}),xo)(Qo),Ko=Object(d.memo)((function(e){var t=e.membersData,a=e.membersLoading,n=e.openCreateMemberModal,r=e.setOpenCreateMemberModal,o=e.classes,l=e.membersFetch,i=e.setAlert,c=D.getUserData(),s=Object(N.get)(c,"member.id"),m=Object(N.get)(t,"members");return p.a.createElement("div",{className:o.container},p.a.createElement(Nt.a,{className:o.paper},p.a.createElement(Ze.a,null,p.a.createElement($e.a,null,p.a.createElement(et.a,null,p.a.createElement(tt.a,{className:o.titleTableCell,colSpan:3},p.a.createElement("b",null,"Usu\xe1rios (".concat(Object(N.size)(m),")"))),p.a.createElement(tt.a,{className:o.tableCell},p.a.createElement(ie.a,{size:"large",color:"primary",variant:"contained",onClick:function(){r(!0),Y.hit("NewMemberModal - Opened")}},"CONVIDAR USU\xc1RIO"))),p.a.createElement(et.a,null,p.a.createElement(tt.a,{className:o.tableCell},"NOME"),p.a.createElement(tt.a,{className:o.tableCell},"EMAIL"),p.a.createElement(tt.a,{className:o.tableCell},"PERMISS\xc3O DE ACESSO"))),p.a.createElement(it.a,null,a?p.a.createElement(et.a,null,p.a.createElement(tt.a,{colSpan:4,align:"center"},p.a.createElement(me,null))):Object(N.size)(m)?m.map((function(e,t){return p.a.createElement(Jo,{loggedMemberId:s,refetch:l,setAlert:i,index:t,key:e.id,member:e,loading:a})})):p.a.createElement(et.a,null,p.a.createElement(tt.a,{className:o.empty,colSpan:4,align:"center"},"Nenhum usu\xe1rio cadastrado")),n&&p.a.createElement(Ro,{onClose:function(){r(!1)},setAlert:i,refetch:l})))))})),Xo=da(An.getMembers,{name:"members",options:function(e){var t=e.setAlert;return{onRequestError:function(){t({alertMsg:"Erro ao carregar dados do servidor",alertType:"error",showAlert:!0})}}}}),Zo=Object(Q.a)(Object(J.a)((function(){return{container:{marginBottom:40,paddingTop:20},empty:{backgroundColor:"#EEE"},paper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},tableCell:{fontSize:14},titleTableCell:{fontSize:20}}}),{withTheme:!0}),Object(Q.e)("openCreateMemberModal","setOpenCreateMemberModal",!1),Do({condition:function(e){return!jt.includes(e.member.role)}}),Xo)(Ko),$o=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=t.showAlert,o=t.alertMsg,l=t.alertType,i=null;return r&&(i=p.a.createElement(Pe,{message:o,type:l,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}})),p.a.createElement("div",{className:n.root},p.a.createElement(ea,{alertBox:i}),p.a.createElement("section",null,p.a.createElement("div",{className:n.container},p.a.createElement("div",{className:n.headerView},p.a.createElement("aside",null,p.a.createElement(Ae.a,{variant:"h5"},p.a.createElement("b",null,"Configura\xe7\xf5es"))))),p.a.createElement("div",{className:n.container},p.a.createElement(ia,null)),p.a.createElement("div",{className:n.container},p.a.createElement(Zo,{setAlert:a}))))})),el=Object(Q.a)(Object(J.a)(Ho,{withTheme:!0}),Object(Q.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}))($o),tl=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=e.updateMemberFetch,o=e.updateMemberError,l=e.updateMemberLoading,i=e.email,c=e.name,s=e.lastname,m=e.setName,u=e.setLastname,d=e.jobRole,g=e.setJobRole,b=t.showAlert,f=t.alertMsg,h=t.alertType,E=Nn()(v()(o,"errors",{}),(function(e){return e[0]})),k=null;b&&(k=p.a.createElement(Pe,{message:f,type:h,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var y=l;return p.a.createElement("div",{className:n.root},p.a.createElement(ea,{alertBox:k}),p.a.createElement("section",null,p.a.createElement("div",{className:n.container},p.a.createElement("div",{className:n.headerView},p.a.createElement("aside",null,p.a.createElement(Ae.a,{variant:"h5"},p.a.createElement("b",null,"Configura\xe7\xf5es"))))),p.a.createElement("div",{className:n.container},p.a.createElement(ia,null)),p.a.createElement("br",null),p.a.createElement("div",{className:n.container},p.a.createElement(Nt.a,{className:n.paper},p.a.createElement(le.a,{container:!0,item:!0,xs:12,sm:6,md:4},p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement(nt.a,{fullWidth:!0,error:!!E.name},p.a.createElement(Oe.a,{label:"Nome",margin:"normal",variant:"outlined",className:n.input,InputLabelProps:{shrink:!0},disabled:y,value:c,onChange:function(e){return m(e.target.value)}}),E.name&&p.a.createElement(Tn.a,null,E.name))),p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement(nt.a,{fullWidth:!0,error:!!E.lastname},p.a.createElement(Oe.a,{label:"Sobrenome",margin:"normal",variant:"outlined",className:n.input,InputLabelProps:{shrink:!0},disabled:y,value:s,onChange:function(e){return u(e.target.value)}}),E.lastname&&p.a.createElement(Tn.a,null,E.lastname))),p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement(nt.a,{fullWidth:!0},p.a.createElement(Oe.a,{disabled:!0,label:"Email",margin:"normal",variant:"outlined",className:n.input,InputLabelProps:{shrink:!0},value:i}))),p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement(nt.a,{fullWidth:!0},p.a.createElement(Oe.a,{label:"Cargo",margin:"normal",variant:"outlined",className:n.input,InputLabelProps:{shrink:!0},value:d,disabled:y,onChange:function(e){return g(e.target.value)}}))),p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement("div",{className:n.actions},p.a.createElement(ie.a,{onClick:function(){return r(!0)},size:"large",color:"primary",variant:"contained",disabled:y},"Atualizar"))))))))})),al=da(ca.updateMember,{name:"updateMember",init:!1,options:function(e){var t=e.name,a=e.lastname,n=e.jobRole,r=e.setAlert,i=e.setName,c=e.setLastname,s=e.setJobRole;return{variables:{name:t,lastname:a,jobRole:n},onRequestFinished:function(){var e=Object(l.a)(o.a.mark((function e(){var l,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.getEnterpriseUser();case 3:l=e.sent,m=v()(l,"enterprise_user"),D.setUserData(Object(u.a)(Object(u.a)({},m),{buildings:Je()(v()(m,"buildings"),["name"])})),i(t),c(a),s(n),r({alertMsg:"Perfil atualizado com sucesso",alertType:"success",showAlert:!0}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r({alertMsg:"Erro ao atualizar perfil",alertType:"error",showAlert:!0});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),onRequestError:function(){r({alertMsg:"Erro ao atualizar perfil",alertType:"error",showAlert:!0})}}}}),nl=Object(Q.a)(Object(J.a)((function(e){return Object(u.a)({},te(e))}),{withTheme:!0}),h.g,Object(Q.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Q.e)("disabled","setDisabled",!1),Object(Q.e)("name","setName",""),Object(Q.e)("lastname","setLastname",""),Object(Q.e)("email","setEmail",""),Object(Q.e)("jobRole","setJobRole",""),al,Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.setName,a=e.setLastname,n=e.setEmail,r=e.setJobRole,o=D.getUserData();t(v()(o,"member.name")),a(v()(o,"member.lastname")),n(v()(o,"member.email")),r(v()(o,"member.job_role"))}}))(tl),rl=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=e.password,o=e.confirmPassword,l=e.setPassword,i=e.setConfirmPassword,c=e.updateMemberFetch,s=e.updateMemberError,m=e.updateMemberLoading,u=t.showAlert,d=t.alertMsg,g=t.alertType,b=Nn()(v()(s,"errors",{}),(function(e){return e[0]})),f=null;u&&(f=p.a.createElement(Pe,{message:d,type:g,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var h=m;return p.a.createElement("div",{className:n.root},p.a.createElement(ea,{alertBox:f}),p.a.createElement("section",null,p.a.createElement("div",{className:n.container},p.a.createElement("div",{className:n.headerView},p.a.createElement("aside",null,p.a.createElement(Ae.a,{variant:"h5"},p.a.createElement("b",null,"Configura\xe7\xf5es"))))),p.a.createElement("div",{className:n.container},p.a.createElement(ia,null)),p.a.createElement("br",null),p.a.createElement("div",{className:n.container},p.a.createElement(Nt.a,{className:n.paper},p.a.createElement(le.a,{container:!0,item:!0,xs:12,sm:6,md:4},p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement(nt.a,{fullWidth:!0,error:!!b.password},p.a.createElement(Oe.a,{label:"Nova senha",margin:"normal",type:"password",variant:"outlined",className:n.input,InputLabelProps:{shrink:!0},disabled:h,value:r,onChange:function(e){return l(e.target.value)}}),b.password&&p.a.createElement(Tn.a,null,b.password))),p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement(nt.a,{fullWidth:!0},p.a.createElement(Oe.a,{label:"Confirmar nova senha",margin:"normal",type:"password",variant:"outlined",className:n.input,InputLabelProps:{shrink:!0},disabled:h,value:o,onChange:function(e){return i(e.target.value)}}))),p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement("div",{className:n.actions},p.a.createElement(ie.a,{onClick:function(){r===o?c(!0):a({alertMsg:"As senhas est\xe3o diferentes",alertType:"error",showAlert:!0})},size:"large",color:"primary",variant:"contained",disabled:h},"Atualizar"))))))))})),ol=da(ca.updateMemberPassword,{name:"updateMember",init:!1,options:function(e){var t=e.password,a=e.setAlert,n=e.setPassword,r=e.setConfirmPassword;return{variables:{password:t},onRequestFinished:function(){a({alertMsg:"Perfil atualizado com sucesso",alertType:"success",showAlert:!0}),n(""),r("")},onRequestError:function(){a({alertMsg:"Erro ao atualizar perfil",alertType:"error",showAlert:!0})}}}}),ll=Object(Q.a)(Object(J.a)((function(e){return Object(u.a)({},te(e))}),{withTheme:!0}),Object(Q.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Q.e)("password","setPassword",""),Object(Q.e)("confirmPassword","setConfirmPassword",""),ol)(rl),il=function(e){return Object(u.a)({},te(e))},cl=Object(d.memo)((function(e){var t=e.classes,a=e.onClose,n=e.formData,r=e.setFormData,i=e.ticketCategory,c=e.setErrors,s=e.loading,m=e.errors,d=e.assignees,g=e.setLoading,b=e.setAlert,f=e.refetch,h=s||Object(N.isEmpty)(n.title),E=Object(ct.a)(),v=Object(st.a)(E.breakpoints.down("sm")),k=function(){a()},y=function(e){r(Object(u.a)(Object(u.a)({},n),e))},C=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,t=Object(u.a)({id:i.id},n),e.next=5,io.updateCategory(t);case 5:Y.hit("TicketCategoryUpdated - Success"),b({alertMsg:"Categoria atualizada com sucesso",alertType:"success",showAlert:!0}),a(),f(!0),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),c(Object(N.mapValues)(Object(N.get)(e.t0,"errors",{}),(function(e){return e[0]}))),b({alertMsg:"Erro ao atualizar categoria",alertType:"error",showAlert:!0});case 15:g(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return p.a.createElement(Va.a,{fullScreen:v,keepMounted:!0,fullWidth:!0,maxWidth:"sm",classes:{paper:t.dialogMemberForm},open:!0},p.a.createElement(Ja.a,null,"Editar categoria",p.a.createElement(Ie.a,{className:t.closeButton,onClick:k,disabled:s},p.a.createElement(Ne.a,null))),p.a.createElement(Ga.a,{className:t.content},p.a.createElement(le.a,{container:!0,direction:"row",spacing:1},p.a.createElement(p.a.Fragment,null,p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!m.title},p.a.createElement(Oe.a,{disabled:s,label:"T\xedtulo",error:!!m.title,value:Object(N.get)(n,"title",""),InputLabelProps:{shrink:!0},onChange:function(e){return y({title:e.target.value})},variant:"outlined"}),m.title&&p.a.createElement(Tn.a,null,m.title))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!m.assigneeId},p.a.createElement(Oe.a,{disabled:s,error:!!m.assigneeId,label:"Respons\xe1vel",select:!0,value:Object(N.get)(n,"assigneeId",""),SelectProps:{native:!0},InputLabelProps:{shrink:!0},onChange:function(e){return y({assigneeId:e.target.value})},variant:"outlined"},p.a.createElement("option",{value:""},"Nenhum respons\xe1vel"),d&&d.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},"".concat(e.name," ").concat(e.lastname))}))),m.assigneeId&&p.a.createElement(Tn.a,null,m.assigneeId))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!m.deadlineInDays},p.a.createElement(Oe.a,{type:"tel",disabled:s,label:"Prazo de resolu\xe7\xe3o (em dias)",error:!!m.deadlineInDays,value:Object(N.get)(n,"deadlineInDays",""),InputLabelProps:{shrink:!0},onChange:function(e){return y({deadlineInDays:(e.target.value||"").replace(/[\D]+/g,"")})},variant:"outlined"}),m.deadlineInDays&&p.a.createElement(Tn.a,null,m.deadlineInDays)))))),p.a.createElement(Qa.a,{className:t.actions},p.a.createElement(le.a,{container:!0,justify:"space-between",spacing:2},p.a.createElement(le.a,{item:!0,xs:12,sm:6}),p.a.createElement(le.a,{item:!0,xs:6,sm:3},p.a.createElement(ie.a,{fullWidth:!0,color:"default",size:"large",variant:"contained",onClick:k,disabled:s},"CANCELAR")),p.a.createElement(le.a,{item:!0,xs:6,sm:3},p.a.createElement(ie.a,{fullWidth:!0,color:"primary",size:"large",variant:"contained",onClick:C,disabled:h},"SALVAR")))))})),sl=Object(Q.a)(Object(J.a)((function(e){return Object(u.a)(Object(u.a)({},il(e)),{},{actions:{margin:15,marginBottom:20},content:{marginTop:-20,overflowX:"hidden"},dialogMemberForm:{maxWidth:"50rem"}})}),{withTheme:!0}),Object(Q.e)("formData","setFormData",{}),Object(Q.e)("loading","setLoading",!1),Object(Q.e)("errors","setErrors",{}),Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.setFormData,a=e.ticketCategory;t({title:a.title,assigneeId:a.assignee_id,deadlineInDays:a.deadline_in_days})}}))(cl),ml=Object(Q.a)(Object(Q.e)("openModal","setOpenModal",!1))((function(e){var t=e.ticketCategory,a=e.ticketCategoryLoading,n=e.refetch,r=e.openModal,i=e.setOpenModal,c=e.setAlert,s=e.assignees,m=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y.hit("TicketCategoryModal - Closed"),i(!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p.a.createElement(p.a.Fragment,null,p.a.createElement(ie.a,{variant:"outlined",size:"large",onClick:function(){Y.hit("TicketCategoryModal - Opened"),i(!0)}},"Editar"),r&&p.a.createElement(sl,{assignees:s,isLoading:a,ticketCategory:t,open:r,onClose:m,setAlert:c,refetch:n}))})),ul=Object(d.memo)((function(e){var t=e.viewer,a=e.index,n=e.classes,r=e.setAlert,i=e.ticketCategory,c=e.loading,s=e.setLoading,m=e.assignees,u=e.refetch,d=e.isManager,g=e.setChecked,b=e.checked,f=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,io.toggleCategory(i.id);case 4:g(!b),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r({alertMsg:"Erro ao alterar categoria do ticket",alertType:"error",showAlert:!0});case 10:s(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),h=Object(N.get)(i,"assignee"),E=Object(N.get)(i,"deadline_in_days"),v="",k="";return h&&(v="".concat(h.name," ").concat(h.lastname),k=h.photoUrl),t?p.a.createElement(et.a,{className:a%2?n.bgWhite:n.bgGray},p.a.createElement(tt.a,{className:n.tableSmallCell},p.a.createElement("span",{className:n.cellText},Object(N.get)(i,"title"))),p.a.createElement(tt.a,{className:n.tableSmallCell},p.a.createElement("div",{className:n.avatarNameContainer},h&&p.a.createElement(Ct,{name:v,photoUrl:k}),p.a.createElement("span",{className:"".concat(n.cellText," ").concat(n.userName)},v))),p.a.createElement(tt.a,{className:n.tableSmallCell},p.a.createElement("span",{className:n.cellText},E?"".concat(E," ").concat(E>1?"dias":"dia"):"")),p.a.createElement(tt.a,{className:n.tableExtraSmallCell},d&&p.a.createElement(le.a,{container:!0,item:!0},p.a.createElement(le.a,{item:!0,xs:6},p.a.createElement(wr.a,{disabled:c,checked:b,onChange:f,color:"primary"})))),p.a.createElement(tt.a,{className:n.tableMediumCell},p.a.createElement(le.a,{container:!0,item:!0},p.a.createElement(le.a,{item:!0,xs:6},d&&p.a.createElement(ml,{assignees:m,ticketCategory:i,setAlert:r,refetch:u}))))):null})),dl=Object(Q.a)(Object(J.a)((function(e){return Object(u.a)(Object(u.a)({},il(e)),{},{cellText:{color:"#313131",fontSize:14},userName:{marginRight:5,marginLeft:10},avatarNameContainer:{display:"flex",alignItems:"center"},smallScreenResendButton:{marginTop:10}})}),{withTheme:!0}),Object(Q.e)("checked","setChecked",!1),Object(Q.e)("loading","setLoading",!1),xo,Object(Q.b)({componentDidMount:function(){var e=this.props,t=e.setChecked,a=e.ticketCategory;t(Object(N.isEmpty)(a.deleted_at))}}))(ul),pl=Object(d.memo)((function(e){var t=e.classes,a=e.onClose,n=e.setAlert,r=e.formData,i=e.setFormData,c=e.refetch,s=e.loading,m=e.setLoading,d=e.errors,g=e.setErrors,b=e.assignees,f=s||Object(N.isEmpty)(r.title),h=Object(ct.a)(),E=Object(st.a)(h.breakpoints.down("sm")),v=function(e){i(Object(u.a)(Object(u.a)({},r),e))},k=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,io.createCategory(r);case 4:Y.hit("TicketCategory - Created"),n({alertMsg:"Categoria criada com sucesso",alertType:"success",showAlert:!0}),a(),c(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),g(Object(N.mapValues)(Object(N.get)(e.t0,"errors",{}),(function(e){return e[0]}))),n({alertMsg:"Erro ao criar categoria",alertType:"error",showAlert:!0});case 14:m(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return p.a.createElement(Va.a,{fullScreen:E,keepMounted:!0,fullWidth:!0,maxWidth:"md",classes:{paper:t.dialogMemberForm},open:!0},p.a.createElement(Ja.a,null,"Criar categoria",p.a.createElement(Ie.a,{className:t.closeButton,onClick:a,disabled:s},p.a.createElement(Ne.a,null))),p.a.createElement(Ga.a,{className:t.content},p.a.createElement(le.a,{container:!0,direction:"row",spacing:1},p.a.createElement(p.a.Fragment,null,p.a.createElement(le.a,{item:!0,xs:12},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal",error:!!d.title},p.a.createElement(Oe.a,{disabled:s,label:"T\xedtulo",error:!!d.title,value:Object(N.get)(r,"title",""),InputLabelProps:{shrink:!0},onChange:function(e){return v({title:e.target.value})},variant:"outlined"}),d.title&&p.a.createElement(Tn.a,null,d.title))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal"},p.a.createElement(Oe.a,{select:!0,SelectProps:{native:!0},label:"Respons\xe1vel",value:Object(N.get)(r,"assigneeId",""),disabled:s,InputLabelProps:{shrink:!0},onChange:function(e){return v({assigneeId:e.target.value})},variant:"outlined"},p.a.createElement("option",{value:""},"Nenhum respons\xe1vel"),b.map((function(e){return p.a.createElement("option",{value:e.id,key:e.id},"".concat(e.name," ").concat(e.lastname))}))))),p.a.createElement(le.a,{item:!0,xs:12,sm:6},p.a.createElement(nt.a,{fullWidth:!0,margin:"normal"},p.a.createElement(Oe.a,{label:"Prazo de resolu\xe7\xe3o (em dias)",type:"tel",disabled:s,value:Object(N.get)(r,"deadlineInDays",""),InputLabelProps:{shrink:!0},onChange:function(e){return v({deadlineInDays:(e.target.value||"").replace(/[\D]+/g,"")})},variant:"outlined"})))))),p.a.createElement(Qa.a,{className:t.actions},p.a.createElement(le.a,{container:!0,justify:"space-between",spacing:2},p.a.createElement(le.a,{item:!0,xs:12,sm:8}),p.a.createElement(le.a,{item:!0,xs:6,sm:2},p.a.createElement(ie.a,{fullWidth:!0,color:"default",size:"large",variant:"contained",onClick:a,disabled:s},"CANCELAR")),p.a.createElement(le.a,{item:!0,xs:6,sm:2},p.a.createElement(ie.a,{fullWidth:!0,color:"primary",size:"large",variant:"contained",onClick:k,disabled:f},"SALVAR")))))})),gl=Object(Q.a)(Object(J.a)((function(e){return Object(u.a)(Object(u.a)({},il(e)),{},{actions:{margin:15,marginBottom:20},content:{marginTop:-20,overflowX:"hidden"},dialogMemberForm:{maxWidth:"50rem"},blockTitle:{marginTop:15},checkboxLabel:{fontSize:e.typography.caption.fontSize},gridSizeMedium:{width:400}})}),{withTheme:!0}),Object(Q.e)("formData","setFormData",{}),Object(Q.e)("loading","setLoading",!1),Object(Q.e)("errors","setErrors",{}))(pl),bl=Object(d.memo)((function(e){var t=e.ticketCategoriesData,a=e.ticketCategoriesLoading,n=e.openCreateTicketCategoryModal,r=e.setOpenCreateTicketCategoryModal,o=e.classes,l=e.setAlert,i=e.ticketCategoriesFetch,c=e.ticketAssigneesData,s=e.ticketAssigneesLoading||a,m=Object(N.get)(t,"ticket_categories"),u=Object(N.get)(c,"members",[]),d=D.getUserData(),g=jt.includes(d.member.role);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:o.container},p.a.createElement("div",{className:o.headerView},p.a.createElement("aside",null,p.a.createElement(Ae.a,{variant:"h6"},p.a.createElement("b",null,"Categorias (".concat(Object(N.size)(m),")")))),p.a.createElement("aside",null,g&&p.a.createElement(ie.a,{size:"large",color:"primary",variant:"contained",onClick:function(){r(!0),Y.hit("EditTicketCategoryModal - Opened")}},"CRIAR CATEGORIA")))),p.a.createElement("div",{className:o.container},p.a.createElement(Nt.a,{className:o.paper},p.a.createElement(Ze.a,null,p.a.createElement($e.a,null,p.a.createElement(et.a,null,p.a.createElement(tt.a,{className:o.tableCell},"T\xcdTULO"),p.a.createElement(tt.a,{className:o.tableCell},"RESPONS\xc1VEL"),p.a.createElement(tt.a,{className:o.tableCell},"PRAZO DE RESOLU\xc7\xc3O"),g&&p.a.createElement(tt.a,{className:o.tableCell},"HABILITAR"),p.a.createElement(tt.a,{colSpan:1}))),p.a.createElement(it.a,null,s?p.a.createElement(et.a,null,p.a.createElement(tt.a,{colSpan:g?5:4,align:"center"},p.a.createElement(me,null))):Object(N.size)(m)?m.map((function(e,t){return p.a.createElement(dl,{isManager:g,assignees:u,setAlert:l,index:t,key:e.id,ticketCategory:e,isLoading:s,refetch:i})})):p.a.createElement(et.a,null,p.a.createElement(tt.a,{className:o.empty,colSpan:g?5:4,align:"center"},"Nenhuma categoria cadastrada")),g&&n&&p.a.createElement(gl,{assignees:u,onClose:function(){r(!1)},setAlert:l,refetch:i}))))))})),fl=da(io.getCategories,{name:"ticketCategories",options:function(e){var t=e.setAlert;return{variables:!0,onRequestError:function(){t({alertMsg:"Erro ao carregar dados do servidor",alertType:"error",showAlert:!0})}}}}),hl=da(xr.getAssignables,{name:"ticketAssignees"}),El=Object(Q.a)(Object(J.a)((function(e){return Object(u.a)(Object(u.a)({},il(e)),{},{container:{marginBottom:40,paddingTop:20},empty:{backgroundColor:"#EEE"},paper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},tableCell:{fontSize:14},titleTableCell:{fontSize:20}})}),{withTheme:!0}),Object(Q.e)("openCreateTicketCategoryModal","setOpenCreateTicketCategoryModal",!1),fl,hl)(bl),vl=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=t.showAlert,o=t.alertMsg,l=t.alertType,i=null;return r&&(i=p.a.createElement(Pe,{message:o,type:l,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}})),p.a.createElement("div",{className:n.root},p.a.createElement(ea,{alertBox:i}),p.a.createElement("section",null,p.a.createElement("div",{className:n.container},p.a.createElement("div",{className:n.headerView},p.a.createElement("aside",null,p.a.createElement(Ae.a,{variant:"h5"},p.a.createElement("b",null,"Configura\xe7\xf5es"))))),p.a.createElement("div",{className:n.container},p.a.createElement(ia,null)),p.a.createElement("div",{className:n.container},p.a.createElement(El,{setAlert:a}))))})),kl=Object(Q.a)(Object(J.a)(il,{withTheme:!0}),Object(Q.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}))(vl);G.setup(),j.a.locale(L.locale);var yl=O()(y()(Ce,(function(e,t){return e.submenus?y()(e.submenus,(function(t,a){return Object(u.a)({},t,{path:"".concat(e.path).concat(t.path),key:a,page:n[a]})})):Object(u.a)({},e,{key:t,page:n[t]})}))),Cl=re(function(e){Object(m.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;L.isiOS&&document.querySelector('link[rel="manifest"]').setAttribute("rel","no-on-ios"),this.setState({loading:!0},Object(l.a)(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.getEnterpriseUser();case 3:a=t.sent,n=v()(a,"enterprise_user"),D.setUserData(n),Y.trackScreenView("Home"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),D.clear();case 12:return t.prev=12,e.setState({loading:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])}))))}},{key:"render",value:function(){var e=this.state.loading;return p.a.createElement(S.a,{theme:pe},p.a.createElement(w.a,null),p.a.createElement(d.Suspense,{fallback:p.a.createElement(me,{hasRefreshMsg:!0})},e?p.a.createElement(me,{hasRefreshMsg:!0}):p.a.createElement(f.a,null,p.a.createElement(h.d,null,y()(yl,(function(e){return p.a.createElement(h.b,{key:e.path,exact:e.exact,path:e.path,render:function(t){try{if(e.private&&D.isLoggedIn()||!e.private){var a=H(e.page,e.trackPage);return p.a.createElement(a,t)}var n="".concat(t.location.pathname).concat(t.location.search);return I.save("redirectUrl",n),p.a.createElement(h.a,{to:{pathname:"/",state:{from:t.location}}})}catch(r){return p.a.createElement(h.a,{to:{pathname:"/",state:{from:t.location}}})}}})}))))))}}]),a}(d.PureComponent));b.a.render(p.a.createElement(Cl,null),document.querySelector("main"))}},[[325,1,2]]]);
//# sourceMappingURL=main.bed46f1f.chunk.js.map