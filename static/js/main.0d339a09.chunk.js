(this["webpackJsonplobby-portal"]=this["webpackJsonplobby-portal"]||[]).push([[0],{200:function(e,t,a){e.exports=a.p+"static/media/logo.7f12e1c7.png"},305:function(e,t,a){e.exports=a(459)},426:function(e,t){e.exports="data:image/png;base64,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"},427:function(e,t,a){},459:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"Signin",(function(){return we})),a.d(n,"CreatePassword",(function(){return De})),a.d(n,"ResetPassword",(function(){return xe})),a.d(n,"Spaces",(function(){return St})),a.d(n,"SpaceCalendar",(function(){return va})),a.d(n,"Visitors",(function(){return tn})),a.d(n,"Members",(function(){return Jr})),a.d(n,"MyProfile",(function(){return $r})),a.d(n,"ChangePassword",(function(){return ao})),a.d(n,"Tickets",(function(){return pr})),a.d(n,"NewTicket",(function(){return Ar}));var r=a(13),o=a.n(r),i=a(20),l=a(41),c=a(42),s=a(46),m=a(45),u=a(8),d=(a(307),a(0)),p=a.n(d),g=a(14),b=a.n(g),h=a(47),f=a(25),E=a(5),v=a.n(E),k=a(30),A=a.n(k),y=a(256),C=a.n(y),w=a(10),O=a.n(w),T=a(548),B=a(547),j=a(257),D=a.n(j),S={save:function(e,t){return localStorage.setItem(e,JSON.stringify(t))},get:function(e){try{var t=localStorage.getItem(e);return JSON.parse(t)}catch(a){return console.log(a),{}}},delete:function(e){return localStorage.removeItem(e)}},x={setUserToken:function(e){return S.save("userToken",e)},getUserToken:function(){return S.get("userToken")||""},setUserData:function(e){return S.save("userData",e)},getUserData:function(){return S.get("userData")||{}},clear:function(){S.delete("userToken"),S.delete("userData")},getAuthToken:function(){var e=S.get("userToken");if(e)return e;throw new Error("No authToken")},getBearerToken:function(){var e=S.get("userToken");return"Bearer: ".concat(e)},isLoggedIn:function(){var e=S.get("userToken");return!!e},isAuthorized:function(e){return e&&"unauthorized"!==e.error}},M=a(258),N={companyName:"Lobby",appName:"Lobby Portal",appNamespace:a.n(M)()("Lobby Portal"),apiURL:"https://api.lobby.tech",wsURL:"wss://api.lobby.tech",env:"production",apiRequestTimeout:12500,mixpanelToken:"edc68e4e1788a9a91e92f329276c65f7",locale:"pt-br",isiOS:!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)},I=function(e){var t=v()(e,"response.data");return t||(t={error:v()(e,"message")}),t},L={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return new Promise(function(){var r=Object(i.a)(o.a.mark((function r(i,l){var c,s,m,u;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c=x.getBearerToken(),s=D.a.create({baseURL:"".concat(N.apiURL,"/").concat(N.appNamespace),timeout:N.apiRequestTimeout,headers:{"Content-Type":"application/json",Authorization:c},responseType:"json"}),r.next=5,s[e](t,a,n);case 5:return m=r.sent,u=m.data,r.abrupt("return",i(u));case 10:return r.prev=10,r.t0=r.catch(0),r.abrupt("return",l(I(r.t0)));case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e,t){return r.apply(this,arguments)}}())},get:function(e,t){return this.request("get",e,{params:t})},post:function(e,t,a){return this.request("post",e,t,a)},put:function(e,t,a){return this.request("put",e,t,a)},delete:function(e,t,a){return this.request("delete",e,t,a)}},W={getEnterpriseUser:function(){return L.get("/enterprise_user")},setCurrentBuilding:function(e){return L.put("/enterprise_user",{building_id:e})}},P=a(130),F=a.n(P),R=a(259),Y=a.n(R);F.a.init(N.mixpanelToken);var H={prepareTrackUser:function(){var e=x.getUserData();if(e&&v()(e,"member.id")){var t={app_id:N.appNamespace,app_name:N.appName,user_id:v()(e,"member.id"),email:v()(e,"member.email"),phone:v()(e,"member.phone"),name:"".concat(v()(e,"member.name")," ").concat(v()(e,"member.lastname")),company:v()(e,"member.company.name"),company_id:v()(e,"member.company.id"),building:v()(e,"building.name"),building_id:v()(e,"building.id"),created_at:v()(e,"member.created_at"),verified_at:v()(e,"member.verified_at")};return F.a.identify(t.user_id),F.a.people.set(t),t}return{}},hit:function(e,t){var a=this.prepareTrackUser(),n=Y()(t,a);return F.a.track(e,n)},trackScreenView:function(e){this.hit("".concat(e," - Viewed"),{screen:e})}},V=function(e,t){return function(a){return Object(d.useEffect)((function(){"development"!==N.env&&H.trackScreenView(t)})),p.a.createElement(e,a)}},q=a(514),U=a(511),z=a(176),G=a(6),Q=function(e){return{progress:{margin:e.spacing(2)},middle:{marginTop:20},center:{justifyContent:"center",textAlign:"center"}}},_=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={slowConnection:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.hasRefreshMsg&&(this.timeoutConnection=setTimeout((function(){e.setState({slowConnection:!0})}),N.apiRequestTimeout))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutConnection)}},{key:"render",value:function(){var e=this.props,t=e.hasRefreshMsg,a=e.classes,n=e.theme.mainColor,r=this.state.slowConnection;return p.a.createElement(U.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:a.middle},p.a.createElement(q.a,{color:n,className:a.progress,variant:"indeterminate",disableShrink:!0,thickness:5}),p.a.createElement("b",null,"Carregando..."),t&&r?p.a.createElement("div",{className:a.center},p.a.createElement("br",null),p.a.createElement("b",null,"H\xe1 problemas de conex\xe3o com a internet"),p.a.createElement(z.a,{onClick:function(){return window.location.reload()},size:"large",color:"primary",variant:"contained"},p.a.createElement("b",null,"Recarregar"))):null)}}]),a}(d.PureComponent),J=Object(G.a)(Q,{withTheme:!0})(_),K=a(280),X=a(169),Z=Object(K.a)({palette:{primary:{main:"#1177FF"},secondary:{main:X.a[500]},background:{default:"#F5F5F5"}},typography:{useNextVariants:!0},maxContainerWidth:1440,menuWidth:200}),$=a(172),ee=a.n($),te=a(264),ae=a.n(te),ne=a(263),re=a.n(ne),oe=a(265),ie=a.n(oe),le={Signin:{label:"Signin",trackPage:"Signin",path:"/",icon:p.a.createElement(ee.a,null),exact:!0,hideMenu:!0,private:!1},ResetPassword:{label:"Recuperar senha",trackPage:"ResetPassword",path:"/recuperar-senha",icon:p.a.createElement(ee.a,null),hideMenu:!0,private:!1},CreatePassword:{label:"Criar senha",trackPage:"CreatePassword",path:"/criar-senha",icon:p.a.createElement(ee.a,null),hideMenu:!0,private:!1},NewTicket:{label:"Novo ticket",trackPage:"NewTicket",path:"/tickets/novo",hideMenu:!0,private:!0},Tickets:{label:"Tickets",trackPage:"Tickets",path:"/tickets/:id*",icon:p.a.createElement(re.a,null),private:!0},Visitors:{label:"Visitantes",trackPage:"Visitors",path:"/visitantes",icon:p.a.createElement(ae.a,null),private:!0},SpaceCalendar:{label:"Espa\xe7os",trackPage:"SpaceCalendar",path:"/espacos/:id",hideMenu:!0,private:!0},Spaces:{label:"Reservas",trackPage:"Spaces",path:"/espacos",icon:p.a.createElement(ie.a,null),private:!0},MyProfile:{label:"Meu perfil",trackPage:"MyProfile",path:"/configuracoes/meu-perfil",settingsMenu:!0,private:!0},ChangePassword:{label:"Mudar senha",trackPage:"ChangePassword",path:"/configuracoes/mudar-senha",settingsMenu:!0,private:!0},Members:{label:"Usu\xe1rios",trackPage:"Members",path:"/configuracoes/usuarios",settingsMenu:!0,private:!0}},ce=a(31),se=a.n(ce),me=a(550),ue=a(72),de={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center"},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},pe={postSignin:function(e,t){var a={email:e,password:t};return L.post("/auth/signin",a)}},ge=a(554),be=a(516),he=a(53),fe=a.n(he),Ee=a(461),ve=a(171),ke=a(515),Ae=function(e){return{success:{backgroundColor:ve.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:"#1177FF"},warning:{backgroundColor:ke.a[700]},closeIcon:{fontSize:20,opacity:.9,justifyContent:"center"},message:{fontSize:20,display:"flex",alignItems:"center"}}},ye=Object(d.memo)((function(e){var t=e.message,a=e.type,n=e.actionButton,r=e.onClickAction,o=e.onClose,i=e.classes,l=[];return n&&l.push(p.a.createElement(z.a,{key:"action",color:"inherit",variant:"outlined",className:i[a||"info"]||i.info,onClick:r},n)),o&&l.push(p.a.createElement(Ee.a,{key:"action",color:"inherit",onClick:o},p.a.createElement(fe.a,{className:i.closeIcon}))),p.a.createElement(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!0,autoHideDuration:o?3e3:null,onClose:function(){return o&&o()}},p.a.createElement(be.a,{className:i[a||"info"]||i.info,message:p.a.createElement("span",{className:i.message},t),action:l}))})),Ce=Object(G.a)(Ae,{withTheme:!0})(ye),we=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",errorMsg:"",submit:!1},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password,l=e.props.history;e.setState({submit:!0},Object(i.a)(o.a.mark((function t(){var a,i,c,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!n||!r){t.next=14;break}return t.next=4,pe.postSignin(n,r);case 4:return a=t.sent,i=a.token,x.setUserToken(i),t.next=9,W.getEnterpriseUser();case 9:return c=t.sent,s=v()(c,"enterprise_user"),x.setUserData(Object(u.a)({},s,{buildings:se()(v()(s,"buildings"),["name"])})),setTimeout((function(){e.setState({submit:!1});var t=S.get("redirectUrl");S.delete("redirectUrl"),l.push(t||"/visitantes")}),50),t.abrupt("return",!0);case 14:throw new Error("Blank fields");case 17:return t.prev=17,t.t0=t.catch(0),e.setState({submit:!1,errorMsg:"Credencial inv\xe1lida, tente novamente."}),t.abrupt("return",!0);case 21:case"end":return t.stop()}}),t,null,[[0,17]])}))))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.history;try{x.isLoggedIn()&&e.push("/visitantes")}catch(t){x.clear()}}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,r=t.password,o=t.submit,i=t.errorMsg;return p.a.createElement("div",{style:de.container},p.a.createElement("div",{style:de.content},i&&p.a.createElement(Ce,{message:i,type:"warning",onClose:function(){return e.setState({errorMsg:""})}}),p.a.createElement("img",{src:a(200),width:150,alt:N.appName,style:de.logo}),p.a.createElement(ue.a,{component:"h1",variant:"h5"},"Portal da empresa"),p.a.createElement("form",{onSubmit:this.onSubmit,style:de.form},p.a.createElement(me.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Email",type:"text",disabled:o,value:n,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({username:t.target.value.toLowerCase()})}}),p.a.createElement(me.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Senha",type:"password",disabled:o,value:r,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({password:t.target.value})}}),p.a.createElement(z.a,{disabled:o,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:de.button,type:"submit"},o?"Carregando...":"Entrar")),p.a.createElement("p",null,p.a.createElement(h.b,{to:"/recuperar-senha"},"Esqueci minha senha"))))}}]),n}(d.PureComponent),Oe=a(22),Te=a.n(Oe),Be={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center"},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},je={verifyIfCanResetPassword:function(e,t){var a={id:e,code:t};return L.post("/password/verify",a)},changePassword:function(e,t,a){var n={id:e,code:t,password:a};return L.put("/password/change",n)},resetPassword:function(e){var t={email:e};return L.post("/password/reset",t)}},De=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={memberId:"",recoveryCode:"",password:"",confirmPassword:"",msg:"",msgType:"",hideForm:!0,loading:!0,submit:!1},e.onSubmit=function(t){t.preventDefault();var a=e.props.history,n=e.state,r=n.confirmPassword,l=n.password,c=n.memberId,s=n.recoveryCode;e.setState({submit:!0},Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!r||!l||r!==l){t.next=9;break}if(!(Te()(l)>=6)){t.next=7;break}return t.next=5,je.changePassword(c,s,l);case 5:return e.setState({msg:"Senha atualizada, redirecionando para tela de login...",msgType:"success",memberId:"",recoveryCode:"",confirmPassword:"",password:""},(function(){setTimeout((function(){a.replace("/")}),2500)})),t.abrupt("return",!0);case 7:return e.sendAlert("Informe uma senha com m\xednimo de ".concat(6," caracteres."),"warning"),t.abrupt("return",!0);case 9:e.sendAlert("As senhas est\xe3o em branco ou diferentes.","warning"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e.sendAlert("N\xe3o foi poss\xedvel alterar senha.","warning");case 15:return t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])}))))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location;this.setState({submit:!0,loading:!0,memberId:"",recoveryCode:""},Object(i.a)(o.a.mark((function a(){var n,r,i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n=new URLSearchParams(t.search),r=n.get("id"),i=n.get("code"),!r||!i){a.next=9;break}return a.next=7,je.verifyIfCanResetPassword(r,i);case 7:return e.setState({submit:!1,loading:!1,hideForm:!1,memberId:r,recoveryCode:i}),a.abrupt("return",!0);case 9:throw new Error("Invalid URL query");case 12:a.prev=12,a.t0=a.catch(0),e.setState({hideForm:!0,loading:!1});case 15:return a.abrupt("return",!0);case 16:case"end":return a.stop()}}),a,null,[[0,12]])}))))}},{key:"sendAlert",value:function(e,t){this.setState({submit:!1,msg:e,msgType:t})}},{key:"clearAlert",value:function(){this.setState({submit:!1,msg:"",msgType:""})}},{key:"render",value:function(){var e=this,t=this.state,n=t.confirmPassword,r=t.password,o=t.submit,i=t.loading,l=t.hideForm,c=t.msg,s=t.msgType;return p.a.createElement("div",{style:Be.container},p.a.createElement("div",{style:Be.content},c&&s&&p.a.createElement(Ce,{message:c,type:s,onClose:function(){return e.clearAlert}}),i?p.a.createElement(J,null):p.a.createElement(p.a.Fragment,null,p.a.createElement("img",{src:a(200),width:150,alt:N.appName,style:Be.logo}),p.a.createElement(ue.a,{component:"h1",variant:"h5"},l?"Link inv\xe1lido para definir senha":"Definir senha"),!l&&p.a.createElement("form",{onSubmit:this.onSubmit,style:Be.form},p.a.createElement(me.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Senha",type:"password",disabled:o,value:r,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({password:t.target.value})}}),p.a.createElement(me.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Confirmar senha",type:"password",disabled:o,value:n,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({confirmPassword:t.target.value})}}),p.a.createElement(z.a,{disabled:o,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:Be.button,type:"submit"},o?"Carregando...":"Entrar"))),p.a.createElement("p",null,p.a.createElement(h.b,{to:"/"},"Voltar para home"))))}}]),n}(d.PureComponent),Se={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center"},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},xe=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",msg:"",msgType:"",submit:!1},e.onSubmit=function(t){t.preventDefault();var a=e.state.email;e.setState({submit:!0},Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!a){t.next=6;break}return t.next=4,je.resetPassword(a);case 4:return e.setState({submit:!1,email:"",msgType:"success",msg:"Enviamos para seu email um link de recupera\xe7\xe3o de senha."}),t.abrupt("return",!0);case 6:throw new Error("Blank fields");case 9:return t.prev=9,t.t0=t.catch(0),e.setState({submit:!1,msg:"Email inv\xe1lido ou inexistente.",msgType:"warning"}),t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])}))))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.email,r=t.submit,o=t.msg,i=t.msgType;return p.a.createElement("div",{style:Se.container},p.a.createElement("div",{style:Se.content},o&&p.a.createElement(Ce,{message:o,type:i,onClose:function(){return e.setState({msg:"",msgType:""})}}),p.a.createElement("img",{src:a(200),width:150,alt:N.appName,style:Se.logo}),p.a.createElement(ue.a,{component:"h1",variant:"h5"},"Recupera\xe7\xe3o de senha"),p.a.createElement("form",{onSubmit:this.onSubmit,style:Se.form},p.a.createElement(me.a,{variant:"outlined",margin:"normal",fullWidth:!0,placeholder:"Informe seu email de acesso",label:"Email",type:"email",disabled:r,value:n,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({email:t.target.value.toLowerCase()})}}),p.a.createElement(z.a,{disabled:r,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:Se.button,type:"submit"},r?"Carregando...":"Enviar")),p.a.createElement("p",null,p.a.createElement(h.b,{to:"/"},"Voltar para home"))))}}]),n}(d.PureComponent),Me=a(71),Ne=a.n(Me),Ie=a(160),Le=a.n(Ie),We=a(517),Pe=a(7),Fe=a(33),Re=function(e,t){var a=t.name,n=void 0===a?null:a,r=t.init,g=void 0===r||r,b=t.options,h=void 0===b?function(){return{}}:b;return function(t){return function(a){Object(s.a)(d,a);var r=Object(m.a)(d);function d(){var t;Object(l.a)(this,d);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(t=r.call.apply(r,[this].concat(c))).state={loading:!0,reloadedMsg:"",error:null,data:null},t.loadingProperty=n?"".concat(n,"Loading"):"loading",t.reloadedMsgProperty=n?"".concat(n,"ReloadedMsg"):"reloadedMsg",t.errorProperty=n?"".concat(n,"Error"):"error",t.dataProperty=n?"".concat(n,"Data"):"data",t.clearProperty=n?"".concat(n,"Clear"):"clear",t.fetchProperty=n?"".concat(n,"Fetch"):"fetch",t.resolveOptions=function(e){return Object(u.a)({},h(t.props),{},e)},t.loadDataSource=function(){var a=Object(i.a)(o.a.mark((function a(n,r){var i,l,c,s,m;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=t.resolveOptions(r),l=v()(i,"variables"),c=v()(i,"onRequestFinished"),s=v()(i,"onRequestError"),m=null,a.prev=5,a.next=8,e(l);case 8:m=a.sent,a.next=17;break;case 11:if(a.prev=11,a.t0=a.catch(5),!s){a.next=16;break}return a.next=16,s(a.t0);case 16:return a.abrupt("return",n(a.t0,null));case 17:if(!c){a.next=20;break}return a.next=20,c(m);case 20:return a.abrupt("return",n(null,m));case 21:case"end":return a.stop()}}),a,null,[[5,11]])})));return function(e,t){return a.apply(this,arguments)}}(),t.fetch=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(o,i){t.setState({loading:e},(function(){t.loadDataSource((function(e,r){t.setState({data:r,error:e,loading:!1,reloadedMsg:a},(function(){return e?i(e):o(r),n&&n()}))}),r)}))}))},t.clear=function(e){return t.setState({data:null,error:null,loading:!1},e)},t}return Object(c.a)(d,[{key:"componentDidMount",value:function(){g?this.fetch(!0):this.setState({loading:!1,data:{}})}},{key:"render",value:function(){var e,a=Object(u.a)({},this.props,(e={},Object(Fe.a)(e,this.errorProperty,this.state.error),Object(Fe.a)(e,this.dataProperty,this.state.data),Object(Fe.a)(e,this.loadingProperty,this.state.loading),Object(Fe.a)(e,this.reloadedMsgProperty,this.state.reloadedMsg),Object(Fe.a)(e,this.fetchProperty,this.fetch),Object(Fe.a)(e,this.clearProperty,this.clear),e));return p.a.createElement(t,a)}}]),d}(d.PureComponent)}},Ye={getSpace:function(e){return L.get("/spaces/".concat(e))},getSpaces:function(e){return e?L.get("/buildings/".concat(e,"/spaces")):null}},He=a(521),Ve=a(522),qe=a(524),Ue=a(523),ze=Object(d.memo)((function(e){var t=e.classes,a=e.space,n=e.history,r=v()(a,"in_maintenance"),o=r?t.cardDisabled:t.card;return p.a.createElement(U.a,{item:!0,xs:12,sm:6,md:4},p.a.createElement(He.a,{className:o,onClick:function(){r||n.push("/espacos/".concat(a.id))}},p.a.createElement(Ve.a,null,p.a.createElement(Ue.a,{className:t.media,image:a.photo_url,title:a.name}),p.a.createElement(qe.a,null,p.a.createElement(ue.a,{variant:"h6"},p.a.createElement("small",null,a.name,"\xa0"),r&&p.a.createElement("small",{className:t.danger},"(Manuten\xe7\xe3o)"))))))})),Ge=Object(Pe.a)(Object(G.a)((function(){return{card:{marginBottom:10},cardDisabled:{marginBottom:10,background:"#EDEDED"},danger:{color:"red"},media:{height:100}}}),{withTheme:!0}),f.g)(ze),Qe=a(532),_e=a(533),Je=a(556),Ke=a(519),Xe=a(552),Ze=a(529),$e=a(282),et=a(534),tt=a(271),at=a.n(tt),nt=a(270),rt=a.n(nt),ot=a(272),it=a.n(ot),lt=a(467),ct=a(530),st=a(531),mt=a(557),ut=a(113),dt=a.n(ut),pt=a(525),gt=a(170),bt=a(526),ht=a(168),ft=a(527),Et=a(528),vt={width:32,height:32},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"a",t={a:"gold",b:"gold",c:"gold",d:"purple",e:"purple",f:"purple",g:"black",h:"black",i:"black",j:"blue",k:"blue",l:"blue",m:"green",n:"green",o:"green",p:"brown",q:"brown",r:"brown",s:"pink",t:"pink",u:"pink",v:"red",w:"red",y:"red",x:"lime",z:"lime"};return t[e.toLowerCase()]},At=Object(d.memo)((function(e){var t=e.classes,a=e.name,n=e.photoUrl,r=dt()(a)||"";return p.a.createElement(mt.a,{alt:a,src:n,className:t[kt(r)]},r.toUpperCase())})),yt=Object(G.a)((function(e){return{black:Object(u.a)({color:"white",backgroundColor:"black"},vt),purple:Object(u.a)({color:e.palette.getContrastText(pt.a[500]),backgroundColor:pt.a[500]},vt),red:Object(u.a)({color:"white",backgroundColor:X.a[300]},vt),green:Object(u.a)({color:e.palette.getContrastText(ve.a[800]),backgroundColor:ve.a[800]},vt),blue:Object(u.a)({color:e.palette.getContrastText(gt.a[800]),backgroundColor:gt.a[800]},vt),brown:Object(u.a)({color:e.palette.getContrastText(bt.a[500]),backgroundColor:bt.a[500]},vt),pink:Object(u.a)({color:e.palette.getContrastText(ht.a[500]),backgroundColor:ht.a[500]},vt),gold:Object(u.a)({color:"white",backgroundColor:ft.a[900]},vt),lime:Object(u.a)({color:"white",backgroundColor:Et.a[800]},vt)}}),{withTheme:!0})(At),Ct=Object.values(le).filter((function(e){return!e.hideMenu&&!e.settingsMenu})),wt=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={userName:"",userDataError:!1,sideMenuOpen:!1,profileMenuAnchor:null},e.loadData=function(){var t=x.getUserData(),a=v()(t,"member.name",""),n=v()(t,"member.lastname","");e.setState({userName:"".concat(a," ").concat(n)})},e.onLogout=function(){e.setState({profileMenuAnchor:null},(function(){if(window.confirm("Voc\xea deseja sair?")){var t=e.props.history;H.hit("Logout"),x.clear(),t.push("/")}}))},e.onSettings=function(){e.setState({profileMenuAnchor:null},(function(){var t=e.props.history;H.hit("Settings"),t.push("/configuracoes/meu-perfil")}))},e.onToggleSideMenu=function(){var t=e.state.sideMenuOpen;e.setState({sideMenuOpen:!t})},e.onChangePage=function(t,a){e.props.history.push(Ct[a].path)},e.onToggleProfileMenu=function(t){return e.setState({profileMenuAnchor:t.currentTarget})},e.renderErrorAlertBox=function(t){var a=e.props.history;return x.isAuthorized(t)?p.a.createElement(Ce,{type:"error",message:"Erro ao carregar dados do servidor",actionButton:p.a.createElement("b",null,"Recarregar"),onClickAction:function(){return window.location.reload()}}):p.a.createElement(Ce,{type:"error",message:"Sua sess\xe3o expirou, fa\xe7a login novamente",actionButton:p.a.createElement("b",null,"Fazer login"),onClickAction:function(){x.clear(),a.push("/")}})},e.renderWebappUpdateAlertBox=function(){return p.a.createElement(Ce,{type:"success",message:"Uma nova atualiza\xe7\xe3o foi instalada.",actionButton:p.a.createElement("b",null,"Continuar"),onClickAction:function(){return window.location.reload()}})},e.renderAlerts=function(){var t=e.props,a=t.alertBox,n=t.webappUpdated,r=t.error,o=e.state.userDataError,i=r||o;return a||(n?e.renderWebappUpdateAlertBox():i?e.renderErrorAlertBox(i):null)},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"renderSideMenu",value:function(e){var t=this.props,n=t.classes,r=t.history,o=this.state.sideMenuOpen;return p.a.createElement(Je.a,{classes:{paper:n.drawer},variant:e?"persistent":"permanent",anchor:"left",open:o,ModalProps:{keepMounted:!e}},p.a.createElement("div",{className:n.headerLogoContainer},e&&p.a.createElement("div",{className:n.closeMenuIcon},p.a.createElement(Ee.a,{size:"medium",onClick:this.onToggleSideMenu},p.a.createElement(rt.a,null))),p.a.createElement("div",{className:n.logoContainer},p.a.createElement("img",{src:a(426),alt:N.appName,className:n.logo}))),p.a.createElement(Ze.a,{className:n.divider}),p.a.createElement(Ke.a,null,Ct.map((function(e,t){var a=Object.values(e.submenus||{}),o=Boolean(Te()(a)),i={};return o||(i={component:h.b,to:e.path.replace(/:[\w*]+/g,""),selected:e.path.includes(r.location.pathname)}),p.a.createElement("div",{key:t.toString()},p.a.createElement(lt.a,Object.assign({button:!o,key:e.path},i),e.icon&&p.a.createElement(ct.a,{className:n.listItemIcon},e.icon),p.a.createElement(st.a,{className:n.listItemText,disableTypography:!0,primary:e.label})),o&&p.a.createElement(Ke.a,{className:n.submenuList},a.map((function(t){var a="".concat(e.path).concat(t.path);return p.a.createElement(lt.a,{button:!0,className:n.submenuItem,key:a,component:h.b,to:a.replace(/:[\w*]+/g,""),selected:a===r.location.pathname},t.icon&&p.a.createElement(ct.a,{className:n.listItemIcon},t.icon),p.a.createElement(st.a,{className:n.listItemText,disableTypography:!0,primary:t.label}))}))))}))))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.userName,r=a.profileMenuAnchor;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:t.root},p.a.createElement(Qe.a,{position:"fixed",className:t.appBar},p.a.createElement(_e.a,null,p.a.createElement(Ee.a,{"aria-label":"open drawer",onClick:this.onToggleSideMenu,edge:"start"},p.a.createElement(at.a,null)),p.a.createElement("div",{className:t.profileMenuContainer},p.a.createElement(yt,{name:n,photoUrl:""}),p.a.createElement("span",{className:t.userName,onClick:this.onToggleProfileMenu},n),p.a.createElement(Ee.a,{size:"medium",onClick:this.onToggleProfileMenu},p.a.createElement(it.a,null)),p.a.createElement($e.a,{keepMounted:!0,PaperProps:{style:{marginTop:35}},anchorEl:r,open:Boolean(r),onClose:function(){return e.setState({profileMenuAnchor:null})},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},p.a.createElement(et.a,{onClick:this.onSettings},"Configura\xe7\xf5es"),p.a.createElement(et.a,{onClick:this.onLogout},"Sair"))))),p.a.createElement(Xe.a,{smDown:!0},this.renderSideMenu(!1)),p.a.createElement(Xe.a,{smUp:!0},this.renderSideMenu(!0)),this.renderAlerts()))}}]),n}(d.PureComponent),Ot=Object(Pe.a)(Object(G.a)((function(e){var t;return{root:Object(Fe.a)({display:"flex",marginBottom:85},e.breakpoints.up("md"),{marginBottom:95}),drawer:(t={},Object(Fe.a)(t,e.breakpoints.up("md"),{width:e.menuWidth,flexShrink:0}),Object(Fe.a)(t,"background","#FAFAFA"),Object(Fe.a)(t,"color","#313131"),t),appBar:{backgroundColor:"#FAFAFA",width:"calc(100%-".concat(e.menuWidth,"px)"),borderBottom:"1px solid rgba(0, 0, 0, 0.12)",boxShadow:"none"},profileMenuContainer:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%",marginRight:-15},userName:{color:"#313131",fontSize:14,cursor:"pointer",marginRight:5,marginLeft:10},towerSelect:{width:200,color:"#313131",borderColor:"#FAFAFA",backgroundColor:"#FAFAFA",marginTop:10},logoutButton:{color:"red",fontSize:16,fontWeight:"bold",textTransform:"none"},headerLogoContainer:{width:"100%",display:"flex",paddingTop:5,paddingBottom:2,paddingRight:20},logoContainer:Object(Fe.a)({marginLeft:0,color:"#313131",paddingTop:5},e.breakpoints.up("md"),{paddingTop:9,paddingBottom:4,marginLeft:15}),closeMenuIcon:{display:"inline-block",color:"#313131",marginLeft:0},logo:{width:105,height:39},checkIcon:{marginRight:10},listItemIcon:{color:"#313131",fontSize:12},listItemText:{marginLeft:-25,fontSize:12,color:"#313131"},submenuList:{marginBottom:-8,marginTop:-8},submenuItem:{paddingLeft:75}}}),{withTheme:!0}),f.g,Object(Pe.e)("webappUpdated","setWebappUpdated",!1))(wt),Tt=function(e){var t;return{container:(t={width:"auto",height:"100%",maxHeight:"100%",marginBottom:20},Object(Fe.a)(t,e.breakpoints.up("md"),{paddingLeft:e.menuWidth,width:"calc(100%-".concat(2*e.menuWidth,"px)"),minWidth:"calc(100%-".concat(2*e.menuWidth,"px)"),maxWidth:"calc(100%-".concat(2*e.menuWidth,"px)"),marginLeft:"auto",marginRight:"auto"}),Object(Fe.a)(t,e.breakpoints.up("xl"),{width:e.maxContainerWidth,minWidth:e.maxContainerWidth,maxWidth:e.maxContainerWidth,marginLeft:"auto",marginRight:"auto"}),t),root:Object(Fe.a)({flexGrow:1,marginRight:10,marginLeft:10},e.breakpoints.up("md"),{marginRight:40,marginLeft:40}),headerView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"flex-start"},centerHeaderView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center",alignItems:"center",marginTop:120},tableCell:{color:"#003f54",fontSize:14,height:"auto",wordBreak:"break-word"},tableSmallCell:{color:"#003f54",fontSize:14,height:"auto",width:160,maxWidth:160,minWidth:160,wordBreak:"break-word"},bgGray:{backgroundColor:"#EEE"},bgWhite:{backgroundColor:"#FFF"},roleSelect:{fontSize:14},inputBox:{marginTop:10},selectBox:{width:200,marginTop:10},center:{display:"flex",justifyContent:"center",textAlign:"center"},emptyHeaderIcon:{fontSize:32},emptyHeaderTitle:{marginLeft:10},paper:{padding:20,paddingBottom:30},input:{marginTop:20},actions:{marginTop:20,display:"flex",width:"100%",justifyContent:"flex-end"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}},Bt=v()(x.getUserData(),"buildings[0].id"),jt=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.spacesData,l=e.spacesError,c=e.spacesFetch,s=e.spacesLoading,m=e.setBuildingId,u=e.buildingId,d=a.showAlert,g=a.alertMsg,b=a.alertType,h=null;d&&(h=p.a.createElement(Ce,{message:g,type:b,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}}));var f=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.target.value),c(!0),a={select_building:t.target.value},H.hit("Spaces - FilteredByBuilding",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=v()(r,"spaces",[]),k=se()(v()(x.getUserData(),"buildings",[]),["name"]);return p.a.createElement("div",{className:t.root},p.a.createElement(Ot,{alertBox:h,error:l}),p.a.createElement("section",null,p.a.createElement("div",{className:t.container},p.a.createElement("div",{className:t.headerView},p.a.createElement("aside",null,p.a.createElement(ue.a,{variant:"h5"},p.a.createElement("b",null,Te()(E)?"Reserva de espa\xe7os (".concat(Te()(E),")"):"Reserva de espa\xe7os")))),p.a.createElement(U.a,{container:!0,spacing:1},p.a.createElement(U.a,{item:!0,xs:12,sm:6,md:3},p.a.createElement(We.a,{fullWidth:!0},p.a.createElement(me.a,{select:!0,label:"Pr\xe9dio",className:t.selectBox,value:u,SelectProps:{native:!0},InputLabelProps:{shrink:!0},onChange:f},k.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.name)}))))))),p.a.createElement("div",{className:t.container},p.a.createElement(U.a,{container:!0,spacing:1},s?p.a.createElement(J,null):Ne()(E)?p.a.createElement("div",{className:t.centerHeaderView},p.a.createElement(Le.a,{className:t.emptyHeaderIcon}),p.a.createElement("b",{className:t.emptyHeaderTitle},"Este pr\xe9dio n\xe3o possui espa\xe7o para reserva")):E.map((function(e){return p.a.createElement(Ge,{key:e.id,space:e})}))))))})),Dt=Re(Ye.getSpaces,{name:"spaces",options:function(e){return{variables:e.buildingId}}}),St=Object(Pe.a)(Object(G.a)((function(e){return Object(u.a)({},Tt(e))}),{withTheme:!0}),Object(Pe.e)("buildingId","setBuildingId",Bt),Object(Pe.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Dt)(jt),xt=a(35),Mt=a.n(xt),Nt=a(173),It=a.n(Nt),Lt={getBookings:function(e){var t=e.spaceId,a=e.from,n=e.to;return L.get("/spaces/".concat(t,"/space_bookings?from=").concat(O()(a).toISOString(),"&to=").concat(O()(n).toISOString()))},createBookings:function(e){var t={title:v()(e,"title"),space_id:v()(e,"spaceId"),booking_date:v()(e,"bookingDate"),periods:v()(e,"periods",[])};return L.post("/space_bookings",t)},cancelBooking:function(e){return L.put("/space_bookings/".concat(e,"/cancel"))}},Wt=(a(427),a(428),a(2)),Pt=a.n(Wt),Ft=a(131),Rt=a(276),Yt=a.n(Rt),Ht={calendar:{height:575},pastBox:{backgroundColor:"#777",borderColor:"#555"},ownerBox:{backgroundColor:"#1177FF"},busyBox:{backgroundColor:"#92b4bf"}},Vt=Object(Ft.c)(O.a),qt=[{key:Ft.b.WEEK,value:"Semanal"},{key:Ft.b.MONTH,value:"Mensal"}],Ut=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.onNavigate,r=t.view,o=t.loading;return p.a.createElement("div",{className:"rbc-toolbar"},p.a.createElement("div",{className:"rbc-btn-group"},qt.map((function(t){var a=t.key,n=t.value,i=r===a?"rbc-active":"",l=e.view.bind(null,a);return p.a.createElement("button",{key:a,type:"button",disabled:o,className:i,onClick:l},n)}))),p.a.createElement("b",{className:"rbc-toolbar-label"},o?"Carregando...":a),p.a.createElement("div",{className:"rbc-btn-group"},p.a.createElement("button",{type:"button",disabled:o,onClick:function(){return n("PREV")}},"\u2190"),p.a.createElement("button",{type:"button",disabled:o,onClick:function(){return n("TODAY")}},"Hoje"),p.a.createElement("button",{type:"button",disabled:o,onClick:function(){return n("NEXT")}},"\u2192")))}}]),a}(Yt.a);Ut.propTypes={loading:Pt.a.bool};var zt=Object(d.memo)((function(e){var t=e.data,a=e.view,n=e.onView,r=e.onRangeChange,o=e.loading,i=e.eventComponent,l=e.onSelectBooking;return p.a.createElement(Ft.a,{resizable:!0,events:t,localizer:Vt,view:a,onView:n,startAccessor:"from",endAccessor:"to",step:30,onRangeChange:r,scrollToTime:O()(6,"HH").toDate(),culture:N.locale,eventPropGetter:function(e){return{style:(t=e,O()(t.bookingDate).isBefore()?Ht.pastBox:t.busy?Ht.busyBox:Ht.ownerBox)};var t},components:{event:i,toolbar:function(e){return p.a.createElement(Ut,Object.assign({loading:o},e))}},style:Ht.calendar,onSelectEvent:l})}));zt.propTypes={data:Pt.a.array,eventComponent:Pt.a.func,onView:Pt.a.func,view:Pt.a.string,loading:Pt.a.bool,onSelectBooking:Pt.a.func,onRangeChange:Pt.a.func};var Gt=zt,Qt=a(468),_t=a(469),Jt=a(470),Kt=a(536),Xt=a(551),Zt=a(464),$t=a(538),ea=a(539),ta=a(79),aa=a(27),na=a(537),ra=a(101),oa=a.n(ra),ia=a(128),la=a.n(ia),ca={getCalendar:function(e){var t=e.spaceId,a=e.bookingDate;return e.readOnly?new Promise((function(e){return e({})})):L.get("/spaces/".concat(t,"/space_calendars?booking_date=").concat(O()(a).toISOString()))}},sa=O()().add(1,"day").toDate(),ma=function(){return{title:"",busy:!1,bookingDate:sa,periods:la()([])}},ua=Object(d.memo)((function(e){var t=e.classes,a=e.open,n=e.setOpen,r=e.calendarLoading,l=e.isMonthView,c=e.space,s=e.bookingData,m=e.calendarFetch,d=e.submitBookingFetch,g=e.submitBookingLoading,b=e.cancelBookingFetch,h=e.cancelBookingLoading,f=e.readOnly,E=e.openModalButton,v=e.setBookingState,k=e.calendar,y=e.setCalendar,C=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(!0),H.hit("SpaceBookingModal - Viewed"),e.next=5,m(!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(ma());case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),w=function(){H.hit("SpaceBookingModal - Closed"),f||v(ma()),n(!1)},T=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y([]),v({bookingDate:t,periods:la()([])}),e.next=5,m(!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(ma());case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),B=function(e,t){var a=s.periods;try{var n=JSON.parse(e.currentTarget.value);t?(a.push(n),v({periods:a})):v({periods:a.filter((function(e){return e.label!==n.label}))})}catch(r){v(ma())}},j=s.id,D=s.title,S=s.bookingDate,x=s.periods,M=s.busy,I=g||r,L=j&&f,W=O()(S).isBefore(),P=!f&&Te()(k);return p.a.createElement(p.a.Fragment,null,E?p.a.createElement("div",{className:l?t.monthViewButton:t.timeViewButton,onClick:C},E):p.a.createElement(z.a,{onClick:C,size:"large",variant:"contained",color:"primary"},"Reservar"),p.a.createElement(Qt.a,{open:Boolean(a),maxWidth:"md",onClose:w,keepMounted:!0},p.a.createElement(U.a,{container:!0,className:t.container},p.a.createElement(U.a,{item:!0,xs:12,sm:12,md:6},p.a.createElement(Kt.a,null,c.name),p.a.createElement(_t.a,{className:t.dialogContent},p.a.createElement("div",{dangerouslySetInnerHTML:{__html:c.description}}))),p.a.createElement(U.a,{item:!0,xs:12,sm:12,md:6},p.a.createElement(Kt.a,null,f?D:"Reservar espa\xe7o",p.a.createElement(Ee.a,{className:t.closeButton,onClick:w},p.a.createElement(fe.a,null))),p.a.createElement(_t.a,{className:t.dialogContent},!f&&p.a.createElement(We.a,{className:t.inputField},p.a.createElement(me.a,{fullWidth:!0,label:"Tit\xfalo",margin:"normal",disabled:I||f,InputLabelProps:{shrink:!0},value:D,onChange:function(e){return v({title:e.target.value})}})),p.a.createElement(We.a,{className:t.inputField},p.a.createElement(aa.a,{libInstance:O.a,utils:ta.a,locale:N.locale},p.a.createElement(na.a,{className:t.calendarInputField,label:"Data da reserva",invalidDateMessage:"Formato inv\xe1lido",variant:"dialog",disabled:I||f,value:S,onChange:T,minDate:sa,format:"DD/MM/YYYY",cancelLabel:"Cancelar",minDateMessage:""}))),p.a.createElement(We.a,{className:t.checkboxArea},p.a.createElement(Zt.a,{className:t.inputLabel},"Hor\xe1rios"),r?p.a.createElement("div",{className:t.loading},p.a.createElement(J,null)):p.a.createElement($t.a,null,L?A()(x,(function(e){var a="".concat(O()(e.from).format("HH:mm"),"-").concat(O()(e.to).format("HH:mm"));return p.a.createElement(ea.a,{key:a,label:a,classes:{label:t.period},control:p.a.createElement(Xt.a,{checked:!0,disabled:!0})})})):Te()(k)?A()(k,(function(e){var a="".concat(e.from,"-").concat(O()(e.to,"HH:mm").add(1,"minute").format("HH:mm")),n=I||f||!e.available,r=e.available?t.period:t.periodBusy,o=!n&&!Ne()(oa()(x,(function(e){return e.label===a})));return p.a.createElement(ea.a,{key:a,label:a,classes:{label:r},control:p.a.createElement(Xt.a,{color:"primary",checked:o,disabled:n,onChange:B,value:JSON.stringify(Object(u.a)({},e,{label:a}))})})})):p.a.createElement("span",{className:t.error},p.a.createElement("br",null),"N\xe3o h\xe1 hor\xe1rios dispon\xedveis nessa data")))),p.a.createElement(Jt.a,{className:t.dialogAction},M||W?p.a.createElement(z.a,{onClick:w,size:"large"},"Fechar"):L?p.a.createElement(p.a.Fragment,null,p.a.createElement(z.a,{onClick:w,size:"large",disabled:h},"Fechar"),p.a.createElement(z.a,{onClick:function(){window.confirm("Tem certeza em realizar essa a\xe7\xe3o?")&&b(!0)},size:"large",color:"secondary",variant:"contained",disabled:h},"Remover")):p.a.createElement(p.a.Fragment,null,p.a.createElement(z.a,{onClick:w,disabled:I,size:"large"},"Fechar"),p.a.createElement(z.a,{onClick:function(){return d(!0)},size:"large",color:"primary",variant:"contained",disabled:I||!P,className:t.submitButton},g?"Reservando...":"Reservar")))))))})),da=Re(ca.getCalendar,{name:"calendar",options:function(e){var t=e.space,a=e.setCalendar,n=e.readOnly,r=e.bookingData.bookingDate;return{variables:{spaceId:v()(t,"id"),readOnly:n,bookingDate:r},onRequestFinished:function(e){a(v()(e,"space_calendars",[]))},onRequestError:function(){a([])}}}}),pa=Re(Lt.createBookings,{name:"submitBooking",init:!1,options:function(e){var t=e.bookingData,a=e.setBookingState,n=e.setOpen,r=e.space,o=e.onRequestBooking;return{variables:Object(u.a)({},t,{spaceId:v()(r,"id")}),onRequestFinished:function(){H.hit("SpaceBooking - Added",{}),a(ma()),n(!1),o()},onRequestError:o}}}),ga=Re(Lt.cancelBooking,{name:"cancelBooking",init:!1,options:function(e){var t=e.bookingData,a=e.onRequestBooking,n=e.setOpen;return{variables:v()(t,"id"),onRequestFinished:function(){H.hit("SpaceBooking - Canceled",{}),n(!1),a()},onRequestError:a}}}),ba=Object(Pe.a)(Object(G.a)((function(e){return Object(u.a)({},Tt(e),{container:{flexGrow:1,paddingBottom:15},calendarInputField:{maxWidth:180,marginBottom:10},inputField:{display:"block",maxWidth:265,marginBottom:20},checkboxArea:{marginBottom:20},inputLabel:{fontSize:12},period:{fontSize:12},periodBusy:{fontSize:12,textDecoration:"line-through"},timeViewButton:{width:"100vw",minWidth:"100vw",maxWidth:"100vw",height:"100vh",maxHeight:"100vh",minHeight:"100vh",marginLeft:-10,paddingLeft:10,marginTop:-20,paddingTop:20},monthViewButton:{width:"100vw",minWidth:"100vw",maxWidth:"100vw",marginLeft:-10,paddingLeft:10,marginTop:-20,paddingTop:20},loading:{width:275},error:{color:"red"},dialogContent:{marginTop:-20},dialogAction:{paddingLeft:20,paddingRight:20}})}),{withTheme:!0}),Object(Pe.e)("open","setOpen",!1),Object(Pe.e)("bookingData","setBookingData",ma()),Object(Pe.e)("calendar","setCalendar",[]),Object(Pe.e)("disableAction","setDisableAction",!1),Object(Pe.c)({setBookingState:function(e){var t=e.setBookingData,a=e.bookingData;return function(e){t(Object(u.a)({},a,{},e))}}}),Object(Pe.b)({componentDidMount:function(){var e=this.props,t=e.selectedBookingData,a=e.setBookingData,n=e.space;if(t){var r=t.event,o=r.id,i=r.title,l=r.from,c=r.to;a({id:o,title:i,bookingDate:r.bookingDate,busy:r.busy,spaceId:n.id,periods:[{from:l,to:c,label:"".concat(l,"-").concat(c)}]})}}}),da,ga,pa)(ua),ha=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.bookingsFetch,l=e.match,c=e.setRangeDates,s=e.bookingsData,m=e.bookingsError,u=e.bookingsLoading,d=e.spaceData,g=e.spaceError,b=e.spaceLoading,h=e.calendarView,f=e.setCalendarView,E=a.showAlert,k=a.alertMsg,y=a.alertType,C=function(e){return n({alertMsg:e,alertType:"error",showAlert:!0})},w=function(e){return n({alertMsg:e,alertType:"success",showAlert:!0})},T=null;E&&(T=p.a.createElement(Ce,{message:k,type:y,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}}));var B=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.params.id,e.prev=1,a=Mt()(t)?{spaceId:n,from:dt()(t),to:It()(t)}:{spaceId:n,from:t.start,to:t.end},c({from:a.from,to:a.to}),e.next=6,r(!0,"",null,{variables:a});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),C(v()(e.t0,"error")||"Erro ao atualizar calend\xe1rio");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}a=v()(t,"errors.periods",[]).join(", "),C(a||"Ocorreu um erro ao reservar espa\xe7o"),e.next=9;break;case 6:return w("Reservado com sucesso"),e.next=9,r(!0);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),C("Erro ao atualizar calend\xe1rio");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}a=v()(t,"errors.booking_date",[]).join(", "),C(a||"Ocorreu um erro ao cancelar esta reserva"),e.next=9;break;case 6:return w("Reserva cancelada com sucesso"),e.next=9,r(!0);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),C("Erro ao atualizar calend\xe1rio");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),S=v()(d,"space",{}),x=v()(s,"space_bookings",[]),M=g||m,N=A()(x,(function(e){return{id:e.id,title:e.title||"N\xe3o dispon\xedvel",bookingDate:O()(e.booking_date).toDate(),from:O()(e.booking_date).hour(dt()(e.from.split(":"))).minute(It()(e.from.split(":"))).toDate(),to:O()(e.booking_date).hour(dt()(e.to.split(":"))).minute(It()(e.to.split(":"))).add(1,"minute").toDate(),busy:!e.title}}));return p.a.createElement("div",{className:t.root},p.a.createElement(Ot,{alertBox:T,error:M}),p.a.createElement("section",null,!b&&p.a.createElement("div",{className:t.container},p.a.createElement("div",{className:t.headerView},p.a.createElement("aside",null,p.a.createElement(ue.a,{variant:"h5"},p.a.createElement("b",null,S.name))),p.a.createElement("aside",{className:t.newBooking},p.a.createElement(ba,{space:S,onRequestBooking:j})))),p.a.createElement("div",{className:t.container},b?p.a.createElement(J,null):p.a.createElement(Gt,{data:N,onView:f,onRangeChange:B,view:h,loading:u,eventComponent:function(e){return p.a.createElement(ba,{readOnly:!0,space:S,isMonthView:"month"===h,onRequestBooking:D,selectedBookingData:e,openModalButton:p.a.createElement(p.a.Fragment,null,e.title)})}}))))})),fa=Re(Ye.getSpace,{name:"space",options:function(e){return{variables:e.match.params.id}}}),Ea=Re(Lt.getBookings,{name:"bookings",options:function(e){var t=e.match.params.id,a=e.rangeDates;return{variables:{spaceId:t,from:a.from,to:a.to}}}}),va=Object(Pe.a)(Object(G.a)((function(e){return Object(u.a)({},Tt(e))}),{withTheme:!0}),Object(Pe.e)("rangeDates","setRangeDates",{from:O()().startOf("week").toDate(),to:O()().endOf("week").toDate()}),Object(Pe.e)("calendarView","setCalendarView","week"),Object(Pe.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),fa,Ea)(ha),ka=a(277),Aa=a.n(ka),ya=a(164),Ca=a.n(ya),wa=a(174),Oa=a.n(wa),Ta={getVisitors:function(e){var t=e.page,a=void 0===t?0:t,n=e.perPage,r=void 0===n?20:n,o=e.month,i=void 0===o?11:o,l=e.year,c=e.buildingId;return c?L.get("/visitors",{page:a,per_page:r,month:i,year:l,building_id:c}):null},createVisitors:function(e){var t=e.visitorData,a={company_id:e.companyId,visitor_company:e.visitorCompany,visit_hour:e.visitTime,visit_date:e.visitDate,host_member_id:e.hostMemberId,building_id:e.buildingId},n=t.map((function(e){return Object(u.a)({},e,{},a)}));return L.post("/visitors",{visitors:n})},deleteVisitor:function(e){return L.put("/visitors/".concat(e,"/cancel"))}},Ba={getMembers:function(){return L.get("/members")},getMember:function(e){return L.get("/members/".concat(e))},updateBuildingRole:function(e){var t=e.memberId,a=e.buildingId,n=e.role;return L.put("/enterprise_users/update_role",{member_id:t,building_id:a,role:n})},blockMember:function(e){return L.put("/members/".concat(e,"/block"))},updateMember:function(e){var t=e.id,a=e.name,n=e.lastname,r=e.phone,o=e.role,i=e.buildingIds;return L.put("/members/".concat(t),{id:t,name:a,lastname:n,phone:r,role:o,building_ids:i})}},ja=a(266),Da=a(518),Sa=a(555),xa=a(520),Ma=a(86),Na=a.n(Ma),Ia=function(e){return Object(u.a)({},Tt(e),{submitButton:{fontWeight:"bold"},dialogContent:{maxWidth:660},inputField:{marginTop:-15,padding:"0 10px",width:"100%"},calendarInputField:{marginTop:10},selectLabel:{position:"relative",fontSize:14,paddingBottom:3},inputLabel:{padding:"20px 12px"},selectBox:{paddingTop:16},button:{fontWeight:"bold",margin:"0 20px"},addVisitorButton:{fontWeight:"bold",marginTop:"15px",maxWidth:"40px",maxHeight:"40px",minWidth:"40px",minHeight:"40px",marginRight:"10px"},deleteVisitorButton:{fontWeight:"bold",marginTop:"15px",backgroundColor:"#EE3C3C",color:"#FFF","&:hover":{backgroundColor:"#EE3C3C"},maxWidth:"40px",maxHeight:"40px",minWidth:"40px",minHeight:"40px",marginRight:"10px"},visitorsContainer:{display:"flex",justifyContent:"space-between"},buttonContainer:{display:"flex",justifyContent:"flex-end"},actions:{marginTop:30,marginBottom:10,display:"flex",justifyContent:"center"}})},La=x.getUserData(),Wa=function(){return{visitorData:la()([{name:"",email:""}]),visitorCompany:"",visitTime:O()(new Date).add(1,"hour").minute(0).toDate(),visitDate:new Date,hostMemberId:v()(La,"member.id",""),buildingId:v()(La,"buildings[0].id","")}},Pa=Object(d.memo)((function(e){var t=e.classes,a=e.open,n=e.setOpen,r=e.loading,o=e.setMemberState,i=e.members,l=e.memberData,c=e.buildings,s=e.submitFetch,m=e.submitLoading,u=e.submitError,d=function(){var e=l.visitorData;e.splice(1,0,{name:"",email:""}),o({visitorData:e})},g=function(){H.hit("VisitorModal - Closed"),o(Wa()),n(!1)},b=Na()(v()(u,"errors",{}),(function(e){return e[0]})),h=l.visitorCompany,f=l.visitTime,E=l.visitDate,k=l.hostMemberId,A=l.visitorData,y=l.buildingId,C=r||m;return p.a.createElement("div",null,p.a.createElement(z.a,{onClick:function(){H.hit("VisitorModal - Viewed"),o(Wa()),n(!0)},size:"large",variant:"contained",color:"primary"},"Nova visita"),p.a.createElement(Qt.a,{open:a,maxWidth:"md",onClose:g,keepMounted:!0},p.a.createElement(Kt.a,null,"Novo visitante",p.a.createElement(Ee.a,{className:t.closeButton,onClick:g},p.a.createElement(fe.a,null))),p.a.createElement(_t.a,{className:t.dialogContent},p.a.createElement(U.a,{container:!0,spacing:2},A.map((function(e,a){return p.a.createElement(p.a.Fragment,{key:a.toString()},p.a.createElement(U.a,{item:!0,xs:12,sm:6},p.a.createElement(We.a,{error:!!b.name,className:t.inputField},p.a.createElement(me.a,{error:!!b.name,fullWidth:!0,label:"Nome do visitante",margin:"normal",InputLabelProps:{shrink:!0},value:A[a].name,disabled:C,onChange:function(e){return function(e,t){var a=l.visitorData;a[t].name=e.target.value,o({visitorData:a})}(e,a)}}),b.name&&p.a.createElement(xa.a,null,b.name))),p.a.createElement(U.a,{item:!0,xs:10,sm:5},p.a.createElement(We.a,{error:!!b.email,className:t.inputField},p.a.createElement(me.a,{error:!!b.email,fullWidth:!0,label:"E-mail do visitante",margin:"normal",InputLabelProps:{shrink:!0},value:A[a].email,disabled:C,onChange:function(e){return function(e,t){var a=l.visitorData;a[t].email=e.target.value,o({visitorData:a})}(e,a)}}),b.email&&p.a.createElement(xa.a,null,b.email))),p.a.createElement(U.a,{item:!0,xs:2,sm:1},p.a.createElement("div",{className:t.buttonContainer},a?p.a.createElement(z.a,{tabIndex:"-1",onClick:function(){return function(e){var t=l.visitorData;t.splice(e,1),o({visitorData:t})}(a)},variant:"contained",disabled:C,className:t.deleteVisitorButton},"-"):p.a.createElement(z.a,{onClick:d,color:"primary",variant:"contained",disabled:C,className:t.addVisitorButton},"+"))))})),p.a.createElement(p.a.Fragment,null,p.a.createElement(U.a,{item:!0,xs:12,sm:6},p.a.createElement(We.a,{className:t.inputField,error:!!b.visitorCompany},p.a.createElement(me.a,{error:!!b.visitorCompany,fullWidth:!0,label:"Empresa do visitante/evento",margin:"normal",InputLabelProps:{shrink:!0},value:h,disabled:C,onChange:function(e){return o({visitorCompany:e.target.value})}}),b.visitorCompany&&p.a.createElement(xa.a,null,b.visitorCompany))),p.a.createElement(U.a,{item:!0,xs:12,sm:6},p.a.createElement(We.a,{className:t.inputField,error:!!b.host_member},p.a.createElement(Da.a,{shrink:!0,className:t.inputLabel},"Pessoa visitada"),p.a.createElement(ja.a,{fullWidth:!0,className:t.selectBox,value:k,disabled:C,onChange:function(e){return o({hostMemberId:e.target.value})}},i.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},"".concat(e.name," ").concat(e.lastname))}))),b.members&&p.a.createElement(xa.a,null,b.members)))),p.a.createElement(p.a.Fragment,null,p.a.createElement(U.a,{item:!0,xs:6},p.a.createElement(We.a,{className:t.inputField,error:!!b.visitorCompany},p.a.createElement(aa.a,{libInstance:O.a,utils:ta.a,locale:N.locale},p.a.createElement(na.a,{className:t.calendarInputField,style:Ia.components,label:"Data da visita",invalidDateMessage:"Formato inv\xe1lido",variant:"dialog",value:E,disabled:C,onChange:function(e){return o({visitDate:e})},minDate:new Date,format:"DD/MM/YYYY",cancelLabel:"Cancelar"})))),p.a.createElement(U.a,{item:!0,xs:6},p.a.createElement(We.a,{className:t.inputField,error:!!b.visitorCompany},p.a.createElement(aa.a,{libInstance:O.a,utils:ta.a,locale:N.locale},p.a.createElement(Sa.a,{className:t.calendarInputField,style:Ia.components,ampm:!1,minutesStep:5,variant:"dialog",label:"Hor\xe1rio",value:f,disabled:C,onChange:function(e){return o({visitTime:e})},cancelLabel:"Cancelar"})))),p.a.createElement(U.a,{item:!0,xs:12,sm:6},p.a.createElement(We.a,{className:t.inputField},p.a.createElement(Da.a,{shrink:!0,className:t.inputLabel},"Pr\xe9dio"),p.a.createElement(ja.a,{fullWidth:!0,className:t.selectBox,value:y,disabled:C,onChange:function(e){return o({buildingId:e.target.value})}},c.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.name)})))))))),p.a.createElement(Jt.a,{className:t.actions},p.a.createElement(z.a,{onClick:g,size:"large",disabled:C},"Cancelar"),p.a.createElement(z.a,{onClick:function(){return s(!0)},size:"large",color:"primary",variant:"contained",disabled:C,style:Ia.submitButton},m?"Autorizando...":"Autorizar"))))})),Fa=Re(Ta.createVisitors,{name:"submit",init:!1,options:function(e){var t=e.onCreateVisitor,a=e.memberData,n=e.setOpen,r=e.setMemberState,o=e.companyId;return{variables:Object(u.a)({},a,{companyId:o}),onRequestFinished:function(){H.hit("NewVisitor - Added"),n(!1),r(Wa()),t()},onRequestError:function(e){t(e)}}}}),Ra=Object(Pe.a)(Object(G.a)(Ia,{withTheme:!0}),Object(Pe.e)("open","setOpen",!1),Object(Pe.e)("memberData","setMemberData",Wa()),Object(Pe.c)({setMemberState:function(e){var t=e.setMemberData,a=e.memberData;return function(e){t(Object(u.a)({},a,{},e))}}}),Fa)(Pa),Ya=a(542),Ha=a(544),Va=a(541),qa=a(543),Ua=a(540),za=a(132),Ga=function(e){return Object(u.a)({},Tt(e),{createNotificationButton:{backgroundColor:"#1177FF",border:"none",width:200,height:50},button:{marginTop:20,marginRight:20},buttonContainer:{display:"flex",justifyContent:"center"},showMoreButton:{width:220}})},Qa={ACCEPTED:"Autorizado",PENDING:"Pendente",CANCELED:"Cancelado"},_a=Object(d.memo)((function(e){var t=e.classes,a=e.index,n=e.visitor,r=e.onCancelVisitor,o=v()(n,"id"),i="".concat(v()(n,"name")," ").concat(v()(n,"visitor_company")||""),l="".concat(v()(n,"host_member.name")," ").concat(v()(n,"host_member.lastname")),c=v()(n,"host_member.email"),s="".concat(v()(n,"inviter.name")," ").concat(v()(n,"inviter.lastname")),m=v()(n,"inviter.email"),u=v()(n,"visit_date"),d=O()(v()(n,"visit_hour")),g=v()(n,"checkin_at"),b=O()(u).hour(d.hour()).minute(d.minute());return p.a.createElement(Ua.a,{className:a%2?t.bgWhite:t.bgGray},p.a.createElement(Va.a,{className:t.tableCell},u?"".concat(O()(u).format("DD/MM/YYYY")):"--",p.a.createElement("br",null),d?"".concat(O()(d).format("HH:mm")):"--"),p.a.createElement(Va.a,{className:t.tableCell},Qa[n.status],p.a.createElement("br",null),g?O()(g).format("DD/MM/YY HH:mm"):""),p.a.createElement(Va.a,{className:t.tableCell},i),p.a.createElement(Va.a,{className:t.tableCell},l,p.a.createElement("br",null),p.a.createElement("small",null,c)),p.a.createElement(Va.a,{className:t.tableCell},s,p.a.createElement("br",null),p.a.createElement("small",null,m)),p.a.createElement(Va.a,{className:t.tableSmallCell},"ACCEPTED"!==n.status&&O()(b).isAfter(O()().startOf("day"))&&p.a.createElement("button",{type:"button",className:t.clearButton,onClick:function(){return r(o)}},p.a.createElement(fe.a,null))))})),Ja=Object(G.a)((function(e){return Object(u.a)({},Ga(e),{clearButton:{display:"flex",justifyContent:"center",alignItems:"center",padding:7,marginLeft:5,borderRadius:50,borderWidth:0,borderStyle:"none",borderImage:"none",backgroundColor:"#EE3C3C",cursor:"pointer",color:"#fff","&:hover":{color:"#fff",backgroundColor:"#EE2C3C"}}})}),{withTheme:!0})(_a),Ka=Object(d.memo)((function(e){var t=e.classes,a=e.visitors,n=e.loading,r=e.onCancelVisitor;return p.a.createElement("div",{className:t.container},p.a.createElement(za.a,{className:t.paper},p.a.createElement(Ya.a,null,p.a.createElement(qa.a,null,p.a.createElement(Ua.a,null,p.a.createElement(Va.a,{className:t.tableCell},"DATA VISITA"),p.a.createElement(Va.a,{className:t.tableCell},"STATUS"),p.a.createElement(Va.a,{className:t.tableCell},"VISITANTE"),p.a.createElement(Va.a,{className:t.tableCell},"VISITA PARA"),p.a.createElement(Va.a,{className:t.tableCell},"CRIADO POR"),p.a.createElement(Va.a,{className:t.tableCell},"A\xc7\xc3O"))),p.a.createElement(Ha.a,null,n?p.a.createElement(Ua.a,null,p.a.createElement(Va.a,{colSpan:6,align:"center"},p.a.createElement(J,null))):Te()(a)?a.map((function(e,t){return p.a.createElement(Ja,{index:t,key:e.id,visitor:e,loading:n,onCancelVisitor:r})})):p.a.createElement(Ua.a,null,p.a.createElement(Va.a,{className:t.empty,colSpan:6,align:"center"},"Nenhum visitante registrado"))))))})),Xa=Object(G.a)({container:{marginBottom:40,paddingTop:20},empty:{backgroundColor:"#EEE"},paper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},tableCell:{fontSize:14,width:140,maxWidth:140,minWidth:140}},{withTheme:!0})(Ka),Za=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.setBuildingId,r=e.setMonth,l=e.setYear,c=e.setVisitors,s=e.setDisableSeeMore,m=e.membersData,u=e.visitors,d=e.page,g=e.setPage,b=e.buildingId,h=e.setHideSeeMore,f=e.visitorsFetch,E=e.visitorsLoading,k=e.visitorsError,A=e.disableSeeMore,y=e.classes,C=e.month,w=e.year,T=e.hideSeeMore,B=e.totalVisitors,j=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=O()(t.target.value,"YYYY-MM"),r(a.month()),l(a.year()),S(),n={select_month:a.month()+1,select_year:a.year()},H.hit("Visitors - FilteredByMonth",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t.target.value),S(),a={select_building:t.target.value},H.hit("Visitors - FilteredByBuilding",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),g(0),e.next=5,f(!0);case 5:t=e.sent,a=Oa()(v()(t,"visitors",[]),"id"),c(a),s(!1),h(Ne()(a)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),s(!1),h(!0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),g(d+1),e.next=5,f(!1);case 5:t=e.sent,a=v()(t,"visitors",[]),c(Oa()(Aa()(u,a),"id")),s(!1),h(Ne()(a)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),s(!1),c(u),h(!0);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Deseja cancelar a visita?")){e.next=12;break}return e.prev=1,e.next=4,Ta.deleteVisitor(t);case 4:return e.next=6,f(!0);case 6:a({alertMsg:"Visitante cancelado com sucesso",alertType:"success",showAlert:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a({alertMsg:"Ocorreu um erro no cancelamento da visita",alertType:"error",showAlert:!0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}a({alertMsg:"Ocorreu um erro ao registrar visitante",alertType:"error",showAlert:!0}),e.next=13;break;case 4:return e.prev=4,a({alertMsg:"Visitante autorizado com sucesso",alertType:"success",showAlert:!0}),e.next=8,f(!0);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),a({alertMsg:"Ocorreu um erro atualizar lista de visitantes",alertType:"error",showAlert:!0});case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),L=Boolean(!E&&!((Te()(u)||1)===B)),W=x.getUserData(),P=v()(W,"member.company.id"),F=se()(v()(W,"buildings",[]),["name"]),R=t.showAlert,Y=t.alertMsg,V=t.alertType,q=null;R&&(q=p.a.createElement(Ce,{message:Y,type:V,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var G=v()(m,"members",[]),Q=E,_=Q;return p.a.createElement("div",{className:y.root},p.a.createElement(Ot,{alertBox:q,error:k}),p.a.createElement("section",null,p.a.createElement("div",{className:y.container},p.a.createElement("div",{className:y.headerView},p.a.createElement("aside",null,p.a.createElement(ue.a,{variant:"h5"},p.a.createElement("b",null,B?"Visitantes (".concat(B,")"):"Visitantes")),p.a.createElement(U.a,{container:!0,spacing:2},p.a.createElement(U.a,{item:!0,xs:12,sm:6},p.a.createElement(We.a,{fullWidth:!0},p.a.createElement(me.a,{select:!0,label:"Pr\xe9dio",className:y.selectBox,disabled:_,value:b,SelectProps:{native:!0},InputLabelProps:{shrink:!0},onChange:D},F.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),p.a.createElement(U.a,{item:!0,xs:12,sm:6},p.a.createElement(We.a,{fullWidth:!0},p.a.createElement(me.a,{select:!0,label:"M\xeas",className:y.selectBox,disabled:_,value:O()().month(C).year(w).format("YYYY-MM"),SelectProps:{native:!0},InputLabelProps:{shrink:!0},onChange:j},Ca()(6,(function(e){var t=O()().subtract(e,"month");return p.a.createElement("option",{key:t.format("YYYY-MM"),value:t.format("YYYY-MM")},t.format("MMMM YYYY"))}))))))),p.a.createElement("aside",null,p.a.createElement(Ra,{loading:Q,setAlert:a,members:G,companyId:P,onCreateVisitor:I,buildings:F})))),p.a.createElement("div",{className:y.container},p.a.createElement(Xa,{visitors:u,loading:E,onCancelVisitor:N}),L&&!T&&p.a.createElement("div",{className:y.buttonContainer},p.a.createElement(z.a,{className:y.showMoreButton,onClick:M,size:"large",variant:"contained",color:"primary",disabled:A},A?"Carregando":"Ver Mais")))))})),$a=Re(Ba.getMembers,{name:"members"}),en=Re(Ta.getVisitors,{name:"visitors",options:function(e){var t=e.page,a=e.month,n=e.year,r=e.buildingId,o=e.setVisitors,i=e.setHideSeeMore,l=e.setTotalVisitors;return{variables:{page:t,perPage:20,month:a+1,year:n,buildingId:r},onRequestFinished:function(e){var t=Oa()(v()(e,"visitors",[]),"id"),a=v()(e,"meta.total",0);o(t),i(Ne()(t)),l(a)}}}}),tn=Object(Pe.a)(Object(G.a)(Ga,{withTheme:!0}),Object(Pe.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Pe.e)("buildingId","setBuildingId",v()(x.getUserData(),"buildings[0].id")),Object(Pe.e)("totalVisitors","setTotalVisitors",0),Object(Pe.e)("visitors","setVisitors",[]),Object(Pe.e)("hideSeeMore","setHideSeeMore",!1),Object(Pe.e)("disableSeeMore","setDisableSeeMore",!1),Object(Pe.e)("page","setPage",0),Object(Pe.e)("month","setMonth",O()().month()),Object(Pe.e)("year","setYear",O()().year()),$a,en)(Za),an={getTickets:function(e){var t=e.buildingId,a=e.assigneeId,n=e.categoryId,r=e.code;return t?L.get("/tickets",{building_id:t,assignee_id:a,category_id:n,code:r}):null},getTicket:function(e){return e?L.get("/tickets/".concat(e)):null},updateTicket:function(e){var t=Object(u.a)({},e,{building_id:v()(e,"building.id"),assignee_id:v()(e,"assignee.id"),category_id:v()(e,"category.id")});return L.put("/tickets/".concat(v()(e,"id")),t)},moveTicket:function(e){var t=e.id,a=e.status,n=e.position,r=e.building_id;return L.put("/tickets/".concat(t,"/move"),{status:a,position:n,building_id:r})},postTicket:function(e){return L.post("/tickets",e)},getAssignables:function(){return L.get("/tickets/assignables")}},nn=a(281),rn=a(102),on=a.n(rn),ln=a(278),cn=a.n(ln),sn=a(129),mn={PRIORITIES:[{label:"Baixa",key:"LOW"},{label:"M\xe9dia",key:"NORMAL"},{label:"Alta",key:"HIGH"}],KANBAN_STATUSES:[{label:"Pendente",key:"PENDING"},{label:"Em andamento",key:"IN_PROGRESS"},{label:"Conclu\xeddo",key:"DONE"}],STATUSES:[{label:"Pendente",key:"PENDING"},{label:"Em andamento",key:"IN_PROGRESS"},{label:"Conclu\xeddo",key:"DONE"},{label:"Rejeitado",key:"REJECTED"},{label:"Arquivado",key:"ARCHIVED"}],STATUS_PENDING:"PENDING",STATUS_IN_PROGRESS:"IN_PROGRESS",STATUS_DONE:"DONE",STATUS_REJECTED:"REJECTED",STATUS_ARCHIVED:"ARCHIVED",PRIORITY_LOW:"LOW",PRIORITY_NORMAL:"NORMAL",PRIORITY_HIGH:"HIGH"},un={kanban:{display:"inline-flex",userSelect:"none",alignItems:"center",justifyContent:"center",height:640},column:{margin:10,display:"flex",flexDirection:"column",marginBottom:10,minWidth:320,height:640},columnLoading:{transition:"background-color 500ms fade-out 1s",backgroundColor:"rgba(96, 115, 137, 0.04)"},columnHeader:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:1,borderLeft:"1px solid rgba(96, 115, 137, 0.12)",borderRight:"1px solid rgba(96, 115, 137, 0.12)",borderTop:"1px solid rgba(96, 115, 137, 0.12)",backgroundColor:"rgba(96, 115, 137, 0.04)",transition:"background-color 0.1s ease",height:50,userSelect:"none"},columnTitle:{padding:10,transition:"background-color ease 0.2s",flexGrow:1,userSelect:"none",position:"relative",fontSize:14,fontWeight:600,color:"#515c6a"},columnTitleLoading:{color:"rgb(224, 224, 224)"},list:{backgroundColor:"rgba(96, 115, 137, 0.04)",display:"flex",flexDirection:"column",padding:10,borderRadius:1,borderLeft:"1px solid rgba(96, 115, 137, 0.12)",borderRight:"1px solid rgba(96, 115, 137, 0.12)",borderBottom:"1px solid rgba(96, 115, 137, 0.12)",paddingBottom:0,transition:"background-color 0.1s ease, opacity 0.1s ease",userSelect:"none",minHeight:250,marginBottom:10},card:{cursor:"pointer",height:"auto"},cardContent:{boxShadow:"2px 2px 1px rgba(0,0,0,0.2)",flexGrow:1,flexBasis:"100%",display:"flex",flexDirection:"column",marginBottom:8}},dn=Object(d.memo)((function(e){var t=e.provided,a=void 0===t?{}:t,n=e.children;return p.a.createElement("a",Object.assign({style:un.card,ref:a.innerRef},a.draggableProps,a.dragHandleProps),n)}));dn.propTypes={children:Pt.a.any,provided:Pt.a.any};var pn=Object(d.memo)((function(e){var t=e.provided,a=e.renderCard,n=e.row,r=e.cardWrapperStyle,o=e.disableDragDrop;return p.a.createElement(dn,{provided:o?{}:t},p.a.createElement("div",{style:Object(u.a)({},un.cardContent,{},r)},a(n)))})),gn=Object(d.memo)((function(e){var t=e.provided,a=void 0===t?{}:t,n=e.style,r=e.children;return p.a.createElement("div",Object.assign({style:Object(u.a)({},un.list,{},n),ref:a.innerRef},a.droppableProps),r)}));gn.propTypes={children:Pt.a.any,provided:Pt.a.any,style:Pt.a.any};var bn=Object(d.memo)((function(e){var t=e.column,a=e.cardWrapperStyle,n=e.renderCard,r=e.disableDragDrop;return A()(v()(t,"rows",[]),(function(e,t){return r?p.a.createElement(pn,{key:t,row:e,renderCard:n,cardWrapperStyle:a,disableDragDrop:r}):p.a.createElement(sn.b,{key:e.id,draggableId:e.id,index:t},(function(o,i){return p.a.createElement(pn,{key:t,row:e,provided:o,dragSnapshot:i,renderCard:n,cardWrapperStyle:a,disableDragDrop:r})}))}))})),hn=Object(d.memo)((function(e){var t=e.listStatus,a=e.column,n=e.disableDragDrop,r=(e.loading,e.renderCard),o=e.columnStyle,i=e.cardWrapperStyle;return n?p.a.createElement(gn,{style:o},p.a.createElement(bn,{column:a,renderCard:r,disableDragDrop:n,cardWrapperStyle:i})):p.a.createElement(sn.c,{droppableId:t||"ROW",isDropDisabled:!1,type:"ROW"},(function(e){return p.a.createElement(gn,{style:o,provided:e},p.a.createElement(bn,{column:a,renderCard:r,disableDragDrop:n,cardWrapperStyle:i}),e.placeholder)}))}));hn.propTypes={listStatus:Pt.a.string,renderCard:Pt.a.func,loading:Pt.a.bool,column:Pt.a.object,columnStyle:Pt.a.object,cardWrapperStyle:Pt.a.object,disableDragDrop:Pt.a.bool};var fn=hn,En=Object(d.memo)((function(e){var t=e.index,a=e.column,n=e.renderCard,r=e.columnStyle,o=e.columnWrapperStyle,i=e.cardWrapperStyle,l=e.columnTitleStyle,c=e.columnHeaderStyle,s=e.disableDragDrop,m=e.loading;return p.a.createElement("div",{style:Object(u.a)({},un.column,{},o)},p.a.createElement("header",{style:Object(u.a)({},un.columnHeader,{},c)},p.a.createElement("h4",{style:Object(u.a)({},un.columnTitle,{},l,{},m?un.columnTitleLoading:{})},"".concat(v()(a,"title")," (").concat(Te()(v()(a,"rows")),")"))),p.a.createElement(fn,{key:t,columnStyle:r,column:a,loading:m,listStatus:v()(a,"status"),renderCard:n,cardWrapperStyle:i,disableDragDrop:s}))}));En.propTypes={index:Pt.a.number,renderCard:Pt.a.func,loading:Pt.a.bool,column:Pt.a.object,columnWrapperStyle:Pt.a.object,columnStyle:Pt.a.object,columnTitleStyle:Pt.a.object,columnHeaderStyle:Pt.a.object,cardWrapperStyle:Pt.a.object,disableDragDrop:Pt.a.bool};var vn=En,kn=mn.KANBAN_STATUSES,An=function(e,t){return A()(e,(function(e){return e.status})).indexOf(t)},yn=function(e){return A()(kn,(function(t,a){var n=v()(t,"key"),r=cn()(e,(function(e){return e.status===n}));return{index:a,status:n,title:v()(t,"label","").toUpperCase(),rows:r}}))},Cn=Object(d.memo)((function(e){var t=e.columns,a=e.setColumns,n=e.onDragEnd,r=e.renderCard,o=e.loading,i=e.columnWrapperStyle,l=e.cardWrapperStyle,c=e.columnStyle,s=e.columnHeaderStyle,m=e.columnTitleStyle,d=e.disableDragDrop;return p.a.createElement(sn.a,{onDragEnd:function(e){var r=e.source,o=e.destination;if(!(!o||r.droppableId===o.droppableId&&r.index===o.index)){var i=on()(t),l=An(t,r.droppableId),c=An(t,o.droppableId);if(r.droppableId!==o.droppableId){var s=on()(t[l].rows),m=on()(t[c].rows),u=s.splice(r.index,1),d=Object(nn.a)(u,1)[0];m.splice(o.index,0,d),i[l].rows=on()(s),i[c].rows=on()(m)}else{var p=i[l].rows[r.index],g=i[c].rows[o.index];i[l].rows[r.index]=g,i[c].rows[o.index]=p}a(on()(i)),n(e)}}},p.a.createElement("div",{style:un.kanban},Ca()(Te()(kn),(function(e){return p.a.createElement(vn,{key:e,index:e,loading:o,column:t[e],renderCard:r,columnHeaderStyle:s,columnTitleStyle:m,columnStyle:Object(u.a)({},c,{},o?un.columnLoading:{}),columnWrapperStyle:i,cardWrapperStyle:l,disableDragDrop:d})}))))})),wn=Object(Pe.a)(Object(Pe.e)("columns","setColumns",[]),Object(Pe.b)({componentDidMount:function(){var e=this.props,t=e.data;(0,e.setColumns)(yn(t))}}),Object(Pe.d)(["data","loading"],(function(e){var t=e.data;(0,e.setColumns)(yn(t))})))(Cn),On=a(279),Tn=a.n(On),Bn=a(558),jn=a(545),Dn=a(28),Sn=a(535),xn={getComments:function(e){return e?L.get("/tickets/".concat(e,"/ticket_comments")):null},sendComment:function(e){var t=e.id,a=e.content;return L.post("/tickets/".concat(t,"/ticket_comments"),{content:a})}},Mn={ALL_ROLES:[{label:"Acesso limitado",value:"MEMBER"},{label:"Acesso completo (exceto usu\xe1rios)",value:"USER"},{label:"Acesso completo",value:"ADMIN"},{label:"Propriet\xe1rio da conta",value:"OWNER"}],AGENT_ROLES:["USER","ADMIN","OWNER"],MEMBER_ROLE:"MEMBER",USER_ROLE:"USER",ADMIN_ROLE:"ADMIN",OWNER_ROLE:"OWNER"},Nn=Object(d.memo)((function(e){var t=e.comment,a=e.classes;return p.a.createElement("div",null,p.a.createElement("div",{className:a.userNameContainer},p.a.createElement(yt,{name:v()(t,"member.name")}),p.a.createElement(ue.a,{variant:"subtitle2",component:"b",className:a.userName},"".concat(v()(t,"member.name")," ").concat(v()(t,"member.lastname")))),p.a.createElement("div",{className:a.content},p.a.createElement("div",{className:a.baloon},p.a.createElement("span",null,t.content)),p.a.createElement(ue.a,{variant:"body2",color:"textSecondary",component:"small"},O()(v()(t,"created_at")).calendar())))}));Nn.propTypes={classes:Pt.a.object,comment:Pt.a.object};var In=Object(G.a)((function(){return{userNameContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginTop:15},userName:{marginLeft:10},content:{marginLeft:40,marginBottom:20},baloon:{backgroundColor:"#E0E0E0",borderRadius:5,paddingLeft:15,paddingRight:15,paddingTop:10,paddingBottom:10,marginBottom:5,height:"auto",wordBreak:"break-word"}}}),{withTheme:!0})(Nn),Ln=mn.PRIORITIES,Wn=mn.STATUSES,Pn=mn.KANBAN_STATUSES,Fn=mn.STATUS_REJECTED,Rn=mn.STATUS_ARCHIVED,Yn=Mn.MEMBER_ROLE,Hn=Object(d.memo)((function(e){var t=e.classes,a=e.assignees,n=e.categories,r=e.open,o=e.onClose,i=e.setCurrentTicketState,l=e.currentTicket,c=e.ticketLoading,s=e.updateTicketFetch,m=e.updateTicketLoading,u=e.ticketCommentsData,d=e.ticketCommentsLoading,g=e.commentMessage,b=e.setCommentMessage,h=e.setCloseModal,f=e.sendTicketCommentsFetch,E=e.sendTicketCommentsLoading,k=e.moveTicketFetch,y=e.moveTicketLoading,C=Object(Dn.a)(),w=Object(Sn.a)(C.breakpoints.down("sm")),T=function(){H.hit("TicketModal - Closed"),h(!0),o()},B=function(e){h(!1),i(e),s(!0)},j=x.getUserData(),D=se()(v()(j,"buildings",[]),["name"]),S=v()(j,"member.role",Yn)===Yn,M=se()(v()(u,"ticket_comments",[]),["created_at"]).reverse(),I=v()(l,"requester.id"),L=v()(j,"member.id"),W=!S||S&&I&&L&&L===I,P=!W||E||d,F=!W||m||y||c,R="".concat(v()(l,"requester.name")," ").concat(v()(l,"requester.lastname")),Y=O()(v()(l,"created_at")).fromNow(),V=v()(l,"code"),q=v()(l,"status"),G=v()(l,"building.id"),Q=v()(l,"category.id"),_=v()(l,"assignee.id");if(!W){q=v()(oa()(Wn,(function(e){return e.key===v()(l,"status")})),"label",""),G=v()(oa()(D,(function(e){return e.id===v()(l,"building.id")})),"name",""),Q=v()(oa()(n,(function(e){return e.id===v()(l,"category.id")})),"title","");var K=oa()(a,(function(e){return e.id===v()(l,"assignee.id")}));_=K?"".concat(v()(K,"name")," ").concat(v()(K,"lastname")):"Nenhum respons\xe1vel"}return p.a.createElement(Qt.a,{open:r,fullScreen:w,onClose:T,keepMounted:!0,fullWidth:!0,maxWidth:"md"},p.a.createElement(U.a,{container:!0},p.a.createElement(U.a,{item:!0,xs:12,sm:12,md:5,className:t.bgGray},p.a.createElement(Kt.a,null,v()(l,"title"),p.a.createElement("br",null),p.a.createElement(ue.a,{variant:"body2",color:"textSecondary",component:"small"},"#".concat(V," - ").concat(Y," por "),p.a.createElement("b",null,R)),p.a.createElement(Ee.a,{className:t.closeButton,onClick:T},p.a.createElement(fe.a,null))),p.a.createElement(_t.a,{className:t.ticketContent},p.a.createElement(We.a,{fullWidth:!0,margin:"normal"},p.a.createElement(me.a,{select:W,disabled:F,label:"Status",value:q,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return function(e){h(!1);var t={variables:{id:l.id,status:e}};i({status:e}),k(!0,"",null,t)}(e.target.value)},variant:"outlined"},Pn.map((function(e){return p.a.createElement("option",{value:e.key,key:e.key},e.label)})))),p.a.createElement(We.a,{fullWidth:!0,margin:"normal"},p.a.createElement(me.a,{select:W,label:"Pr\xe9dio",disabled:F,value:G,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return function(e){h(!1);var t={variables:{id:l.id,building_id:e}};i({building:{id:e}}),k(!0,"",null,t)}(e.target.value)},variant:"outlined"},D.map((function(e){return p.a.createElement("option",{value:e.id,key:e.id},e.name)})))),p.a.createElement(We.a,{fullWidth:!0,margin:"normal"},p.a.createElement(me.a,{select:W,label:"Categoria",disabled:F,value:Q,SelectProps:{native:!0},InputLabelProps:{shrink:!0},onChange:function(e){return B({category:{id:e.target.value}})},variant:"outlined"},n.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.title)})))),p.a.createElement(We.a,{fullWidth:!0,margin:"normal"},p.a.createElement(me.a,{select:W,label:"Respons\xe1vel",disabled:F,value:_,SelectProps:{native:!0},InputLabelProps:{shrink:!0},onChange:function(e){return B({assignee:{id:e.target.value}})},variant:"outlined"},p.a.createElement("option",{value:""},"Nenhum respons\xe1vel"),a.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},"".concat(e.name," ").concat(e.lastname))})))),p.a.createElement(U.a,{container:!0,direction:"row",justify:"center",spacing:1},p.a.createElement(U.a,{item:!0,xs:6},p.a.createElement(We.a,{fullWidth:!0,margin:"normal"},p.a.createElement(aa.a,{libInstance:O.a,utils:ta.a,locale:N.locale},p.a.createElement(na.a,{autoOk:!0,label:"Prazo",clearable:!0,animateYearScrolling:!0,disabled:F,invalidDateMessage:"Formato inv\xe1lido",minDateMessage:"",variant:"outlined",inputVariant:"outlined",InputLabelProps:{shrink:!0},value:v()(l,"deadline",null),onChange:function(e){return B({deadline:e})},minDate:new Date,format:"DD/MM/YYYY",cancelLabel:"Cancelar",clearLabel:"Limpar"})))),p.a.createElement(U.a,{item:!0,xs:6},p.a.createElement(We.a,{fullWidth:!0,margin:"normal"},p.a.createElement(me.a,{select:!0,label:"Prioridade",disabled:F,value:v()(l,"priority"),InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return B({priority:e.target.value})},variant:"outlined"},Ln.map((function(e){return p.a.createElement("option",{value:e.key,key:e.key},e.label)}))))))),p.a.createElement(Jt.a,{className:t.ticketActions},p.a.createElement(z.a,{color:"default",size:"large",variant:"contained",onClick:function(){if(window.confirm("Tem certeza em rejeitar esse ticket?")){var e={variables:{id:l.id,status:Fn}};h(!0),k(!0,"",null,e)}},disabled:F},"REJEITAR"),p.a.createElement(z.a,{color:"default",size:"large",variant:"contained",onClick:function(){if(window.confirm("Tem certeza em arquivar esse ticket?")){var e={variables:{id:l.id,status:Rn}};h(!0),k(!0,"",null,e)}},disabled:F},"ARQUIVAR"))),p.a.createElement(U.a,{item:!0,xs:12,sm:12,md:7},p.a.createElement(Kt.a,null,"Atividade"),p.a.createElement(_t.a,{className:t.commentContent},p.a.createElement("div",{className:t.commentArea},d?p.a.createElement(J,null):A()(M,(function(e){return p.a.createElement(In,{key:e.id,comment:e})}))),p.a.createElement(ue.a,{variant:"h6"},"Comentar"),p.a.createElement(We.a,{fullWidth:!0,margin:"normal"},p.a.createElement(me.a,{variant:"filled",multiline:!0,rows:3,rowsMax:3,placeholder:"Escreva seu coment\xe1rio aqui...",InputLabelProps:{shrink:!0},value:g,onChange:function(e){return b(e.target.value)},disabled:P}))),p.a.createElement(Jt.a,{className:t.commentActions},p.a.createElement(z.a,{color:"primary",size:"large",variant:"contained",onClick:function(){h(!1),f(!0)},disabled:P||Ne()(g)},"ENVIAR")))))})),Vn=Re(xn.getComments,{name:"ticketComments",init:!1,options:function(e){var t=e.ticket;return{variables:v()(t,"id")}}}),qn=Re(xn.sendComment,{name:"sendTicketComments",init:!1,options:function(e){var t=e.currentTicket,a=e.commentMessage,n=e.setCommentMessage,r=e.onClose,o=e.ticketCommentsFetch;return{variables:{id:v()(t,"id"),content:a},onRequestFinished:function(){n(""),o(!1)},onRequestError:function(e){H.hit("TicketModal - Closed"),r(e,"Erro ao enviar um coment\xe1rio para esse ticket")}}}}),Un=Re(an.moveTicket,{name:"moveTicket",init:!1,options:function(e){var t=e.onClose,a=e.closeModal;return{onRequestFinished:function(){a&&(H.hit("TicketModal - Closed"),t(null,"Ticket atualizado com sucesso"))},onRequestError:function(e){H.hit("TicketModal - Closed"),t(e,"Erro ao atualizar esse ticket")}}}}),zn=Re(an.getTicket,{name:"ticket",init:!1,options:function(e){var t=e.ticket,a=e.setCurrentTicket,n=e.onClose;return{variables:v()(t,"id"),onRequestFinished:function(e){a(v()(e,"ticket"))},onRequestError:function(e){H.hit("TicketModal - Closed"),n(e,"Erro ao carregar esse ticket")}}}}),Gn=Re(an.updateTicket,{name:"updateTicket",init:!1,options:function(e){var t=e.currentTicket,a=e.onClose,n=e.closeModal;return{variables:t,onRequestFinished:function(){n&&(H.hit("TicketModal - Closed"),a(null,"Ticket atualizado com sucesso"))},onRequestError:function(e){H.hit("TicketModal - Closed"),a(e,"Erro ao atualizar esse ticket")}}}}),Qn=Object(Pe.a)(Object(G.a)((function(e){return Object(u.a)({},Tt(e),{ticketContent:{marginTop:-20},ticketActions:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end",alignSelf:"flex-end",paddingLeft:25,paddingRight:25,marginTop:22},commentContent:{marginTop:-20,paddingLeft:20,paddingRight:20},commentArea:{height:315,minHeight:315,maxHeight:315,marginBottom:15,overflowY:"scroll"},commentActions:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"flex-end",alignSelf:"flex-end",paddingLeft:20,paddingRight:20,paddingBottom:20}})}),{withTheme:!0}),Object(Pe.e)("currentTicket","setCurrentTicket",{}),Object(Pe.e)("commentMessage","setCommentMessage",""),Object(Pe.e)("closeModal","setCloseModal",!1),Vn,qn,Gn,Un,zn,Object(Pe.b)({componentDidMount:function(){var e=this.props,t=e.ticket;(0,e.setCurrentTicket)(t)}}),Object(Pe.d)(["open"],(function(e){var t=e.open,a=e.ticketFetch,n=e.ticketCommentsFetch;t&&(a(!0),n(!0))})),Object(Pe.c)({setCurrentTicketState:function(e){var t=e.setCurrentTicket,a=e.currentTicket;return function(e){t(Object(u.a)({},a,{},e))}}}))(Hn),_n=a(167),Jn={card:{padding:0,width:300,height:"auto",minHeight:"auto",maxHeight:"auto"},cardContent:{marginBottom:0,paddingBottom:5},cardAction:{marginTop:10,marginBottom:15,display:"inline-flex",width:"100%",alignItems:"baseline",justifyContent:"space-between"},cardTitle:{lineHeight:"1.5em",marginBottom:5},cardChipToday:{float:"right",backgroundColor:X.a[700],color:"white"},cardChipTomorrow:{float:"right",backgroundColor:ft.a[700],color:"white"},cardChipExpired:{float:"right",backgroundColor:X.a[200],color:"white"},cardChipFarFromExpiration:{float:"right",backgroundColor:_n.a[200],color:"black"},cardAvatar:{display:"inline-flex",width:"100%",height:"auto",minHeight:"auto",maxHeight:"auto",alignItems:"baseline"},cardAvatarName:{marginLeft:10,marginTop:0,lineHeight:"1.2em"}},Kn=Object(d.memo)((function(e){var t=e.ticket,a=e.openModal,n=e.setOpenModal,r=e.onCloseModal,o=e.categories,i=e.assignees,l=e.match,c=e.loading,s="".concat(v()(t,"requester.name")," ").concat(v()(t,"requester.lastname","")),m="".concat(v()(t,"assignee.name")," ").concat(v()(t,"assignee.lastname","")),u=v()(t,"created_at")?"".concat(O()(t.created_at).fromNow()," por "):"";return p.a.createElement(p.a.Fragment,null,p.a.createElement(He.a,{style:Jn.card,onClick:function(){c||(n(!0),window.history.pushState("","","/#/tickets/".concat(v()(t,"id"))))}},p.a.createElement(qe.a,{style:Jn.cardContent},!c&&function(e){if(e){var t=O()(e).format("MMM D"),a=O()(e).startOf("day").isSame(O()().startOf("day"),"day"),n=1===O()(e).startOf("day").diff(O()().startOf("day"),"days"),r=O()(e).startOf("day").isBefore(O()().startOf("day"),"day");return a?p.a.createElement(Bn.a,{label:t,size:"small",style:Jn.cardChipToday}):n?p.a.createElement(Bn.a,{label:t,size:"small",style:Jn.cardChipTomorrow}):r?p.a.createElement(Bn.a,{label:t,size:"small",style:Jn.cardChipExpired}):p.a.createElement(Bn.a,{label:t,size:"small",style:Jn.cardChipFarFromExpiration})}return null}(v()(t,"deadline")),p.a.createElement(ue.a,{variant:"subtitle1",style:Jn.cardTitle},c?p.a.createElement(jn.a,{animation:"wave"}):p.a.createElement("b",null,v()(t,"title",""))),c?p.a.createElement(jn.a,{animation:"wave",width:150}):p.a.createElement(ue.a,{variant:"body2",color:"textSecondary",component:"small"},u,p.a.createElement("b",null,s)),p.a.createElement("div",{style:Jn.cardAction},p.a.createElement("div",{style:Jn.cardAvatar},c?p.a.createElement(jn.a,{animation:"wave",width:100}):v()(t,"assignee","")&&p.a.createElement(p.a.Fragment,null,p.a.createElement(yt,{name:m}),p.a.createElement(ue.a,{variant:"subtitle1",style:Jn.cardAvatarName},p.a.createElement("small",null,m)))),p.a.createElement(ue.a,{variant:"body2",color:"textSecondary",component:"small"},c?p.a.createElement(jn.a,{animation:"wave",width:50}):v()(t,"category.title",""))))),p.a.createElement(Qn,{open:!!a||!!t&&v()(t,"id")===v()(l,"params.id"),ticket:t,categories:o,assignees:i,onClose:function(e,t){Tn()(l,"params.id",null),r(e,t,(function(){return n(!1)}))}}))})),Xn=Object(Pe.a)(f.g,Object(Pe.e)("openModal","setOpenModal",!1))(Kn),Zn={wrapper:{marginLeft:0,marginRight:10},header:{backgroundColor:"#FFF",padding:10,paddingTop:0,paddingBottom:0,height:60,width:"100%",borderTopLeftRadius:5,borderTopRightRadius:5},headerTitle:{color:"#313131"},column:{width:"100%",backgroundColor:"#E0E0E0",height:640,overflowY:"scroll"}},$n=Object(d.memo)((function(e){var t=e.tickets,a=e.categories,n=e.assignees,r=e.loading,o=e.moveTicketFetch,i=e.onCloseCardModal,l=e.lockBoard;return p.a.createElement(wn,{data:t||[],disableDragDrop:l,loading:r,renderCard:function(e){return p.a.createElement(Xn,{ticket:e,loading:r,assignees:n,categories:a,onCloseModal:i})},onDragEnd:function(e){var t=e.draggableId,a=e.destination,n={variables:{id:t,status:v()(a,"droppableId"),position:v()(a,"index")}};o(!1,"",null,n)},columnStyle:Zn.column,columnHeaderStyle:Zn.header,columnTitleStyle:Zn.headerTitle,columnWrapperStyle:Zn.wrapper})}));$n.propTypes={tickets:Pt.a.array,categories:Pt.a.array,assignees:Pt.a.array,lockBoard:Pt.a.bool,loading:Pt.a.bool,onCloseCardModal:Pt.a.func,moveTicketFetch:Pt.a.func};var er=Re(an.moveTicket,{name:"moveTicket",init:!1}),tr=Object(Pe.a)(Object(G.a)(Zn,{withTheme:!0}),er)($n),ar={getCategories:function(){return L.get("/ticket_categories")}},nr={isTablet:function(){return window.innerWidth<1280},isMobile:function(){return window.innerWidth<720}},rr=Mn.MEMBER_ROLE,or=Re(ar.getCategories,{name:"ticketCategories"}),ir=Re(an.getAssignables,{name:"ticketAssignees"}),lr=Re(an.getTickets,{name:"ticketsByCode",init:!1,options:function(e){var t=e.setAlert,a=e.history;return{variables:{buildingId:e.buildingId,assigneeId:e.assigneeId,categoryId:e.categoryId,code:e.code},onRequestFinished:function(e){var n=v()(e,"tickets[0]");Te()(n)?a.replace("/tickets/".concat(n.id)):t({alertMsg:"C\xf3digo de ticket n\xe3o identificado",alertType:"warning",showAlert:!0})}}}}),cr=Re(an.getTickets,{name:"tickets",options:function(e){var t=e.match;return{variables:{buildingId:e.buildingId,assigneeId:e.assigneeId,categoryId:e.categoryId,code:e.code},onRequestFinished:function(e){var a=v()(t,"params.id"),n=v()(e,"tickets",[]);Te()(a)&&Te()(n)&&(A()(n,(function(e){return e.id})).includes(a)||window.history.pushState("","","/#/tickets"))}}}}),sr=x.getUserData(),mr=se()(v()(sr,"buildings",[]),["name"]),ur=v()(mr,"[0].id",""),dr=v()(sr,"member.role",rr)!==rr?v()(sr,"member_id"):"",pr=Object(Pe.a)(Object(G.a)((function(e){return Object(u.a)({},Tt(e),{closeTicket:{cursor:"pointer",fontSize:14,fontWeight:"bold",marginRight:3}})}),{withTheme:!0}),f.g,Object(Pe.e)("assigneeId","setAssigneeId",dr),Object(Pe.e)("code","setCode",""),Object(Pe.e)("categoryId","setCategoryId"),Object(Pe.e)("buildingId","setBuildingId",ur),Object(Pe.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),cr,lr,or,ir)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=e.assigneeId,o=e.setAssigneeId,i=e.code,l=e.setCode,c=e.buildingId,s=e.setBuildingId,m=e.ticketsFetch,u=e.ticketsData,d=e.ticketsByCodeFetch,g=e.ticketsError,b=e.ticketsLoading,f=e.ticketCategoriesData,E=e.ticketsByCodeError,k=e.ticketCategoriesError,A=e.ticketCategoriesLoading,y=e.categoryId,C=e.setCategoryId,w=e.ticketAssigneesData,O=e.ticketAssigneesError,T=e.ticketAssigneesLoading,B=x.getUserData();if(v()(B,"member.company.has_ticket_support")){var j=se()(v()(B,"buildings",[]),["name"]),D=v()(B,"member.role",rr)===rr,S=v()(u,"tickets",[]),M=se()(v()(f,"ticket_categories",[]),["title"]),N=se()(v()(w,"members",[]),["name","lastname"]),I=b||A||T,L=I,W=g||k||O||E,P=t.showAlert,F=t.alertMsg,R=t.alertType,Y=null;return P&&(Y=p.a.createElement(Ce,{message:F,type:R,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}})),p.a.createElement("div",{className:n.root},p.a.createElement(Ot,{alertBox:Y,error:W}),p.a.createElement("section",null,p.a.createElement("div",{className:n.container},p.a.createElement("div",{className:n.headerView},p.a.createElement("aside",null,p.a.createElement(ue.a,{variant:"h5"},p.a.createElement("b",null,Te()(S)?"Tickets (".concat(Te()(S),")"):"Tickets")),p.a.createElement("br",null),p.a.createElement(U.a,{container:!0,spacing:2},p.a.createElement(U.a,{item:!0,xs:7,sm:2},p.a.createElement(We.a,{fullWidth:!0},p.a.createElement(me.a,{label:"Ticket",placeholder:"Por n\u02da",disabled:L,value:i,type:"tel",InputLabelProps:{shrink:!0},onKeyDown:function(e){if(13===e.keyCode){var t={select_code:e.target.value};H.hit("Tickets - FilteredByCode",t),d(!1)}},onBlur:function(){nr.isMobile()&&(H.hit("Tickets - FilteredByCode",i),d(!1))},onChange:function(e){var t=e.target.value.replace(/[\D]+/g,"");i!==t&&l(t)}}))),p.a.createElement(U.a,{item:!0,xs:7,sm:3},p.a.createElement(We.a,{fullWidth:!0},p.a.createElement(me.a,{select:!0,label:"Pr\xe9dio",disabled:L,value:c,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){s(e.target.value);var t={select_building:e.target.value};H.hit("Tickets - FilteredByBuilding",t),m(!0)}},j.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),p.a.createElement(U.a,{item:!0,xs:7,sm:3},p.a.createElement(We.a,{fullWidth:!0},p.a.createElement(me.a,{select:!0,label:"Respons\xe1vel",disabled:L,value:r,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){o(e.target.value);var t={select_assignee:e.target.value};H.hit("Tickets - FilteredByAssignee",t),m(!0)}},p.a.createElement("option",{value:""},"Todos tickets"),N.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},"".concat(e.name," ").concat(e.lastname))}))))),p.a.createElement(U.a,{item:!0,xs:7,sm:3},p.a.createElement(We.a,{fullWidth:!0},p.a.createElement(me.a,{select:!0,label:"Categoria",disabled:L,value:y,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){C(e.target.value);var t={select_category:e.target.value};H.hit("Tickets - FilteredByCategory",t),m(!0)}},p.a.createElement("option",{value:""},"Todas categorias"),M.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.title)}))))))),p.a.createElement("aside",null,p.a.createElement(z.a,{variant:"contained",component:h.b,to:"/tickets/novo",color:"primary",size:"large"},"Novo ticket")))),p.a.createElement("div",{className:n.container},p.a.createElement(U.a,{container:!0},p.a.createElement(U.a,{item:!0,xs:12},p.a.createElement(tr,{lockBoard:D,tickets:S,categories:M,assignees:N,loading:I,onCloseCardModal:function(e,t,n){return m(!1),window.history.pushState("","","/#/tickets"),t&&a({alertMsg:t,alertType:e?"error":"success",showAlert:!0}),n&&n()}}))))))}return p.a.createElement("div",{className:n.root},p.a.createElement(Ot,null),p.a.createElement("section",null,p.a.createElement("div",{className:n.container},p.a.createElement(U.a,{container:!0,spacing:1},p.a.createElement("div",{className:n.centerHeaderView},p.a.createElement(Le.a,{className:n.emptyHeaderIcon}),p.a.createElement("b",{className:n.emptyHeaderTitle},"Essa conta n\xe3o possui o servi\xe7o de tickets"))))))})),gr=mn.PRIORITIES,br=mn.PRIORITY_NORMAL,hr=Mn.AGENT_ROLES,fr=function(){var e=x.getUserData(),t=hr.includes(v()(e,"member.role")),a=se()(v()(e,"buildings",[]),["name"]);return{title:"",description:"",category_id:"",deadline:null,priority:t?br:null,building_id:v()(a,"[0].id")}},Er=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.ticket,o=e.setTicketState,i=e.ticketLoading,l=e.ticketError,c=e.ticketFetch,s=e.ticketCategoriesLoading,m=e.categories,u=a.showAlert,d=a.alertMsg,g=a.alertType,b=null;u&&(b=p.a.createElement(Ce,{message:d,type:g,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}}));var f=x.getUserData(),E=hr.includes(v()(f,"member.role")),k=se()(v()(f,"buildings",[]),["name"]),y=Na()(v()(l,"errors",{}),(function(e){return e[0]})),C=s||i;return p.a.createElement("div",{className:t.root},p.a.createElement(Ot,{alertBox:b}),p.a.createElement("section",null,p.a.createElement("div",{className:t.container},p.a.createElement("div",{className:t.headerView},p.a.createElement("aside",null,p.a.createElement(ue.a,{variant:"h5"},p.a.createElement("b",null,"Novo ticket"))))),p.a.createElement("br",null),p.a.createElement("div",{className:t.container},p.a.createElement(za.a,{className:t.paper},p.a.createElement(ue.a,{variant:"h6"},p.a.createElement("b",null,"Solicita\xe7\xe3o")),p.a.createElement(U.a,{container:!0,item:!0,xs:12,sm:8,md:6,spacing:2},p.a.createElement(U.a,{item:!0,xs:12},p.a.createElement(We.a,{fullWidth:!0,error:!!y.title},p.a.createElement(me.a,{label:"T\xedtulo",error:!!y.title,className:t.input,disabled:C,placeholder:"Ex.: Banheiro entupido, m\xe1quina de caf\xe9 com defeito, etc",value:v()(r,"title",""),onChange:function(e){return o({title:e.target.value})},variant:"outlined",InputLabelProps:{shrink:!0}}),y.title&&p.a.createElement(xa.a,null,y.title)),p.a.createElement(We.a,{fullWidth:!0,error:!!y.comments},p.a.createElement(me.a,{label:"Descri\xe7\xe3o",error:!!y.comments,className:t.input,disabled:C,placeholder:"Mais detalhes sobre a ocorr\xeancia...",value:v()(r,"description",""),onChange:function(e){return o({description:e.target.value})},variant:"outlined",InputLabelProps:{shrink:!0}}),y.comments&&p.a.createElement(xa.a,null,y.comments)),p.a.createElement(We.a,{fullWidth:!0,error:!!y.building_id},p.a.createElement(me.a,{select:!0,label:"Pr\xe9dio",error:!!y.building_id,className:t.input,disabled:C,value:v()(r,"building_id"),InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return o({building_id:e.target.value})},variant:"outlined"},k.map((function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.name)}))),y.building_id&&p.a.createElement(xa.a,null,y.building_id)),p.a.createElement(We.a,{fullWidth:!0,error:!!y.category_id},p.a.createElement(me.a,{select:!0,label:"Categoria",error:!!y.category_id,className:t.input,disabled:C,value:v()(r,"category_id"),InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return o({category_id:e.target.value})},variant:"outlined"},A()(m,(function(e){return p.a.createElement("option",{key:e.id,value:e.id},e.title)}))),y.category_id&&p.a.createElement(xa.a,null,y.category_id)))),E&&p.a.createElement(p.a.Fragment,null,p.a.createElement("br",null),p.a.createElement(ue.a,{variant:"h6"},p.a.createElement("b",null,"Deadline")),p.a.createElement(U.a,{container:!0,item:!0,xs:12,sm:8,md:6,spacing:2},p.a.createElement(U.a,{item:!0,xs:12,sm:6},p.a.createElement(We.a,{fullWidth:!0},p.a.createElement(aa.a,{libInstance:O.a,utils:ta.a,locale:N.locale},p.a.createElement(na.a,{autoOk:!0,label:"Prazo",clearable:!0,animateYearScrolling:!0,className:t.input,disabled:C,invalidDateMessage:"Formato inv\xe1lido",variant:"outlined",inputVariant:"outlined",InputLabelProps:{shrink:!0},value:v()(r,"deadline"),onChange:function(e){return o({deadline:e})},minDate:new Date,format:"DD/MM/YYYY",cancelLabel:"Cancelar",clearLabel:"Limpar"})))),p.a.createElement(U.a,{item:!0,xs:12,sm:6},p.a.createElement(We.a,{fullWidth:!0,error:!!y.priority},p.a.createElement(me.a,{select:!0,label:"Prioridade",error:!!y.priority,className:t.input,disabled:C,value:v()(r,"priority"),InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return o({priority:e.target.value})},variant:"outlined"},gr.map((function(e){return p.a.createElement("option",{value:e.key,key:e.key},e.label)}))),y.priority&&p.a.createElement(xa.a,null,y.priority))))),p.a.createElement(U.a,{container:!0,item:!0,xs:12,sm:8,md:6,spacing:2},p.a.createElement(U.a,{item:!0,xs:12},p.a.createElement("div",{className:t.actions},p.a.createElement(z.a,{component:h.b,to:"/tickets",color:"default",size:"large",disabled:C,className:t.cancel},"Voltar"),p.a.createElement(z.a,{variant:"contained",color:"primary",size:"large",disabled:C,onClick:function(){return c(!0)}},C?"Aguarde...":"Enviar"))))))))})),vr=Re(ar.getCategories,{name:"ticketCategories",options:function(e){var t=e.setTicketState,a=e.setCategories;return{onRequestFinished:function(e){var n=se()(v()(e,"ticket_categories",[]),["title"]);a(n),t(Object(u.a)({},fr(),{category_id:v()(n,"[0].id")}))}}}}),kr=Re(an.postTicket,{name:"ticket",init:!1,options:function(e){var t=e.ticket,a=e.setTicketState,n=e.setAlert,r=e.categories;return{variables:t,onRequestFinished:function(){a(Object(u.a)({},fr(),{},{category_id:v()(r,"[0].id")})),n({alertMsg:"Ticket registrado com sucesso",alertType:"success",showAlert:!0})},onRequestError:function(){n({alertMsg:"Erro ao registrar esse ticket",alertType:"error",showAlert:!0})}}}}),Ar=Object(Pe.a)(Object(G.a)((function(e){return Object(u.a)({},Tt(e),{cancel:{marginRight:20}})}),{withTheme:!0}),f.g,Object(Pe.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Pe.e)("ticket","setTicket",fr()),Object(Pe.e)("categories","setCategories",[]),Object(Pe.c)({setTicketState:function(e){var t=e.setTicket,a=e.ticket;return function(e){t(Object(u.a)({},a,{},e))}}}),vr,kr)(Er),yr=a(549),Cr=a(546),wr=a(201),Or=a.n(wr),Tr=Object.values(le).filter((function(e){return!e.hideMenu&&e.settingsMenu})),Br=Object(d.memo)((function(e){var t=e.history;return p.a.createElement(za.a,{square:!0},p.a.createElement(yr.a,{value:Or()(Tr,(function(e){return t.location.pathname===e.path})),indicatorColor:"primary",textColor:"primary",onChange:function(e,a){return t.push(Tr[a].path)}},Tr.map((function(e,t){return p.a.createElement(Cr.a,{key:e.path,label:e.label,index:t})}))))}));Br.propTypes={history:Pt.a.object};var jr=Object(f.g)(Br),Dr=a(34),Sr=Object(Pe.a)(Object(Pe.e)("viewer","setViewer",null),Object(Pe.b)({componentDidMount:function(){var e=x.getUserData();this.props.setViewer(e)}})),xr=Mn.ALL_ROLES,Mr=Object(d.memo)((function(e){var t=e.formData,a=t.email,n=t.name,r=t.lastname,o=t.role,i=t.phone,l=t.buildingsOptions,c=t.validationErrors,s=e.setFormData,m=e.setBuildingOptionChecked,u=e.isLoading,d=e.classes;return u?p.a.createElement(J,null):p.a.createElement(p.a.Fragment,null,p.a.createElement(U.a,{container:!0,direction:"row",spacing:1},p.a.createElement(U.a,{item:!0,xs:12,sm:6},p.a.createElement(We.a,{fullWidth:!0,margin:"normal"},p.a.createElement(me.a,{error:!!c.name,label:"Nome",value:n,InputLabelProps:{shrink:!0},onChange:function(e){return s({name:e.target.value})},variant:"outlined"}),c.name?p.a.createElement(xa.a,null,c.name):null)),p.a.createElement(U.a,{item:!0,xs:12,sm:6},p.a.createElement(We.a,{fullWidth:!0,margin:"normal"},p.a.createElement(me.a,{error:!!c.lastname,label:"Sobrenome",value:r,InputLabelProps:{shrink:!0},onChange:function(e){return s({lastname:e.target.value})},variant:"outlined"}),c.lastname?p.a.createElement(xa.a,null,c.lastname):null)),p.a.createElement(U.a,{item:!0,xs:12,sm:6},p.a.createElement(We.a,{fullWidth:!0,margin:"normal"},p.a.createElement(me.a,{disabled:!0,error:!!c.email,label:"E-mail",value:a,InputLabelProps:{shrink:!0},onChange:function(e){return s({email:e.target.value})},variant:"outlined"}),c.email?p.a.createElement(xa.a,null,c.email):null)),p.a.createElement(U.a,{item:!0,xs:12,sm:6},p.a.createElement(We.a,{fullWidth:!0,margin:"normal"},p.a.createElement(me.a,{error:!!c.phone,label:"Telefone celular",value:i,InputLabelProps:{shrink:!0},onChange:function(e){return s({phone:e.target.value})},variant:"outlined"}),c.phone?p.a.createElement(xa.a,null,c.phone):null)),p.a.createElement(U.a,{item:!0,xs:12,sm:6},p.a.createElement(ue.a,{variant:"h6"},"Permiss\xe3o"),p.a.createElement(We.a,{fullWidth:!0,margin:"normal"},p.a.createElement(me.a,{select:!0,SelectProps:{native:!0},error:!!c.role,label:"N\xedvel de acesso",value:o,InputLabelProps:{shrink:!0},onChange:function(e){return s({role:e.target.value})},variant:"outlined"},xr.map((function(e){return p.a.createElement("option",{value:e.value,key:e.value},e.label)}))),c.role?p.a.createElement(xa.a,null,c.role):null)),p.a.createElement(U.a,{item:!0,xs:12},p.a.createElement(ue.a,{variant:"h6"},"Locais de acesso"),p.a.createElement(We.a,{fullWidth:!0},l.map((function(e){return p.a.createElement(ea.a,{key:e.value,classes:{label:d.checkboxLabel},control:p.a.createElement(Xt.a,{checked:e.checked,onChange:function(t){m({buildingId:e.value,checked:t.target.checked})},value:e.value}),label:e.label})}))))))})),Nr=Object(Pe.a)(Object(G.a)((function(e){return Object(u.a)({},Tt(e),{checkboxLabel:{fontSize:e.typography.caption.fontSize}})}),{withTheme:!0}),Sr,Object(Pe.c)({setBuildingOptionChecked:function(e){var t=e.formData,a=e.setFormData;return function(e){var n=e.buildingId,r=e.checked,o=t.buildingsOptions;a({buildingsOptions:Object(Dr.map)(o,(function(e){return e.value===n?Object(u.a)({},e,{checked:r}):e}))})}}}),Object(Pe.d)(["viewer","member"],(function(e){var t=e.member,a=e.viewer,n=e.setFormData;if(!a)return null;var r=Object(Dr.get)(t,"enterprise_user.buildings_enterprise_users",[]),o=a.buildings_enterprise_users.map((function(e){return{label:e.building.name,value:e.building.id,checked:r.some((function(t){return e.building_id===t.building_id}))}})),i=Object(u.a)({buildingsOptions:o},t);return n(Object(u.a)({},i,{previousValues:i})),!0})))(Mr),Ir=Object(d.memo)((function(e){var t=e.member,a=e.isLoading,n=e.open,r=e.onClose,o=e.classes,i=e.formData,l=e.setFormData,c=e.updateMemberFetch,s=e.updateMemberLoading,m=e.blockMemberFetch,u=e.blockMemberLoading,d=Object(Dn.a)(),g=Object(Sn.a)(d.breakpoints.down("sm")),b=a||s||u;return p.a.createElement(Qt.a,{fullScreen:g,keepMounted:!0,fullWidth:!0,maxWidth:"md",classes:{paper:o.dialogMemberForm},open:n,onClose:function(){return r({shouldRefetch:!1})}},p.a.createElement(Kt.a,null,"Editar usu\xe1rio",p.a.createElement(Ee.a,{className:o.closeButton,onClick:r},p.a.createElement(fe.a,null))),p.a.createElement(_t.a,{className:o.content},p.a.createElement(Nr,{member:t,formData:i,setFormData:l,isLoading:b})),p.a.createElement(Jt.a,{className:o.actions},p.a.createElement(U.a,{container:!0,justify:"space-between",spacing:2},p.a.createElement(U.a,{item:!0,xs:12,sm:8},p.a.createElement(z.a,{fullWidth:g,color:"secondary",size:"large",variant:g?"outlined":"contained",onClick:function(){window.confirm("Tem certeza em bloquear esse usu\xe1rio?")&&m(!0,"",null,t.id)},disabled:b},"DESATIVAR USU\xc1RIO")),p.a.createElement(U.a,{item:!0,xs:6,sm:2},p.a.createElement(z.a,{fullWidth:!0,color:"default",size:"large",variant:"contained",onClick:function(){return r({shouldRefetch:!1})},disabled:b},"CANCELAR")),p.a.createElement(U.a,{item:!0,xs:6,sm:2},p.a.createElement(z.a,{fullWidth:!0,color:"primary",size:"large",variant:"contained",onClick:function(){return c(!0).catch((function(){}))},disabled:b},"SALVAR")))))})),Lr=Re(Ba.updateMember,{name:"updateMember",init:!1,options:function(e){var t=e.formData,a=e.setFormData,n=e.member,r=e.setAlert,o=e.onClose,i=Object(Dr.pickBy)(t,(function(e,a){var n=t.previousValues[a];return n&&!Object(Dr.isEqual)(n,e)}));return{variables:Object(u.a)({id:n.id},i,{},i.buildingsOptions?{buildingIds:Object(Dr.map)(Object(Dr.pickBy)(i.buildingsOptions,{checked:!0}),(function(e){return e.value}))}:null),onRequestFinished:function(){H.hit("MemberFormModal - Saved Success"),r({alertMsg:"Usu\xe1rio alterado com sucesso",alertType:"success",showAlert:!0}),o()},onRequestError:function(e){H.hit("MemberFormModal - Save Error"),r({alertMsg:"Erro ao alterar este usu\xe1rio",alertType:"error",showAlert:!0});var t=Object(Dr.mapValues)(Object(Dr.get)(e,"errors",{}),(function(e){return e[0]}));a({validationErrors:t})}}}}),Wr=Re(Ba.blockMember,{name:"blockMember",init:!1,options:function(e){var t=e.member,a=e.onClose,n=e.setAlert;return{variables:Object(Dr.get)(t,"id"),onRequestFinished:function(){H.hit("MemberFormModal - Block Success"),n({alertMsg:"Usu\xe1rio bloqueado com sucesso",alertType:"success",showAlert:!0}),a()},onRequestError:function(){H.hit("MemberFormModal - Block Fail"),n({alertMsg:"Erro ao bloquear este usu\xe1rio",alertType:"error",showAlert:!0})}}}}),Pr=Object(Pe.a)(Object(G.a)((function(e){return Object(u.a)({},Tt(e),{actions:{margin:15,marginBottom:20},content:{marginTop:-20,overflowX:"hidden"},dialogMemberForm:{maxWidth:"50rem"}})}),{withTheme:!0}),Object(Pe.e)("formData","setFormDataRaw",{buildingsOptions:[],previousValues:{},validationErrors:{}}),Object(Pe.c)({setFormData:function(e){var t=e.setFormDataRaw,a=e.formData;return function(e){t(Object(u.a)({},a,{},e))}}}),Wr,Lr)(Ir),Fr=function(e){return Object(u.a)({},Tt(e))},Rr=Mn.ALL_ROLES,Yr=[Mn.ADMIN_ROLE,Mn.OWNER_ROLE],Hr=Re(Ba.getMember,{name:"member",init:!1,options:function(e){return{variables:e.memberId}}}),Vr=Object(Pe.a)(Object(Pe.e)("openModal","setOpenModal",!1),Hr,Object(Pe.d)(["openModal"],(function(e){var t=e.openModal,a=e.memberFetch;t&&a(!0)})))((function(e){var t=e.memberData,a=e.memberLoading,n=e.refetch,r=e.openModal,o=e.setOpenModal,i=e.setAlert,l=Object(Dr.get)(t,"member");return p.a.createElement(p.a.Fragment,null,p.a.createElement(z.a,{variant:"outlined",size:"large",onClick:function(){o(!0)}},"Editar"),r&&p.a.createElement(Pr,{isLoading:a,member:l,open:r,onClose:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shouldRefetch,a=void 0===t||t;a&&n(!0),o(!1)},setAlert:i}))})),qr=Object(d.memo)((function(e){var t=e.viewer,a=e.index,n=e.member,r=e.classes,o=e.refetch,i=e.setAlert;if(!t)return null;var l=Object(Dr.get)(Object(Dr.find)(Rr,(function(e){return e.value===Object(Dr.get)(n,"role")})),"label"),c="".concat(Object(Dr.get)(n,"name")," ").concat(Object(Dr.get)(n,"lastname")),s=Object(Dr.get)(n,"email"),m=Yr.includes(t.member.role);return p.a.createElement(Ua.a,{className:a%2?r.bgWhite:r.bgGray},p.a.createElement(Va.a,{className:r.tableSmallCell},p.a.createElement("div",{className:r.avatarNameContainer},p.a.createElement(yt,{name:c,photoUrl:""}),p.a.createElement("span",{className:"".concat(r.cellText," ").concat(r.userName)},c))),p.a.createElement(Va.a,{className:r.tableSmallCell},p.a.createElement("span",{className:r.cellText},s)),p.a.createElement(Va.a,{className:r.tableSmallCell},p.a.createElement("span",{className:r.cellText},l)),p.a.createElement(Va.a,{className:r.tableSmallCell},m?p.a.createElement(Vr,{memberId:n.id,refetch:o,setAlert:i}):p.a.createElement(p.a.Fragment,null)))})),Ur=Object(Pe.a)(Object(G.a)((function(e){return Object(u.a)({},Fr(e),{cellText:{color:"#313131",fontSize:14},userName:{marginRight:5,marginLeft:10},avatarNameContainer:{display:"flex",alignItems:"center"}})}),{withTheme:!0}),Sr)(qr),zr=Object(d.memo)((function(e){var t=e.classes,a=e.members,n=e.loading,r=e.refetch,o=e.setAlert,i=e.loggedMemberId;return p.a.createElement("div",{className:t.container},p.a.createElement(za.a,{className:t.paper},p.a.createElement(Ya.a,null,p.a.createElement(qa.a,null,p.a.createElement(Ua.a,null,p.a.createElement(Va.a,{className:t.tableCell},"NOME"),p.a.createElement(Va.a,{className:t.tableCell},"EMAIL"),p.a.createElement(Va.a,{className:t.tableCell},"PERMISS\xc3O DE ACESSO"),p.a.createElement(Va.a,{className:t.tableCell}))),p.a.createElement(Ha.a,null,n?p.a.createElement(Ua.a,null,p.a.createElement(Va.a,{colSpan:4,align:"center"},p.a.createElement(J,null))):Te()(a)?a.map((function(e,t){return p.a.createElement(Ur,{loggedMemberId:i,refetch:r,setAlert:o,index:t,key:e.id,member:e,loading:n})})):p.a.createElement(Ua.a,null,p.a.createElement(Va.a,{className:t.empty,colSpan:4,align:"center"},"Nenhum usu\xe1rio cadastrado"))))))})),Gr=Object(G.a)((function(){return{container:{marginBottom:40,paddingTop:20},empty:{backgroundColor:"#EEE"},paper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},tableCell:{fontSize:14}}}),{withTheme:!0})(zr),Qr=Object(d.memo)((function(e){var t=e.membersData,a=e.membersLoading,n=e.membersError,r=e.alert,o=e.setAlert,i=e.membersFetch,l=e.classes,c=r.showAlert,s=r.alertMsg,m=r.alertType,u=null;c&&(u=p.a.createElement(Ce,{message:s,type:m,onClose:function(){return o({alertMsg:"",alertType:"",showAlert:!1})}}));var d=x.getUserData(),g=v()(d,"member.id"),b=v()(t,"members");return p.a.createElement("div",{className:l.root},p.a.createElement(Ot,{alertBox:u,error:n}),p.a.createElement("section",null,p.a.createElement("div",{className:l.container},p.a.createElement("div",{className:l.headerView},p.a.createElement("aside",null,p.a.createElement(ue.a,{variant:"h5"},p.a.createElement("b",null,"Configura\xe7\xf5es"))))),p.a.createElement("div",{className:l.container},p.a.createElement(jr,null)),p.a.createElement("div",{className:l.container},p.a.createElement(Gr,{loggedMemberId:g,refetch:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return i(e)},setAlert:o,members:b,loading:a}))))})),_r=Re(Ba.getMembers,{name:"members"}),Jr=Object(Pe.a)(Object(G.a)(Fr,{withTheme:!0}),Object(Pe.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),_r)(Qr),Kr={updateMember:function(e){var t=e.name,a=e.lastname;return L.put("/member",{name:t,lastname:a})},updateMemberPassword:function(e){var t=e.password;return L.put("/member/change_password",{password:t})}},Xr=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=e.updateMemberFetch,o=e.updateMemberError,i=e.updateMemberLoading,l=e.email,c=e.name,s=e.lastname,m=e.setName,u=e.setLastname,d=t.showAlert,g=t.alertMsg,b=t.alertType,h=Na()(v()(o,"errors",{}),(function(e){return e[0]})),f=null;d&&(f=p.a.createElement(Ce,{message:g,type:b,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var E=i;return p.a.createElement("div",{className:n.root},p.a.createElement(Ot,{alertBox:f}),p.a.createElement("section",null,p.a.createElement("div",{className:n.container},p.a.createElement("div",{className:n.headerView},p.a.createElement("aside",null,p.a.createElement(ue.a,{variant:"h5"},p.a.createElement("b",null,"Configura\xe7\xf5es"))))),p.a.createElement("div",{className:n.container},p.a.createElement(jr,null)),p.a.createElement("br",null),p.a.createElement("div",{className:n.container},p.a.createElement(za.a,{className:n.paper},p.a.createElement(U.a,{container:!0,item:!0,xs:12,sm:6,md:4},p.a.createElement(U.a,{item:!0,xs:12},p.a.createElement(We.a,{fullWidth:!0,error:!!h.name},p.a.createElement(me.a,{label:"Nome",margin:"normal",variant:"outlined",className:n.input,InputLabelProps:{shrink:!0},disabled:E,value:c,onChange:function(e){return m(e.target.value)}}),h.name&&p.a.createElement(xa.a,null,h.name))),p.a.createElement(U.a,{item:!0,xs:12},p.a.createElement(We.a,{fullWidth:!0,error:!!h.lastname},p.a.createElement(me.a,{label:"Sobrenome",margin:"normal",variant:"outlined",className:n.input,InputLabelProps:{shrink:!0},disabled:E,value:s,onChange:function(e){return u(e.target.value)}}),h.lastname&&p.a.createElement(xa.a,null,h.lastname))),p.a.createElement(U.a,{item:!0,xs:12},p.a.createElement(We.a,{fullWidth:!0},p.a.createElement(me.a,{disabled:!0,label:"Email",margin:"normal",variant:"outlined",className:n.input,InputLabelProps:{shrink:!0},value:l}))),p.a.createElement(U.a,{item:!0,xs:12},p.a.createElement("div",{className:n.actions},p.a.createElement(z.a,{onClick:function(){return r(!0)},size:"large",color:"primary",variant:"contained",disabled:E},"Atualizar"))))))))})),Zr=Re(Kr.updateMember,{name:"updateMember",init:!1,options:function(e){var t=e.name,a=e.lastname,n=e.setAlert,r=e.setName,l=e.setLastname;return{variables:{name:t,lastname:a},onRequestFinished:function(){var e=Object(i.a)(o.a.mark((function e(){var i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.getEnterpriseUser();case 3:i=e.sent,c=v()(i,"enterprise_user"),x.setUserData(Object(u.a)({},c,{},{buildings:se()(v()(c,"buildings"),["name"])})),r(t),l(a),n({alertMsg:"Perfil atualizado com sucesso",alertType:"success",showAlert:!0}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n({alertMsg:"Erro ao atualizar perfil",alertType:"error",showAlert:!0});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),onRequestError:function(){n({alertMsg:"Erro ao atualizar perfil",alertType:"error",showAlert:!0})}}}}),$r=Object(Pe.a)(Object(G.a)((function(e){return Object(u.a)({},Tt(e))}),{withTheme:!0}),f.g,Object(Pe.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Pe.e)("disabled","setDisabled",!1),Object(Pe.e)("name","setName",v()(x.getUserData(),"member.name")),Object(Pe.e)("lastname","setLastname",v()(x.getUserData(),"member.lastname")),Object(Pe.e)("email","setEmail",v()(x.getUserData(),"member.email")),Zr,Object(Pe.b)({componentDidMount:function(){var e=this.props,t=e.setName,a=e.setLastname,n=e.setEmail,r=x.getUserData();t(v()(r,"member.name")),a(v()(r,"member.lastname")),n(v()(r,"member.email"))}}))(Xr),eo=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=e.password,o=e.confirmPassword,i=e.setPassword,l=e.setConfirmPassword,c=e.updateMemberFetch,s=e.updateMemberError,m=e.updateMemberLoading,u=t.showAlert,d=t.alertMsg,g=t.alertType,b=Na()(v()(s,"errors",{}),(function(e){return e[0]})),h=null;u&&(h=p.a.createElement(Ce,{message:d,type:g,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var f=m;return p.a.createElement("div",{className:n.root},p.a.createElement(Ot,{alertBox:h}),p.a.createElement("section",null,p.a.createElement("div",{className:n.container},p.a.createElement("div",{className:n.headerView},p.a.createElement("aside",null,p.a.createElement(ue.a,{variant:"h5"},p.a.createElement("b",null,"Configura\xe7\xf5es"))))),p.a.createElement("div",{className:n.container},p.a.createElement(jr,null)),p.a.createElement("br",null),p.a.createElement("div",{className:n.container},p.a.createElement(za.a,{className:n.paper},p.a.createElement(U.a,{container:!0,item:!0,xs:12,sm:6,md:4},p.a.createElement(U.a,{item:!0,xs:12},p.a.createElement(We.a,{fullWidth:!0,error:!!b.password},p.a.createElement(me.a,{label:"Nova senha",margin:"normal",type:"password",variant:"outlined",className:n.input,InputLabelProps:{shrink:!0},disabled:f,value:r,onChange:function(e){return i(e.target.value)}}),b.password&&p.a.createElement(xa.a,null,b.password))),p.a.createElement(U.a,{item:!0,xs:12},p.a.createElement(We.a,{fullWidth:!0},p.a.createElement(me.a,{label:"Confirmar nova senha",margin:"normal",type:"password",variant:"outlined",className:n.input,InputLabelProps:{shrink:!0},disabled:f,value:o,onChange:function(e){return l(e.target.value)}}))),p.a.createElement(U.a,{item:!0,xs:12},p.a.createElement("div",{className:n.actions},p.a.createElement(z.a,{onClick:function(){r===o?c(!0):a({alertMsg:"As senhas est\xe3o diferentes",alertType:"error",showAlert:!0})},size:"large",color:"primary",variant:"contained",disabled:f},"Atualizar"))))))))})),to=Re(Kr.updateMemberPassword,{name:"updateMember",init:!1,options:function(e){var t=e.password,a=e.setAlert,n=e.setPassword,r=e.setConfirmPassword;return{variables:{password:t},onRequestFinished:function(){a({alertMsg:"Perfil atualizado com sucesso",alertType:"success",showAlert:!0}),n(""),r("")},onRequestError:function(){a({alertMsg:"Erro ao atualizar perfil",alertType:"error",showAlert:!0})}}}}),ao=Object(Pe.a)(Object(G.a)((function(e){return Object(u.a)({},Tt(e))}),{withTheme:!0}),Object(Pe.e)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Pe.e)("password","setPassword",""),Object(Pe.e)("confirmPassword","setConfirmPassword",""),to)(eo);O.a.locale(N.locale);var no=C()(A()(le,(function(e,t){return e.submenus?A()(e.submenus,(function(t,a){return Object(u.a)({},t,{path:"".concat(e.path).concat(t.path),key:a,page:n[a]})})):Object(u.a)({},e,{key:t,page:n[t]})}))),ro=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;N.isiOS&&document.querySelector('link[rel="manifest"]').setAttribute("rel","no-on-ios"),this.setState({loading:!0},Object(i.a)(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W.getEnterpriseUser();case 3:a=t.sent,n=v()(a,"enterprise_user"),x.setUserData(n),H.trackScreenView("Home"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),x.clear();case 12:return t.prev=12,e.setState({loading:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])}))))}},{key:"render",value:function(){var e=this.state.loading;return p.a.createElement(B.a,{theme:Z},p.a.createElement(T.a,null),p.a.createElement(d.Suspense,{fallback:p.a.createElement(J,{hasRefreshMsg:!0})},e?p.a.createElement(J,{hasRefreshMsg:!0}):p.a.createElement(h.a,null,p.a.createElement(f.d,null,A()(no,(function(e){return p.a.createElement(f.b,{key:e.path,exact:e.exact,path:e.path,render:function(t){try{if(e.private&&x.isLoggedIn()||!e.private){var a=V(e.page,e.trackPage);return p.a.createElement(a,t)}var n="".concat(t.location.pathname).concat(t.location.search);return S.save("redirectUrl",n),p.a.createElement(f.a,{to:{pathname:"/",state:{from:t.location}}})}catch(r){return p.a.createElement(f.a,{to:{pathname:"/",state:{from:t.location}}})}}})}))))))}}]),a}(d.PureComponent);b.a.render(p.a.createElement(ro,null),document.querySelector("main"))}},[[305,1,2]]]);
//# sourceMappingURL=main.0d339a09.chunk.js.map