(this["webpackJsonplobby-portal"]=this["webpackJsonplobby-portal"]||[]).push([[0],{213:function(e,t,a){e.exports=a.p+"static/media/logo.7f12e1c7.png"},290:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAADcCAYAAACs2N87AAAXdUlEQVR4AezBgQAAAAACoDH2Jx3kKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAL86dusQEaMoisLohSwBjECUZDCNv0DSNU18BYAogVHI5mIGz2k3AeByVlh11/2NHMyHtcbATCgA8Fs+O3AaemjMIBQAEFggsACoBBYILAAQWAgsABBY7UFgAYDAQmABgMACgQWAwAKBBQACC4EFAAILBBYAAgsEFgACS2AhsABAYIHAAkBgXYaLV8CDwHorAATW6MFEKC+CkYNdgQWAwBJYCCwAEFgILAAQWLRBYAGAwEJgAYDAAoEFgMASWAgsABBYCCwAEFg0Q2ABgMBCYAGAwAKBBYDAElgILAAQWAgsABBYtE9gAYDAQmABgMCibQILAAQWAgsABBZtE1gAILAQWAAgsGiSwAIAgYXAAgCBhcASWIuh+4DlUFJgELoPmAslsb3QvdN2KCCwEFh/30boP2AnlBS4Dv0HLISS2GPo3+k+FBBYCCyB9e8hsILAQmCBwBJYCKwfJLAQWCCwBBYCS2AhsAQWAktgIbAEFggsBJbAohJYCQgsBBYILIGFwBJYCCyBhcASWAgsgQUCC4ElsKgEVgICC4EFAktgIbAEFgJLYCGwBBYCS2CBwEJgCSwqgZWAwEJggcASWAgsgYXAElgILIGFwBJYILAQWAKLSmAlILAQWCCwBBYCS2AhsAQWAktgIbAEFggsBJbAohJYCQgsBBYILIGFwBJYCCyBhcASWAgsgQUCC4ElsKgEVgICC4EFAktgIbAEFgJLYCGwBBYCq0UCC4EFAktgIbAEFgJrK9y8012c55iAQGAJLASWwEJg/TwQWAILgSWwEFggsAQWAktggcBCYAmsJ/buOcqSLGvY+K5q20hna8207cK4bay2bdu2Mtu2bdsufG132Xbu77n5xqtaneude3bgROb+47diWH2T96lzIvYJ5zyw6tAT//oD66LOA2sms7bMx3UZ/KsDy/K/WQRSbi7SF+ZcZIHlgeU8sGqxE25AP0yA/hvG43Ncjl352V4IEpVsA2s1nICH8TOmQf8PMzAEz+Bs9K6ZrWU2SHm4aF+Ycx5YHlhZq5+ntTvXGvTCPjgYJ+K6xLE4GHuiV+UJ6No5WmaBRCj9wOLj5XoEPkEbNAXT8RYONTzwFHtgrYVrMAiakuG4Bf+sm7ulO8TFLdoX5pwHlgdW2urmbOnOdQOchZcD31jH4GWchg0MwRVzYK2GuzANmqFJuAXLln2LsHb2llm5boOPoRn7BYfUzN4yG8TFKdoX5pwHlgdWitbA1fgNmrIhuBordIItwkY8Cc3ZNNyJurIFVsN8rd2SsOoHzdnvOKQSd5C08GcujxcNHmYXYo5IdkK2M34sq3W+m9yd88DywLLbCG9Cc/IKNixhYK2HczAVWqCJOKFxgdZukLwYAmt5vAktWF+sBUnR01CDIyFFqqzwcf0RGqiPYTvWtwidbxF6YHVKq+F9aEFexkolCqyB0Ih8gWUiX8EahUnQSLThYqJi1pR2EFbFDGigwUWvYiX3VarBdvAxDc5XsDywPLBqZm2Zi+tFmAqNwAXB2zcBDIEVo5HYOuLAitUHaIak4DaowekFr179YFkVrNyzCQmV/AvnYuOB5YFVtT+jHzQyX2HFaFew4neSB1bVBmADiEXyFOl4aKAx/BkLQ3JnX73a3geNuvLzFSwPLLutMQ4aqYnYzgMr2F2VkRqQDBgCK2oT0RtidAnU4BxIniqrxsbVqzd8krsrPw8sDyy7E6ElcbwHVrA7rVs2Hek4sDyykm33Yca5Z42QHO0NNehVeGDJ5A9bMalKU7pN/nAxCJzriAeWB5YhrqJ2qQdWsJN9i7BqE1J44OJAqMENkDxU5tKlsXoVQ2DdAK1W+QPLeWB5YHlcmVzogRVsdw+sqg3kvqQFISGSaPneOOdseUgOtspt9coDy3lgeWD55yI6M7C3B1aQqVjZA6tqb1ieaE1myqnBo5AcfBzD6pUHlvPA8sAqo16YBi25yejRSQJrBibgP2nGvmTO0ZwQu0IDawomJCZDM3YKJMRSi7RPrH8darAKJEObG+eI9fbAciXmgeWBZTBryxJcR2Z8ZMuUmUyHZuR3PqaFIHa5BtbvuBo7YWX+2YtC/lPydVoDu+MWDIGm7NySrWDNwCs4Hf9C3UyDOGev/Gf4J07BS5iRftSbjnRaE2rwDiRDH0EDPQzxwHKl5oHlgWXwODRF43Ev9sKqlSemIDOZN4mF/fBoBisN95doBeuBkL/l187Zfg/PRvgg5dWf5UoQWGNxJhoC/kKxCNfj8Cs0Ja9DDO6DGvwDkoHNoAYremA5Aw+sUvPA2gWakm+xX8g2UxJcB6X8prdV5IH1PtaHpGBjfAVNwcMRB9YUXEUkLQCxqKx0JStf9ri3HwGzjHGL/i1ImpZatH378sMYVq88sJwHVql4YFVCiOuAlFasjqybq6U7xCLZ0jkqpTe9nyp/HsQig8Bqwxn82bNB0pLMVroWmoKVIgysAegJSdmK6Ac16mP4GUhj+OjOkBRtGsH3kAeW88DywCql86BGX2I5SMqWRl+o0WGRrWBNwBY5fE9Pt65iRRZYfbBkhvchzs/1BajRZobXsDDXwcbjoyQNjQu2r159EMHqlQeW88DywCrl6tU4qMGTrJrMA8lCspr1HNRgkG0VK9XAmoBekBzskEJk1UcSWG/z/TAnJFNsGdojyzyS4ASowQGQFGwSwX18HljOA8sDq5QOgho82DBfazdIhtKKrN0jWMFqw9aQHB0HNTgngsD6GktC8pBE1ifGpxobgleOFmjtZhw+OuA/n6IM1WRfvboOYuCB5TywSs0D6wtooHcrN6VDckFkGR8VfyeCwLoAUoB7oIG+b2ZOEySELbAMw0/tao3nBJ4BMdgVanA4xGBj49es0QOrS3IeWPDAWg4aaCjqCpjVtaRhVlcbli4wsD6vmb1lNkje+LzNxz9/eEGP2VsD6zhIQXazfL0Lnj011nKEj3H16nqIB1aX5Dyw4IF1BjTQ9pCC7FrQze7WwPobpEB7QwOdVFBg9TdsdZklIwo+hgaYQagsZhxu26OggbEbGQcKN3hgdVnOA8sDyzDb5kNIUZoXNs3lebGgwHoLUqTkUOHfoQGeKiiwdoMYFH2j904Qo6eggcZUnkoMCLsPratXHljl5TywPLDsN/FOhQbYtMRvehMLCqztIRE4ExpgUNNCrd0g1TIE1qjUZoTZb/b+ERrg4pRGlbRBA90AqcK/LEGHJT2wujLngeUrWGtAA/wGKVpyPMyAPAcfGgJr/H8eE1S05GPXIIH38xgC63ZIDAzDP5+BpOB64w3n9YaVbcMTpx5YXY/zwPLA2gMa4BJIJC6HBtgx58B6ARILw2rMOjlvEe4EicSG0AC/pPRwx+Jcx+dwJudG+WxH2hn+zx5YmXIeWB5Y50AD9IBEYnPDDdt5BtZZkIg8DA2wb86B1QSJQWUFMnBLfTIkJacZ53KtkvHq1bkQX8Hq6pwHlgfWVdAqTbcfrpuqBQK/Zq05B9bukIicBA2wT46BNb5+7tbukFjwmoYEjgapSTHyBkADPVr+1StfwXIeWB5Y8XsZWqVxkFg08TQh10HQKt2dc2BtAInI/tAAV+QYWGMhkXk1gpW4PaEGf81o9eo8iK9gOeeBlfDAqtJHkMh8B63SXTkH1uqQiGxZgsB6BxKZV4oOrMqgWq6fWs5zzGD1amAOK9u+guU8sErsr5bHsAvjgfUstEqfemBFH1hfeWBlcIQNsAUECfPU9iMgvoLlnAdWR9aFBrjTA6tQz0Cr9DEkwNXQAJtBIrJXXkfWGAJrjAfWH6ucC8n1Bct0/Mb5W7tBYF69KmrSvu3/7IHlPLDytHbsE7ojeLPoB4nM93ltERqGdO5Z/pvcTU8RhpwdOYn3wTkhseA1/RBybAw3p88DSVOyKjoNmsKokteggY6E+AqWcx5YHar8MueqAUZDSuhaaJWmQGLRuGDuN7kf2Em2ke+ABtgGEuAtaIDlI/v9MCkkFKP7OgI/Jqc5rGZcvZoT4itYznlgdajySDjXYdAAK3SJMQ1APSQKTBYP/BhuMs3dKv8q5zd5TsA3zN3aFRIDQ4h8AMlIDSYaDz5/vAyrV76C5Tywyu9taIATSvnUZPnf9LbMedDo0tAAE9nWmTeSo3LqoAGmh50LaNpavQcSiZOh9u3o1F0KDTQMGugbiAeWcx5YWf+y+hhSMhtZV38icCU0wA6QnKeS7wyJwFHQAF9CAm0BDTA2lvuweC1fQAMclfGE+bmDBqDa7eqB5ZwHVjU2gwbqBSkNpi4HfpwjamdvmRVSqDnaD3v+CRpgRetYiACvQCLQBxrgRsP32hJc26ABdoMUbD1ooPUgGTsSahfp6pUHlvPAKr/KNg7XifY30PhVHtPm+luJtwlD74eaADE4AhpoTUiBtoMG2hZi8FXom3klpiHFMN1DNrp2zpZZIFlqmK+1W8ATjha7emA554FlPw7Dvg0Us3tC5+gUuYqVvKF8DA3wPMRgGWiRNzwbJoD/XNQ9ZPwZZ0MDHQwpyD+hge6NdPXdvnrlgeWcB1aAfaCBBqEGEj37uWYHlfR1HwMx+gQa6FhIAa6GBnoMYrQ8NNBYNBX0lOpP0EBbRveQjt2O8MByzgMreJtwNDTQ5/xing9SAgsks600wHgsBclZLUZBA7ShueB7XqagJyRHO6Itgi2hPtBAH+b5c1U/T/vYlqcsT+jlfYN+6LDkKrwHgQeWcx5Ywa6AGjxh30LLR9hRMwA+4c1ofkgeKm9YxoNuP4JYJWE61fh4/IqQHPTGBMswybTugUrmLqnBk3VztXSHZKlh3vYt6DuhBpdBCvAQNCMbQeCB5ZwHVrAmtEENPq5sMUCilsySMnimbs6W7pAsJXH1MtRgb0hKroMaI2tlSIY2NsUVcErK09AHQg0ezXKmWPJ06h1Qg+lohhRgGbRBU/Y+JOGB5ZwHlsm1UKNfsA4kctYnkF7NcvsmuRfmJajB77zBz57idkw9pkENpmTxYETjAu0rMCel8EY7Mu1z9P5zDpfRpxndk1WPt6BGd0EKdHHGq1ceWM55YJksiYnQFFyLOkikDoUa9cefISlbGV9BjQ7ObNCp3V1E5JIprUiugnehBoYHAnJYxQLG4LA0Vk/r/2NL8GCMghpNQl3BM+4W5zocahDw9KsHlnMeWIbwMJiMW7AGJCbJoa/9oEYTcXwa9+yw2lF5Iz4dU6FGAzo45sUkGdY6BJqC8TjfsLW0Bh6EpuSrymgHSNqSmVqakk+xd8j3XDIFfS/8CE3J6ZAIHA9NQRvW98DywHIeWGmHx+xcP4SmbBgexinYEdtgpUBLpX50jt2POLTyBgapRjL1+3QMgKZku4yf0NOUvY3j0aOj+/j47xqwMa7Ed9CU/TXXeXN2o3Eb9u7oAYLk/qrVcDDuxihoir6y34SfjspDNrye76FGT0Fi5IHlPLDKrwmToJF6A5KSu6EpmoincTh6dDAjbDlshFPxJtQu9zeI+6AZasOX6IPfoRm7MKct+OHQDI1BHyDzn+HpWAkSkb1S+L5b0wPLA8t5YGVp6y4RWIxcMByfE6NBlRUxSMbmNw6kjMlHAQ8DBDAddxSjgyAR6gMN9DSkKh5YznlgBTilFIFltyamQEtuBjbM+fH48dASG0wsLpLzmJCToCV3S6QHui/EdUwOq1ceWM55YJldU4rAstsDWnK7QXLWo8SRNQTLQ/LUvEj7E3y3Qkvq1crZmJDY8NrOscy3g8TMA8t5YHlklS+wgKOhJXUe5N/mkTXUEFdmTQu2R9Zt0JJ51zD0NFO8tkaMgwaYZhi54oHlnAeWyTloizKwPLLOhwAeWfa4ykfD/KWLrGdijasksK6HBroVUhQPLOeB5XbC5OgDy+4YaAm04UhIJNbG79CI9YtppaJu7pbuXE/ADGjEWgzjGDKXrF5NNaxeLQUpkgeW88Byq+Dr6APLbqfIb3wfhy0jvMl4UcP5iVm7PzkGJ8bVl79jRKTfZ3tDYmY8S/E2SOE8sJwHlqtMCOd6ESbFH1jmmPwhxrECMf+Nu4aBj8kq4ARoBEaV4Wc4Oe7lMWgkPsXykMitDA00FUtDYuKB5Tyw3J/wUvSBZT9H7kpoBCbgbPuxPPlIxjg8DS3QbaiFlMg2GAAtyCAcVDmvEBI7XusjnXX1ygPLeWC5Hngm6sCyWxNvQgvyMJaBlNDaeAWao/vwJ0gZJWdlHm6/py3gbEjOm4SUAa93LWigCWWJbw8s54HlmnE+vok2sOw2yTG0puNerAPpBNbGvZgIzcBY3Bjd4/b2FdQ98QE0I31wcOWwcUiZGH8WL4aUhwcW4Dyw3Ko4Hs9hWMyBZYiFazI6W+4LnF65YRzS2VRuNE8eIrgXQ6EGv+BObMm9X7NBOqvkDMvT8C6mQg0+xZlYFVJSfzOtXiUrdWVi+D97YHVGHliufp72eT+N6IG9cQIuMzgEEoPKRGuuPXEKng0Ihun4FnfgSDRAuooG7vPhugz2wmV4DG/h1z/wKh7EBdgVTc0Lt3aDdDXJFuJfcAyuxfPoj19n8v/wPG7DsdjYHhaR4C9aXWT1ylewnAeWc40Mj2SFZm7+9frYCvt3YEMsV3mj/P/t3QPM9eYfx+H7PPobs20EsxnOthfOthXOthljtrfOtm2j09P9Zqt333en3ZXkyomOwk++VUi/H/D1ApqzXo0XkgVLYCGwAPjuDvj3t+DJBxas1kBgAbBWRly9GgvzP0Jqo4w3C6xfhMACcJPjkcx7hG0fUgYLVucgsADYvFXrlQWLFhBYAB7R9cJYXq8sWGH2kH4NCCyA1tonI65eq7leWbDCkiF1DAILgKEjxonXtzICa4uQ6rFgrRASdC6wANg7I64em3TkiKGQ2i7vzWWxe6hq2DYk6FRgATB5eCcjsDYI8TkWrA1DVcNZIUGnAguAozLi6vHv1isL1jyhquGZkKAzgQXAZJkPtt4wJAtW6JXFv1JZfBSqGuYLCToRWACcar36Tv4HlMV9oarhhJCg9YEFwGyhyrBSSF2S/wFlcWioavgwTBIStDqwADgvI65unfL/R/ZC6pL8DyiLJUJV07EhQWsDC4AFQ5Vh6ZAsWD8yWBZDqSxeyoiseUKCVgYWAFflrFdT/OfIXkhd08iHZNxw9AtP98pi/JCgVc8iBGDxUGVYNqQuauZDymLOUGW4bqAsRkIKAVoQWADcmHXu1X+P7IXURc19UFlcHqoMF/TK4t8hQd8vWACsHqoMi4TUVc19UFksGKpM94SpQwKBBdDX7suIq4tCEli/U+6K9bU3wjoh0ZcEFgBrhyrDvCH9fgJrrjAaqgZcHeYPif4gsACYZPiI4Xh91nqVGVg1IuvgUDXonrBLmG2oLAZD4q9BYAH0pU1DlWE+gVVDryz+ncriwVCNAW+FW8IF4fAM8/3hNWXoiP/F/zsiHD7WcLPA6h8Ak4wcMWS9yg2s/EOF74eqT21Y43DVpKFqAQTWmAKwd6hqGg2zCqz8yFpHYHWDwALg6yM5b4aqptNDEljNRNYBAqsTBBYAe4YqwwwCq9nIOkhgtZ7AAmCqMEtN04QksPo7sgQWAgsAgfV1ZG0XRgUWAgsAgdVsZC0dXhZYCCwABFazkTVpuFhgIbAAEFjNh9bG4VWBhcACQGA1qFcW4319K4d3BBYCCwCB1Xxo7RFeFFgILAAEVoOGy2IglcWy4fTwksBCYAEgsBr0j7LopbKYO2weTg13hDKMCiwEFgACq0GDZTGcymLGHL2y+G9If8SkXz1BfMYWYOiI/4b0ZwGAP/oGAAAEFgCAwAIAEFgAAAgsAACBBQAgsAAABBYAAAILAEBgAQAILAAABBYAgMACABBYAAAILAAAgQUAILAAABBYAAACCwBAYAEACCwAAAQWAIDAAgAQWAAACCwAAIEFACCwAAAQWAAAAgsAQGABAPA5vJFvdTUb5IYAAAAASUVORK5CYII="},423:function(e,t,a){e.exports=a(714)},571:function(e,t,a){e.exports=a.p+"static/media/slack-integration.9c4865bb.png"},604:function(e,t){},606:function(e,t){},615:function(e,t){},617:function(e,t){},637:function(e,t){},639:function(e,t){},667:function(e,t){},669:function(e,t){},670:function(e,t){},675:function(e,t){},677:function(e,t){},696:function(e,t){},708:function(e,t){},711:function(e,t){},714:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"Signin",(function(){return rt})),a.d(n,"Signup",(function(){return ea})),a.d(n,"CreatePassword",(function(){return oa})),a.d(n,"ResetPassword",(function(){return la})),a.d(n,"Slack",(function(){return Rn})),a.d(n,"Members",(function(){return Bl})),a.d(n,"Locations",(function(){return ri})),a.d(n,"PlanSubscription",(function(){return Ci})),a.d(n,"MyPlan",(function(){return Bi})),a.d(n,"Notifications",(function(){return zi})),a.d(n,"MyProfile",(function(){return Yi})),a.d(n,"ChangePassword",(function(){return Ji})),a.d(n,"Tickets",(function(){return dc})),a.d(n,"NewTicket",(function(){return Cc})),a.d(n,"TicketsReport",(function(){return Bc})),a.d(n,"PublicNewTicket",(function(){return Qc})),a.d(n,"TicketCategories",(function(){return is})),a.d(n,"Services",(function(){return bl})),a.d(n,"MyRequests",(function(){return hs})),a.d(n,"MyRequestDetails",(function(){return js})),a.d(n,"ServicesOnDemand",(function(){return Cs})),a.d(n,"ServicesSubscription",(function(){return ys})),a.d(n,"NewServiceRequest",(function(){return ks}));var r=a(11),o=a.n(r),c=a(17),l=a(47),i=a(48),s=a(58),u=a(57),m=a(4),d=(a(425),a(0)),b=a.n(d),p=a(26),g=a.n(p),f=a(34),h=a(16),E=a(10),v=a.n(E),O=a(102),j=a.n(O),C=a(356),y=a.n(C),k=a(18),A=a.n(k),w=a(817),T=a(816),x=a(243),S=a.n(x),N=a(1),D=a(357),M={save:function(e,t){return localStorage.setItem(e,JSON.stringify(t))},get:function(e){try{var t=localStorage.getItem(e);return JSON.parse(t)}catch(a){return{}}},delete:function(e){return localStorage.removeItem(e)}},I=new(a.n(D).a),F={setUserToken:function(e){return M.save("userToken",e)},getUserToken:function(){return M.get("userToken")||""},setUserData:function(e){var t=M.save("userData",e);return I.publish("ON_VIEWER_CHANGE",e),t},getUserData:function(){return M.get("userData")||{}},clear:function(){I.publish("ON_VIEWER_CHANGE",null),M.delete("userToken"),M.delete("userData")},getAuthToken:function(){var e=M.get("userToken");if(e)return e;throw new Error("No authToken")},getBearerToken:function(){var e=M.get("userToken");return"Bearer: ".concat(e)},isLoggedIn:function(){var e=M.get("userToken");return!!e},isUnauthorized:function(e){return e&&e.response&&401===e.response.status},subscribeOnViewerChange:function(e){return I.subscribe("ON_VIEWER_CHANGE",(function(t){return e(t)}))},unsubscribeOnViewerChange:function(e){return I.unsubscribe(e)}},R=a(358),L="production",B="https://api.lobby.tech",P={appName:"Lobby Portal",appNamespace:a.n(R)()("Lobby Portal"),apiURL:B,systemName:"Lobby",systemPhotoUrl:"".concat("https://portal.lobby.tech","/system-icon.png"),wsURL:"wss://api.lobby.tech",env:L,isDevelopment:!1,isStaging:!1,isProduction:!0,livechatId:12113223,whatsappHelp:"https://wa.me/5511999977468",slackClientId:"760439175683.1126241376992",slackOAuthURL:"https://slack.com/oauth/v2/authorize",slackOAuthScope:"commands,users:read,users:read.email,chat:write",slackOAuthUserScope:"users:read,users:read.email,chat:write",slackRedirectURL:"".concat(B,"/lobby_portal/slack/integrate"),apiRequestTimeout:2e4,mixpanelToken:"edc68e4e1788a9a91e92f329276c65f7",sentryDsn:"https://3be1796d494f46669c83a078596a5f77@o280883.ingest.sentry.io/5246294",pagarmeEncryptionKey:"ek_live_kI7ECtOa76HXqGKCY9qWDxKSmd9Kc6",locale:"pt-br",isiOS:!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)},_=function(e){var t=Object(N.get)(e,"response.data")||{};return t.response=Object(N.get)(e,"response"),t||(t={error:Object(N.get)(e,"message")}),t},q={request:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,l=x.CancelToken.source(),i=new Promise((function(a,n){e=a,t=n}));i.cancelRequest=function(){return l.cancel("Operation canceled by the user.")};var s=F.getBearerToken(),u=S.a.create({baseURL:"".concat(P.apiURL,"/").concat(P.appNamespace),timeout:P.apiRequestTimeout,headers:{"Content-Type":"application/json",Authorization:s},responseType:"json",onUploadProgress:Object(N.get)(c,"onUploadProgress"),cancelToken:l.token});return u[a](n,r,o).then((function(t){return e(t.data)})).catch((function(e){return t(_(e))})),i},get:function(e,t,a){return this.request("get",e,{params:t},a)},post:function(e,t,a,n){return this.request("post",e,t,a,n)},put:function(e,t,a,n){return this.request("put",e,t,a,n)},delete:function(e,t,a,n){return this.request("delete",e,t,a,n)}},U={getViewer:function(){return q.get("/member")},updateMember:function(e){var t=e.name,a=e.lastname,n=e.jobRole;return q.put("/member",{name:t,lastname:a,job_role:n})},updateMemberPassword:function(e){var t=e.password;return q.put("/member/change_password",{password:t})},revokeSlackUser:function(){return q.put("/member/revoke_slack")}},W=a(146),z=a.n(W),V=a(359),H=a.n(V);z.a.init(P.mixpanelToken);var Y={prepareTrackUser:function(){var e=F.getUserData();if(e&&e.id){var t={app_id:P.appNamespace,app_name:P.appName,user_id:v()(e,"id"),email:v()(e,"email"),phone:v()(e,"phone"),name:v()(e,"fullname"),company:v()(e,"company.name"),company_id:v()(e,"company_id"),created_at:v()(e,"created_at"),verified_at:v()(e,"verified_at")};return z.a.identify(t.user_id),z.a.people.set(t),t}return{}},hit:function(e,t){if(P.isProduction){var a=this.prepareTrackUser(),n=H()(t,a);return z.a.track(e,n)}return console.info(e)},trackPageView:function(e){this.hit("".concat(e," - Viewed"),{screen:e})}},Q=function(e,t){return function(a){return Object(d.useEffect)((function(){Y.trackPageView(t)})),b.a.createElement(e,a)}},G=a(818),J=a(54),K=function(){function e(){Object(l.a)(this,e)}return Object(i.a)(e,null,[{key:"setup",value:function(){if(P.isProduction){G.a({dsn:P.sentryDsn,environment:P.env}),J.b("server",P.apiUrl);var e=this.getViewerData();J.c(e)}}},{key:"capture",value:function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.length>1&&void 0!==r[1]?r[1]:{},t&&(P.isProduction?(n=this.getViewerData(),J.c(n),Object.keys(a).forEach((function(e){return J.b(e,a[e])})),setTimeout((function(){return J.a(t)}),10)):console.warn(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getViewerData",value:function(){try{var e=F.getUserData();return e&&e.id?{id:e.id,email:e.email}:{}}catch(t){return{}}}}]),e}(),X=a(3),Z=a(9),$=a(69),ee=a.n($),te=a(7),ae=a.n(te),ne=a(32),re=function(e){var t;return{container:(t={width:"auto",height:"100%",maxHeight:"100%",marginBottom:20},Object(ne.a)(t,e.breakpoints.up("md"),{paddingLeft:e.menuWidth,width:"calc(100%-".concat(2*e.menuWidth,"px)"),minWidth:"calc(100%-".concat(2*e.menuWidth,"px)"),maxWidth:"calc(100%-".concat(2*e.menuWidth,"px)"),marginLeft:"auto",marginRight:"auto"}),Object(ne.a)(t,e.breakpoints.up("xl"),{width:e.maxContainerWidth,minWidth:e.maxContainerWidth,maxWidth:e.maxContainerWidth,marginLeft:"auto",marginRight:"auto"}),t),root:Object(ne.a)({flexGrow:1,marginRight:10,marginLeft:10},e.breakpoints.up("md"),{marginRight:40,marginLeft:40}),fab:{position:"fixed",zIndex:1e3,bottom:e.spacing(2),right:e.spacing(2)},headerView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"flex-start",whiteSpace:"nowrap"},centerHeaderView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center",alignItems:"center",marginTop:120},tableCell:{color:"#003f54",fontSize:14,height:"auto",wordBreak:"break-word"},tableExtraSmallCell:{fontSize:14,height:"auto",width:120,maxWidth:120,minWidth:120,wordBreak:"break-word"},tableSmallCell:{fontSize:14,height:"auto",width:160,maxWidth:160,minWidth:160,wordBreak:"break-word"},tableTinyCell:{fontSize:14,height:"auto",width:110,minWidth:110,maxWidth:110,wordBreak:"break-word"},tableMediumCell:{fontSize:14,height:"auto",width:180,maxWidth:180,minWidth:180,wordBreak:"break-word"},bgGray:{backgroundColor:"#e7ebec"},bgWhite:{backgroundColor:"#FFF"},roleSelect:{fontSize:14},inputBox:{marginTop:10},selectBox:{width:200,marginTop:10},center:{display:"flex",justifyContent:"center",textAlign:"center"},textCenter:{textAlign:"center"},emptyHeaderIcon:{fontSize:32},emptyHeaderTitle:{marginLeft:10},iconMenu:{marginRight:10},paper:{padding:20,paddingBottom:30,overflowX:"auto",marginRight:"auto",marginLeft:"auto"},tablePaper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},input:{marginTop:20},actions:{marginTop:20,display:"flex",width:"100%",justifyContent:"flex-end"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}},oe=Object(d.memo)((function(e){var t=e.classes;return b.a.createElement("div",{className:t.outterContainer},b.a.createElement(ee.a,{className:t.emptyHeaderIcon}),b.a.createElement("b",{className:t.emptyHeaderTitle},"Ocorreu um problema, por favor, tente mais tarde"))}));oe.propTypes={classes:ae.a.object};var ce=Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{outterContainer:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center",alignItems:"center"}})}),{withTheme:!0})(oe),le=Object(X.b)(Object(X.h)("hasError","setHasError",!1),Object(X.c)({componentDidCatch:function(e,t){K.capture(e,{extra:t}),(0,this.props.setHasError)(!0)}}),(function(e){return function(t){return t.hasError?b.a.createElement(ce,null):b.a.createElement(e,t)}})),ie=a(770),se=a(769),ue=a(771),me=function(e){return{progress:{margin:e.spacing(2)},middle:{marginTop:20},center:{justifyContent:"center",textAlign:"center"}}},de=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={slowConnection:!1},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.hasRefreshMsg&&(this.timeoutConnection=setTimeout((function(){e.setState({slowConnection:!0})}),P.apiRequestTimeout))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutConnection)}},{key:"render",value:function(){var e=this.props,t=e.hasRefreshMsg,a=e.classes,n=e.theme.mainColor,r=this.state.slowConnection;return b.a.createElement(se.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:a.middle},b.a.createElement(ie.a,{color:n,className:a.progress,variant:"indeterminate",disableShrink:!0,thickness:5}),b.a.createElement("b",null,"Carregando..."),t&&r?b.a.createElement("div",{className:a.center},b.a.createElement("br",null),b.a.createElement("b",null,"H\xe1 problemas de conex\xe3o com a internet"),b.a.createElement(ue.a,{onClick:function(){return window.location.reload()},size:"large",color:"primary",variant:"contained"},b.a.createElement("b",null,"Recarregar"))):null)}}]),a}(d.PureComponent),be=Object(Z.a)(me,{withTheme:!0})(de),pe=a(391),ge=a(190),fe=Object(pe.a)({palette:{primary:{main:"#1177FF"},secondary:{main:ge.a[500]},background:{default:"#F5F5F5"}},typography:{useNextVariants:!0},maxContainerWidth:1440,menuWidth:200}),he=a(394);function Ee(){return(Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ve(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Oe=b.a.createElement("g",{id:"Group_2417","data-name":"Group 2417",transform:"translate(15781 2913)"},b.a.createElement("g",{id:"Group_2416","data-name":"Group 2416"},b.a.createElement("g",{id:"Group_2413","data-name":"Group 2413"},b.a.createElement("rect",{id:"Rectangle_2430","data-name":"Rectangle 2430",width:128,height:128,transform:"translate(-15781 -2913)",fill:"#fff",opacity:0}),b.a.createElement("path",{id:"Path_7070","data-name":"Path 7070",d:"M-15760.308-2849h86.573l4.255,47.009-7.294,9.349-9.059,3.811h-64.633l-9.843-7.757-4.882-9.514Z",fill:"#ffaba9"}),b.a.createElement("g",{id:"shopping-bag",transform:"translate(-15820.785 -2913)"},b.a.createElement("g",{id:"Group_2412","data-name":"Group 2412",transform:"translate(53.02)"},b.a.createElement("g",{id:"Group_2411","data-name":"Group 2411",transform:"translate(0)"},b.a.createElement("path",{id:"Path_7069","data-name":"Path 7069",d:"M154.449,105.555l-5.716-72.029A9,9,0,0,0,139.8,25.25H128.508v-.507a24.742,24.742,0,1,0-49.484,0v.507H67.733A9,9,0,0,0,58.8,33.516l-5.718,72.049A20.842,20.842,0,0,0,73.861,128h59.808a20.842,20.842,0,0,0,20.78-22.445ZM86.521,24.742a17.245,17.245,0,0,1,34.49,0v.507H86.521Zm56.939,91.484a13.207,13.207,0,0,1-9.79,4.276H73.862a13.344,13.344,0,0,1-13.306-14.355L66.273,34.1a1.47,1.47,0,0,1,1.459-1.351H79.023v9.234a3.749,3.749,0,0,0,7.5,0V32.747h34.49v9.234a3.749,3.749,0,1,0,7.5,0V32.747H139.8a1.473,1.473,0,0,1,1.46,1.361l5.716,72.029A13.208,13.208,0,0,1,143.459,116.226Z",transform:"translate(-53.02)",fill:"#fe5956"}))))))),je=function(e){var t=e.svgRef,a=e.title,n=ve(e,["svgRef","title"]);return b.a.createElement("svg",Ee({width:128,height:128,viewBox:"0 0 128 128",ref:t},n),a?b.a.createElement("title",null,a):null,Oe)},Ce=b.a.forwardRef((function(e,t){return b.a.createElement(je,Ee({svgRef:t},e))})),ye=(a.p,Object(d.memo)((function(){return b.a.createElement(he.a,{component:Ce,viewBox:"0 0 128 128",style:{width:20,height:20}})})));function ke(){return(ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ae(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var we=b.a.createElement("path",{d:"M240,144h-5.336V133.336A5.328,5.328,0,0,0,229.336,128H224a5.34,5.34,0,0,0-5.336,5.336V144H165.328V133.336A5.323,5.323,0,0,0,160,128h-5.336a5.34,5.34,0,0,0-5.336,5.336V144H144a16.016,16.016,0,0,0-16,16v80a16.016,16.016,0,0,0,16,16h96a16.016,16.016,0,0,0,16-16V160A16.016,16.016,0,0,0,240,144Zm0,101.338H144A5.34,5.34,0,0,1,138.664,240V176.217H245.328V240A5.328,5.328,0,0,1,240,245.339Z",transform:"translate(-128 -128)",fill:"#4adaa4"}),Te=b.a.createElement("g",{transform:"translate(37.331 55.999)"},b.a.createElement("path",{d:"M10.339,52.621A4.008,4.008,0,0,1,8.7,48.706L11.051,34.3,1.131,24.121A4,4,0,0,1,3.4,17.37L16.946,15.3l6.1-12.987A3.992,3.992,0,0,1,30.278,2.3l6.093,13,13.556,2.073a4,4,0,0,1,2.264,6.75L42.27,34.294l2.352,14.4a4,4,0,0,1-5.879,4.143L26.67,46.17l-12.09,6.683a4.038,4.038,0,0,1-1.937.5A4,4,0,0,1,10.339,52.621ZM24.731,45.1l1.939-3.506Z",transform:"translate(0 0)",fill:"#00d18d",stroke:"rgba(0,0,0,0)",strokeMiterlimit:10,strokeWidth:1})),xe=function(e){var t=e.svgRef,a=e.title,n=Ae(e,["svgRef","title"]);return b.a.createElement("svg",ke({width:128,height:128.002,viewBox:"0 0 128 128.002",ref:t},n),a?b.a.createElement("title",null,a):null,we,Te)},Se=b.a.forwardRef((function(e,t){return b.a.createElement(xe,ke({svgRef:t},e))})),Ne=(a.p,Object(d.memo)((function(){return b.a.createElement(he.a,{component:Se,viewBox:"0 0 128 128",style:{width:20,height:20}})})));function De(){return(De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Me(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Ie=b.a.createElement("path",{d:"M177.534,128H137.373A9.378,9.378,0,0,0,128,137.374v24.1a9.383,9.383,0,0,0,9.373,9.374h40.161a9.383,9.383,0,0,0,9.374-9.374v-24.1A9.389,9.389,0,0,0,177.534,128Z",transform:"translate(-128 -128)",fill:"#a4b6fc"}),Fe=b.a.createElement("path",{d:"M177.534,234.672H137.373A9.377,9.377,0,0,0,128,244.038v56.226a9.378,9.378,0,0,0,9.373,9.374h40.161a9.383,9.383,0,0,0,9.374-9.374V244.038A9.387,9.387,0,0,0,177.534,234.672Z",transform:"translate(-128 -181.645)",fill:"#365df0"}),Re=b.a.createElement("path",{d:"M316.19,298.672H276.029a9.383,9.383,0,0,0-9.373,9.374v24.1a9.383,9.383,0,0,0,9.373,9.374H316.19a9.39,9.39,0,0,0,9.374-9.382v-24.1A9.377,9.377,0,0,0,316.19,298.672Z",transform:"translate(-197.564 -213.516)",fill:"#a4b6fc"}),Le=b.a.createElement("path",{d:"M316.19,128H276.029a9.383,9.383,0,0,0-9.373,9.374V193.6a9.383,9.383,0,0,0,9.373,9.374H316.19a9.383,9.383,0,0,0,9.374-9.374V137.374A9.378,9.378,0,0,0,316.19,128Z",transform:"translate(-197.564 -128)",fill:"#365df0"}),Be=function(e){var t=e.svgRef,a=e.title,n=Me(e,["svgRef","title"]);return b.a.createElement("svg",De({ref:t},n),a?b.a.createElement("title",null,a):null,Ie,Fe,Re,Le)},Pe=b.a.forwardRef((function(e,t){return b.a.createElement(Be,De({svgRef:t},e))})),_e=(a.p,Object(d.memo)((function(){return b.a.createElement(he.a,{component:Pe,viewBox:"0 0 128 128",style:{width:20,height:20}})}))),qe={Signin:{label:"Signin",trackPage:"Signin",path:"/",exact:!0,hideMenu:!0,private:!1},Signup:{label:"Signup",trackPage:"Signup",path:"/signup",exact:!0,hideMenu:!0,private:!1},ResetPassword:{label:"Recuperar senha",trackPage:"ResetPassword",path:"/recuperar-senha",hideMenu:!0,private:!1},CreatePassword:{label:"Criar senha",trackPage:"CreatePassword",path:"/criar-senha",hideMenu:!0,private:!1},PublicNewTicket:{label:"Novo ticket",trackPage:"PublicNewTicket",path:"/public/tickets/novo",hideMenu:!0,private:!1},NewTicket:{label:"Novo ticket",trackPage:"NewTicket",path:"/tickets/novo",hideMenu:!0,private:!0},TicketsReport:{label:"Relat\xf3rio de Tickets",trackPage:"TicketsReport",path:"/tickets/relatorio",hideMenu:!0,private:!0},Tickets:{label:"Tickets",trackPage:"Tickets",path:"/tickets/:id*",icon:b.a.createElement(_e,null),private:!0},Services:{label:"Servi\xe7os",trackPage:"Services",path:"/servicos",icon:b.a.createElement(Ne,null),private:!0,exact:!0},MyRequests:{label:"Pedidos",trackPage:"MyRequests",path:"/meus-pedidos",icon:b.a.createElement(ye,null),private:!0,exact:!0},MyRequestDetails:{label:"Detalhes do pedido",trackPage:"MyRequestDetails",path:"/meus-pedidos/:id",private:!0,hideMenu:!0},ServicesOnDemand:{trackPage:"ServicesOnDemand",path:"/servicos/sobdemanda",private:!0,hideMenu:!0},ServicesSubscription:{trackPage:"ServicesSubscription",path:"/servicos/recorrentes",private:!0,hideMenu:!0},NewServiceRequest:{trackPage:"NewServiceRequest",path:"/servicos/:serviceId/solicitar-servico",private:!0,hideMenu:!0},MyProfile:{label:"Meu perfil",trackPage:"MyProfile",path:"/configuracoes/meu-perfil",settingsMenu:!0,private:!0},MyPlan:{label:"Meu Plano",trackPage:"MyPlan",path:"/configuracoes/meu-plano",settingsMenu:!0,private:!0},ChangePassword:{label:"Mudar senha",trackPage:"ChangePassword",path:"/configuracoes/mudar-senha",settingsMenu:!0,private:!0},Members:{label:"Usu\xe1rios",trackPage:"Members",path:"/configuracoes/usuarios",settingsMenu:!0,private:!0},Slack:{label:"Slack",trackPage:"Slack",path:"/configuracoes/slack",settingsMenu:!0,private:!0},TicketCategories:{label:"Categorias",trackPage:"TicketCategories",path:"/configuracoes/categorias",settingsMenu:!0,private:!0},Locations:{label:"Locais",trackPage:"Locations",path:"/configuracoes/locais",settingsMenu:!0,private:!0},Notifications:{label:"Notifica\xe7\xf5es",trackPage:"Settings/Notifications",path:"/configuracoes/notificacoes",settingsMenu:!0,private:!0},PlanSubscription:{label:"Assinar Plano",trackPage:"PlanSubscription",path:"/assinar-plano",hideMenu:!0,private:!0}},Ue=a(73),We=a.n(Ue),ze=a(774),Ve=a(113),He={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center",textAlign:"center",paddingLeft:5,paddingRight:5},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},Ye={postSignin:function(e,t){var a={email:e,password:t};return q.post("/auth/signin",a)},postSignup:function(e){var t=e.memberName,a=e.memberLastname,n=e.memberEmail,r=e.memberPhone,o=e.companyName,c={member_name:t,member_lastname:a,member_email:n,member_phone:r,member_password:e.memberPassword,company_name:o};return q.post("/auth/signup",c)}},Qe=a(829),Ge=a(773),Je=a(56),Ke=a.n(Je),Xe=a(396),Ze=a(192),$e=a(772),et=function(e){return{success:{backgroundColor:Ze.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:"#1177FF"},warning:{backgroundColor:$e.a[700]},closeIcon:{fontSize:20,opacity:.9,justifyContent:"center"},message:{fontSize:20,display:"flex",alignItems:"center"}}},tt=Object(d.memo)((function(e){var t=e.message,a=e.type,n=e.actionButton,r=e.onClickAction,o=e.onClose,c=e.classes,l=[];return n&&l.push(b.a.createElement(ue.a,{key:"action",color:"inherit",variant:"outlined",className:c[a||"info"]||c.info,onClick:r},n)),o&&l.push(b.a.createElement(Xe.a,{key:"close",color:"inherit",onClick:o},b.a.createElement(Ke.a,{className:c.closeIcon}))),b.a.createElement(Qe.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!0,autoHideDuration:o?3e3:null,onClose:function(){return o&&o()}},b.a.createElement(Ge.a,{className:c[a||"info"]||c.info,message:b.a.createElement("span",{className:c.message},t),action:l}))})),at=Object(Z.a)(et,{withTheme:!0})(tt),nt=Object(d.memo)((function(){return b.a.createElement("p",null,"Acessando portal voc\xea concorda com ",b.a.createElement("a",{href:"https://lobby.tech/termos-de-uso/",target:"_blank",rel:"noopener noreferrer"},"termos de uso"))})),rt=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",errorMsg:"",submit:!1},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password,l=e.props.history;e.setState({submit:!0},Object(c.a)(o.a.mark((function t(){var a,c,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!n||!r){t.next=13;break}return t.next=4,Ye.postSignin(n,r);case 4:return a=t.sent,c=a.token,F.setUserToken(c),t.next=9,U.getViewer();case 9:return i=t.sent,F.setUserData(v()(i,"member")),setTimeout((function(){e.setState({submit:!1});var t=M.get("redirectUrl");M.delete("redirectUrl"),l.push(We()(t)?"/tickets":t)}),5),t.abrupt("return",!0);case 13:throw new Error("Blank fields");case 16:return t.prev=16,t.t0=t.catch(0),401===v()(t.t0,"response.status")?e.setState({submit:!1,errorMsg:"Credencial inv\xe1lida, tente novamente."}):e.setState({submit:!1,errorMsg:"Ocorreu um erro inesperado."}),t.abrupt("return",!0);case 20:case"end":return t.stop()}}),t,null,[[0,16]])}))))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.history;try{F.isLoggedIn()&&e.push("/tickets")}catch(t){401===v()(t,"response.status")?(this.setState({submit:!1,errorMsg:"Sess\xe3o expirada."}),F.clear()):this.setState({submit:!1,errorMsg:"Ocorreu um erro inesperado."})}return!0}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,r=t.password,o=t.submit,c=t.errorMsg;return b.a.createElement("div",{style:He.container},b.a.createElement("div",{style:He.content},c&&b.a.createElement(at,{message:c,type:"warning",onClose:function(){return e.setState({errorMsg:""})}}),b.a.createElement("img",{src:a(213),width:150,alt:P.appName,style:He.logo}),b.a.createElement(Ve.a,{component:"h1",variant:"h5"},"Portal da empresa"),b.a.createElement("form",{onSubmit:this.onSubmit,style:He.form},b.a.createElement(ze.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Email",type:"text",disabled:o,value:n,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({username:t.target.value.toLowerCase()})}}),b.a.createElement(ze.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Senha",type:"password",disabled:o,value:r,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({password:t.target.value})}}),b.a.createElement(ue.a,{disabled:o,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:He.button,type:"submit"},o?"Carregando...":"Entrar")),b.a.createElement("p",null,b.a.createElement(f.b,{to:"/recuperar-senha"},"Esqueci minha senha")),b.a.createElement("p",null,"N\xe3o possui cadastro? ",b.a.createElement(f.b,{to:"/signup"},"Criar conta")),b.a.createElement(nt,null)))}}]),n}(d.PureComponent),ot=a(193),ct=a.n(ot),lt={isTablet:function(){return window.innerWidth<1280},isMobile:function(){return window.innerWidth<720}},it={container:{marginTop:lt.isMobile()?10:40},contentLeft:{display:"flex",flexDirection:"column",textAlign:"left",alignItems:"flex-end",padding:20,marginRight:lt.isMobile()?0:70},contentRight:{display:"flex",flexDirection:"column",textAlign:"left",alignItems:"flex-start",padding:20},form:{maxWidth:410,width:"100%",marginTop:5,padding:0},button:{marginTop:15,height:60,marginBottom:15},logo:{marginBottom:20},gridItem:{paddingTop:0,paddingBottom:0},checkItem:{marginTop:25,display:"flex",flexDirection:"row"},checkIcon:{height:32,width:32,marginRight:10,color:"green"},title:{marginBottom:10},textFieldMarginBottom:{marginBottom:0},errorMessage:{marginTop:-5}},st=a(25),ut=a(720),mt=a(722),dt={errors:{paddingTop:8}},bt=function(e){var t=e.errors,a=e.variant,n=void 0===a?"outlined":a,r=e.InputLabelProps,o=void 0===r?{shrink:!0}:r,c=e.maskFunction,l=e.value,i=e.onChangeValue,s=void 0===i?function(){}:i,u=e.onChangeText,d=void 0===u?function(){}:u,p=e.margin,g=void 0===p?"normal":p,f=Object(st.a)(e,["errors","variant","InputLabelProps","maskFunction","value","onChangeValue","onChangeText","margin"]);return f="standard"!==n?Object(m.a)(Object(m.a)({},f),{},{variant:n}):f,b.a.createElement(ut.a,{fullWidth:!0,margin:g,error:!Object(N.isEmpty)(t)},b.a.createElement(ze.a,Object.assign({error:!Object(N.isEmpty)(t),InputLabelProps:o,value:l,onChange:function(e){var t=e.target.value;if(!c||l&&Object(N.size)(t)<Object(N.size)(l))return s(t),d(t),null;var a=c(t);return s(a),d(a),null}},f)),!Object(N.isEmpty)(t)&&b.a.createElement(mt.a,{style:dt.errors},Object(N.isArray)(t)?t.join(", "):t))},pt=function(e){var t=e.value,a=e.min,n=e.max,r=e.isInteger,o=void 0!==r&&r,c=e.onChangeText,l=e.onChangeValue,i=void 0===l?function(){}:l,s=Object(st.a)(e,["value","min","max","isInteger","onChangeText","onChangeValue"]);return b.a.createElement(bt,Object.assign({value:t||"",maskFunction:function(e){return function(e){var t=e.oldValue,a=e.newValue,n=e.min,r=e.max,o=e.isInteger;if(null===a)return null;var c=Number.parseFloat(a);if(n&&c<n||r&&c>r)return t;var l=(o?/\d+/:new RegExp("\\d+(?:".concat(",","\\d*)?"))).exec(a);return l?l[0]:l}({oldValue:t,newValue:e,min:a,max:n,isInteger:o})},inputProps:{inputMode:o?"numeric":"decimal"},onChangeValue:function(e){return i(Number.parseFloat(e))},onChangeText:c},s))},gt=a(777),ft=a(778),ht=Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{valueText:{paddingLeft:30,paddingRight:30},button:{width:e.spacing(4),minWidth:e.spacing(4)}})}),{withTheme:!0})((function(e){var t=e.value,a=e.onChangeText,n=e.disabled,r=e.min,o=e.max,c=e.classes;return b.a.createElement(b.a.Fragment,null,b.a.createElement(ue.a,{className:c.button,size:"large",variant:"contained",onClick:function(){var e=Number(t)-1;r&&e<r||a(e)},disabled:n},b.a.createElement(gt.a,null)),b.a.createElement("b",{className:c.valueText},t),b.a.createElement(ue.a,{className:c.button,size:"large",variant:"contained",onClick:function(){var e=Number(t)+1;o&&e>o||a(e)},disabled:n},b.a.createElement(ft.a,null)))})),Et=a(83),vt=function(e){var t=e.value,a=e.placeholder,n=void 0===a?"00000-000":a,r=Object(st.a)(e,["value","placeholder"]);return b.a.createElement(bt,Object.assign({value:t||"",maxLength:9,maskFunction:function(e){return function(e){if(null==e)return null;var t=/(\d{0,5})-?(\d{0,3})/.exec(e),a=Object(Et.a)(t,3),n=(a[0],a[1]),r=a[2];return""===r?n:"".concat(n,"-").concat(r)}(e)},type:"tel",placeholder:n},r))},Ot=/(\d{0,2})(\d{0,5})(\d{0,4})/,jt=/(\d{0,2})(\d{0,4})(\d{0,4})/,Ct=function(e){var t=e.value,a=e.phoneType,n=void 0===a?"cellphone":a,r=e.placeholder,o=void 0===r?"(00) 00000-0000":r,c=Object(st.a)(e,["value","phoneType","placeholder"]);return b.a.createElement(bt,Object.assign({value:t||"",maxLength:9,maskFunction:function(e){return function(e,t){var a=t.phoneType;if(null==e)return null;var n=e.replace(/\D/g,""),r=("cellphone"===a?Ot:jt).exec(n),o=Object(Et.a)(r,4),c=(o[0],o[1]),l=o[2],i=o[3];return""===c?null:""===i?""===l?"(".concat(c,")"):"(".concat(c,") ").concat(l):"(".concat(c,") ").concat(l,"-").concat(i)}(e,{phoneType:n})},type:"tel",placeholder:o},c))},yt=a(729),kt=a(726),At=a(779),wt=function(e){var t=e.errors,a=e.variant,n=void 0===a?"outlined":a,r=e.InputLabelProps,o=void 0===r?{shrink:!0}:r,c=e.onChangeValue,l=void 0===c?function(){}:c,i=e.onChangeText,s=void 0===i?function(){}:i,u=e.margin,d=void 0===u?"normal":u,p=e.label,g=e.multiple,f=e.options,h=e.emptyOptionLabel,E=void 0===h?null:h,v=e.readOnly,O=e.optionValueField,j=void 0===O?"value":O,C=e.optionLabelField,y=void 0===C?"label":C,k=Object(st.a)(e,["errors","variant","InputLabelProps","onChangeValue","onChangeText","margin","label","multiple","options","emptyOptionLabel","readOnly","optionValueField","optionLabelField"]);k="standard"!==n?Object(m.a)(Object(m.a)({},k),{},{variant:n}):k;var A=g?function(e){var t=e.errors,a=e.label,n=e.onChangeValue,r=e.onChangeText,o=e.InputLabelProps,c=e.options,l=e.optionValueField,i=e.optionLabelField,s=e.margin,u=e.variant,m=Object(st.a)(e,["errors","label","onChangeValue","onChangeText","InputLabelProps","options","optionValueField","optionLabelField","margin","variant"]),d="label-".concat(Math.random());return b.a.createElement(ut.a,{fullWidth:!0,margin:s,variant:u,error:!Object(N.isEmpty)(t)},b.a.createElement(yt.a,Object.assign({shrink:!0,id:d},o),a),b.a.createElement(kt.a,Object.assign({label:a,multiple:!0,labelId:d,error:!Object(N.isEmpty)(t),onChange:function(e){var t=e.target.value;n(t),r(t)}},m),c.map((function(e){return b.a.createElement(At.a,{value:Object(N.get)(e,l),key:Object(N.get)(e,l)},Object(N.get)(e,i))}))),!Object(N.isEmpty)(t)&&b.a.createElement(mt.a,{style:dt.errors},Object(N.isArray)(t)?t.join(", "):t))}(Object(m.a)({errors:t,label:p,onChangeValue:l,onChangeText:s,InputLabelProps:o,options:f,optionValueField:j,optionLabelField:y,margin:d,variant:n},k)):function(e){var t=e.errors,a=e.label,n=e.onChangeValue,r=e.onChangeText,o=e.emptyOptionLabel,c=e.options,l=e.optionValueField,i=e.optionLabelField,s=e.margin,u=Object(st.a)(e,["errors","label","onChangeValue","onChangeText","emptyOptionLabel","options","optionValueField","optionLabelField","margin"]);return b.a.createElement(bt,Object.assign({select:!0,errors:t,SelectProps:{native:!0},label:a,onChangeValue:n,onChangeText:r,margin:s},u),o?b.a.createElement("option",{value:null},o):"",c.map((function(e){return b.a.createElement("option",{value:Object(N.get)(e,l),key:Object(N.get)(e,l)},Object(N.get)(e,i))})))}(Object(m.a)({errors:t,label:p,onChangeValue:l,onChangeText:s,emptyOptionLabel:E,options:f,optionValueField:j,optionLabelField:y,margin:d},k));return v?b.a.createElement(bt,Object.assign({errors:t},k)):A},Tt=a(123),xt=a(49),St=a(819),Nt=function(e){var t=e.label,a=(e.disabled,e.value),n=e.onChangeValue,r=e.minDate,o=e.errors,c=e.disableFuture,l=e.disablePast,i=e.readOnly,s=e.variant,u=void 0===s?"outlined":s,m=Object(st.a)(e,["label","disabled","value","onChangeValue","minDate","errors","disableFuture","disablePast","readOnly","variant"]);return i?b.a.createElement(bt,Object.assign({disabled:!0,readOnly:!0,label:t,variant:u},m)):b.a.createElement(ut.a,{fullWidth:!0,margin:"normal",error:!Object(N.isEmpty)(o)},b.a.createElement(xt.a,{libInstance:A.a,utils:Tt.a,locale:P.locale},b.a.createElement(St.a,{label:t,value:a,onChange:n,minDate:r,autoOk:!0,clearable:!0,animateYearScrolling:!0,invalidDateMessage:"Formato inv\xe1lido",minDateMessage:"",inputVariant:u,InputLabelProps:{shrink:!0},format:"DD/MM/YYYY",cancelLabel:"Cancelar",clearLabel:"Limpar",disableFuture:c,disablePast:l})),!Object(N.isEmpty)(o)&&b.a.createElement(mt.a,{style:dt.errors},Object(N.isArray)(o)?o.join(", "):o))},Dt=a(784),Mt=a(785),It=a(824),Ft=Object(d.memo)((function(e){var t=e.errors,a=e.value,n=void 0===a?[]:a,r=e.onChangeValue,o=void 0===r?function(){}:r,c=e.disabled,l=e.options,i=e.optionValueField,s=void 0===i?"value":i,u=e.optionLabelField,m=void 0===u?"label":u;return b.a.createElement(ut.a,{fullWidth:!0,margin:"normal",error:!Object(N.isEmpty)(t)},b.a.createElement(Dt.a,null,l.map((function(e){var t=Object(N.get)(e,m),a=Object(N.get)(e,s);return b.a.createElement(Mt.a,{key:a,label:t,control:b.a.createElement(It.a,{color:"primary",checked:Object(N.includes)(n,a),disabled:c,onChange:function(e){var t;t=e.target.checked?Object(N.concat)(n,a):Object(N.filter)(n,(function(e){return e!==a})),o(t)}})})}))),!Object(N.isEmpty)(t)&&b.a.createElement(mt.a,{style:dt.errors},Object(N.isArray)(t)?t.join(", "):t))})),Rt=[{label:"Texto curto",key:"TEXT_FIELD"},{label:"Texto longo",key:"TEXT_AREA"},{label:"Sele\xe7\xe3o \xfanica",key:"SELECT"},{label:"M\xfaltipla sele\xe7\xe3o",key:"CHECKBOX"},{label:"Campo de data",key:"DATE_FIELD"},{label:"Anexo",key:"ATTACHMENT"}].slice(0,-2),Lt=["SELECT","CHECKBOX"],Bt={genericUploadsParams:function(){return q.get("/uploads/params")},uploadToApi:function(e){var t=e.file,a=e.progressHandler,n=q.post("/uploads/upload",t.formData,null,{onUploadProgress:function(e){var n=Math.round(100*e.loaded/e.total);a({progressPercent:n<95?n:95,originalFileName:t.name})}}),r=n.then((function(e){var t=e.id,a=e.storage,n=e.metadata;return{id:t,storage:a,metadata:{filename:n.filename,size:n.size,mime_type:n.mime_type},progressPercent:100}}));return r.cancelRequest=n.cancelRequest,r}},Pt=function(e){var t,a,n,r=e.file,o=e.progressHandler,c=e.sizeLimit,l=void 0===c?10:c;if(r.metadata.size>1028*l*1028)return Promise.reject(new Error("Tamanho do arquivo ultrapassou o limite de ".concat(l,"mb")));var i=new Promise((function(e,n){t=e,a=n}));i.cancelUpload=function(){i.wasCanceled=!0,n.cancelRequest(),a(new Error("Upload cancelado"))};var s=function(e){i.wasCanceled||o(Object(m.a)(Object(m.a)(Object(m.a)({},r),e),{},{cancelUpload:i.cancelUpload,wasCanceled:i.wasCanceled}))};return s({progressPercent:0}),(n=(0,Bt.uploadToApi)({file:r,progressHandler:s})).then(t).catch(a),i},_t=a(786),qt=Object(d.memo)((function(e){var t=e.accept,a=e.onChange,n=e.buttonProps,r=e.disabled,o=null;return b.a.createElement(b.a.Fragment,null,b.a.createElement(ue.a,Object.assign({color:"primary",variant:"outlined",size:"large",onClick:function(){return o&&o.click()},startIcon:b.a.createElement(_t.a,null),disabled:r},n),"Anexar"),b.a.createElement("input",{type:"file",accept:t,style:{display:"none"},ref:function(e){o=e},onChange:function(e){return function(e){var t=Object(N.map)(e,(function(e){var t=function(e){return{metadata:{size:e.size,filename:e.name,mime_type:e.type},originalFileObj:e}}(e),a=new FileReader,n=new FormData;return n.append("file",e),new Promise((function(r){a.onload=function(e){r(Object(N.merge)(t,{url:e.target.result,data:e.target.result,base64Data:e.target.result,formData:n}))},a.readAsDataURL(e)}))}));return Promise.all(t)}(e.target.files).then((function(e){return a(e[0])}))}}))})),Ut=a(787),Wt=a(788),zt=Object(d.memo)((function(e){var t=e.file,a=e.onRemoveFile,n=e.outterContainerClassName,r=e.disabled,o=e.classes,c=Object(N.get)(t,"progressPercent")<100;return b.a.createElement("div",{className:"".concat(o.outterContainer," ").concat(n)},b.a.createElement(ue.a,{variant:"outlined",size:"large",onClick:function(){return t.url&&window.open(t.url,"_blank")},disabled:r||c},b.a.createElement("div",null,b.a.createElement("div",{className:o.innerButtonContainer},b.a.createElement(_t.a,null),b.a.createElement("div",null,b.a.createElement("span",{className:o.filename},Object(N.get)(t,"metadata.filename")),b.a.createElement("br",null),b.a.createElement("small",{className:o.sizeText},Math.round(Object(N.get)(t,"metadata.size")/1e3),"KB"))),c&&b.a.createElement(Ut.a,{className:o.progressBar,variant:"determinate",value:t.progressPercent}))),!r&&a&&b.a.createElement(Wt.a,{onClick:function(){return a(t)},className:o.cancelButton}))})),Vt=Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{outterContainer:{display:"inline-block",position:"relative"},innerButtonContainer:{display:"flex",textAlign:"left",lineHeight:1},filename:{fontSize:"calc(".concat(e.typography.button.fontSize," * 0.8)")},sizeText:{fontSize:"calc(".concat(e.typography.button.fontSize," * 0.6)")},progressBar:{position:"absolute",left:0,bottom:0,width:"100%"},cancelButton:{position:"absolute",top:-12,right:-12,cursor:"pointer"}})}))(zt),Ht=Object(X.b)(d.memo,Object(X.e)({onFileChange:function(e){var t=e.onChange,a=e.sizeLimit,n=e.onUploadProgress,r=e.onUploadSuccess,o=e.onUploadError;return function(e){Pt({file:e,sizeLimit:a,progressHandler:function(a){var r=a.progressPercent,o=a.cancelUpload;if(!(r>=100)){var c=Object(m.a)(Object(m.a)({},e),{},{cancelUpload:o,progressPercent:r});t(c),n&&n(c)}}}).then((function(a){var n=Object(m.a)(Object(m.a)({},e),a);t(n),r&&r(n)})).catch((function(e){t(null),o&&o(e)}))}}}))((function(e){var t=e.value,a=e.onChange,n=e.disabled,r=e.onFileChange,o=e.accept,c=void 0===o?"image/*,.doc,.docx,.xls,.xlsx,.pdf,.xml":o,l=e.buttonProps;return t&&(t.progressPercent||t.id)?b.a.createElement(Vt,{file:t,onRemoveFile:function(e){e.cancelUpload&&e.progressPercent<100?e.cancelUpload():a(null)},disabled:n}):b.a.createElement(qt,{accept:c,onChange:r,disabled:n,buttonProps:l})})),Yt=Object(d.memo)((function(e){var t=e.errors,a=e.value,n=void 0===a?[]:a,r=e.onChangeValue,o=void 0===r?function(){}:r,c=e.disabled,l=Object(st.a)(e,["errors","value","onChangeValue","disabled"]);return b.a.createElement(ut.a,{margin:"normal",error:!Object(N.isEmpty)(t)},b.a.createElement(Ht,Object.assign({value:n,onChange:o,disabled:c},l)),!Object(N.isEmpty)(t)&&b.a.createElement(mt.a,{style:dt.errors},Object(N.isArray)(t)?t.join(", "):t))})),Qt=["TEXT_FIELD","TEXT_AREA","SELECT","CHECKBOX","ATTACHMENT","DATE_FIELD"],Gt={buildTextField:function(e){var t=Object.assign({},e);return b.a.createElement(bt,t)},buildDateField:function(e){var t=e.value,a=Object(st.a)(e,["value"]);return b.a.createElement(Nt,Object.assign({disablePast:!0,value:Object(N.isEmpty)(t)?null:t},a))},buildTextArea:function(e){var t=Object.assign({},e);return b.a.createElement(bt,Object.assign({multiline:!0,rows:4,rowsMax:4},t))},buildSelect:function(e){var t=e.options,a=Object(st.a)(e,["options"]);return b.a.createElement(wt,Object.assign({options:t},a))},buildCheckbox:function(e){var t=Object.assign({},e);return b.a.createElement(Ft,t)},buildAttachment:function(e){var t=Object.assign({},e);return b.a.createElement(Yt,t)}};Gt.buildSelect.propTypes={options:ae.a.array};var Jt=function(e){var t=e.fieldType,a=Object(st.a)(e,["fieldType"]);if(!Qt.includes(t))throw new Error("Invalid field type: ".concat(t));var n=Object(N.upperFirst)(Object(N.camelCase)(t));return Gt["build".concat(n)](a)};Jt.propTypes={fieldType:ae.a.oneOf(Qt)};var Kt=Jt,Xt=function(e,t){var a=t.name,n=void 0===a?null:a,r=t.init,p=void 0===r||r,g=t.options,f=void 0===g?function(){return{}}:g,h=t.props,E=void 0===h?function(){return{}}:h;return function(t){return function(a){Object(s.a)(d,a);var r=Object(u.a)(d);function d(){var t;Object(l.a)(this,d);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=r.call.apply(r,[this].concat(i))).state={loading:!0,reloadedMsg:"",error:null,data:null},t.loadingProperty=n?"".concat(n,"Loading"):"loading",t.reloadedMsgProperty=n?"".concat(n,"ReloadedMsg"):"reloadedMsg",t.errorProperty=n?"".concat(n,"Error"):"error",t.dataProperty=n?"".concat(n,"Data"):"data",t.clearProperty=n?"".concat(n,"Clear"):"clear",t.fetchProperty=n?"".concat(n,"Fetch"):"fetch",t.resolveOptions=function(){var e=Object(c.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t.props);case 2:return n=e.sent,e.abrupt("return",Object(m.a)(Object(m.a)({},n),a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.loadDataSource=function(){var a=Object(c.a)(o.a.mark((function a(n,r){var c,l,i,s,u;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.resolveOptions(r);case 2:return c=a.sent,l=v()(c,"variables"),i=v()(c,"onRequestFinished"),s=v()(c,"onRequestError"),u=null,a.prev=7,a.next=10,e(l);case 10:u=a.sent,a.next=31;break;case 13:if(a.prev=13,a.t0=a.catch(7),!F.isUnauthorized(a.t0)){a.next=18;break}return F.clear(),a.abrupt("return",window.location.reload());case 18:if(!s){a.next=30;break}return a.prev=19,a.next=22,s(a.t0);case 22:return a.abrupt("return",n(null,null));case 25:return a.prev=25,a.t1=a.catch(19),a.abrupt("return",n(a.t1,null));case 28:a.next=31;break;case 30:return a.abrupt("return",n(a.t0,null));case 31:if(!i){a.next=34;break}return a.next=34,i(u);case 34:return a.abrupt("return",n(null,u));case 35:case"end":return a.stop()}}),a,null,[[7,13],[19,25]])})));return function(e,t){return a.apply(this,arguments)}}(),t.fetch=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(o,c){t.setState({loading:e},(function(){t.loadDataSource((function(e,r){t.setState({data:r,error:e,loading:!1,reloadedMsg:a},(function(){return e?c(e):o(r),n&&n()}))}),r)}))}))},t.clear=function(e){return t.setState({data:null,error:null,loading:!1},e)},t}return Object(i.a)(d,[{key:"componentDidMount",value:function(){p?this.fetch(!0):this.setState({loading:!1,data:{}})}},{key:"render",value:function(){var e,a=(e={},Object(ne.a)(e,this.errorProperty,this.state.error),Object(ne.a)(e,this.dataProperty,this.state.data),Object(ne.a)(e,this.loadingProperty,this.state.loading),Object(ne.a)(e,this.reloadedMsgProperty,this.state.reloadedMsg),Object(ne.a)(e,this.fetchProperty,this.fetch),Object(ne.a)(e,this.clearProperty,this.clear),e),n=Object(m.a)(Object(m.a)(Object(m.a)({},this.props),a),E(Object(m.a)(Object(m.a)({},a),{},{ownProps:this.props})));return b.a.createElement(t,n)}}]),d}(d.PureComponent)}},Zt=Object(d.memo)((function(e){var t=e.formData,n=e.setAlert,r=e.alert,o=e.errors,c=e.setFormData,l=e.submitFormDataFetch,i=e.submitFormDataLoading,s=function(e){return c(Object(m.a)(Object(m.a)({},t),e))},u=function(){return l(!0)},d=t.memberName,p=t.memberLastname,g=t.memberEmail,h=t.memberPhone,E=t.companyName,v=t.memberPassword,O=r.showAlert,j=r.alertMsg,C=r.alertType,y=Object(N.includes)(Object(N.values)(t),"")||i;return b.a.createElement("div",{style:it.container},O&&b.a.createElement(at,{message:j,type:C,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}}),b.a.createElement(se.a,{container:!0,spacing:2},b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement("div",{style:it.contentLeft},b.a.createElement("div",{style:it.form},b.a.createElement(Ve.a,{component:"h1",variant:"h4"},"Acesse todos servi\xe7os que precisar para seu ambiente de trabalho"),b.a.createElement("br",null),b.a.createElement("br",null),b.a.createElement(Ve.a,{component:"h1",variant:"h6",style:it.checkItem},b.a.createElement(ct.a,{style:it.checkIcon}),"Atendimento dedicado"),b.a.createElement(Ve.a,{component:"h1",variant:"h6",style:it.checkItem},b.a.createElement(ct.a,{style:it.checkIcon}),"Fornecedores qualificados"),b.a.createElement(Ve.a,{component:"h1",variant:"h6",style:it.checkItem},b.a.createElement(ct.a,{style:it.checkIcon}),"Ferramentas para facilitar a gest\xe3o"),b.a.createElement("br",null),b.a.createElement("br",null),b.a.createElement("br",null),b.a.createElement(Ve.a,{component:"h1",variant:"h6"},b.a.createElement("strong",null,"\u201cMe surpreendeu de mais o servi\xe7o, super sol\xedcitos com tudo.\u201d - Mariana, BossaBox"))))),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement("div",{style:it.contentRight},b.a.createElement("form",{onSubmit:u,style:it.form},b.a.createElement("img",{src:a(290),width:175,alt:P.appName,style:it.logo}),b.a.createElement(Ve.a,{component:"h1",variant:"h5",style:it.title},"Crie sua conta gr\xe1tis"),b.a.createElement(se.a,{container:!0,spacing:2},b.a.createElement(se.a,{item:!0,xs:12,md:6,style:it.gridItem},b.a.createElement(bt,{label:"Seu nome*",disabled:i,errors:Object(N.get)(o,"member_name"),value:d,onChange:function(e){return s({memberName:e.target.value})}})),b.a.createElement(se.a,{item:!0,xs:12,md:6,style:it.gridItem},b.a.createElement(bt,{label:"Sobrenome*",disabled:i,errors:Object(N.get)(o,"member_lastname"),value:p,onChange:function(e){return s({memberLastname:e.target.value})}})),b.a.createElement(se.a,{item:!0,xs:12,style:it.gridItem},b.a.createElement(bt,{label:"Email do trabalho*",disabled:i,errors:Object(N.get)(o,"member_email"),value:g,onChange:function(e){return s({memberEmail:e.target.value})}})),b.a.createElement(se.a,{item:!0,xs:12,style:it.gridItem},b.a.createElement(bt,{label:"Telefone com DDD*",placeholder:"Somente n\xfameros, ex: 11988884444",type:"tel",disabled:i,errors:Object(N.get)(o,"member_phone"),value:h,onChange:function(e){var t=(e.target.value||"").replace(/[\D]+/g,"").slice(0,15);s({memberPhone:t})}})),b.a.createElement(se.a,{item:!0,xs:12,style:it.gridItem},b.a.createElement(bt,{label:"Nome da empresa*",disabled:i,errors:Object(N.get)(o,"company_name"),value:E,onChange:function(e){return s({companyName:e.target.value})}})),b.a.createElement(se.a,{item:!0,xs:12,style:it.gridItem},b.a.createElement(bt,{label:"Definir senha*",placeholder:"Informe 6 ou mais d\xedgitos",style:it.textFieldMarginBottom,errors:Object(N.get)(o,"member_password"),disabled:i,value:v,type:"password",onChange:function(e){return s({memberPassword:e.target.value})}})),b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(ue.a,{disabled:y,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:it.button,onClick:u},i?b.a.createElement(ie.a,{color:"primary",variant:"indeterminate",disableShrink:!0,thickness:5}):"CRIAR CONTA")))),b.a.createElement("span",null,"J\xe1 possui conta? ",b.a.createElement(f.b,{to:"/"},"Fazer login")),b.a.createElement(nt,null)))))})),$t=Xt(Ye.postSignup,{name:"submitFormData",init:!1,options:function(e){var t=e.formData,a=e.setAlert,n=e.history,r=e.setErrors;return{variables:Object(m.a)({},t),onRequestFinished:function(){var e=Object(c.a)(o.a.mark((function e(){var r,c,l,i,s,u,m,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.memberEmail,c=t.memberPassword,l=t.memberName,i=t.memberLastname,s={email:r,name:l,lastname:i},Y.hit("Signup - SubmitSuccess",s),a({alertMsg:"Conta criada com sucesso, bem-vindo a Lobby!",alertType:"success",showAlert:!0}),e.next=6,Ye.postSignin(r,c);case 6:return u=e.sent,m=u.token,e.next=10,F.setUserToken(m);case 10:return e.next=12,U.getViewer();case 12:d=e.sent,F.setUserData(Object(N.get)(d,"member")),setTimeout((function(){return n.push("/servicos")}),100);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRequestError:function(e){var n=t.memberEmail,o=t.memberName,c=t.memberLastname,l=Object(N.mapValues)(Object(N.get)(e,"errors",{}),(function(e){return Object(N.first)(e)})),i={email:n,name:o,lastname:c,errors:l};Y.hit("Signup - SubmitError",i),r(l),a({alertMsg:"Erro ao realizar cadastro",alertType:"error",showAlert:!0})}}}}),ea=Object(X.b)(d.memo,h.g,Object(X.h)("formData","setFormData",{memberName:"",memberLastname:"",memberEmail:"",memberPhone:"",memberPassword:"",companyName:""}),Object(X.h)("errors","setErrors",{}),Object(X.h)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),$t)(Zt),ta=a(46),aa=a.n(ta),na={verifyIfCanResetPassword:function(e,t){var a={id:e,code:t};return q.post("/password/verify",a)},changePassword:function(e,t,a){var n={id:e,code:t,password:a};return q.put("/password/change",n)},resetPassword:function(e){var t={email:e};return q.post("/password/reset",t)}},ra={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center",textAlign:"center",paddingLeft:5,paddingRight:5},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},oa=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={memberId:"",recoveryCode:"",password:"",confirmPassword:"",msg:"",msgType:"",hideForm:!0,loading:!0,submit:!1,email:""},e.onSubmit=function(t){t.preventDefault();var a=e.props.history,n=e.state,r=n.confirmPassword,l=n.password,i=n.memberId,s=n.recoveryCode;e.setState({submit:!0},Object(c.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!r||!l||r!==l){t.next=9;break}if(!(aa()(l)>=6)){t.next=7;break}return t.next=5,na.changePassword(i,s,l);case 5:return e.setState({msg:"Senha atualizada, redirecionando para tela de login...",msgType:"success",memberId:"",recoveryCode:"",confirmPassword:"",password:""},(function(){F.clear(),setTimeout((function(){a.replace("/")}),2e3)})),t.abrupt("return",!0);case 7:return e.sendAlert("Informe uma senha com m\xednimo de ".concat(6," caracteres."),"warning"),t.abrupt("return",!0);case 9:e.sendAlert("As senhas est\xe3o em branco ou diferentes.","warning"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e.sendAlert("N\xe3o foi poss\xedvel alterar senha.","warning");case 15:return t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])}))))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.history,n=t.location;this.setState({submit:!0,loading:!0,memberId:"",recoveryCode:""},Object(c.a)(o.a.mark((function t(){var r,c,l,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=new URLSearchParams(n.search),c=r.get("id"),l=r.get("code"),i=r.get("email"),!c||!l){t.next=10;break}return t.next=8,na.verifyIfCanResetPassword(c,l);case 8:return e.setState({submit:!1,loading:!1,hideForm:!1,memberId:c,recoveryCode:l,email:i}),t.abrupt("return",!0);case 10:throw new Error("Invalid URL query");case 13:t.prev=13,t.t0=t.catch(0),a.replace("/recuperar-senha");case 16:return t.abrupt("return",!0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])}))))}},{key:"sendAlert",value:function(e,t){this.setState({submit:!1,msg:e,msgType:t})}},{key:"clearAlert",value:function(){this.setState({submit:!1,msg:"",msgType:""})}},{key:"render",value:function(){var e=this,t=this.state,n=t.email,r=t.confirmPassword,o=t.password,c=t.submit,l=t.loading,i=t.hideForm,s=t.msg,u=t.msgType;return b.a.createElement("div",{style:ra.container},b.a.createElement("div",{style:ra.content},s&&u&&b.a.createElement(at,{message:s,type:u,onClose:function(){return e.clearAlert}}),l?b.a.createElement(be,null):b.a.createElement(b.a.Fragment,null,b.a.createElement("img",{src:a(213),width:150,alt:P.appName,style:ra.logo}),b.a.createElement(Ve.a,{component:"h1",variant:"h5"},i?"Link inv\xe1lido para definir senha":"Definir senha"),b.a.createElement(ze.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Email",disabled:!0,value:n,InputLabelProps:{shrink:!0}}),!i&&b.a.createElement("form",{onSubmit:this.onSubmit,style:ra.form},b.a.createElement(ze.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Senha",type:"password",disabled:c,value:o,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({password:t.target.value})}}),b.a.createElement(ze.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Confirmar senha",type:"password",disabled:c,value:r,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({confirmPassword:t.target.value})}}),b.a.createElement(ue.a,{disabled:c,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:ra.button,type:"submit"},c?"Carregando...":"Entrar"))),b.a.createElement("p",null,b.a.createElement(f.b,{to:"/"},"Voltar para home")),b.a.createElement(nt,null)))}}]),n}(d.PureComponent),ca={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center",textAlign:"center",paddingLeft:5,paddingRight:5},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},la=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",msg:"",msgType:"",submit:!1},e.onSubmit=function(t){t.preventDefault();var a=e.state.email;e.setState({submit:!0},Object(c.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!a){t.next=6;break}return t.next=4,na.resetPassword(a);case 4:return e.setState({submit:!1,email:"",msgType:"success",msg:"Enviamos para seu email um link de recupera\xe7\xe3o de senha."}),t.abrupt("return",!0);case 6:throw new Error("Blank fields");case 9:return t.prev=9,t.t0=t.catch(0),e.setState({submit:!1,msg:"Email inv\xe1lido ou inexistente.",msgType:"warning"}),t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])}))))},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.email,r=t.submit,o=t.msg,c=t.msgType;return b.a.createElement("div",{style:ca.container},b.a.createElement("div",{style:ca.content},o&&b.a.createElement(at,{message:o,type:c,onClose:function(){return e.setState({msg:"",msgType:""})}}),b.a.createElement("img",{src:a(213),width:150,alt:P.appName,style:ca.logo}),b.a.createElement(Ve.a,{component:"h1",variant:"h5"},"Informe o seu email e receba instru\xe7\xf5es para criar nova senha"),b.a.createElement("form",{onSubmit:this.onSubmit,style:ca.form},b.a.createElement(ze.a,{variant:"outlined",margin:"normal",fullWidth:!0,placeholder:"Seu email de acesso",label:"Email",type:"email",disabled:r,value:n,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({email:t.target.value.toLowerCase()})}}),b.a.createElement(ue.a,{disabled:r,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:ca.button,type:"submit"},r?"Carregando...":"Enviar")),b.a.createElement("p",null,b.a.createElement(f.b,{to:"/"},"Voltar para home")),b.a.createElement(nt,null)))}}]),n}(d.PureComponent),ia=a(363),sa=a.n(ia),ua=a(144),ma=a.n(ua),da=a(364),ba=a.n(da),pa=a(795),ga=a(796),fa=a(797),ha=a(798),Ea=a(718),va=a(799),Oa=a(30),ja=a(794),Ca=a(793),ya=a(830),ka=a(124),Aa=a.n(ka),wa=a(789),Ta=a(191),xa=a(790),Sa=a(189),Na=a(791),Da=a(792),Ma={width:32,height:32,minWidth:32,minHeight:32},Ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"a",t={a:"gold",b:"gold",c:"gold",d:"purple",e:"purple",f:"purple",g:"black",h:"black",i:"black",j:"blue",k:"blue",l:"blue",m:"green",n:"green",o:"green",p:"brown",q:"brown",r:"brown",s:"pink",t:"pink",u:"pink",v:"red",w:"red",y:"red",x:"lime",z:"lime"};return t[e.toLowerCase()]},Fa=Object(d.memo)((function(e){var t=e.classes,a=e.name,n=e.photoUrl,r=Aa()(a)||"";return b.a.createElement(Ca.a,{title:a,arrow:!0,placement:"bottom"},b.a.createElement(ya.a,{alt:a,src:n,className:t[Ia(r)]},r.toUpperCase()))})),Ra=Object(Z.a)((function(e){return{black:Object(m.a)({color:"white",backgroundColor:"black"},Ma),purple:Object(m.a)({color:e.palette.getContrastText(wa.a[500]),backgroundColor:wa.a[500]},Ma),red:Object(m.a)({color:"white",backgroundColor:ge.a[300]},Ma),green:Object(m.a)({color:e.palette.getContrastText(Ze.a[800]),backgroundColor:Ze.a[800]},Ma),blue:Object(m.a)({color:e.palette.getContrastText(Ta.a[800]),backgroundColor:Ta.a[800]},Ma),brown:Object(m.a)({color:e.palette.getContrastText(xa.a[500]),backgroundColor:xa.a[500]},Ma),pink:Object(m.a)({color:e.palette.getContrastText(Sa.a[500]),backgroundColor:Sa.a[500]},Ma),gold:Object(m.a)({color:"white",backgroundColor:Na.a[900]},Ma),lime:Object(m.a)({color:"white",backgroundColor:Da.a[800]},Ma)}}),{withTheme:!0})(Fa),La=[{label:"Colaborador",value:"MEMBER"},{label:"Gestor do escrit\xf3rio",value:"AGENT"},{label:"Administrador da conta",value:"ADMIN"}],Ba=["ADMIN"],Pa=["AGENT","ADMIN"],_a=function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{slackBox:{paddingTop:60,paddingBottom:50},slackIntegration:{marginLeft:25},floatButton:{marginBottom:5,marginLeft:10},tableCheckBox:{width:10,paddingTop:20,paddingBottom:0,margin:0,border:0,paddingLeft:0},tableUser:{paddingTop:20,paddingBottom:10,marginLeft:0,paddingLeft:0},tableInvite:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",padding:0,paddingTop:20,paddingBottom:0,margin:0,border:0},selectFilter:{width:180,minWidth:80},formControl:{margin:10},profileMenuContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start",width:"100%"},userName:{marginLeft:15}})},qa=Object(d.memo)((function(e){var t=e.users,a=e.classes,n=e.onRevoke,r=e.isRevokeDisabled,o=e.locations,c=e.companyName,l=e.checkedAll,i=e.setCheckedAll,s=e.selectedLocations,u=e.setSelectedLocations,m=e.canDisconnect,d=e.selectedRole,p=e.setSelectedRole,g=e.isInviteDisabled,f=e.onShowMore,h=e.setDisableShowMore,E=e.selectedUsers,O=e.setSelectedUsers,j=e.onInvite,C=e.nextCursor,y=e.disableShowMore,k=function(e){var t=e.target,a=t.checked,n=t.value;O(a?E.concat(n):E.filter((function(e){return e!==n})))},A=Object(Oa.a)(),w=Object(ja.a)(A.breakpoints.down("xs")),T=aa()(d)&&aa()(s)&&aa()(E),x=g||!T;return b.a.createElement("section",null,b.a.createElement("div",{className:a.container},b.a.createElement("div",{className:a.headerView},b.a.createElement("aside",null,b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Slack conectado: ".concat(c)))),b.a.createElement("aside",null,m&&b.a.createElement(ue.a,{onClick:n,color:"default",variant:"outlined",className:a.floatButton,disabled:r},"Desconectar Slack")))),b.a.createElement("div",{className:a.container},b.a.createElement(pa.a,{size:w?"small":"medium"},b.a.createElement(ga.a,null,b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:a.tableCheckBox},b.a.createElement(It.a,{checked:l,onChange:function(e){var a=e.target.checked;i(a),O(a?t.map((function(e){return JSON.stringify(e)})):[])},disabled:g,color:"primary"})),b.a.createElement(ha.a,{className:a.tableUser},!w&&b.a.createElement("b",null,"USU\xc1RIOS (".concat(aa()(E),")"))),b.a.createElement(ha.a,{className:a.tableInvite,colSpan:w?2:1},b.a.createElement(ut.a,{className:a.formControl},b.a.createElement(kt.a,{displayEmpty:!0,className:a.selectFilter,input:b.a.createElement(Ea.a,null),value:d,onChange:function(e){p(e.target.value)},disabled:g,variant:"outlined"},b.a.createElement(At.a,{value:"",disabled:!0},"Permiss\xe3o"),La.map((function(e){return b.a.createElement(At.a,{key:e.value,value:e.value},e.label)})))),b.a.createElement(ut.a,{className:a.formControl},b.a.createElement(kt.a,{multiple:!0,displayEmpty:!0,className:a.selectFilter,input:b.a.createElement(Ea.a,null),value:s,onChange:function(e){u(e.target.value)},disabled:g,variant:"outlined",renderValue:function(e){var t=aa()(e);return t?"".concat(t," ").concat(t>1?"locais":"local"):"Local"}},o.map((function(e){return b.a.createElement(At.a,{key:e.id,value:e.id},e.name)})))),b.a.createElement(ut.a,{className:a.formControl},b.a.createElement(ue.a,{color:"primary",size:"medium",variant:"contained",className:a.floatButton,disabled:x,onClick:function(){try{var e={role:d,locationIds:s,slackUsers:E.map((function(e){return JSON.parse(e)}))};j(e)}catch(t){O([]),u([]),p("")}}},"Convidar"))))),aa()(t)?b.a.createElement(va.a,null,t.map((function(e){var t=JSON.stringify(e);return b.a.createElement(fa.a,{key:e.email},b.a.createElement(ha.a,{className:a.tableCheckBox},b.a.createElement(It.a,{checked:E.includes(t),onChange:k,disabled:g,value:t,color:"primary"})),b.a.createElement(ha.a,{colSpan:2,className:a.tableUser},b.a.createElement("div",{className:a.profileMenuContainer},b.a.createElement(Ra,{name:v()(e,"name"),photoUrl:v()(e,"photo_url","")}),b.a.createElement("span",{className:a.userName},b.a.createElement("b",null,v()(e,"name")),b.a.createElement("br",null),b.a.createElement(Ve.a,{variant:"body2",color:"textSecondary",component:"small"},v()(e,"email"))))))})),C?b.a.createElement(fa.a,null,b.a.createElement(ha.a,{colSpan:3,className:a.textCenter},b.a.createElement(ue.a,{color:"primary",size:"medium",variant:"contained",disabled:y,onClick:function(){h(!0),f()}},"Ver mais usu\xe1rios"))):null):null)))})),Ua=Object(X.b)(Object(Z.a)(_a,{withTheme:!0}),Object(X.h)("checkedAll","setCheckedAll",!0),Object(X.h)("selectedLocations","setSelectedLocations",[]),Object(X.h)("selectedUsers","setSelectedUsers",[]),Object(X.h)("selectedRole","setSelectedRole",""),Object(X.h)("disableShowMore","setDisableShowMore",!1),Object(X.c)({componentDidMount:function(){var e=this.props,t=e.users;(0,e.setSelectedUsers)(t.map((function(e){return JSON.stringify(e)})))}}),Object(X.g)(["users"],(function(e){var t=e.users,a=e.setDisableShowMore,n=e.setCheckedAll,r=e.setSelectedUsers;a(!1),n(!0),r(t.map((function(e){return JSON.stringify(e)})))})))(qa),Wa=a(195),za=Object(d.memo)((function(e){var t=e.classes,n=e.onInstallLobby,r=e.onAuthUser,o=e.onRevoke,c=e.isDisabled,l=F.getUserData(),i=v()(l,"slack_user_id"),s=v()(l,"company.slack_team_id");return b.a.createElement("div",{className:t.container},b.a.createElement(Wa.a,{className:t.paper},b.a.createElement("section",{className:t.slackBox},b.a.createElement("div",{className:t.textCenter},b.a.createElement("img",{src:a(571),alt:"Integra\xe7\xe3o Lobby com Slack",className:t.slackIntegration}),b.a.createElement("br",null),b.a.createElement("br",null),b.a.createElement(Ve.a,{variant:"h6",component:"strong"},b.a.createElement("b",null,"Crie tickets atrav\xe9s do Slack")),b.a.createElement("br",null),b.a.createElement(Ve.a,{variant:"body2",color:"textSecondary"},b.a.createElement("b",null,"Leva menos de um minuto"))),b.a.createElement("br",null),b.a.createElement("div",{className:t.textCenter},b.a.createElement(Ve.a,{variant:"subtitle2"},"Colaboradores poder\xe3o criar tickets",b.a.createElement("br",null),"via atalho Lobby ou comando",b.a.createElement("b",null," /lobby "),"no Slack"),b.a.createElement("br",null),s?i?b.a.createElement(ue.a,{onClick:o,size:"large",color:"default",variant:"outlined",disabled:c},"Desconectar Slack"):b.a.createElement(ue.a,{onClick:r,size:"large",color:"primary",variant:"contained",disabled:c},"Integrar Slack"):b.a.createElement(ue.a,{onClick:n,size:"large",color:"primary",variant:"contained",disabled:c},"Instalar Lobby no Slack")))))})),Va=Object(X.b)(Object(Z.a)(_a,{withTheme:!0}))(za),Ha=a(366),Ya=a.n(Ha),Qa=a(831),Ga=a(776),Ja=a(825),Ka=a(392),Xa=a(372),Za=a.n(Xa),$a=a(371),en=a.n($a),tn=a(367),an=a.n(tn),nn=a(723),rn=a(800),on=a(801),cn=a(802),ln=a(368),sn=a.n(ln),un=a(369),mn=a.n(un),dn=a(370),bn=a.n(dn),pn=a(803),gn=Object.values(qe).filter((function(e){return!e.hideMenu&&!e.settingsMenu})),fn=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={userDataError:!1,sideMenuOpen:!1,profileMenuAnchor:null,showHelp:!1},e.onOpenHelp=function(){e.setState({profileMenuAnchor:null},(function(){return window.open(P.whatsappHelp,"_blank")}))},e.onLogout=function(){e.setState({profileMenuAnchor:null},(function(){if(window.confirm("Voc\xea deseja sair?")){var t=e.props.history;Y.hit("Logout"),F.clear(),t.push("/")}}))},e.onSettings=function(){e.setState({profileMenuAnchor:null},(function(){var t=e.props.history;Y.hit("Settings"),t.push("/configuracoes/meu-perfil")}))},e.onToggleSideMenu=function(){var t=e.state.sideMenuOpen;e.setState({sideMenuOpen:!t})},e.onChangePage=function(t,a){e.props.history.push(gn[a].path)},e.onToggleProfileMenu=function(t){return e.setState({profileMenuAnchor:t.currentTarget})},e.prepareUser=function(){var e=F.getUserData();return{name:v()(e,"fullname",""),email:v()(e,"email","")}},e.prepareMenu=function(e){var t=F.getUserData(),a="MEMBER"!==v()(t,"role","MEMBER");return e.filter((function(e){return!(!a&&e.path.includes("/servicos"))}))},e.renderAlerts=function(){var t=e.props,a=t.alertBox,n=t.error,r=e.state.userDataError;return a||(n||r?b.a.createElement(at,{type:"error",message:"Erro ao carregar dados do servidor",actionButton:b.a.createElement("b",null,"Recarregar"),onClickAction:function(){return window.location.reload()}}):null)},e}return Object(i.a)(n,[{key:"renderSideMenuList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this.props,n=a.classes,r=a.history,o=this.prepareMenu(e);return aa()(o)?b.a.createElement(Ga.a,{component:"nav",subheader:b.a.createElement(rn.a,{component:"div"},b.a.createElement(Ve.a,{variant:"body2",color:"textSecondary",component:"small"},b.a.createElement("strong",{className:n.listItemHeaderText},t)))},o.map((function(e,t){var a=Object.values(e.submenus||{}),o=Boolean(aa()(a)),c={};return o||(c={component:f.b,to:e.path.replace(/:[\w*]+/g,""),selected:r.location.pathname.includes(e.path)||e.path.includes(r.location.pathname)}),b.a.createElement("div",{key:t.toString()},b.a.createElement(nn.a,Object.assign({button:!o,key:e.path},c),e.icon&&b.a.createElement(on.a,{className:n.listItemIcon},e.icon),b.a.createElement(cn.a,{className:n.listItemText,disableTypography:!0,primary:b.a.createElement(pn.a,{badgeContent:e.badge,color:"primary",invisible:!e.badge,classes:{badge:n.badge}},e.label)})),o&&b.a.createElement(Ga.a,{className:n.submenuList},a.map((function(t){var a="".concat(e.path).concat(t.path);return b.a.createElement(nn.a,{button:!0,className:n.submenuItem,key:a,component:f.b,to:a.replace(/:[\w*]+/g,""),selected:a===r.location.pathname},t.icon&&b.a.createElement(on.a,{className:n.listItemIcon},t.icon),b.a.createElement(cn.a,{className:n.listItemText,disableTypography:!0,primary:t.label}))}))))}))):null}},{key:"renderUserProfile",value:function(){var e=this,t=this.props.classes,a=this.state.profileMenuAnchor,n=F.getUserData(),r=v()(n,"fullname",""),o=v()(n,"photo_url","");return b.a.createElement(Ga.a,{component:"nav",className:t.userProfileList},b.a.createElement(nn.a,{alignItems:"flex-start"},b.a.createElement("div",{className:t.profileMenuContainer},b.a.createElement(Ra,{name:r,photoUrl:o}),b.a.createElement("span",{className:t.userName,onClick:this.onToggleProfileMenu},r),b.a.createElement(Xe.a,{size:"medium",onClick:this.onToggleProfileMenu},b.a.createElement(an.a,null)),b.a.createElement(Ka.a,{keepMounted:!0,anchorEl:a,open:Boolean(a),onClose:function(){return e.setState({profileMenuAnchor:null})},transformOrigin:{vertical:"bottom",horizontal:"right"}},b.a.createElement(At.a,{onClick:this.onSettings},b.a.createElement(on.a,null,b.a.createElement(sn.a,{fontSize:"small"})),b.a.createElement(cn.a,{className:t.listItemText,primary:"Configura\xe7\xf5es"})),b.a.createElement(At.a,{onClick:this.onOpenHelp},b.a.createElement(on.a,null,b.a.createElement(mn.a,{fontSize:"small"})),b.a.createElement(cn.a,{className:t.listItemText,primary:"Ajuda"})),b.a.createElement(At.a,{onClick:this.onLogout},b.a.createElement(on.a,null,b.a.createElement(bn.a,{fontSize:"small"})),b.a.createElement(cn.a,{className:t.listItemText,primary:"Sair"}))))))}},{key:"renderSideMenu",value:function(e){var t=this.props.classes,n=this.state.sideMenuOpen;return b.a.createElement(Qa.a,{classes:{paper:t.drawer},variant:e?"persistent":"permanent",anchor:"left",open:n,ModalProps:{keepMounted:!e}},b.a.createElement("div",{className:t.headerLogoContainer},e&&b.a.createElement("div",{className:t.closeMenuIcon},b.a.createElement(Xe.a,{size:"medium",onClick:this.onToggleSideMenu},b.a.createElement(en.a,null))),b.a.createElement("div",{className:t.logoContainer},b.a.createElement(f.b,{to:"/"},b.a.createElement("img",{src:a(290),alt:P.appName,className:t.logo})))),this.renderSideMenuList(gn),this.renderUserProfile())}},{key:"render",value:function(){var e=this.props.classes,t=this.state.showHelp;return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:e.root},b.a.createElement(Xe.a,{"aria-label":"open drawer",onClick:this.onToggleSideMenu,edge:"start"},b.a.createElement(Za.a,null)),b.a.createElement(Ja.a,{smDown:!0},this.renderSideMenu(!1)),b.a.createElement(Ja.a,{mdUp:!0},this.renderSideMenu(!0)),this.renderAlerts(),P.isProduction&&t&&b.a.createElement(Ya.a,{license:P.livechatId,visitor:this.prepareUser()})))}}]),n}(d.PureComponent),hn=Object(X.b)(Object(Z.a)((function(e){var t;return{root:Object(ne.a)({marginBottom:0},e.breakpoints.up("md"),{marginBottom:"-27px"}),drawer:(t={},Object(ne.a)(t,e.breakpoints.up("md"),{width:e.menuWidth,flexShrink:0}),Object(ne.a)(t,"border","none"),Object(ne.a)(t,"background","#FAFAFA"),Object(ne.a)(t,"color","#313131"),t),appBar:{backgroundColor:"#FAFAFA",width:"calc(100%-".concat(e.menuWidth,"px)"),borderBottom:"1px solid rgba(0, 0, 0, 0.12)",boxShadow:"none"},userProfileList:{position:"absolute",bottom:5,left:0},profileMenuContainer:{display:"flex",alignItems:"center",width:"100%"},userName:{color:"#313131",fontSize:14,cursor:"pointer",marginLeft:10},towerSelect:{width:200,color:"#313131",borderColor:"#FAFAFA",backgroundColor:"#FAFAFA",marginTop:10},logoutButton:{color:"red",fontSize:16,fontWeight:"bold",textTransform:"none"},headerLogoContainer:{width:"100%",display:"flex",paddingTop:5,paddingBottom:2,paddingRight:20},logoContainer:Object(ne.a)({marginLeft:0,color:"#313131",paddingTop:5},e.breakpoints.up("md"),{paddingTop:9,paddingBottom:4,marginLeft:15}),closeMenuIcon:{display:"inline-block",color:"#313131",marginLeft:0},logo:{width:105,height:39},checkIcon:{marginRight:10},listItemIcon:{color:"#313131",fontSize:12,width:16,height:16},listItemText:{marginLeft:-25,fontSize:12,color:"#313131"},listItemLink:{fontSize:12,color:"#313131"},listItemHeaderText:{fontSize:12},submenuList:{marginBottom:-8,marginTop:-8},submenuItem:{paddingLeft:75},badge:{right:-25,top:7,fontSize:12,backgroundColor:"#aef7ea",color:"#22007f"}}}),{withTheme:!0}),h.g)(fn),En=a(822),vn=a(804),On=a(373),jn=a.n(On),Cn=["TicketCategories","Locations","Members","Invoices","MyPlan","Slack"],yn=["TicketCategories","Locations","Slack"],kn=["TicketCategories","Locations","Members","Invoices","MyPlan","Slack"],An=Object(d.memo)((function(e){var t=e.history,a=e.classes,n=function(){var e=Object.values(qe).filter((function(e){return!e.hideMenu&&e.settingsMenu})),t=F.getUserData(),a="MEMBER"===v()(t,"role","MEMBER"),n=v()(t,"company.has_ticket_support",!1);return a&&(e=e.filter((function(e){return!Cn.includes(e.trackPage)}))),"AGENT"===t.role&&(e=e.filter((function(e){return!kn.includes(e.trackPage)}))),n||(e=e.filter((function(e){return!yn.includes(e.trackPage)}))),e}();return b.a.createElement(Wa.a,{square:!0,className:a.root},b.a.createElement(En.a,{value:jn()(n,(function(e){return t.location.pathname===e.path})),indicatorColor:"primary",textColor:"primary",scrollButtons:"auto",variant:"scrollable",onChange:function(e,a){return t.push(n[a].path)}},n.map((function(e,t){return b.a.createElement(vn.a,{key:e.path,label:e.label,index:t})}))))})),wn=Object(X.b)(Object(Z.a)((function(e){return{root:Object(ne.a)({marginTop:25},e.breakpoints.up("md"),{marginTop:35})}}),{withTheme:!0}),h.g)(An),Tn=a(374),xn=a.n(Tn),Sn={inviteUsers:function(e){var t=e.role,a=e.locationIds,n=e.slackUsers,r={role:t,location_ids:a,slack_users:j()(n,(function(e){var t=v()(e,"name","").trim().split(" ");return{name:Aa()(t),lastname:xn()(t,1).join(" "),email:v()(e,"email")}}))};return q.post("/slack/invite",r)},listUsers:function(e){var t=e.canInvite,a=e.nextCursor;return t?q.get("/slack/users",{cursor:a}):null}},Nn={ok:"Conta Slack integrada com sucesso",not_authorized:"N\xe3o foi poss\xedvel integrar sua conta Slack",wrong_member:"\xc9 necess\xe1rio logar no Slack com mesmo email de login Lobby"},Dn=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.revokeSlackFetch,o=e.revokeSlackLoading,c=e.canInvite,l=e.slackUsers,i=e.slackUsersFetch,s=e.slackUsersLoading,u=e.inviteSlackUsersFetch,m=e.inviteSlackUsersLoading,d=e.nextCursor,p=a.showAlert,g=a.alertMsg,f=a.alertType,h=null;p&&(h=b.a.createElement(at,{message:g,type:f,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}}));var E=F.getUserData(),O=v()(E,"company.name"),j=v()(E,"company.slack_team_id"),C=v()(E,"slack_user_id"),y=ma()(v()(E,"locations",[]),["name"]),k=function(){window.confirm("Tem certeza em realizar essa a\xe7\xe3o?")&&(Y.hit("SlackIntegration - RevokeUser"),r(!0))};return b.a.createElement("div",{className:t.root},b.a.createElement(hn,{alertBox:h}),b.a.createElement("section",null,b.a.createElement("div",{className:t.container},b.a.createElement("div",{className:t.headerView},b.a.createElement("aside",null,b.a.createElement(Ve.a,{variant:"h5"},b.a.createElement("b",null,"Configura\xe7\xf5es"))))),b.a.createElement("div",{className:t.container},b.a.createElement(wn,null)),b.a.createElement("br",null),s?b.a.createElement(be,null):c&&aa()(l)?b.a.createElement(Ua,{users:l,onRevoke:k,onInvite:function(e){u(!0,"",null,{variables:e})},onShowMore:function(){return i(!1)},isRevokeDisabled:o,isInviteDisabled:m,canDisconnect:Boolean(C),nextCursor:d,locations:y,companyName:O}):b.a.createElement(Va,{onAuthUser:function(){Y.hit("SlackIntegration - AuthUser");var e="".concat(P.slackOAuthURL,"?scope=").concat(P.slackOAuthScope,"&team=").concat(j);e+="&client_id=".concat(P.slackClientId,"&user_scope=").concat(P.slackOAuthUserScope),e+="&redirect_uri=".concat(P.slackRedirectURL),window.location.href=e},onInstallLobby:function(){Y.hit("SlackIntegration - InstallLobby");var e="".concat(P.slackOAuthURL,"?scope=").concat(P.slackOAuthScope);e+="&client_id=".concat(P.slackClientId,"&user_scope=").concat(P.slackOAuthUserScope),e+="&redirect_uri=".concat(P.slackRedirectURL),window.location.href=e},onRevoke:k,isDisabled:o})))})),Mn=Xt(U.revokeSlackUser,{name:"revokeSlack",init:!1,options:function(e){var t=e.setAlert;return{onRequestFinished:function(){var e=Object(c.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({alertMsg:"A conta Slack foi desconectada",alertType:"success",showAlert:!0}),a=F.getUserData(),sa()(a,"slack_user_id",null),F.setUserData(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRequestError:function(){t({alertMsg:"Erro ao desconectar conta Slack",alertType:"error",showAlert:!0})}}}}),In=Xt(Sn.listUsers,{name:"slackUsers",options:function(e){var t=e.setAlert,a=e.slackUsers,n=e.setSlackUsers,r=e.setNextCursor,o=e.nextCursor;return{variables:{canInvite:e.canInvite,nextCursor:o},onRequestFinished:function(e){var t=a.concat(v()(e,"users",[]));n(ma()(ba()(t,"email"),["name"])),r(v()(e,"next_cursor",""))},onRequestError:function(){t({alertMsg:"Erro ao carregar lista de usu\xe1rios slack",alertType:"error",showAlert:!0})}}}}),Fn=Xt(Sn.inviteUsers,{name:"inviteSlackUsers",init:!1,options:function(e){var t=e.setAlert,a=e.slackUsersFetch;return{onRequestFinished:function(){t({alertMsg:"Convite enviado com sucesso",alertType:"success",showAlert:!0}),a(!0)},onRequestError:function(){t({alertMsg:"Erro ao carregar convidar usu\xe1rios slack",alertType:"error",showAlert:!0})}}}}),Rn=Object(X.b)(h.g,Object(Z.a)(_a,{withTheme:!0}),Object(X.h)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(X.h)("canInvite","setCanInvite",!1),Object(X.h)("slackUsers","setSlackUsers",[]),Object(X.h)("nextCursor","setNextCursor",""),Mn,In,Fn,Object(X.c)({componentDidMount:function(){var e=this;return Object(c.a)(o.a.mark((function t(){var a,n,r,c,l,i,s,u,m,d,b;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props,n=a.location,r=a.setAlert,c=a.setCanInvite,l=new URLSearchParams(n.search),i=l.get("status"),s=F.getUserData(),u=v()(s,"role"),m=v()(s,"company.slack_team_id"),d=v()(s,"slack_user_id"),b=Ba.includes(u)&&m&&d,c(Boolean(b)),i&&(r({alertMsg:Nn[i],alertType:"ok"===i?"success":"error",showAlert:!0}),window.history.pushState("","","/#/configuracoes/slack"));case 10:case"end":return t.stop()}}),t)})))()}}))(Dn),Ln=a(821),Bn=a(833),Pn=a(812),_n=a(813),qn=a(389),Un=a.n(qn),Wn=a(380),zn=a.n(Wn),Vn=a(379),Hn=a.n(Vn),Yn=a(145),Qn={PRIORITIES:[{label:"Nenhuma",key:""},{label:"Baixa",key:"LOW"},{label:"M\xe9dia",key:"NORMAL"},{label:"Alta",key:"HIGH"}],STATUSES:[{label:"Pendente",key:"PENDING"},{label:"Em andamento",key:"IN_PROGRESS"},{label:"Conclu\xeddo",key:"DONE"}],STATUS_PENDING:"PENDING",STATUS_IN_PROGRESS:"IN_PROGRESS",STATUS_DONE:"DONE",PRIORITY_LOW:"LOW",PRIORITY_NORMAL:"NORMAL",PRIORITY_HIGH:"HIGH"},Gn={kanban:{display:"inline-flex",userSelect:"none",alignItems:"center",justifyContent:"center",height:740},column:{margin:10,display:"flex",flexDirection:"column",marginBottom:10,minWidth:328,height:740},columnLoading:{transition:"background-color 500ms fade-out 1s",backgroundColor:"rgba(96, 115, 137, 0.04)"},columnHeader:{display:"flex",alignItems:"center",justifyContent:"center",border:0,backgroundColor:"rgba(96, 115, 137, 0.04)",transition:"background-color 0.1s ease",height:50,userSelect:"none"},columnTitle:{padding:10,transition:"background-color ease 0.2s",flexGrow:1,userSelect:"none",position:"relative",fontSize:14,fontWeight:600,color:"#515c6a"},columnTitleLoading:{color:"rgb(224, 224, 224)"},list:{backgroundColor:"#F2F3F8",display:"flex",flexDirection:"column",padding:10,borderRadius:8,paddingBottom:0,transition:"background-color 0.1s ease, opacity 0.1s ease",userSelect:"none",minHeight:250,marginBottom:10},card:{cursor:"pointer",height:"auto"},cardContent:{flexGrow:1,flexBasis:"100%",display:"flex",flexDirection:"column",marginBottom:8}},Jn=Object(d.memo)((function(e){var t=e.provided,a=void 0===t?{}:t,n=e.children;return b.a.createElement("a",Object.assign({style:Gn.card,ref:a.innerRef},a.draggableProps,a.dragHandleProps),n)}));Jn.propTypes={children:ae.a.any,provided:ae.a.any};var Kn=Object(d.memo)((function(e){var t=e.provided,a=e.renderCard,n=e.row,r=e.cardWrapperStyle,o=e.disableDragDrop;return b.a.createElement(Jn,{provided:o?{}:t},b.a.createElement("div",{style:Object(m.a)(Object(m.a)({},Gn.cardContent),r)},a(n)))})),Xn=Object(d.memo)((function(e){var t=e.provided,a=void 0===t?{}:t,n=e.style,r=e.children;return b.a.createElement("div",Object.assign({style:Object(m.a)(Object(m.a)({},Gn.list),n),ref:a.innerRef},a.droppableProps),r)}));Xn.propTypes={children:ae.a.any,provided:ae.a.any,style:ae.a.any};var Zn=Object(d.memo)((function(e){var t=e.column,a=e.cardWrapperStyle,n=e.renderCard,r=e.disableDragDrop,o=We()(v()(t,"rows"))?[]:t.rows;return j()(o,(function(e,t){return r?b.a.createElement(Kn,{key:t,row:e,renderCard:n,cardWrapperStyle:a,disableDragDrop:r}):b.a.createElement(Yn.b,{key:e.id,draggableId:e.id,index:t},(function(o,c){return b.a.createElement(Kn,{key:t,row:e,provided:o,dragSnapshot:c,renderCard:n,cardWrapperStyle:a,disableDragDrop:r})}))}))})),$n=Object(d.memo)((function(e){var t=e.listStatus,a=e.column,n=e.disableDragDrop,r=e.renderCard,o=e.columnStyle,c=e.cardWrapperStyle,l=e.isDraggingFrom;return n?b.a.createElement(Xn,{style:o},b.a.createElement(Zn,{column:a,renderCard:r,disableDragDrop:n,cardWrapperStyle:c})):b.a.createElement(Yn.c,{droppableId:t||"ROW",isDropDisabled:l,type:"ROW"},(function(e){return b.a.createElement(Xn,{style:o,provided:e},b.a.createElement(Zn,{column:a,renderCard:r,disableDragDrop:n,cardWrapperStyle:c}),e.placeholder)}))}));$n.propTypes={listStatus:ae.a.string,renderCard:ae.a.func,column:ae.a.object,columnStyle:ae.a.object,cardWrapperStyle:ae.a.object,disableDragDrop:ae.a.bool,isDraggingFrom:ae.a.bool};var er=$n,tr=Object(d.memo)((function(e){var t=e.index,a=e.column,n=e.renderCard,r=e.columnStyle,o=e.columnWrapperStyle,c=e.cardWrapperStyle,l=e.columnTitleStyle,i=e.columnHeaderStyle,s=e.disableDragDrop,u=e.loading,d=e.isDraggingFrom,p=e.actionComponent;return b.a.createElement("div",{style:Object(m.a)(Object(m.a)({},Gn.column),o)},b.a.createElement("header",{style:Object(m.a)(Object(m.a)({},Gn.columnHeader),i)},b.a.createElement("h4",{style:Object(m.a)(Object(m.a)(Object(m.a)({},Gn.columnTitle),l),u?Gn.columnTitleLoading:{})},"".concat(v()(a,"title")," (").concat(aa()(v()(a,"rows")),")")),p),b.a.createElement(er,{key:t,columnStyle:r,column:a,loading:u,listStatus:v()(a,"status"),renderCard:n,cardWrapperStyle:c,disableDragDrop:s,isDraggingFrom:d}))}));tr.propTypes={index:ae.a.number,renderCard:ae.a.func,loading:ae.a.bool,column:ae.a.object,columnWrapperStyle:ae.a.object,columnStyle:ae.a.object,columnTitleStyle:ae.a.object,columnHeaderStyle:ae.a.object,cardWrapperStyle:ae.a.object,disableDragDrop:ae.a.bool,actionComponent:ae.a.object,isDraggingFrom:ae.a.bool};var ar=tr,nr=Qn.STATUSES,rr=Qn.STATUS_PENDING,or=Qn.STATUS_IN_PROGRESS,cr=Qn.STATUS_DONE,lr=function(e,t){return Object(N.map)(e,(function(e){return e.status})).indexOf(t)},ir=function(e){return Object(N.map)(nr,(function(t,a){var n=Object(N.get)(t,"key"),r=Object(N.filter)(e,(function(e){return e.status===n}));return{index:a,status:n,title:Object(N.get)(t,"label","").toUpperCase(),rows:r}}))},sr=Object(d.memo)((function(e){var t=e.columns,a=e.setColumns,n=e.onDragEnd,r=e.renderCard,o=e.loading,c=e.columnWrapperStyle,l=e.cardWrapperStyle,i=e.columnStyle,s=e.columnHeaderStyle,u=e.columnTitleStyle,d=e.disableDragDrop,p=e.currentDraggingSource,g=e.setCurrentDraggingSource,f=e.actionPending,h=e.actionInProgress,E=e.actionDone,v=function(e){return e===rr&&f?f:e===or&&h?h:e===cr&&E?E:null};return b.a.createElement(Yn.a,{onDragStart:function(e){g(e.source)},onDragEnd:function(e){if(g(null),e.destination){var r=e.source,o=e.destination;if(r.droppableId!==o.droppableId)if(!(!o||r.droppableId===o.droppableId&&r.index===o.index)){var c=Object(N.cloneDeep)(t),l=lr(t,r.droppableId),i=lr(t,o.droppableId),s=Object(N.cloneDeep)(t[l].rows),u=Object(N.cloneDeep)(t[i].rows),m=s.splice(r.index,1),d=Object(Et.a)(m,1)[0];u.splice(o.index,0,d),c[l].rows=Object(N.cloneDeep)(s),c[i].rows=Object(N.cloneDeep)(u),a(Object(N.cloneDeep)(c)),n(e)}}}},b.a.createElement("div",{style:Gn.kanban},Object(N.map)(nr,(function(e,a){return b.a.createElement(ar,{key:a,index:a,loading:o,column:t[a],renderCard:r,columnHeaderStyle:s,columnTitleStyle:u,columnStyle:Object(m.a)(Object(m.a)({},i),o?Gn.columnLoading:{}),columnWrapperStyle:c,cardWrapperStyle:l,disableDragDrop:d,actionComponent:v(e.key),isDraggingFrom:Object(N.get)(p,"droppableId")===e.key})}))))})),ur=Object(X.b)(Object(X.h)("columns","setColumns",[]),Object(X.h)("currentDraggingSource","setCurrentDraggingSource",null),Object(X.c)({componentDidMount:function(){var e=this.props,t=e.data;(0,e.setColumns)(ir(t))}}),Object(X.g)(["data","loading"],(function(e){var t=e.data;(0,e.setColumns)(ir(t))})))(sr),mr=a(805),dr=a(806),br=a(832),pr=a(807),gr=a(376),fr=a.n(gr),hr=Object(d.memo)((function(e){var t=e.classes,a=e.ticket,n=e.loading,r=e.onClickCard,o="".concat(v()(a,"requester.name")," ").concat(v()(a,"requester.lastname","")),c=v()(a,"assignees"),l=c.map((function(e){return{assigneeName:"".concat(v()(e,"name","")," ").concat(v()(e,"lastname","")),assignePhotoUrl:v()(e,"photo_url")}})),i=v()(a,"created_at")?"".concat(A()(a.created_at).fromNow()," por "):"",s=v()(a,"title",""),u=v()(a,"category.title","");return b.a.createElement(b.a.Fragment,null,b.a.createElement(mr.a,{className:t.card,onClick:function(){n||r(a)}},b.a.createElement(dr.a,{className:t.cardContent},!v()(a,"viewer_has_read")&&b.a.createElement(fr.a,{className:t.notReadIndicator}),!n&&function(e,t){if(e){var a=A()(e).format("MMM D"),n=A()().startOf("day"),r=A()(e).startOf("day"),o=r.isSame(n,"day"),c=1===r.diff(n,"days"),l=r.isBefore(n,"day");return o?b.a.createElement(br.a,{label:a,size:"small",className:t.cardChipToday}):c?b.a.createElement(br.a,{label:a,size:"small",className:t.cardChipTomorrow}):l?b.a.createElement(br.a,{label:a,size:"small",className:t.cardChipExpired}):b.a.createElement(br.a,{label:a,size:"small",className:t.cardChipFarFromExpiration})}return null}(v()(a,"deadline"),t),b.a.createElement(Ve.a,{variant:"subtitle1",className:t.cardTitle},n?b.a.createElement(pr.a,{animation:"wave"}):b.a.createElement("b",null,s)),n?b.a.createElement(pr.a,{animation:"wave",width:150}):b.a.createElement(Ve.a,{variant:"body2",color:"textSecondary",component:"small"},i,b.a.createElement("b",null,o)),b.a.createElement("div",{className:t.cardAction},b.a.createElement("div",{className:t.cardAvatar},n?b.a.createElement(pr.a,{animation:"wave",width:100}):c&&b.a.createElement("div",{className:t.cardAvatarContainer},l.map((function(e,a){return b.a.createElement("div",{key:"".concat(e.assigneeName,"_").concat(a.toString()),className:t.cardAvatarImage},b.a.createElement(Ra,{name:e.assigneeName,photoUrl:e.assignePhotoUrl}))})))),b.a.createElement(Ve.a,{variant:"body2",color:"textSecondary",component:"small"},n?b.a.createElement(pr.a,{animation:"wave",width:50}):u)))))})),Er=Object(X.b)(Object(Z.a)((function(e){return{card:{padding:0,width:308,height:"auto",minHeight:"auto",maxHeight:"auto",borderRadius:8,boxShadow:"0 3px 3px 0 rgba(133, 133, 133, 0.2)",border:"1px solid #eee"},cardContent:{marginBottom:0,paddingBottom:"5px !important"},cardAction:{marginTop:10,marginBottom:15,display:"inline-flex",width:"100%",alignItems:"center",justifyContent:"space-between"},cardTitle:{lineHeight:"1.5em",marginBottom:5},cardChipToday:{float:"right",backgroundColor:ge.a[700],color:"white"},cardChipTomorrow:{float:"right",backgroundColor:Na.a[700],color:"white"},cardChipExpired:{float:"right",backgroundColor:ge.a[200],color:"white"},cardChipFarFromExpiration:{float:"right",backgroundColor:"rgb(242, 243, 248)",color:"black"},notReadIndicator:{float:"right",fontSize:"1rem",color:e.palette.success.dark,marginLeft:e.spacing(1)},cardAvatar:{display:"inline-flex",width:"100%",height:"auto",minHeight:"auto",maxHeight:"auto",alignItems:"center"},cardAvatarName:{marginLeft:10,marginTop:0,lineHeight:"1.2em"},cardAvatarImage:{marginRight:5,marginTop:5},cardAvatarContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap"}}}),{withTheme:!0}),h.g)(hr),vr=a(780),Or=a(808),jr=a(783),Cr=a(781),yr=a(782),kr=a(809),Ar=a(183),wr=a.n(Ar),Tr={getTickets:function(e){return q.get("/tickets",{location_id:v()(e,"locationId"),assignee_id:v()(e,"assigneeId"),category_id:v()(e,"categoryId"),deadline:v()(e,"deadline"),priority:v()(e,"priority"),archived:v()(e,"archived"),status:v()(e,"status"),per_page:v()(e,"perPage"),page:v()(e,"page")})},getTicket:function(e){return e?q.get("/tickets/".concat(e)):null},getTicketByCode:function(e){return e?q.get("/tickets/codes/".concat(e)):null},updateTicket:function(e){var t=e.ticket,a=e.selectedAssignees,n={id:v()(t,"id"),title:v()(t,"title"),priority:We()(v()(t,"priority"))?null:v()(t,"priority"),deadline:v()(t,"deadline"),location_id:v()(t,"location.id"),assignee_ids:a,category_id:v()(t,"category.id")};return q.put("/tickets/".concat(v()(t,"id")),n)},moveTicket:function(e){var t=e.id,a=e.status,n=e.position,r=e.location_id;return q.put("/tickets/".concat(t,"/move"),{status:a,position:n,location_id:r})},archiveTicket:function(e){var t=e.ticketsIds;return q.put("/tickets/archive",{tickets_ids:t})},unarchiveTicket:function(e){var t=e.ticketsIds;return q.put("/tickets/unarchive",{tickets_ids:t})},postTicket:function(e){var t=e.attachment_data,a=Object(st.a)(e,["attachment_data"]),n=null;return t&&(n={id:t.id,storage:t.storage,metadata:t.metadata,base64Data:t.base64Data}),q.post("/tickets",Object(m.a)(Object(m.a)({},a),{},{attachment_data:n,priority:We()(v()(a,"priority"))?null:v()(a,"priority")}))},deleteTicket:function(e){return q.delete("/tickets/".concat(e))},getAssignables:function(){return q.get("/tickets/assignables")},exportCsv:function(e){var t=e.start_date,a=e.end_date;return q.post("/tickets/export_csv",{start_date:t,end_date:a})},report:function(e){var t=e.location_id,a=e.start_date,n=e.end_date;return q.post("/tickets/report",{location_id:t,start_date:a,end_date:n})},markAsRead:function(e){return q.put("/tickets/".concat(e,"/mark_as_read"))},postPublicTicket:function(e){var t=e.ticket,a=t.attachment_data,n=Object(st.a)(t,["attachment_data"]),r=e.companyId,o=null;return a&&(o={id:a.id,storage:a.storage,metadata:a.metadata,base64Data:a.base64Data}),q.post("/public_tickets?company_id=".concat(r),Object(m.a)({attachment_data:o},n))}},xr={getComments:function(e){return e?q.get("/tickets/".concat(e,"/ticket_comments")):null},sendComment:function(e){var t=e.id,a=e.content,n=e.isInternal,r=e.attachmentData,o=null;return r&&(o={id:r.id,storage:r.storage,metadata:r.metadata,base64Data:r.base64Data}),q.post("/tickets/".concat(t,"/ticket_comments"),{content:a,is_internal:n,attachment_data:o})},deleteComment:function(e){var t=e.id;return q.delete("/ticket_comments/".concat(t))}},Sr=a(377),Nr=a.n(Sr),Dr=a(182),Mr=a.n(Dr),Ir=a(378),Fr=a.n(Ir),Rr={attributes:{target:"_blank",rel:"noopener noreferrer"}},Lr=function(e){return Fr()({input:e,options:Rr})},Br=Object(d.memo)((function(e){var t=e.comment,a=e.classes,n=e.deleteCommentFetch,r=e.deleteCommentLoading,o=v()(t,"is_internal"),c=o?a.internalBallon:"",l=F.getUserData(),i=v()(l,"id"),s=v()(t,"member_id",""),u=v()(t,"member.job_role")?"- ".concat(v()(t,"member.job_role")):"",m=v()(t,"member.fullname",P.systemName),d=v()(t,"member.photo_url",P.systemPhotoUrl),p=v()(t,"is_activity"),g=Nr()(t.content||""),f=o&&!p?" - Interno":"",h=p?g:u;return b.a.createElement("div",null,b.a.createElement("div",{className:a.userNameContainer},b.a.createElement(Ra,{name:m,photoUrl:d}),b.a.createElement(Ve.a,{variant:"subtitle2",className:a.userName},b.a.createElement("b",null,m),"\xa0",b.a.createElement(Ve.a,{variant:"body2",component:"span"},h),p&&b.a.createElement(Ve.a,{variant:"body2",color:"textSecondary",component:"small"},b.a.createElement("br",null),"".concat(A()(v()(t,"created_at")).calendar()).concat(f)))),b.a.createElement("div",{className:a.content},!p&&b.a.createElement(b.a.Fragment,null,t.attachment_data&&b.a.createElement(Vt,{file:t.attachment_data,outterContainerClassName:a.previewButtonContainer}),t.content&&b.a.createElement("div",{className:"".concat(a.baloon," ").concat(c)},b.a.createElement("div",{className:t.attachment_data&&a.contentWithMargin},(t.content||"").split("\n").map((function(e,t){return b.a.createElement("span",{key:"".concat(Date.now(),"_").concat(t.toString())},b.a.createElement("span",{dangerouslySetInnerHTML:{__html:Lr(e)}}),b.a.createElement("br",null))})))),b.a.createElement(Ve.a,{variant:"body2",color:"textSecondary",component:"small"},"".concat(A()(v()(t,"created_at")).calendar()).concat(f)),s&&i===s&&b.a.createElement(Mr.a,{className:a.iconButton,onClick:function(){window.confirm("Deseja excluir o coment\xe1rio? Essa a\xe7\xe3o \xe9 irrevers\xedvel")&&n(!0)},disabled:r}))))})),Pr=Xt(xr.deleteComment,{name:"deleteComment",init:!1,options:function(e){var t=e.comment,a=e.setAlert,n=e.fetchComments;return{variables:{id:v()(t,"id")},onRequestFinished:function(){a({alertMsg:"Coment\xe1rio exclu\xeddo com sucesso",alertType:"success",showAlert:!0});var e={id:v()(t,"id"),content:v()(t,"content")};Y.hit("TicketComment - Deleted",e),n()},onRequestError:function(){a({alertMsg:"Erro ao excluir coment\xe1rio",alertType:"error",showAlert:!0})}}}}),_r=Object(X.b)(d.memo,Object(Z.a)((function(){return{userNameContainer:{display:"flex",alignItems:"space-between",flexDirection:"row",marginTop:15},userName:{marginLeft:10},content:{marginLeft:40,marginBottom:20},baloon:{backgroundColor:"#fff",borderRadius:5,paddingLeft:15,paddingRight:15,paddingTop:10,paddingBottom:10,marginBottom:5,height:"auto",wordBreak:"break-word",whiteSpace:"pre-line"},internalBallon:{backgroundColor:"#fff3d7"},previewButtonContainer:{display:"flex",width:"fit-content",backgroundColor:"white",marginBottom:5},contentWithMargin:{marginTop:10},iconButton:{fontSize:22,paddingLeft:5,verticalAlign:"bottom",cursor:"pointer"}}}),{withTheme:!0}),Pr)(Br),qr=Xt(xr.sendComment,{name:"sendTicketComment",init:!1,options:function(e){var t=e.setFile,a=e.onAttachmentSent,n=e.onUploadError;return{onRequestFinished:function(){t(null),a&&a()},onRequestError:function(e){t(null),n(e)}}}}),Ur=Object(X.b)(d.memo,Object(X.h)("file","setFile",null),qr,Object(X.e)({onUploadSuccess:function(e){var t=e.ticketId,a=e.isInternal,n=e.setFile,r=e.sendTicketCommentFetch;return function(e){n(Object(m.a)(Object(m.a)({},e),{},{progressPercent:99})),r(!0,null,null,{variables:{id:t,attachmentData:e,content:null,isInternal:a}})}},onUploadError:function(e){var t=e.onUploadError,a=e.setFile;return function(e){a(null),t&&t(e)}}}))((function(e){var t=e.file,a=e.setFile,n=e.onUploadSuccess,r=e.disabled,o=e.onUploadError;return b.a.createElement(Ht,{value:t,onChange:a,onUploadSuccess:n,disabled:r,accept:"image/*,.doc,.docx,.xls,.xlsx,.pdf,.xml",buttonProps:{style:{backgroundColor:"#fff"}},sizeLimit:10,onUploadError:o})})),Wr=Qn.PRIORITIES,zr=Qn.STATUSES,Vr=Object(d.memo)((function(e){var t=e.setAlert,a=e.classes,n=e.assignees,r=e.categories,l=e.open,i=e.onClose,s=e.setCurrentTicketState,u=e.history,d=e.unarchiveTicketLoading,p=e.currentTicket,g=e.formData.validationErrors,f=e.unarchiveTicketFetch,h=e.ticketLoading,E=e.theme,v=e.isEditing,O=e.setIsEditing,j=e.selectedAssignees,C=e.setSelectedAssignees,y=e.updateTicketFetch,k=e.updateTicketLoading,w=e.initialTitle,T=e.lastTitle,x=e.ticketCommentsFetch,S=e.ticketCommentsData,D=e.ticketCommentsLoading,M=e.deleteTicketLoading,I=e.commentMessage,R=e.setCommentMessage,L=e.setCloseModal,B=e.setInitialTitle,P=e.sendTicketCommentFetch,_=e.sendTicketCommentLoading,q=e.setLastTitle,U=e.deleteTicketFetch,W=e.moveTicketFetch,z=e.moveTicketLoading,V=e.archiveTicketFetch,H=e.archiveTicketLoading;if(!l)return null;var Q=lt.isMobile(),G=F.getUserData(),J=Object(N.sortBy)(Object(N.get)(G,"locations",[]),["name"]),K=Object(N.get)(G,"role","MEMBER"),X=Pa.includes(K),Z=Object(N.sortBy)(Object(N.get)(S,"ticket_comments",[]),["created_at"]).reverse(),$=Object(N.get)(p,"requester.id"),ee=Object(N.get)(G,"id"),te=Object(N.get)(p,"status"),ae=Boolean(Object(N.get)(p,"archived_at")),ne=X&&!ae,re=ne||!ae&&($&&ee&&ee===$),oe=Boolean(!re||_||D||H||d),ce=Boolean(k||z||h||d||H||M),le=!ne,me=Boolean(!X||ce||le),de=oe||Object(N.isEmpty)(Object(N.get)(I,"content","")),pe="".concat(Object(N.get)(p,"requester.name","")," ").concat(Object(N.get)(p,"requester.lastname","")),ge=Object(N.get)(p,"created_at")?A()(p.created_at).fromNow():"",fe=Object(N.get)(p,"code",""),he=Object(N.get)(p,"title",""),Ee="".concat(ae?"Ticket arquivado - ":"").concat(he),ve=Object(N.isEmpty)(Object(N.get)(p,"priority"))?"":Object(N.get)(p,"priority"),Oe=Object(N.get)(p,"location.id",""),je=Object(N.get)(p,"category.id",""),Ce=Object(N.compact)([Object(N.get)(p,"category")].concat(r||[])),ye=Object(N.sortBy)(Object(N.uniqBy)(Ce,"id"),"title"),ke=Object(N.get)(p,"deadline",null),Ae=Object(N.map)(Object(N.get)(p,"assignees"),(function(e){return"".concat(e.name," ").concat(e.lastname)})).join(", ");le&&(ve=Object(N.get)(Object(N.find)(Wr,(function(e){return e.key===ve})),"label",""),Oe=Object(N.get)(Object(N.find)(J,(function(e){return e.id===Oe})),"name",""),je=Object(N.get)(Object(N.find)(r,(function(e){return e.id===je})),"title",""),te=Object(N.get)(Object(N.find)(zr,(function(e){return e.key===te})),"label",""),ke=Object(N.isEmpty)(ke)?"":A()(ke).format("DD/MM/YYYY"));var we=Object(Oa.a)(),Te=Object(ja.a)(we.breakpoints.down("sm")),xe=E.mainColor,Se=function(){var e={id:Object(N.get)(p,"id"),title:Object(N.get)(p,"title")};Y.hit("TicketModal - Closed",e),L(!0),O(!1),i()},Ne=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t.target.value);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(c.a)(o.a.mark((function e(){var t,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.stringify(j.sort()),a=Object(N.map)(Object(N.get)(p,"assignees"),(function(e){return e.id})),r=JSON.stringify(a.sort()),t===r){e.next=10;break}return L(!1),e.next=7,y(!0);case 7:x(!0),c=n.filter((function(e){return j.includes(e.id)})),s({assignees:c});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ne){e.next=6;break}return L(!1),s(t),e.next=5,y(!0);case 5:x(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ne){e.next=7;break}return L(!1),a={variables:{id:p.id,status:t}},s({status:t}),e.next=6,W(!0,"",null,a);case 6:x(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ne){e.next=7;break}return L(!1),a={variables:{id:p.id,location_id:t}},s({location:{id:t}}),e.next=6,W(!0,"",null,a);case 6:x(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){window.document.querySelector("#title").focus(),q(he),O(!0)};return b.a.createElement(vr.a,{open:l,fullScreen:Te,onClose:Se,keepMounted:!0,fullWidth:!0,maxWidth:"md",disableEscapeKeyDown:v},b.a.createElement(se.a,{container:!0},b.a.createElement(se.a,{item:!0,xs:12,sm:12,md:5},b.a.createElement(Or.a,null,b.a.createElement(ze.a,{multiline:!0,id:"title",disabled:me,InputProps:{disableUnderline:!0,style:{color:"#000",fontSize:20,width:Q?300:350,backgroundColor:v?"#E0E0E0":"",borderRadius:v?5:"",paddingLeft:5},endAdornment:b.a.createElement(jr.a,{position:"end"},X&&!Q&&!v&&!me&&b.a.createElement(Xe.a,{onClick:Re,disabled:ce||me},k?b.a.createElement(ie.a,{color:xe,className:a.progress,variant:"indeterminate",disableShrink:!0,thickness:5,size:25}):!v&&b.a.createElement(wr.a,{fontSize:"small"})))},value:Ee,onFocus:Re,onKeyDown:function(e){13!==e.keyCode||Object(N.isEmpty)(he)?27===e.keyCode&&(s({title:w}),O(!1)):(Me({title:he}),B(he),O(!1))},onBlur:function(){Object(N.isEmpty)(he)||T===he||(Me({title:he}),B(he)),O(!1)},onChange:function(e){return t=e.target.value,void(ne&&s({title:t}));var t}},g.title&&b.a.createElement(mt.a,null,"T\xedtulo n\xe3o pode ficar em branco")),b.a.createElement("br",null),b.a.createElement(Ve.a,{variant:"body2",color:"textSecondary",component:"small"},h?"":"#".concat(fe," - ").concat(ge," por "),b.a.createElement("b",null,pe)),b.a.createElement(Xe.a,{className:a.closeButton,onClick:Se},b.a.createElement(Ke.a,null))),b.a.createElement(Cr.a,{className:a.ticketContent},b.a.createElement(wt,{errors:Object(N.get)(g,"status",[]),label:"Status",value:te,disabled:ce||!ne,readOnly:le,onChange:function(e){return Ie(e.target.value)},options:zr,optionValueField:"key"}),Object(N.size)(J)>1&&b.a.createElement(wt,{errors:Object(N.get)(g,"location_id",[]),label:"Local",value:Oe,disabled:ce||!ne,readOnly:le,onChange:function(e){return Fe(e.target.value)},options:J,optionValueField:"id",optionLabelField:"name"}),b.a.createElement(wt,{errors:Object(N.get)(g,"category_id",[]),label:"Categoria",value:je,disabled:ce||!ne,readOnly:le,onChange:function(e){return Me({category:{id:e.target.value}})},options:ye,optionValueField:"id",optionLabelField:"title"}),le?b.a.createElement(bt,{label:"Respons\xe1veis",value:Ae,disabled:ce||le,readOnly:le}):b.a.createElement(ut.a,{fullWidth:!0,margin:"normal",variant:"outlined",className:a.formControl,error:!!g.assignees},b.a.createElement(yt.a,{shrink:!0},"Respons\xe1veis"),b.a.createElement(kt.a,{error:!!g.assignees,label:"Respons\xe1veis",multiple:!0,value:j,onChange:Ne,onClose:De,disabled:ce||le},n.map((function(e){return b.a.createElement(At.a,{key:e.id,value:e.id},"".concat(e.name," ").concat(e.lastname))}))),g.assignees&&b.a.createElement(mt.a,null,g.assignees)),b.a.createElement(se.a,{container:!0,direction:"row",justify:"center",spacing:1},b.a.createElement(se.a,{item:!0,xs:6},b.a.createElement(Nt,{errors:Object(N.get)(g,"deadline"),label:"Prazo",value:ke,disabled:ce||le,readOnly:le,onChangeValue:function(e){return Me({deadline:e})}})),b.a.createElement(se.a,{item:!0,xs:6},b.a.createElement(wt,{errors:Object(N.get)(g,"priority",[]),label:"Prioridade",value:ve,disabled:ce||!ne,readOnly:le,onChange:function(e){return Me({priority:e.target.value})},options:Wr,optionValueField:"key"})))),!ae&&X&&b.a.createElement(yr.a,{className:a.ticketActions},b.a.createElement(ue.a,{color:"default",size:"large",variant:"outlined",onClick:function(){ne&&window.confirm("Tem certeza em arquivar esse ticket?")&&V(!0)},disabled:ce},"ARQUIVAR"),b.a.createElement(ue.a,{color:"primary",size:"large",variant:"outlined",disabled:ce,onClick:function(){return u.push("/servicos/sobdemanda?utm_source=tickets")}},"FAZER OR\xc7AMENTO")),ae&&X&&b.a.createElement(yr.a,{className:a.ticketActions},b.a.createElement(ue.a,{color:"default",size:"large",variant:"outlined",onClick:function(){return f(!0)},disabled:ce},"DESARQUIVAR"),b.a.createElement(ue.a,{color:"secondary",size:"large",variant:"outlined",onClick:function(){X&&window.confirm("Deseja excluir este ticket? Essa a\xe7\xe3o \xe9 irrevers\xedvel.")&&U(!0)},disabled:ce},"EXCLUIR TICKET"))),b.a.createElement(se.a,{item:!0,xs:12,sm:12,md:7,className:a.bgCommentDialog},b.a.createElement(Or.a,null,"Atividade"),b.a.createElement(Cr.a,{className:a.commentContent},b.a.createElement("div",{className:a.commentArea},D?b.a.createElement(be,null):Object(N.map)(Z,(function(e){return b.a.createElement(_r,{key:e.id,comment:e,setAlert:t,fetchComments:x})}))),b.a.createElement("div",{className:a.commentHeaderContainer},b.a.createElement(Ve.a,{variant:"h6"},"Comentar"),X&&b.a.createElement(Mt.a,{className:a.isInternalSwitch,control:b.a.createElement(kr.a,{checked:I.isInternal,onChange:function(){return R(Object(m.a)(Object(m.a)({},I),{},{isInternal:!I.isInternal}))},color:"primary"}),label:"Interno",disabled:oe})),b.a.createElement(bt,{multiline:!0,rows:3,rowsMax:3,placeholder:"Escreva seu coment\xe1rio aqui...",classes:{root:a.bgWhite},value:I.content,onChange:function(e){return R(Object(m.a)(Object(m.a)({},I),{},{content:e.target.value}))},disabled:oe})),b.a.createElement(yr.a,{className:a.commentActions},b.a.createElement(Ur,{ticketId:Object(N.get)(p,"id"),isInternal:I.isInternal,disabled:!!oe,onAttachmentSent:function(){return x(!0)},onUploadError:function(e){t({alertMsg:e.message,alertType:"error",showAlert:!0})}}),b.a.createElement(ue.a,{color:"primary",size:"large",variant:"contained",onClick:function(){re&&(L(!1),P(!0))},disabled:de},"ENVIAR")))))})),Hr=Xt(xr.getComments,{name:"ticketComments",init:!1,options:function(e){var t=e.ticket;return{variables:Object(N.get)(t,"id")}}}),Yr=Xt(xr.sendComment,{name:"sendTicketComment",init:!1,options:function(e){var t=e.currentTicket,a=e.commentMessage,n=e.setCommentMessage,r=e.onClose,o=e.ticketCommentsFetch;return{variables:Object(m.a)({id:Object(N.get)(t,"id")},a),onRequestFinished:function(){n(eo),o(!1)},onRequestError:function(e){var a={id:Object(N.get)(t,"id"),title:Object(N.get)(t,"title")};Y.hit("TicketModal - Closed",a),r(e,"Erro ao enviar um coment\xe1rio para esse ticket")}}}}),Qr=Xt(Tr.moveTicket,{name:"moveTicket",init:!1,options:function(e){var t=e.onClose,a=e.closeModal,n=e.currentTicket,r=e.setFormData;return{onRequestFinished:function(){if(a){var e={id:Object(N.get)(n,"id"),title:Object(N.get)(n,"title")};Y.hit("TicketModal - Closed",e),t(null,"Ticket #".concat(n.code," atualizado com sucesso"))}},onRequestError:function(e){var a=Object(N.mapValues)(Object(N.get)(e,"errors",{}),(function(e){return e[0]}));if(Object(N.isEmpty)(a)){var o={id:Object(N.get)(n,"id"),title:Object(N.get)(n,"title")};Y.hit("TicketModal - Closed",o);var c=Object(N.get)(e,"error","Erro ao atualizar esse ticket");t(e,c)}else r({validationErrors:a})}}}}),Gr=Xt(Tr.getTicket,{name:"ticket",init:!1,options:function(e){var t=e.ticket,a=e.setCurrentTicket,n=e.onClose;return{variables:Object(N.get)(t,"id"),onRequestFinished:function(e){a(Object(N.get)(e,"ticket"))},onRequestError:function(e){var a={id:Object(N.get)(t,"id"),title:Object(N.get)(t,"title")};Y.hit("TicketModal - Closed",a),n(e,"Erro ao abrir esse ticket")}}}}),Jr=Xt(Tr.updateTicket,{name:"updateTicket",init:!1,options:function(e){var t=e.currentTicket,a=e.onClose,n=e.closeModal,r=e.setFormData,o=e.selectedAssignees;return{variables:{ticket:t,selectedAssignees:o},onRequestFinished:function(){if(r({validationErrors:{}}),n){var e={id:Object(N.get)(t,"id"),title:Object(N.get)(t,"title")};Y.hit("TicketModal - Closed",e),a(null,"Ticket #".concat(t.code," atualizado com sucesso"))}},onRequestError:function(e){var t=Object(N.mapValues)(Object(N.get)(e,"errors",{}),(function(e){return e[0]}));r({validationErrors:t})}}}}),Kr=Xt(Tr.archiveTicket,{name:"archiveTicket",init:!1,options:function(e){var t=e.currentTicket,a=e.onClose;return{variables:{ticketsIds:[t.id]},onRequestFinished:function(){var e={id:Object(N.get)(t,"id"),title:Object(N.get)(t,"title")};Y.hit("Ticket - Archived",e),a(null,"Ticket #".concat(t.code," arquivado com sucesso"))},onRequestError:function(e){a(e,"Erro ao arquivar ticket #".concat(t.code))}}}}),Xr=Xt(Tr.unarchiveTicket,{name:"unarchiveTicket",init:!1,options:function(e){var t=e.currentTicket,a=e.onClose;return{variables:{ticketsIds:[t.id]},onRequestFinished:function(){var e={id:Object(N.get)(t,"id"),title:Object(N.get)(t,"title")};Y.hit("Ticket - Unarchived",e),a(null,"Ticket #".concat(t.code," desarquivado com sucesso"))},onRequestError:function(e){a(e,"Erro ao desarquivar ticket #".concat(t.code))}}}}),Zr=Xt(Tr.deleteTicket,{name:"deleteTicket",init:!1,options:function(e){var t=e.currentTicket,a=e.onClose;return{variables:t.id,onRequestFinished:function(){var e={id:Object(N.get)(t,"id"),title:Object(N.get)(t,"title")};Y.hit("Ticket - Deleted",e),a(null,"Ticket #".concat(t.code," exclu\xeddo com sucesso"))},onRequestError:function(e){a(e,"Erro ao excluir ticket #".concat(t.code))}}}}),$r={validationErrors:{}},eo={content:"",isInternal:!1},to=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{ticketContent:{marginTop:-20},ticketActions:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end",alignSelf:"flex-end",paddingLeft:25,paddingRight:25,marginTop:22},commentHeaderContainer:{display:"flex",alignItems:"center"},isInternalSwitch:{marginLeft:"1rem"},bgCommentDialog:{backgroundColor:"rgb(242, 243, 248)"},commentContent:{marginTop:-20,paddingLeft:20,paddingRight:20},commentArea:{height:315,minHeight:315,maxHeight:315,marginBottom:15,overflowY:"scroll"},commentActions:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"flex-end",alignSelf:"flex-end",paddingLeft:20,paddingRight:20,paddingBottom:20},title:{marginBottom:0},editButton:{position:"absolute",right:e.spacing(75),top:e.spacing(1),color:e.palette.grey[500]},inputLabel:{color:"rgba(0, 0, 0, 0.54)"}})}),{withTheme:!0}),h.g,Object(X.h)("formData","setFormDataRaw",$r),Object(X.e)({setFormData:function(e){var t=e.setFormDataRaw,a=e.formData;return function(e){t(Object(m.a)(Object(m.a)({},a),e))}}}),Object(X.h)("currentTicket","setCurrentTicket",{}),Object(X.h)("commentMessage","setCommentMessage",eo),Object(X.h)("selectedAssignees","setSelectedAssignees",[]),Object(X.h)("closeModal","setCloseModal",!1),Object(X.h)("isEditing","setIsEditing",!1),Object(X.h)("initialTitle","setInitialTitle",""),Object(X.h)("lastTitle","setLastTitle",""),Hr,Yr,Jr,Qr,Kr,Xr,Zr,Gr,Object(X.c)({componentDidMount:function(){var e=this.props,t=e.ticket,a=e.setCurrentTicket,n=e.setCommentMessage;(0,e.setSelectedAssignees)(Object(N.map)(Object(N.get)(t,"assignees"),(function(e){return e.id}))),a(t),n(eo)}}),Object(X.g)(["open"],(function(e){var t=e.open,a=e.setCommentMessage,n=e.setCurrentTicket,r=e.setFormData,o=e.setSelectedAssignees,c=e.ticketFetch,l=e.ticketCommentsFetch,i=e.ticket,s=e.setInitialTitle;if(t){var u={id:Object(N.get)(i,"id"),title:Object(N.get)(i,"title")};Y.hit("TicketModal - Opened",u),i&&!Object(N.get)(i,"mark_as_read")&&Tr.markAsRead(i.id),n(i),r($r),o(Object(N.map)(Object(N.get)(i,"assignees"),(function(e){return e.id}))),s(Object(N.get)(i,"title")),a(eo),c(!0),l(!0)}})),Object(X.e)({setCurrentTicketState:function(e){var t=e.setCurrentTicket,a=e.currentTicket;return function(e){t(Object(m.a)(Object(m.a)({},a),e))}}}))(Vr),ao={wrapper:{marginLeft:0,marginRight:10},header:{backgroundColor:"#FFF",padding:10,paddingTop:0,paddingBottom:0,height:60,width:"100%",borderTopLeftRadius:5,borderTopRightRadius:5},headerTitle:{color:"#313131"},column:{width:"100%",backgroundColor:"#F2F3F8",height:640,overflowY:"scroll"}},no=a(810),ro=Object(d.memo)((function(e){var t=e.anchorEl,a=e.setAnchorEl,n=e.archiveFetch,r=e.archiveLoading,o=e.doneTickets,c=e.theme,l=e.classes,i=Boolean(t),s=c.mainColor;return b.a.createElement("div",null,r?b.a.createElement(ie.a,{color:s,className:l.progress,variant:"indeterminate",disableShrink:!0,thickness:5,size:25}):b.a.createElement(b.a.Fragment,null,b.a.createElement(Xe.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){a(e.currentTarget)}},b.a.createElement(no.a,null)),b.a.createElement(Ka.a,{id:"long-menu",anchorEl:t,keepMounted:!0,open:i,onClose:function(){a(null)},PaperProps:{style:{maxHeight:216,width:"23ch"}}},b.a.createElement(At.a,{onClick:function(){window.confirm("Deseja arquivar os tickets?")&&(a(!1),n(o))}},"Arquivar conclu\xeddos"))))})),oo=Xt(Tr.archiveTicket,{name:"archive",init:!1,options:function(e){var t=e.setAlert,a=e.ticketsFetch,n=e.doneTickets;return{variables:{ticketsIds:n},onRequestFinished:function(){var e=Object(N.size)(n)>1?"tickets conclu\xeddos foram arquivados":"ticket conclu\xeddo foi arquivado",r=0===Object(N.size)(n)?"Nenhum ticket foi arquivado":e;a(!0),t({alertMsg:"".concat(0===Object(N.size)(n)?"":Object(N.size)(n)," ").concat(r),alertType:"success",showAlert:!0})},onRequestError:function(){t({alertMsg:"Erro ao arquivar tickets",alertType:"warning",showAlert:!0})}}}}),co=Object(X.b)(d.memo,Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{progress:{marginRight:10,marginTop:12}})}),{withTheme:!0}),oo,Object(X.h)("anchorEl","setAnchorEl",null),Object(X.h)("isExportModalOpen","setIsExportModalOpen",!1))(ro),lo=Object(d.memo)((function(e){var t=e.tickets,a=e.categories,n=e.assignees,r=e.loading,o=e.onClickCard,c=e.onCloseCardModal,l=e.lockBoard,i=e.ticketToOpenModal,s=e.onDragCard,u=e.setAlert,m=e.doneTickets,d=e.ticketsFetch,p=e.isManager,g=e.history;return b.a.createElement(b.a.Fragment,null,b.a.createElement(ur,{actionPending:b.a.createElement(Xe.a,{"aria-label":"New Ticket",color:"primary",onClick:function(){return g.push("/tickets/novo")}},b.a.createElement(Hn.a,null)),actionDone:b.a.createElement(b.a.Fragment,null,b.a.createElement(Ca.a,{title:"Aten\xe7\xe3o: Tickets conclu\xeddos acima de 10 dias ser\xe3o automaticamente arquivados.",arrow:!0,placement:"top"},b.a.createElement(zn.a,{color:"disabled"})),p&&b.a.createElement(co,{doneTickets:m,setAlert:u,ticketsFetch:d})),data:t||[],disableDragDrop:l,loading:r,renderCard:function(e){return b.a.createElement(Er,{ticket:e,loading:r,onClickCard:o,onCloseModal:c})},onDragEnd:function(e){var t=e.draggableId,a=e.destination,n={variables:{id:t,status:v()(a,"droppableId"),position:v()(a,"index")}};s(n)},columnStyle:ao.column,columnHeaderStyle:ao.header,columnTitleStyle:ao.headerTitle,columnWrapperStyle:ao.wrapper}),b.a.createElement(to,{open:!We()(i),ticket:i,categories:a,assignees:n,onClose:c,setAlert:u}))}));lo.propTypes={setAlert:ae.a.func,tickets:ae.a.array,categories:ae.a.array,assignees:ae.a.array,lockBoard:ae.a.bool,loading:ae.a.bool,history:ae.a.object,ticketToOpenModal:ae.a.object,onCloseCardModal:ae.a.func,onDragCard:ae.a.func,onClickCard:ae.a.func,doneTickets:ae.a.array,ticketsFetch:ae.a.func,isManager:ae.a.bool};var io=Object(X.b)(Object(Z.a)(ao,{withTheme:!0}),h.g)(lo),so=a(811),uo=a(823),mo=Object(X.b)(d.memo,Object(X.h)("open","setOpen",!0),h.g)((function(e){var t,a,n,r=e.trialExpiration,o=e.willDowngradeAt,c=e.willCancelAt,l=e.open,i=e.setOpen,s=e.history,u=r&&A()(r).startOf("day"),m=o&&A()(o).startOf("day"),d=c&&A()(c).startOf("day"),p=A()().startOf("day"),g=null,f=null,h=null,E=null;if(u&&!m&&!d){var v=u.diff(p,"days");g=(t=v)>1?"O plano trial expira em ".concat(t," dias."):1===t?"O plano trial expira em 1 dia.":"O plano trial expira hoje.",f="warning",h=qe.PlanSubscription.path,E="Assinar plano"}if(m&&!d&&!g){var O=m.diff(p,"days");g=(a=O)>1?"O plano profissional ter\xe1 redu\xe7\xe3o de lugares daqui a ".concat(a," dias."):1===a?"O plano profissional ter\xe1 redu\xe7\xe3o de lugares daqui a 1 dia.":"O plano profissional ter\xe1 redu\xe7\xe3o de lugares hoje.",f="info",h=qe.MyPlan.path,E="Saiba mais"}if(d&&!g){var j=d.diff(p,"days");g=(n=j)>1?"O plano profissional ser\xe1 cancelado em ".concat(n," dias."):1===n?"O plano profissional ser\xe1 cancelado em 1 dia.":"O plano profissional ser\xe1 cancelado hoje.",f="warning",h=qe.PlanSubscription.path,E="Assinar plano"}return g&&f?b.a.createElement(so.a,{in:l},b.a.createElement(Ln.a,{my:2},b.a.createElement(uo.a,{severity:f,action:b.a.createElement(Xe.a,{color:"inherit",size:"small",onClick:function(){return i(!1)}},b.a.createElement(Ke.a,{fontSize:"inherit"}))},g,"\xa0",b.a.createElement(ue.a,{onClick:function(){return s.push(h)},color:"inherit",variant:"outlined",size:"small"},E)))):null})),bo=Object(d.memo)((function(e){var t=e.classes,a=e.history;return b.a.createElement("div",{className:t.root},b.a.createElement("p",{className:t.center},b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Assine o plano profissional para ter acesso \xe0 gest\xe3o de tickets"))),b.a.createElement("p",{className:t.center},b.a.createElement(ue.a,{variant:"contained",color:"primary",size:"large",onClick:function(){return a.push("/assinar-plano")}},"Quero assinar")))}));bo.propTypes={classes:ae.a.object,history:ae.a.object};var po=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)({},re(e))}),{withTheme:!0}),h.g)(bo),go=a(387),fo=a.n(go),ho=a(185),Eo=a.n(ho),vo=a(386),Oo=a.n(vo),jo=a(384),Co=a.n(jo),yo=a(385),ko=a.n(yo),Ao=function(e){return Object(X.b)(Object(X.f)((function(t){return{previousValues:e(t)}})),Object(X.h)("formData","setFormDataRaw",(function(e){var t=e.previousValues;return Object(m.a)({validationErrors:{},changedFields:{}},t)})),Object(X.e)({setFormData:function(e){var t=e.setFormDataRaw,a=e.formData,n=e.previousValues;return function(e){var r=Object(m.a)(Object(m.a)({},a),e),o=(r.validationErrors,r.changedFields,Object(st.a)(r,["validationErrors","changedFields"])),c=Object(N.pickBy)(o,(function(e,t){var a=n[t];return!Object(N.isEqual)(a,e)}));t(Object(m.a)(Object(m.a)({},r),{},{changedFields:c}))}},resetFormData:function(e){var t=e.setFormDataRaw,a=e.previousValues;return function(){t(Object(m.a)({validationErrors:{},changedFields:{}},a))}}}),Object(X.c)({componentDidUpdate:function(e){this.props.previousValues!==e.previousValues&&this.props.setFormData(Object(m.a)({},this.props.previousValues))}}))},wo=Object(X.b)(d.memo,Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{root:{maxWidth:"50rem"},actions:{margin:15,marginBottom:20},content:{overflowX:"hidden"}})}),{withTheme:!0}))((function(e){var t=e.classes,a=e.open,n=e.onClose,r=e.modalTitle,o=e.content,c=e.actions,l=Object(st.a)(e,["classes","open","onClose","modalTitle","content","actions"]),i=Object(Oa.a)(),s=Object(ja.a)(i.breakpoints.down("sm"));return b.a.createElement(vr.a,Object.assign({fullScreen:s,keepMounted:!0,maxWidth:"md",classes:{paper:t.root},open:a,onClose:n},l),b.a.createElement(Or.a,null,r,b.a.createElement(Xe.a,{className:t.closeButton,onClick:n},b.a.createElement(Ke.a,null))),b.a.createElement(Cr.a,{className:t.content},o),b.a.createElement(yr.a,{className:t.actions},b.a.createElement(se.a,{container:!0,justify:"flex-end",spacing:2},c)))})),To=Object(d.memo)((function(e){var t=e.setFormData,a=e.isLoading,n=e.formData,r=n.start_date,o=n.end_date,c=n.validationErrors;return a?b.a.createElement(be,null):b.a.createElement(b.a.Fragment,null,b.a.createElement(se.a,{container:!0,direction:"row",spacing:1},b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(Nt,{errors:c.start_date,label:"Data de in\xedcio",disabled:a,value:r,onChangeValue:function(e){return t({start_date:e})},disableFuture:!0})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(Nt,{errors:c.end_date,label:"Data de fim",disabled:a,value:o,onChangeValue:function(e){return t({end_date:e})},disableFuture:!0}))),b.a.createElement(Ln.a,{display:"flex",justifyContent:"end",mt:2},b.a.createElement(Ve.a,{variant:"body2",color:"textSecondary",component:"small",align:"right"},"Formato de arquivo .csv")))})),xo=Xt(Tr.exportCsv,{name:"exportCsv",init:!1,options:function(e){var t=e.formData,a=e.setFormData,n=e.setAlert,r=e.onClose;t.validationErrors;return{variables:Object(st.a)(t,["validationErrors"]),onRequestFinished:function(e){n({alertMsg:Object(N.get)(e,"flash_message.message"),alertType:"success",showAlert:!0}),r()},onRequestError:function(e){n({alertMsg:"Erro ao tentar exportar CSV",alertType:"error",showAlert:!0}),a({validationErrors:Object(N.get)(e,"errors",{})})}}}}),So=Object(X.b)(d.memo,Ao((function(){return{start_date:null,end_date:null}})),xo)((function(e){var t=e.isModalOpen,a=e.onClose,n=e.formData,r=e.setFormData,o=e.resetFormData,c=e.exportCsvFetch,l=e.exportCsvLoading,i=function(){o(),setTimeout(a,10)};return t&&b.a.createElement(wo,{open:t,onClose:i,modalTitle:"Exportar todos os tickets",content:b.a.createElement(To,{formData:n,setFormData:r,isLoading:l}),actions:b.a.createElement(b.a.Fragment,null,b.a.createElement(ue.a,{color:"default",size:"large",variant:"contained",onClick:i,disabled:l},"CANCELAR"),b.a.createElement(Ln.a,{ml:2},b.a.createElement(ue.a,{color:"primary",size:"large",variant:"contained",onClick:function(){return c(!0)},disabled:l},"EXPORTAR")))})})),No=a(383),Do=a.n(No),Mo=a(381),Io=a(382),Fo=a.n(Io),Ro=window.location,Lo=Ro.host,Bo=Ro.protocol,Po="".concat(Bo,"//").concat(Lo,"/#/public/tickets/novo"),_o=Object(X.b)(d.memo,Object(X.h)("copyURL","setCopyURL",!1))((function(e){var t=e.isModalOpen,a=e.onClose,n=e.setCopyURL,r=e.copyURL,o=e.setAlert,c=function(){n(!0),o({alertMsg:"Link copiado com sucesso",alertType:"success",showAlert:!0}),setTimeout((function(){return n(!1)}),3e3)},l=F.getUserData(),i="".concat(Po,"?c=").concat(v()(l,"company.id"));return t&&b.a.createElement(wo,{open:t,onClose:a,modalTitle:"Formul\xe1rio p\xfablico de novo ticket",content:b.a.createElement(se.a,{container:!0,direction:"row",justify:"center",align:"center",spacing:2},b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(Ve.a,{variant:"body2",color:"textSecondary"},"C\xf3digo QR do formul\xe1rio (n\xe3o requer login do usu\xe1rio)"),b.a.createElement("br",null),b.a.createElement(Fo.a,{value:i,size:256}),b.a.createElement("br",null)),b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(Mo.CopyToClipboard,{text:i,onCopy:c},b.a.createElement(ut.a,{fullWidth:!0},b.a.createElement(yt.a,{htmlFor:"url"},"Link do formul\xe1rio (n\xe3o requer login do usu\xe1rio)"),b.a.createElement(Ea.a,{id:"url",type:"text",readOnly:!0,value:i,endAdornment:b.a.createElement(jr.a,{position:"end"},b.a.createElement(Ca.a,{title:"Copiar link",arrow:!0,placement:"top"},b.a.createElement(Xe.a,{onClick:c},r?b.a.createElement(Do.a,{color:"primary"}):b.a.createElement(Eo.a,null))))})))))})})),qo=function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{closeTicket:{cursor:"pointer",fontSize:14,fontWeight:"bold",marginRight:3},filterSelect:{minWidth:115}})},Uo=Object(X.b)(d.memo,Object(Z.a)(qo,{withTheme:!0}),h.g,Object(X.h)("anchorEl","setAnchorEl",null),Object(X.h)("isExportModalOpen","setIsExportModalOpen",!1),Object(X.h)("isPublicNewTicketsOpen","setIsPublicNewTicketsOpen",!1))((function(e){var t=e.history,a=e.setAlert,n=e.anchorEl,r=e.setAnchorEl,o=e.isExportModalOpen,c=e.setIsExportModalOpen,l=e.isPublicNewTicketsOpen,i=e.setIsPublicNewTicketsOpen,s=e.isArchived,u=e.onToggleArchived,m=e.classes,d=Boolean(n),p=function(){r(null)};return b.a.createElement("div",null,b.a.createElement(Xe.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)}},b.a.createElement(no.a,null)),b.a.createElement(Ka.a,{id:"long-menu",anchorEl:n,keepMounted:!0,open:d,onClose:p,PaperProps:{style:{maxHeight:216}}},b.a.createElement(At.a,{onClick:function(){var e=!s;Y.hit("Tickets".concat(e?"Archived":""," - Viewer")),p(),u(e)}},s?b.a.createElement(Co.a,{className:m.iconMenu}):b.a.createElement(ko.a,{className:m.iconMenu}),s?"Ver n\xe3o arquivados":"Ver arquivados"),b.a.createElement(At.a,{onClick:function(){Y.hit("PublicNewTicketsModal - Opened"),p(),i(!0)}},b.a.createElement(Oo.a,{className:m.iconMenu}),"Form\xfal\xe1rio p\xfablico"),b.a.createElement(At.a,{onClick:function(){t.push("/tickets/relatorio")}},b.a.createElement(Eo.a,{className:m.iconMenu}),"Relat\xf3rios"),b.a.createElement(At.a,{onClick:function(){Y.hit("ExportTicketsCsvModal - Opened"),c(!0),p()}},b.a.createElement(fo.a,{className:m.iconMenu}),"Exportar tickets")),b.a.createElement(_o,{setAlert:a,isModalOpen:l,onClose:function(){Y.hit("PublicNewTicketsModal - Closed"),i(!1)}}),b.a.createElement(So,{setAlert:a,isModalOpen:o,onClose:function(){Y.hit("ExportTicketsCsvModal - Closed"),c(!1)}}))})),Wo=Object(X.b)(Object(X.h)("viewer","setViewer",{loading:!0}),Object(X.h)("subscriptionReference","setSubscriptionReference",null),Object(X.c)({componentDidMount:function(){var e=this,t=F.getUserData();this.props.setViewer(t);var a=F.subscribeOnViewerChange((function(t){e.props.setViewer(t)}));this.props.setSubscriptionReference(a)},componentWillUnmount:function(){F.unsubscribeOnViewerChange(this.props.subscriptionReference)}}),Object(X.a)((function(e){return Object(N.get)(e,"viewer.loading")}),Object(X.d)((function(){return null})))),zo=function(e){return Object(m.a)(Object(m.a)({},qo(e)),{},{paper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},showMore:{display:"flex",margin:"0 auto",padding:15}})},Vo=Qn.STATUSES,Ho=Object(d.memo)((function(e){var t=e.ticket,a=e.viewer,n=e.index,r=e.classes,o=e.onOpenTicket;if(!a)return null;var c=Object(N.get)(t,"created_at"),l=c?"".concat(A()(c).format("DD/MM/YYYY hh:mm")):"--",i=Object(N.get)(t,"archived_at"),s=i?"".concat(A()(i).format("DD/MM/YYYY hh:mm")):"--",u=Object(N.get)(t,"assignees",[]),m=Object(N.get)(Object(N.find)(Vo,(function(e){return e.key===Object(N.get)(t,"status")})),"label","--"),d=n%2?r.bgWhite:r.bgGray;return b.a.createElement(fa.a,{className:d,style:{cursor:"pointer"},onClick:function(){return o(t)}},b.a.createElement(ha.a,{className:r.tableTinyCell},b.a.createElement("span",{className:r.cellText},m)),b.a.createElement(ha.a,{className:r.tableSmallCell},b.a.createElement("span",{className:r.cellText},Object(N.get)(t,"title"))),b.a.createElement(ha.a,{className:r.tableTinyCell},b.a.createElement("span",{className:r.cellText},Object(N.get)(t,"category.title"))),b.a.createElement(ha.a,{className:r.tableSmallCell},b.a.createElement("span",{className:r.cellText},l)),b.a.createElement(ha.a,{className:r.tableSmallCell},b.a.createElement("div",{className:r.cardAvatarContainer},u.map((function(e){return b.a.createElement("div",{key:e.id,className:r.cardAvatarImage},b.a.createElement(Ra,{name:"".concat(Object(N.get)(e,"name")," ").concat(Object(N.get)(e,"lastname")),photoUrl:Object(N.get)(e,"photo_url")}))})))),b.a.createElement(ha.a,{className:r.tableSmallCell},b.a.createElement("span",{className:r.cellText},s)))})),Yo=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},zo(e)),{},{cardAvatarImage:{marginRight:5,marginTop:5},cardAvatarContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap"}})}),{withTheme:!0}),Wo)(Ho),Qo=Object(d.memo)((function(e){var t=e.tickets,a=e.loading,n=e.setAlert,r=e.categories,o=e.assignees,c=e.classes,l=e.ticketToOpenModal,i=e.onCloseTicketModal,s=e.onOpenTicketModal,u=e.showMore,m=e.showMoreLoading,d=e.onShowMoreArchiveds,p=ma()(t,["archived_at"]).reverse();return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:c.container},b.a.createElement(Wa.a,{className:c.paper},b.a.createElement(pa.a,null,b.a.createElement(ga.a,null,b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:c.tableTinyCell},"STATUS"),b.a.createElement(ha.a,{className:c.tableSmallCell},"TICKET"),b.a.createElement(ha.a,{className:c.tableTinyCell},"CATEGORIA"),b.a.createElement(ha.a,{className:c.tableSmallCell},"SOLICITADO EM"),b.a.createElement(ha.a,{className:c.tableSmallCell},"RESPONS\xc1VEIS"),b.a.createElement(ha.a,{className:c.tableSmallCell},"ARQUIVADO EM"))),b.a.createElement(va.a,null,a?b.a.createElement(fa.a,null,b.a.createElement(ha.a,{colSpan:6,align:"center"},b.a.createElement(be,null))):aa()(p)?p.map((function(e,t){return b.a.createElement(Yo,{index:t,key:e.id,ticket:e,onOpenTicket:s,loading:a})})):b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:c.empty,colSpan:6,align:"center"},"Nenhum ticket arquivado")))),u&&b.a.createElement(ue.a,{color:"primary",size:"large",onClick:d,disabled:m,className:c.showMore},m?"Carregando...":"Ver mais arquivados"))),b.a.createElement(to,{open:!We()(l),ticket:l,categories:r,assignees:o,onClose:i,setAlert:n}))})),Go=Object(X.b)(Object(Z.a)(zo,{withTheme:!0}))(Qo),Jo=a(27),Ko=a.n(Jo),Xo={getCategories:function(e){var t={};return e&&(t={deleted:e}),q.get("/ticket_categories",t).then((function(e){return Ko.a.toCamelCase(e)})).catch((function(e){throw e.errors&&(e.errors=Ko.a.toCamelCase(e.errors)),e}))},updateCategory:function(e){var t=e.id,a=e.title,n=e.assigneeIds,r=e.deadlineInDays,o=e.ticketFormQuestions,c=Ko.a.toSnakeCase({id:t,title:a,assigneeIds:n,deadlineInDays:r,ticketFormQuestions:Object(N.map)(o,(function(e){return{id:e.id,question:Object(N.get)(e,"question"),fieldType:Object(N.get)(e,"fieldType"),required:Object(N.get)(e,"required"),options:Object(N.compact)(Object(N.split)(Object(N.get)(e,"options",""),",").map((function(e){return Object(N.trim)(e)})))}}))});return q.put("/ticket_categories/".concat(t),c).then((function(e){return Ko.a.toCamelCase(e)})).catch((function(e){throw e.errors&&(e.errors=Ko.a.toCamelCase(e.errors)),e}))},createCategory:function(e){var t=e.title,a=e.deadlineInDays,n=e.assigneeIds,r=Ko.a.toSnakeCase({title:t,deadlineInDays:a,assigneeIds:n});return q.post("/ticket_categories",r).then((function(e){return Ko.a.toCamelCase(e)})).catch((function(e){throw e.errors&&(e.errors=Ko.a.toCamelCase(e.errors)),e}))},toggleCategory:function(e){return q.put("/ticket_categories/".concat(e,"/toggle_active"))},getCategoriesByCompany:function(e){return e?q.get("/public_ticket_categories",{company_id:e}):null}},Zo=a(388),$o=a.n(Zo),ec={get:function(){return Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q.get("/subscription").then((function(e){return Ko.a.toCamelCase(e)})));case 1:case"end":return e.stop()}}),e)})))()},create:function(e){return Object(c.a)(o.a.mark((function t(){var a,n,r,c,l,i,s,u,m,d,b,p;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.phone,n=e.cnpj,r=e.addressZipcode,c=e.addressNumber,l=e.addressComplementary,i=e.planName,s=e.planSeats,u=e.creditCardHash,m=e.creditCardId,d=(a||"").split(" "),b={phoneDdd:Aa()(d).replace(/[\D]+/g,""),phoneNumber:$o()(d).replace(/[\D]+/g,""),cnpj:(n||"").replace(/[\D]+/g,""),addressZipcode:(r||"").replace(/[\D]+/g,""),addressNumber:c,addressComplementary:l,planName:i,planSeats:s,creditCardHash:u,creditCardId:m},p=Ko.a.toSnakeCase(b),t.abrupt("return",q.post("/subscriptions",p).then((function(e){return Ko.a.toCamelCase(e)})));case 5:case"end":return t.stop()}}),t)})))()},update:function(e){return Object(c.a)(o.a.mark((function t(){var a,n,r,c,l,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.id,n=e.planName,r=e.planSeats,c=e.creditCardHash,l=e.creditCardId,i=Ko.a.toSnakeCase({planName:n,planSeats:r,creditCardHash:c,creditCardId:l}),t.abrupt("return",q.put("/subscriptions/".concat(a),i).then((function(e){return Ko.a.toCamelCase(e)})));case 3:case"end":return t.stop()}}),t)})))()},cancel:function(e){return Object(c.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",q.delete("/subscriptions/".concat(e)).then((function(e){return Ko.a.toCamelCase(e)})));case 1:case"end":return t.stop()}}),t)})))()},undoCancelation:function(){return Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q.put("/subscription/undo_cancelation/").then((function(e){return Ko.a.toCamelCase(e)})));case 1:case"end":return e.stop()}}),e)})))()}},tc=Qn.STATUSES,ac=Qn.STATUS_DONE,nc=Object(N.find)(tc,(function(e){return e.key===ac})).key,rc=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=e.assigneeId,l=e.setAssigneeId,i=e.code,s=e.setCode,u=e.deadline,m=e.setDeadline,d=e.locationId,p=e.setLocationId,g=e.archived,h=e.setArchived,E=e.tickets,v=e.ticketsFetch,O=e.ticketByCodeFetch,j=e.priority,C=e.setPriority,y=e.ticketsError,k=e.ticketsLoading,w=e.ticketCategoriesData,T=e.ticketLoading,x=e.status,S=e.setStatus,D=e.ticketCategoriesError,M=e.ticketCategoriesLoading,I=e.categoryId,R=e.setCategoryId,L=e.ticketAssigneesData,B=e.ticketAssigneesError,_=e.ticketAssigneesLoading,q=e.history,U=e.ticketToOpenModal,W=e.setTicketToOpenModal,z=e.ticketByCodeLoading,V=e.moveTicketFetch,H=e.showMoreArchiveds,Q=e.setPerPage,G=e.setPage,J=e.page,K=e.setTickets,X=e.showMoreLoading,Z=e.setShowMoreLoading,$=e.subscriptionData,te=F.getUserData(),ae=Object(N.get)(te,"company.has_ticket_support"),ne=Object(N.get)(te,"role","MEMBER"),re=Pa.includes(ne),oe=Ba.includes(ne);if(ae){var ce=Object(Oa.a)(),le=Object(ja.a)(ce.breakpoints.down("sm")),ie=Object(N.sortBy)(Object(N.get)(te,"locations",[]),["name"]),me="MEMBER"===ne,de=Object(N.filter)(E,(function(e){return e.status===nc})),be=Object(N.map)(de,(function(e){return e.id})),pe=Object(N.sortBy)(Object(N.get)(w,"ticketCategories",[]),["title"]),ge=Object(N.sortBy)(Object(N.get)(L,"members",[]),["name","lastname"]),fe=Object(N.get)($,"subscription"),he=Object(N.get)(te,"company.trial_expiration"),Ee=k||M||_||z||T,ve=Ee,Oe=Qn.PRIORITIES,je=y||D||B,Ce=function(e){Q(e?20:void 0),G(e?0:void 0),K([])},ye=function(e){W(e),window.history.pushState("","","/#/tickets/".concat(e.id))},ke=function(e,t){t&&a({alertMsg:t,alertType:e?"error":"success",showAlert:!0,actionButton:e?null:"Ver ticket",onClickAction:e?null:function(){return q.push("/tickets/".concat(U.id))}}),W(null),g||v(!1),window.history.pushState("","","/#/tickets")},Ae=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(!1,"",null,t);case 2:v(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(e){var t=e.target.value.replace(/[\D]+/g,"");i!==t&&s(t)},Te=function(){if(Object(N.size)(i)&&lt.isMobile()){var e={select_code:i};Y.hit("Tickets - FilteredByCode",e),W(null),O(!0)}},xe=function(e){if(Object(N.size)(i)&&13===e.keyCode){var t={select_code:i};Y.hit("Tickets - FilteredByCode",t),W(null),O(!0)}},Se=function(e){var t=Object(N.isEmpty)(e.target.value)?void 0:e.target.value;l(t);var a={select_assignee:t};Y.hit("Tickets - FilteredByAssignee",a),Ce(g),v(!0)},Ne=function(e){m(e),Y.hit("Tickets - FilteredByDeadline"),Ce(g),v(!0)},De=function(e){var t=Object(N.isEmpty)(e.target.value)?void 0:e.target.value;C(t);var a={priority:j};Y.hit("Tickets - FilteredByPriority",a),Ce(g),v(!0)},Me=function(e){var t=Object(N.isEmpty)(e.target.value)?void 0:e.target.value;R(t);var a={select_category:t};Y.hit("Tickets - FilteredByCategory",a),Ce(g),v(!0)},Ie=function(e){var t=Object(N.isEmpty)(e.target.value)?void 0:e.target.value;p(t);var a={select_building:t};Y.hit("Tickets - FilteredByBuilding",a),Ce(g),v(!0)},Fe=function(e){var t=Object(N.isEmpty)(e.target.value)?void 0:e.target.value;S(t);var a={select_status:t};Y.hit("Tickets - FilteredByStatus",a),Ce(g),v(!0)},Re=t.showAlert,Le=t.alertType,Be=t.alertMsg,Pe=t.actionButton,_e=t.onClickAction,qe=null;Re&&(qe=b.a.createElement(at,{message:Be,type:Le,actionButton:Pe,onClickAction:_e,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1,actionButton:null,onClickAction:null})}}));var Ue=function(){return b.a.createElement(se.a,{container:!0,spacing:2},b.a.createElement(se.a,{item:!0,xs:6,sm:6,md:1},b.a.createElement(ut.a,{fullWidth:!0},b.a.createElement(ze.a,{label:"Busca",placeholder:"N\u02da",disabled:ve,value:i,type:"tel",InputLabelProps:{shrink:!0},onKeyDown:xe,onBlur:Te,onChange:we}))),Object(N.size)(ie)>1?b.a.createElement(se.a,{item:!0,xs:6,sm:6,md:2},b.a.createElement(ut.a,{fullWidth:!0},b.a.createElement(ze.a,{select:!0,label:"Local",className:n.filterSelect,disabled:ve,value:d,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:Ie},b.a.createElement("option",{value:""},"Todos"),ie.map((function(e){return b.a.createElement("option",{key:e.id,value:e.id},e.name)}))))):b.a.createElement(b.a.Fragment,null),me?b.a.createElement(b.a.Fragment,null):b.a.createElement(se.a,{item:!0,xs:6,sm:6,md:2},b.a.createElement(ut.a,{fullWidth:!0},b.a.createElement(ze.a,{select:!0,label:"Respons\xe1vel",className:n.filterSelect,disabled:ve,value:r,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:Se},b.a.createElement("option",{value:"all"},"Todos"),b.a.createElement("option",{value:""},"Nenhum"),ge.map((function(e){return b.a.createElement("option",{key:e.id,value:e.id},"".concat(e.name," ").concat(e.lastname))}))))),b.a.createElement(se.a,{item:!0,xs:6,sm:6,md:2},b.a.createElement(ut.a,{fullWidth:!0},b.a.createElement(ze.a,{select:!0,label:"Categoria",className:n.filterSelect,disabled:ve,value:I,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:Me},b.a.createElement("option",{value:""},"Todos"),pe.map((function(e){return b.a.createElement("option",{key:e.id,value:e.id},e.title)}))))),g?b.a.createElement(se.a,{item:!0,xs:6,sm:6,md:2},b.a.createElement(ut.a,{fullWidth:!0},b.a.createElement(ze.a,{select:!0,label:"Status",className:n.filterSelect,disabled:ve,value:x,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:Fe},b.a.createElement("option",{value:""},"Todos"),tc.map((function(e){return b.a.createElement("option",{key:e.key,value:e.key},e.label)}))))):b.a.createElement(b.a.Fragment,null),b.a.createElement(se.a,{item:!0,xs:6,sm:6,md:2},b.a.createElement(ut.a,{fullWidth:!0},b.a.createElement(ze.a,{select:!0,label:"Prioridade",className:n.filterSelect,disabled:ve,value:j,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:De},b.a.createElement("option",{value:"all"},"Todos"),Oe.map((function(e){return b.a.createElement("option",{key:e.key,value:e.key},e.label)}))))),b.a.createElement(se.a,{item:!0,xs:6,sm:6,md:2},b.a.createElement(ut.a,{fullWidth:!0},b.a.createElement(xt.a,{libInstance:A.a,utils:Tt.a,locale:P.locale},b.a.createElement(St.a,{autoOk:!0,label:"Prazo",clearable:!0,animateYearScrolling:!0,className:n.filterSelect,disabled:ve,invalidDateMessage:"Formato inv\xe1lido",InputLabelProps:{shrink:!0},value:u,onChange:Ne,format:"DD/MM/YYYY",cancelLabel:"Cancelar",clearLabel:"Limpar"})))))},We="Tickets".concat(g?" arquivados":"");return b.a.createElement("div",{className:n.root},b.a.createElement(hn,{alertBox:qe,error:je}),b.a.createElement("section",null,b.a.createElement("div",{className:n.container},b.a.createElement(mo,{trialExpiration:he,willDowngradeAt:Object(N.get)(fe,"willDowngradeAt"),willCancelAt:Object(N.get)(fe,"willCancelAt")}),b.a.createElement(Ln.a,{display:"flex",justifyContent:"space-between",mb:2},b.a.createElement(Ve.a,{variant:"h5"},b.a.createElement("b",null,Object(N.size)(E)?"".concat(We," (").concat(Object(N.size)(E),")"):We)),b.a.createElement(Ln.a,{display:"flex"},b.a.createElement(ue.a,{variant:"contained",component:f.b,to:"/tickets/novo",color:"primary",size:"large",disabled:ve,className:le?n.fab:null},"Novo ticket"),re&&b.a.createElement(Ln.a,{ml:1},b.a.createElement(Uo,{setAlert:a,isArchived:g,onToggleArchived:function(e){h(e),Ce(e),v(!0)}})))),le?re&&b.a.createElement(Bn.a,null,b.a.createElement(Pn.a,{expandIcon:b.a.createElement(Un.a,null)},b.a.createElement(Ve.a,{variant:"subtitle1"},"Filtros")),b.a.createElement(_n.a,null,Ue())):re&&Ue()),g?b.a.createElement(Go,{tickets:E,ticketToOpenModal:U,categories:pe,assignees:ge,loading:Ee,onOpenTicketModal:ye,onCloseTicketModal:ke,onShowMoreArchiveds:function(){Z(!0),Q(20),G(J+1),v(!1)},showMore:H,showMoreLoading:X,setAlert:a}):b.a.createElement("div",{className:n.container},b.a.createElement(se.a,{container:!0},b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(io,{isManager:re,ticketsFetch:v,doneTickets:be,lockBoard:me,tickets:E,ticketToOpenModal:U,categories:pe,assignees:ge,loading:Ee,onClickCard:ye,onDragCard:Ae,onCloseCardModal:ke,setAlert:a}))))))}return b.a.createElement("div",{className:n.root},b.a.createElement(hn,null),b.a.createElement("section",null,b.a.createElement("div",{className:n.container},b.a.createElement(se.a,{container:!0,spacing:1},b.a.createElement("div",{className:n.centerHeaderView},oe?b.a.createElement(po,null):b.a.createElement(b.a.Fragment,null,b.a.createElement(ee.a,{className:n.emptyHeaderIcon}),b.a.createElement("b",{className:n.emptyHeaderTitle},"Essa conta n\xe3o possui o servi\xe7o de tickets")))))))})),oc=Xt(ec.get,{name:"subscription"}),cc=Xt(Xo.getCategories,{name:"ticketCategories"}),lc=Xt(Tr.getAssignables,{name:"ticketAssignees"}),ic=Xt(Tr.moveTicket,{name:"moveTicket",init:!1,options:function(e){var t=e.setAlert;return{onRequestError:function(){t({alertMsg:"Erro ao mover esse ticket",alertType:"warning",showAlert:!0})}}}}),sc=Xt(Tr.getTicketByCode,{name:"ticketByCode",init:!1,options:function(e){var t=e.setAlert,a=e.setCode,n=e.setTicketToOpenModal,r=e.code;return{variables:r,onRequestFinished:function(e){var t=Object(N.get)(e,"ticket");n(t),a(""),window.history.pushState("","","/#/tickets/".concat(t.id))},onRequestError:function(){n(null),t({alertMsg:"Ticket ".concat(r," n\xe3o foi identificado"),alertType:"warning",showAlert:!0}),window.history.pushState("","","/#/tickets")}}}}),uc=Xt(Tr.getTicket,{name:"ticket",init:!1,options:function(e){var t=e.match,a=e.setAlert,n=e.setTicketToOpenModal;return{variables:Object(N.get)(t,"params.id"),onRequestFinished:function(e){var t=Object(N.get)(e,"ticket");n(t),window.history.pushState("","","/#/tickets/".concat(t.id))},onRequestError:function(){n(null),a({alertMsg:"Este ticket n\xe3o foi identificado",alertType:"warning",showAlert:!0}),window.history.pushState("","","/#/tickets")}}}}),mc=Xt(Tr.getTickets,{name:"tickets",init:!1,options:function(e){var t=e.locationId,a=e.assigneeId,n=e.categoryId,r=e.deadline,o=e.priority,c=e.archived,l=e.status,i=e.perPage,s=e.page,u=e.setShowMoreArchiveds,m=e.setTickets,d=e.tickets,b=e.setShowMoreLoading;return{variables:{locationId:t,assigneeId:a,categoryId:n,deadline:r,priority:o,archived:c,status:l,perPage:i,page:s},onRequestFinished:function(e){var t=Object(N.get)(e,"tickets",[]);c?(u(Object(N.size)(t)>=i),m(d.concat(t))):m(t),b(!1)},onRequestError:function(){b(!1)}}}}),dc=Object(X.b)(Object(Z.a)(qo,{withTheme:!0}),h.g,Object(X.h)("assigneeId","setAssigneeId","all"),Object(X.h)("code","setCode",""),Object(X.h)("tickets","setTickets",[]),Object(X.h)("ticketToOpenModal","setTicketToOpenModal"),Object(X.h)("categoryId","setCategoryId"),Object(X.h)("locationId","setLocationId"),Object(X.h)("priority","setPriority"),Object(X.h)("status","setStatus"),Object(X.h)("deadline","setDeadline",null),Object(X.h)("archived","setArchived",!1),Object(X.h)("perPage","setPerPage"),Object(X.h)("page","setPage"),Object(X.h)("showMoreArchiveds","setShowMoreArchiveds",!1),Object(X.h)("showMoreLoading","setShowMoreLoading",!1),Object(X.h)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1,actionButton:null,onClickAction:null}),oc,mc,uc,sc,cc,lc,ic,Object(X.c)({componentDidMount:function(){var e=this.props,t=e.ticketsFetch,a=e.ticketFetch,n=e.ticketToOpenModal,r=e.match,o=Object(N.get)(r,"params.id");Object(N.isEmpty)(n)&&t(!0),Object(N.size)(o)&&a(!1)}}))(rc),bc=Object(d.memo)((function(e){var t=e.id,a=e.classes,n=e.required,r=e.disabled,o=e.question,c=e.options,l=e.fieldType,i=e.showBlankError,s=e.onChangeQuestion,u=e.onCheckOption,m=i&&n;return"CHECKBOX"===l?b.a.createElement(ut.a,{component:"fieldset",className:a.checkboxControl,fullWidth:!0,error:m},b.a.createElement(mt.a,{component:"legend"},o),b.a.createElement(Dt.a,null,c.map((function(e){return b.a.createElement(Mt.a,{key:e,label:e,control:b.a.createElement(It.a,{color:"primary",disabled:r,onChange:function(a){return u(e,a.target.checked,t)}})})}))),m&&b.a.createElement(mt.a,null,"selecione uma op\xe7\xe3o")):"SELECT"===l?b.a.createElement(ut.a,{fullWidth:!0,error:m},b.a.createElement(ze.a,{select:!0,label:o,className:a.questionInput,disabled:r,InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return s(e.target.value,t)},variant:"outlined",error:m},c.map((function(e){return b.a.createElement("option",{key:e,value:e},e)}))),m&&b.a.createElement(mt.a,null,"selecione uma op\xe7\xe3o")):b.a.createElement(ut.a,{fullWidth:!0,error:m},b.a.createElement(ze.a,{label:o,className:a.questionInput,multiline:"TEXT_AREA"===l,rows:"TEXT_AREA"===l?4:1,rowsMax:"TEXT_AREA"===l?4:1,disabled:r,InputLabelProps:{shrink:!0},onChange:function(e){return s(e.target.value,t)},variant:"outlined",error:m}),m&&b.a.createElement(mt.a,null,"este campo est\xe1 em branco"))})),pc=Object(X.b)(Object(Z.a)((function(e){return{checkboxControl:{margin:e.spacing(2)},questionInput:{marginTop:14}}}),{withTheme:!0}))(bc),gc=Qn.PRIORITIES,fc=Qn.PRIORITY_NORMAL,hc=function(){var e=F.getUserData(),t=Pa.includes(Object(N.get)(e,"role")),a=Object(N.sortBy)(Object(N.get)(e,"locations",[]),["name"]);return{title:"",description:"",category_id:"",deadline:null,priority:t?fc:null,source:"PORTAL",location_id:Object(N.get)(Object(N.first)(a),"id"),attachment_data:null,ticket_form_questions:Object(N.clone)([])}},Ec=function(e,t){var a=Object(N.find)(e,(function(e){return e.id===t})),n=Object(N.get)(a,"ticketFormQuestions",[]);return Object(N.map)(n,(function(e){var t="SELECT"===e.fieldType?Object(N.compact)([Object(N.first)(Object(N.get)(e,"options"))]):[];return Object(m.a)(Object(m.a)({},e),{},{value:t})}))},vc=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.ticket,o=e.setTicketState,c=e.ticketLoading,l=e.ticketFetch,i=e.errors,s=e.ticketCategoriesLoading,u=e.categories,m=e.setShowQuestionError,d=e.isUploading,p=e.setIsUploading,g=e.showQuestionError,h=Object(Oa.a)(),E=Object(ja.a)(h.breakpoints.down("sm")),v=F.getUserData(),O=Object(N.get)(v,"company.has_ticket_support"),j=Ba.includes(Object(N.get)(v,"role"));if(O){var C=a.showAlert,y=a.alertMsg,k=a.alertType,w=a.actionButton,T=a.onClickAction,x=null;C&&(x=b.a.createElement(at,{message:y,type:k,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1,actionButton:""})},actionButton:w,onClickAction:T}));var S=Object(N.sortBy)(Object(N.get)(v,"locations",[]),["name"]),D=Pa.includes(Object(N.get)(v,"role")),M=s||c,I=M||d,R=function(){var e=Object(N.get)(r,"ticket_form_questions",[]),t=Object(N.reject)(e,(function(e){return!e.required}));return Boolean(Object(N.size)(Object(N.reject)(t,(function(e){return Object(N.size)(e.value)}))))},L=function(e,t){var a=Object(N.get)(r,"ticket_form_questions",[]),n=Object(N.findIndex)(a,(function(e){return e.id===t}));Object(N.set)(r,"ticket_form_questions[".concat(n,"].value"),[e]),m(R())},B=function(e,t,a){var n=Object(N.get)(r,"ticket_form_questions",[]),o=Object(N.findIndex)(n,(function(e){return e.id===a})),c=n[o].value;c=t?c.concat(e):c.filter((function(t){return t!==e})),Object(N.set)(r,"ticket_form_questions[".concat(o,"].value"),c),m(R())},_=Object(N.get)(r,"ticket_form_questions",[]);return b.a.createElement("div",{className:t.root},b.a.createElement(hn,{alertBox:x}),b.a.createElement("section",null,b.a.createElement("div",{className:t.container},b.a.createElement("div",{className:t.headerView},b.a.createElement("aside",null,b.a.createElement(Ve.a,{variant:"h5"},b.a.createElement("b",null,"Novo ticket"))))),b.a.createElement("br",null),b.a.createElement("form",{className:t.container},b.a.createElement(Wa.a,{className:t.paper},b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Solicita\xe7\xe3o")),b.a.createElement(se.a,{container:!0,item:!0,xs:12,sm:8,md:6,spacing:2},b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(bt,{label:"No que podemos te ajudar?",errors:Object(N.get)(i,"title",[]),className:t.input,disabled:M,placeholder:"Ex.: Banheiro entupido, m\xe1quina de caf\xe9 com defeito, etc",value:Object(N.get)(r,"title",""),onChange:function(e){return o({title:e.target.value})}}),Object(N.size)(S)>1&&b.a.createElement(wt,{label:"Local",errors:Object(N.get)(i,"location_id",[]),className:t.input,disabled:M,value:Object(N.get)(r,"location_id"),onChange:function(e){return o({location_id:e.target.value})},options:S,optionValueField:"id",optionLabelField:"name"}),b.a.createElement(wt,{label:"Categoria",errors:Object(N.get)(i,"category_id",[]),className:t.input,disabled:M,value:Object(N.get)(r,"category_id"),onChange:function(e){var t=e.target.value;o({category_id:t,ticket_form_questions:Ec(u,t)}),m(!1)},options:u,optionValueField:"id",optionLabelField:"title"}),Object(N.map)(_,(function(e){return b.a.createElement(pc,{key:Object(N.get)(e,"id"),id:Object(N.get)(e,"id"),question:e.question,options:Object(N.get)(e,"options"),fieldType:e.fieldType,required:e.required,disabled:I,showBlankError:g,onChangeQuestion:L,onCheckOption:B})})),b.a.createElement(bt,{label:"Descri\xe7\xe3o",multiline:!0,rows:4,rowsMax:4,errors:Object(N.get)(i,"comments")||Object(N.get)(i,"description")||[],className:t.input,disabled:M,placeholder:"Descreva mais detalhes sobre esta ocorr\xeancia...",value:Object(N.get)(r,"description",""),onChange:function(e){return o({description:e.target.value})}}))),D&&b.a.createElement(b.a.Fragment,null,b.a.createElement("br",null),b.a.createElement(Ve.a,{variant:"h6",className:t.deadline},b.a.createElement("b",null,"Deadline")),b.a.createElement(se.a,{container:!0,item:!0,xs:12,sm:8,md:6,spacing:2},b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(ut.a,{fullWidth:!0},b.a.createElement(xt.a,{libInstance:A.a,utils:Tt.a,locale:P.locale},b.a.createElement(St.a,{autoOk:!0,label:"Prazo",clearable:!0,animateYearScrolling:!0,className:t.input,disabled:M,invalidDateMessage:"Formato inv\xe1lido",variant:"outlined",inputVariant:"outlined",InputLabelProps:{shrink:!0},value:Object(N.get)(r,"deadline"),onChange:function(e){return o({deadline:e})},format:"DD/MM/YYYY",cancelLabel:"Cancelar",clearLabel:"Limpar"})))),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(ut.a,{fullWidth:!0,error:!!i.priority},b.a.createElement(ze.a,{select:!0,label:"Prioridade",error:!!i.priority,className:E?t.priorityIput:"",disabled:M,value:Object(N.get)(r,"priority"),InputLabelProps:{shrink:!0},SelectProps:{native:!0},onChange:function(e){return o({priority:e.target.value})},variant:"outlined"},Object(N.map)(gc,(function(e){return b.a.createElement("option",{value:e.key,key:e.key},e.label)}))),i.priority&&b.a.createElement(mt.a,null,i.priority))))),b.a.createElement("br",null),b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Mais detalhes")),b.a.createElement("br",null),b.a.createElement(se.a,{container:!0,item:!0,xs:12,sm:8,md:6,spacing:2},b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement("div",null,b.a.createElement(Ht,{value:Object(N.get)(r,"attachment_data",null),onChange:function(e){o({attachment_data:e}),p(Object(N.get)(e,"progressPercent",100)<100)},disabled:M,accept:"image/*,.doc,.docx,.xls,.xlsx,.pdf,.xml"})),b.a.createElement("div",{className:t.actions},b.a.createElement(ue.a,{component:f.b,to:"/tickets",color:"default",size:"large",disabled:M,className:t.cancel},"Voltar"),b.a.createElement(ue.a,{variant:"contained",color:"primary",size:"large",disabled:I,onClick:function(){if(Object(N.isEmpty)(S))n({alertMsg:"N\xe3o foi informado o local da ocorr\xeancia",alertType:"error",showAlert:!0});else{var e=R();m(e),e||l(!0)}}},I?"Aguarde...":"Enviar"))))))))}return b.a.createElement("div",{className:t.root},b.a.createElement(hn,null),b.a.createElement("section",null,b.a.createElement("div",{className:t.container},b.a.createElement(se.a,{container:!0,spacing:1},b.a.createElement("div",{className:t.centerHeaderView},j?b.a.createElement(po,null):b.a.createElement(b.a.Fragment,null,b.a.createElement(ee.a,{className:t.emptyHeaderIcon}),b.a.createElement("b",{className:t.emptyHeaderTitle},"Essa conta n\xe3o possui o servi\xe7o de tickets")))))))})),Oc=Xt(Xo.getCategories,{name:"ticketCategories",options:function(e){var t=e.setTicketState,a=e.setCategories,n=e.selectedCategory,r=e.selectedLocation;return{onRequestFinished:function(e){var o=F.getUserData(),c=Object(N.sortBy)(Object(N.get)(e,"ticketCategories",[]),["title"]),l=Object(N.sortBy)(Object(N.get)(o,"locations",[]),["name"]),i=function(e,t){var a=Object(N.find)(e,(function(e){return Object(N.toLower)(e.title)===Object(N.toLower)(t)||e.id===t}));return Object(N.get)(a,"id")||Object(N.get)(Object(N.first)(e),"id")}(c,n),s=function(e,t){var a=Object(N.find)(e,(function(e){return Object(N.toLower)(e.name)===Object(N.toLower)(t)||e.id===t}));return Object(N.get)(a,"id")||Object(N.get)(Object(N.first)(e),"id")}(l,r);a(c),t({category_id:i,location_id:s,ticket_form_questions:Ec(c,i)})}}}}),jc=Xt(Tr.postTicket,{name:"ticket",init:!1,options:function(e){var t=e.ticket,a=e.setTicketState,n=e.setAlert,r=e.categories,o=e.history,c=e.setErrors;return{variables:t,onRequestFinished:function(e){document.querySelector("form").reset();var t=Object(N.get)(Object(N.first)(r),"id");a(Object(m.a)(Object(m.a)({},hc()),{},{category_id:t,ticket_form_questions:Ec(r,t)}));var l=Object(N.get)(e,"ticket.id");n({alertMsg:"Ticket registrado com sucesso",alertType:"success",showAlert:!0,actionButton:"Ver ticket",onClickAction:function(){return o.push("/tickets/".concat(l))}}),c({})},onRequestError:function(e){c(Object(N.get)(e,"errors",{})),n({alertMsg:Object(N.get)(e,"error")||"Erro ao registrar esse ticket",alertType:"error",showAlert:!0})}}}}),Cc=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{cancel:{marginRight:20},input:{marginTop:0,marginBottom:-8},priorityIput:{marginTop:8},deadline:{marginBottom:20}})}),{withTheme:!0}),h.g,Object(X.h)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(X.h)("ticket","setTicket",hc),Object(X.h)("categories","setCategories",[]),Object(X.h)("showQuestionError","setShowQuestionError",!1),Object(X.h)("isUploading","setIsUploading",!1),Object(X.h)("selectedCategory","setSelectedCategory"),Object(X.h)("selectedLocation","setSelectedLocation"),Object(X.h)("errors","setErrors",{}),Object(X.e)({setTicketState:function(e){var t=e.setTicket,a=e.ticket;return function(e){t(Object(m.a)(Object(m.a)({},a),e))}}}),Oc,jc,Object(X.c)({componentDidMount:function(){var e=this.props,t=e.location,a=e.setTicketState,n=e.setSelectedCategory,r=e.setSelectedLocation,o=new URLSearchParams(t.search),c=(o.get("utm_source")||"").toUpperCase();n(o.get("category")||o.get("category_id")||o.get("categoria")),r(o.get("location")||o.get("location_id")||o.get("local")),"QRCODE"===c&&a({source:"QRCODE"})}}))(vc),yc=Object(d.memo)((function(e){var t=e.messageText,a=e.classes;return b.a.createElement("div",{className:a.root},b.a.createElement("section",null,b.a.createElement(se.a,{container:!0,spacing:1},b.a.createElement("div",{className:a.centerHeaderView},b.a.createElement(ee.a,{className:a.emptyHeaderIcon}),b.a.createElement("b",{className:a.emptyHeaderTitle},t)))))}));yc.propTypes={classes:ae.a.object,messageText:ae.a.string};var kc=Object(Z.a)((function(e){return Object(m.a)({},re(e))}),{withTheme:!0})(yc),Ac=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.condition,a=e.messageText,n=void 0===a?"Voc\xea n\xe3o possui permiss\xe3o de acesso a esta \xe1rea.":a;return function(e){return Wo((function(a){return a.viewer?t(a.viewer)?b.a.createElement(kc,{messageText:n}):b.a.createElement(e,a):null}))}},wc=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.children,o=a.showAlert,c=a.alertMsg,l=a.alertType,i=null;return o&&(i=b.a.createElement(at,{message:c,type:l,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1})}})),b.a.createElement("div",{className:t.root},b.a.createElement(hn,{alertBox:i}),b.a.createElement("section",{className:t.container},b.a.cloneElement(r,{setAlert:n})))})),Tc=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)({},re(e))}),{withTheme:!0}),Object(X.h)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}))(wc),xc=function(e){return function(t){var a=le(e);return b.a.createElement(Tc,t,b.a.createElement(a,t))}},Sc={id:"ALL",name:"Todos"},Nc=Object(d.memo)((function(e){var t=e.viewer,a=e.setFormData,n=e.isLoading,r=e.onSubmit,o=e.formData,c=o.location_id,l=o.start_date,i=o.end_date,s=o.validationErrors,u=Object(N.concat)(Sc,Object(N.sortBy)(Object(N.get)(t,"locations",[]),["name"]));return b.a.createElement(b.a.Fragment,null,b.a.createElement(se.a,{container:!0,spacing:3,alignItems:"center"},b.a.createElement(se.a,{item:!0,xs:12,sm:2},b.a.createElement(wt,{variant:"standard",label:"Local",errors:s.location_id,disabled:n,value:c,onChangeText:function(e){return a({location_id:e})},options:u,optionValueField:"id",optionLabelField:"name"})),b.a.createElement(se.a,{item:!0,xs:12,sm:2},b.a.createElement(Nt,{variant:"standard",errors:s.start_date,label:"Data de in\xedcio",disabled:n,value:l,onChangeValue:function(e){return a({start_date:e})},disableFuture:!0})),b.a.createElement(se.a,{item:!0,xs:12,sm:2},b.a.createElement(Nt,{variant:"standard",errors:s.end_date,label:"Data de fim",disabled:n,value:i,onChangeValue:function(e){return a({end_date:e})},disableFuture:!0})),b.a.createElement(se.a,{item:!0,xs:12,sm:3},b.a.createElement(ue.a,{color:"primary",size:"large",variant:"contained",onClick:r,disabled:n},"Gerar Relat\xf3rio"))))})),Dc=function(e){return e?A.a.duration(e).humanize():" - "},Mc=function(e){var t=e.data,a=t.created,n=t.done,r=t.in_progress,o=t.time_to_reply,c=t.time_to_finish;return b.a.createElement(pa.a,null,b.a.createElement(ga.a,null,b.a.createElement(fa.a,null,b.a.createElement(ha.a,null,"Criados"),b.a.createElement(ha.a,null,"Conclu\xeddos"),b.a.createElement(ha.a,null,"Em Andamento"),b.a.createElement(ha.a,null,"Tempo de Resposta"),b.a.createElement(ha.a,null,"Tempo de Resolu\xe7\xe3o"))),b.a.createElement(va.a,null,b.a.createElement(fa.a,null,b.a.createElement(ha.a,null,a),b.a.createElement(ha.a,null,n),b.a.createElement(ha.a,null,r),b.a.createElement(ha.a,null,Dc(o)),b.a.createElement(ha.a,null,Dc(c)))))},Ic=function(e){var t=e.data,a=e.classes;return b.a.createElement(pa.a,null,b.a.createElement(ga.a,null,b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:a.tableSmallCell},"Categoria"),b.a.createElement(ha.a,null,"Criados"),b.a.createElement(ha.a,null,"Conclu\xeddos"),b.a.createElement(ha.a,null,"Em Andamento"),b.a.createElement(ha.a,null,"Tempo de Resposta"),b.a.createElement(ha.a,null,"Tempo de Resolu\xe7\xe3o"))),b.a.createElement(va.a,null,Object(N.map)(t,(function(e){return b.a.createElement(fa.a,{key:e.category_title},b.a.createElement(ha.a,{className:a.tableSmallCell},e.category_title),b.a.createElement(ha.a,null,e.created),b.a.createElement(ha.a,null,e.done),b.a.createElement(ha.a,null,e.in_progress),b.a.createElement(ha.a,null,Dc(e.time_to_reply)),b.a.createElement(ha.a,null,Dc(e.time_to_finish)))}))))},Fc=function(e){var t=e.data,a=e.classes;return b.a.createElement(pa.a,null,b.a.createElement(ga.a,null,b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:a.tableSmallCell},"Respons\xe1vel"),b.a.createElement(ha.a,null,"Criados"),b.a.createElement(ha.a,null,"Conclu\xeddos"),b.a.createElement(ha.a,null,"Em Andamento"),b.a.createElement(ha.a,null,"Tempo de Resposta"),b.a.createElement(ha.a,null,"Tempo de Resolu\xe7\xe3o"))),b.a.createElement(va.a,null,Object(N.map)(t,(function(e){return b.a.createElement(fa.a,{key:e.assignee_full_name},b.a.createElement(ha.a,{className:a.tableSmallCell},e.assignee_full_name),b.a.createElement(ha.a,null,e.created),b.a.createElement(ha.a,null,e.done),b.a.createElement(ha.a,null,e.in_progress),b.a.createElement(ha.a,null,Dc(e.time_to_reply)),b.a.createElement(ha.a,null,Dc(e.time_to_finish)))}))))},Rc=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)({},re(e))}),{withTheme:!0}),d.memo)((function(e){var t=e.classes,a=e.reportData;return e.isLoading?b.a.createElement(be,null):a&&a.totals?b.a.createElement(b.a.Fragment,null,b.a.createElement(Ln.a,{mt:2},b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Total")),b.a.createElement(Mc,{data:a.totals})),b.a.createElement(Ln.a,{mt:2},b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Por Categoria")),b.a.createElement(Ic,{data:a.by_category,classes:t})),b.a.createElement(Ln.a,{mt:2},b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Por Respons\xe1vel")),b.a.createElement(Fc,{data:a.by_assignee,classes:t}))):null})),Lc=Xt(Tr.report,{name:"report",init:!1,options:function(e){var t=e.formData,a=e.setFormData,n=e.setAlert;t.validationErrors;return{variables:Object(st.a)(t,["validationErrors"]),onRequestError:function(e){n({alertMsg:"Erro ao tentar gerar relat\xf3rio",alertType:"error",showAlert:!0}),a({validationErrors:Object(N.get)(e,"errors",{})})}}}}),Bc=Object(X.b)(d.memo,Ac({condition:function(e){return!Pa.includes(e.role)}}),xc,Ao((function(){var e=A()().date()>1?0:1;return{location_id:"ALL",start_date:A()().subtract(e,"month").startOf("month"),end_date:A()()}})),Lc)((function(e){var t=e.viewer,a=e.formData,n=e.setFormData,r=e.reportFetch,o=e.reportLoading,c=e.reportData;return b.a.createElement(b.a.Fragment,null,b.a.createElement(Ve.a,{variant:"h5"},b.a.createElement("b",null,"Relat\xf3rio de Tickets")),b.a.createElement(Nc,{viewer:t,formData:a,setFormData:n,isLoading:o,onSubmit:function(){return r(!0)}}),b.a.createElement(Rc,{reportData:c,isLoading:o}))})),Pc={getLocations:function(e){var t=e.listInactive,a=e.listAll,n=Ko.a.toSnakeCase({listInactive:t,listAll:a});return q.get("/locations",n)},createLocation:function(e){return q.post("/locations",e)},updateLocation:function(e){var t=e.id,a=e.changes;return q.put("/locations/".concat(t),a)},toggleActive:function(e){return q.delete("/locations/".concat(e,"/toggle_active"))},getLocationsByCompany:function(e){if(e){var t=Ko.a.toSnakeCase({companyId:e});return q.get("/public_locations",t)}return null}},_c={getCompany:function(e){return q.get("/public_companies/".concat(e))}},qc=function(){return{title:"",description:"",category_id:"",deadline:null,priority:null,source:"PORTAL",location_id:"",attachment_data:null,ticket_form_questions:Object(N.clone)([]),email:"",name:"",lastname:""}},Uc=function(e,t){var a=Object(N.find)(e,(function(e){return e.id===t})),n=Object(N.get)(a,"ticket_form_questions",[]);return Object(N.map)(n,(function(e){var t="SELECT"===Object(N.get)(e,"field_type")?Object(N.compact)([Object(N.first)(Object(N.get)(e,"options"))]):[];return Object(m.a)(Object(m.a)({},e),{},{value:t})}))},Wc=Object(d.memo)((function(e){var t=e.classes,a=e.alert,n=e.setAlert,r=e.ticket,o=e.setTicketState,c=e.ticketLoading,l=e.errors,i=e.ticketFetch,s=e.companyId,u=e.locationsData,m=e.locationsLoading,d=e.showQuestionError,p=e.ticketCategoriesLoading,g=e.categories,f=e.setShowQuestionError,h=e.isUploading,E=e.setIsUploading,v=e.companyData,O=e.companyLoading;if(s){var j=a.showAlert,C=a.alertMsg,y=a.alertType,k=a.actionButton,A=a.onClickAction,w=function(){var e=Object(N.get)(r,"ticket_form_questions",[]),t=Object(N.reject)(e,(function(e){return!e.required}));return Boolean(Object(N.size)(Object(N.reject)(t,(function(e){return Object(N.size)(e.value)}))))},T=function(e,t){var a=Object(N.get)(r,"ticket_form_questions",[]),n=Object(N.findIndex)(a,(function(e){return e.id===t}));Object(N.set)(r,"ticket_form_questions[".concat(n,"].value"),[e]),f(w())},x=function(e,t,a){var n=Object(N.get)(r,"ticket_form_questions",[]),o=Object(N.findIndex)(n,(function(e){return e.id===a})),c=n[o].value;c=t?c.concat(e):c.filter((function(t){return t!==e})),Object(N.set)(r,"ticket_form_questions[".concat(o,"].value"),c),f(w())},S=Object(N.get)(v,"company.name",""),D=Object(N.get)(r,"ticket_form_questions",[]),M=Object(N.sortBy)(Object(N.get)(u,"locations",[]),["name"]),I=Object(N.isEmpty)(M)||Object(N.isEmpty)(g)||p||c||m||O,F=I||h;return b.a.createElement("div",{className:t.root},j&&b.a.createElement(at,{message:C,type:y,onClose:function(){return n({alertMsg:"",alertType:"",showAlert:!1,actionButton:""})},actionButton:k,onClickAction:A}),b.a.createElement("section",null,b.a.createElement(se.a,{container:!0,justify:"center",alignContent:"center"},b.a.createElement(se.a,{item:!0,xs:12,sm:8,md:6,lg:4},b.a.createElement("form",{className:t.containerNoSidebar},b.a.createElement(Wa.a,{className:t.paper},b.a.createElement(se.a,{container:!0,spacing:2,justify:"center",alignContent:"center"},b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Nova solicita\xe7\xe3o".concat(S&&" - ".concat(S))))),b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(bt,{errors:Object(N.get)(l,"title",[]),label:"No que podemos te ajudar?",placeholder:"Ex.: Banheiro entupido, m\xe1quina de caf\xe9 com defeito, etc",disabled:I,value:Object(N.get)(r,"title",""),onChange:function(e){return o({title:e.target.value})}}),Object(N.size)(M)>1&&b.a.createElement(wt,{label:"Local",errors:Object(N.get)(l,"location_id",[]),value:Object(N.get)(r,"location_id"),disabled:I,onChange:function(e){return o({location_id:e.target.value})},options:M,optionLabelField:"name",optionValueField:"id"}),Object(N.size)(g)>1&&b.a.createElement(wt,{label:"Categoria",errors:Object(N.get)(l,"category_id",[]),value:Object(N.get)(r,"category_id"),disabled:I,onChange:function(e){var t=e.target.value;o({category_id:t,ticket_form_questions:Uc(g,t)}),f(!1)},options:g,optionLabelField:"title",optionValueField:"id"}),Object(N.map)(D,(function(e){return b.a.createElement(pc,{key:Object(N.get)(e,"id"),id:Object(N.get)(e,"id"),question:Object(N.get)(e,"question"),options:Object(N.get)(e,"options"),fieldType:Object(N.get)(e,"field_type"),required:Object(N.get)(e,"required"),disabled:F,showBlankError:d,onChangeQuestion:T,onCheckOption:x})})),b.a.createElement(bt,{errors:Object(N.get)(l,"comments")||Object(N.get)(l,"description")||[],label:"Descri\xe7\xe3o",multiline:!0,rows:4,rowsMax:4,placeholder:"Descreva mais detalhes sobre esta ocorr\xeancia...",disabled:I,value:Object(N.get)(r,"description",""),onChange:function(e){return o({description:e.target.value})}})),b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(bt,{errors:Object(N.get)(l,"email",[]),label:"Email",placeholder:"Seu email de trabalho",disabled:I,value:Object(N.get)(r,"email",""),onChange:function(e){return o({email:e.target.value})}})),b.a.createElement(se.a,{item:!0,xs:6},b.a.createElement(bt,{errors:Object(N.get)(l,"name",[]),label:"Nome",disabled:I,className:t.inputControl,value:Object(N.get)(r,"name",""),onChange:function(e){return o({name:e.target.value})}})),b.a.createElement(se.a,{item:!0,xs:6},b.a.createElement(bt,{errors:Object(N.get)(l,"lastname",[]),label:"Sobrenome",disabled:I,className:t.inputControl,value:Object(N.get)(r,"lastname",""),onChange:function(e){return o({lastname:e.target.value})}}))),b.a.createElement("br",null),b.a.createElement(se.a,{container:!0,spacing:2,justify:"center",alignContent:"center"},b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement("div",null,b.a.createElement(Ht,{value:Object(N.get)(r,"attachment_data",null),onChange:function(e){o({attachment_data:e}),E(Object(N.get)(e,"progressPercent",100)<100)},disabled:I,accept:"image/*,.doc,.docx,.xls,.xlsx,.pdf,.xml"})),b.a.createElement("div",{className:t.actions},b.a.createElement(ue.a,{variant:"contained",color:"primary",size:"large",disabled:F,onClick:function(){if(Object(N.isEmpty)(Object(N.get)(r,"location_id")))n({alertMsg:"N\xe3o foi informado o local da ocorr\xeancia",alertType:"error",showAlert:!0});else{var e=w();f(e),e||i(!0)}}},F?"Aguarde...":"Enviar"))))))))))}return b.a.createElement("div",{className:t.root},b.a.createElement("section",null,b.a.createElement("div",{className:t.containerNoSidebar},b.a.createElement(se.a,{container:!0,spacing:1},b.a.createElement("div",{className:t.centerHeaderView},b.a.createElement(ee.a,{className:t.emptyHeaderIcon}),b.a.createElement("b",{className:t.emptyHeaderTitle},"Esse link inv\xe1lido n\xe3o pode solicitar tickets"))))))})),zc=Xt(_c.getCompany,{name:"company",options:function(e){var t=e.companyId,a=e.setAlert;return{variables:t,onRequestError:function(){a({alertMsg:"URL inv\xe1lida, n\xe3o foi poss\xedvel abrir este form\xfalario",alertType:"error",showAlert:!0,actionButton:"Recarregar",onClickAction:function(){return window.location.reload()}})}}}}),Vc=Xt(Pc.getLocationsByCompany,{name:"locations",options:function(e){var t=e.companyId,a=e.setAlert,n=e.setTicketState,r=e.selectedLocation;return{variables:t,onRequestFinished:function(e){var t=Object(N.sortBy)(Object(N.get)(e,"locations",[]),["name"]);if(Object(N.size)(t)){var o=function(e,t){var a=Object(N.find)(e,(function(e){return Object(N.toLower)(e.name)===Object(N.toLower)(t)||e.id===t}));return Object(N.get)(a,"id")||Object(N.get)(Object(N.first)(e),"id")}(t,r);n({location_id:o})}else a({alertMsg:"Esta empresa n\xe3o possui um local",alertType:"warning",showAlert:!0,actionButton:"Recarregar",onClickAction:function(){return window.location.reload()}})},onRequestError:function(){a({alertMsg:"Erro ao carregar os locais da empresa",alertType:"warning",showAlert:!0,actionButton:"Recarregar",onClickAction:function(){return window.location.reload()}})}}}}),Hc=Xt(Xo.getCategoriesByCompany,{name:"ticketCategories",options:function(e){var t=e.setTicketState,a=e.companyId,n=e.setCategories,r=e.selectedCategory,o=e.setAlert;return{variables:a,onRequestFinished:function(e){var a=Object(N.sortBy)(Object(N.get)(e,"ticket_categories",[]),["title"]);if(Object(N.size)(a)){var c=function(e,t){var a=Object(N.find)(e,(function(e){return Object(N.toLower)(e.title)===Object(N.toLower)(t)||e.id===t}));return Object(N.get)(a,"id")||Object(N.get)(Object(N.first)(e),"id")}(a,r);n(a),t({category_id:c,ticket_form_questions:Uc(a,c)})}else o({alertMsg:"Esta empresa n\xe3o possui uma categoria",alertType:"warning",showAlert:!0,actionButton:"Recarregar",onClickAction:function(){return window.location.reload()}})},onRequestError:function(){o({alertMsg:"Erro ao carregar categorias",alertType:"error",showAlert:!0,actionButton:"Recarregar",onClickAction:function(){return window.location.reload()}})}}}}),Yc=Xt(Tr.postPublicTicket,{name:"ticket",init:!1,options:function(e){var t=e.ticket,a=e.companyId,n=e.setAlert,r=e.categories,o=e.locationsData,c=e.setErrors,l=e.setSelectedCategory,i=e.setSelectedLocation,s=e.setTicketState;return{variables:{ticket:t,companyId:a},onRequestFinished:function(){document.querySelector("form").reset();var e=Object(N.get)(Object(N.first)(r),"id"),t=Object(N.get)(o,"data[0].id");l(e),i(t),s(Object(m.a)(Object(m.a)({},qc()),{},{category_id:e,location_id:t,ticket_form_questions:Uc(r,e)})),n({alertMsg:"Ticket registrado com sucesso",alertType:"success",showAlert:!0}),c({})},onRequestError:function(e){c(Object(N.get)(e,"errors",{})),n({alertMsg:Object(N.get)(e,"error")||"Erro ao registrar esse ticket",alertType:"error",showAlert:!0})}}}}),Qc=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{root:Object(ne.a)({flexGrow:1,marginRight:5,marginLeft:5},e.breakpoints.up("md"),{marginRight:100,marginLeft:100}),cancel:{marginRight:20},checkboxControl:{margin:e.spacing(2)},inputControl:{marginTop:-20}})}),{withTheme:!0}),h.g,Object(X.h)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(X.h)("ticket","setTicket",qc),Object(X.h)("categories","setCategories",[]),Object(X.h)("companyId","setCompanyId"),Object(X.h)("showQuestionError","setShowQuestionError",!1),Object(X.h)("isUploading","setIsUploading",!1),Object(X.h)("selectedCategory","setSelectedCategory"),Object(X.h)("selectedLocation","setSelectedLocation"),Object(X.h)("errors","setErrors",{}),Object(X.e)({setTicketState:function(e){var t=e.setTicket,a=e.ticket;return function(e){t(Object(m.a)(Object(m.a)({},a),e))}}}),Vc,Hc,Yc,zc,Object(X.c)({componentDidMount:function(){if(F.isLoggedIn())return window.location.href="/#/tickets/novo",!0;var e=this.props,t=e.location,a=e.setTicketState,n=e.setCompanyId,r=e.setSelectedCategory,o=e.setSelectedLocation,c=new URLSearchParams(t.search),l=(c.get("utm_source")||"").toUpperCase();return r(c.get("category")||c.get("category_id")||c.get("categoria")),o(c.get("location")||c.get("location_id")||c.get("local")),n(c.get("company_id")||c.get("company")||c.get("c")),"QRCODE"===l&&a({source:"QRCODE"}),!0}}))(Wc),Gc=a(826),Jc={ON_DEMAND:"ON_DEMAND",SUBSCRIPTION:"SUBSCRIPTION"},Kc={getServices:function(e){var t=e.serviceType;return q.get("/services",{service_type:t})},getService:function(e){return q.get("/services/".concat(e))}},Xc=a(814),Zc=a(815),$c=function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{container:{marginLeft:"auto",marginRight:"auto",marginBottom:20}})},el=Object(d.memo)((function(e){var t=e.classes,a=e.service,n=e.history;return b.a.createElement(mr.a,{onClick:function(){return n.push("/servicos/".concat(a.id,"/solicitar-servico"))}},b.a.createElement(Xc.a,null,b.a.createElement(Zc.a,{className:t.media,image:a.image_url,title:a.title}),b.a.createElement(dr.a,{className:t.content},b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("small",null,b.a.createElement("b",null,a.title))))))}));el.propTypes={classes:ae.a.object,service:ae.a.object,history:ae.a.object};var tl=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},$c(e)),{},{media:{minHeight:150}})}),{withTheme:!0}),h.g)(el),al=Object(d.memo)((function(e){var t=e.history,a=e.classes,n=e.servicesData;if(e.servicesLoading)return b.a.createElement(be,null);var r=Object(N.get)(n,"services",[]),o=Object(N.groupBy)(r,"category");return b.a.createElement(b.a.Fragment,null,b.a.createElement(Gc.a,{freeSolo:!0,options:Object(N.sortBy)(r,"title"),getOptionLabel:function(e){return e.title},onChange:function(e,a){return t.push("/servicos/".concat(a.id,"/solicitar-servico"))},style:{width:300},renderInput:function(e){return b.a.createElement(ze.a,Object.assign({},e,{label:"Qual servi\xe7o procura?",variant:"outlined"}))}}),Object(N.map)(o,(function(e,t){return b.a.createElement("div",{className:a.categoryContainer,key:t},b.a.createElement(Ve.a,{className:a.categoryName,variant:"h6"},b.a.createElement("b",null,t)),b.a.createElement(se.a,{container:!0,spacing:2},Object(N.map)(e,(function(e){return b.a.createElement(se.a,{key:e.id,item:!0,xs:12,sm:4,md:3},b.a.createElement(tl,{service:e}))}))))})))})),nl=Xt(Kc.getServices,{name:"services",options:function(e){var t=e.setAlert;return{variables:{serviceType:Jc.ON_DEMAND},onRequestError:function(){t({alertMsg:"Erro ao carregar lista de servi\xe7os",alertType:"error",showAlert:!0})}}}}),rl=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{categoryContainer:{marginTop:40},categoryName:{marginTop:15,marginBottom:10}})}),{withTheme:!0}),h.g,nl)(al),ol={createServiceRequest:function(e){var t=e.serviceId,a=e.dynamicQuestions,n=Object(N.mapValues)(a,(function(e){return e.originalFileObj?{id:e.id,storage:e.storage,metadata:e.metadata,base64Data:e.base64Data}:e}));return q.post("/service_requests",{service_id:t,dynamic_questions:n})},getServiceRequests:function(e){var t=e.status;return q.get("/service_requests",{status:t})},getServiceRequest:function(e){return q.get("/service_requests/".concat(e))},deleteServiceRequest:function(e){return q.put("/service_requests/".concat(e))}},cl=ol,ll=Xt(Kc.getService,{name:"service",options:function(e){return{variables:e.match.params.serviceId}}}),il=Xt(cl.createServiceRequest,{name:"createServiceRequest",init:!1,options:function(e){var t=e.serviceData,a=e.formData,n=e.resetFormData,r=e.setFormData,o=e.setAlert,c=a.changedFields;return{variables:{serviceId:Object(N.get)(t,"service.id"),dynamicQuestions:c},onRequestFinished:function(){o({alertMsg:"Recebemos! Em breve nosso especialista vai entrar em contato com voc\xea!",alertType:"success",showAlert:!0}),n()},onRequestError:function(e){o({alertMsg:"Erro ao solicitar servi\xe7o",alertType:"error",showAlert:!0}),r({validationErrors:Object(N.get)(e,"errors",{})})}}}}),sl=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},$c(e)),{},{title:{marginBottom:e.spacing(4)},subtitlesContainer:{marginBottom:e.spacing(1)},marginLeftContainer:{paddingLeft:e.spacing(4)},benefitsList:{margin:0,padding:0,paddingLeft:"1em"},textContentsContainer:{marginBottom:e.spacing(4)},questionContainer:{marginTop:e.spacing(3)},goBackButton:{marginRight:e.spacing(2)}})}),{withTheme:!0}),h.g,ll,(function(e){return function(t){return t.serviceLoading?b.a.createElement(be,null):b.a.createElement(e,t)}}),d.memo,Ao((function(e){return Object(N.zipObject)(Object(N.map)(Object(N.get)(e,"serviceData.service.form_questions"),(function(e){return e.question})),Object(N.map)(Object(N.get)(e,"serviceData.service.form_questions"),(function(e){return"ATTACHMENT"===e.field_type?{}:"CHECKBOX"===e.field_type?[]:""})))})),il)((function(e){var t=e.classes,a=e.serviceData,n=e.formData,r=e.setFormData,o=e.createServiceRequestFetch,c=e.createServiceRequestLoading,l=n.validationErrors||{},i=function(){return o(!0)},s=function(e){e.ctrlKey&&13===e.keyCode&&i()},u=a.service;return b.a.createElement(b.a.Fragment,null,b.a.createElement(Ve.a,{className:t.title,variant:"h4"},u.title),b.a.createElement(se.a,{container:!0,className:t.subtitlesContainer},b.a.createElement(se.a,{item:!0,xs:6},b.a.createElement(Ve.a,{variant:"subtitle1"},b.a.createElement("b",null,u.subtitle)))),b.a.createElement(se.a,{container:!0,className:t.textContentsContainer},b.a.createElement(se.a,{item:!0,xs:6},b.a.createElement(Ve.a,{variant:"body2"},u.description)),b.a.createElement(se.a,{item:!0,xs:6,className:t.marginLeftContainer},b.a.createElement("ul",{className:t.benefitsList},Object(N.map)(u.benefits,(function(e){return b.a.createElement("li",{key:e},b.a.createElement(Ve.a,{variant:"body2"},e))}))))),b.a.createElement(Wa.a,{className:"".concat(t.container," ").concat(t.paper)},b.a.createElement(se.a,{container:!0,item:!0,xs:12,sm:8,md:6,spacing:2},b.a.createElement(se.a,{item:!0,xs:12},Object(N.map)(u.form_questions,(function(e){return b.a.createElement("div",{key:e.id,className:t.questionContainer},b.a.createElement(Ve.a,{variant:"subtitle1"},b.a.createElement("b",null,e.question)),b.a.createElement(Kt,{fieldType:e.field_type,onKeyDown:s,value:n[e.question],onChangeValue:function(t){return r(Object(ne.a)({},e.question,t))},errors:l["dynamic_questions.".concat(e.question)],options:Object(N.map)(e.options,(function(e){return{label:e,value:e}})),emptyOptionLabel:" ",uploadFileFunc:Pt,required:e.required,disabled:c}))})),b.a.createElement("div",{className:t.actions},b.a.createElement(ue.a,{className:t.goBackButton,component:f.b,to:"/servicos",color:"default",size:"large",disabled:c},"Voltar"),b.a.createElement(ue.a,{variant:"contained",color:"primary",size:"large",onClick:i,disabled:c},c?"Aguarde...":"Enviar"))))))})),ul=Object(d.memo)((function(e){var t=e.classes,a=e.setAlert,n=e.children;return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:t.container},b.a.createElement("div",{className:t.headerView},b.a.createElement("aside",null,b.a.createElement(Ve.a,{variant:"h5"},b.a.createElement("b",null,"Servi\xe7os"))))),b.a.createElement("div",{className:t.container},b.a.cloneElement(n,{setAlert:a})))})),ml=Object(X.b)(Object(Z.a)($c,{withTheme:!0}),xc)(ul),dl=Object(d.memo)((function(){return b.a.createElement(h.d,null,b.a.createElement(h.b,{exact:!0,path:"/servicos"},b.a.createElement(ml,null,b.a.createElement(rl,null))),b.a.createElement(h.b,{exact:!0,path:"/servicos/sobdemanda"},b.a.createElement(h.a,{to:{pathname:"/servicos"}})),b.a.createElement(h.b,{exact:!0,path:"/servicos/recorrentes"},b.a.createElement(h.a,{to:{pathname:"/servicos"}})),b.a.createElement(h.b,{path:"/servicos/:serviceId/solicitar-servico"},b.a.createElement(Tc,null,b.a.createElement(sl,null))))})),bl=Ac({condition:function(e){return!Pa.includes(e.role)}})(dl),pl={getMembers:function(e){var t=e.onlyActive;return q.get("/members",{only_active:t})},getMember:function(e){return q.get("/members/".concat(e))},blockMember:function(e){return q.put("/members/".concat(e,"/block"))},updateMember:function(e){var t=e.id,a=e.name,n=e.lastname,r=e.phone,o=e.role,c=e.job_role,l=e.locationIds;return q.put("/members/".concat(t),{id:t,name:a,lastname:n,phone:r,role:o,job_role:c,location_ids:l})},emailCheck:function(e){return q.get("/members/email_check",{email:e})},createMember:function(e){var t=e.name,a=e.lastname,n=e.phone,r=e.role,o=e.email,c=e.jobRole,l=e.locationIds;return q.post("/members?send_invite=true",{name:t,lastname:a,phone:n,role:r,email:o,job_role:c,location_ids:l})},resendInvitationEmail:function(e){return q.get("/members/resend_invitation_email",{id:e})},unblockMember:function(e){return q.put("/members/".concat(e,"/unblock"))}},gl=Object(d.memo)((function(e){var t=e.classes,a=e.onClose,n=e.setAlert,r=e.formData,l=e.setFormData,i=e.checkEmailStep,s=e.refetch,u=e.setCheckEmailStep,d=e.loading,p=e.setLoading,g=e.errors,f=e.setErrors,h=e.locationsData,E=Object(Oa.a)(),v=Object(ja.a)(E.breakpoints.down("sm")),O=d||Object(N.isEmpty)(r.email),j=Object(N.get)(h,"locations",[]),C=function(e){l(Object(m.a)(Object(m.a)({},r),e))},y=function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=16;break}return e.prev=1,f({}),p(!0),e.next=6,pl.emailCheck(r.email);case 6:u(!1),Y.hit("EmailChecked - Success"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),f(Object(N.mapValues)(Object(N.get)(e.t0,"errors",{}),(function(e){return e[0]})));case 13:p(!1),e.next=33;break;case 16:return e.prev=16,f({}),p(!0),e.next=21,pl.createMember(Object(m.a)({},r));case 21:Y.hit("MemberCreated - Success"),n({alertMsg:"Usu\xe1rio criado com sucesso",alertType:"success",showAlert:!0}),p(!1),a(),s(!0),e.next=33;break;case 28:e.prev=28,e.t1=e.catch(16),f(Object(N.mapValues)(Object(N.get)(e.t1,"errors",{}),(function(e){return e[0]}))),n({alertMsg:"N\xe3o foi poss\xedvel criar o usu\xe1rio",alertType:"error",showAlert:!0}),p(!1);case 33:case"end":return e.stop()}}),e,null,[[1,10],[16,28]])})));return function(){return e.apply(this,arguments)}}();return b.a.createElement(vr.a,{fullScreen:v,keepMounted:!0,fullWidth:!i,maxWidth:i?"sm":"md",classes:{paper:t.dialogMemberForm},open:!0},b.a.createElement(Or.a,null,"Convidar usu\xe1rio",b.a.createElement(Xe.a,{className:t.closeButton,onClick:a,disabled:d},b.a.createElement(Ke.a,null))),b.a.createElement(Cr.a,{className:t.content},b.a.createElement(se.a,{container:!0,direction:"row",spacing:1},i&&b.a.createElement(se.a,{item:!0,xs:12,className:t.gridSizeMedium},b.a.createElement(bt,{label:"Email",disabled:d,errors:Object(N.get)(g,"email",[]),value:Object(N.get)(r,"email",""),onChangeText:function(e){return C({email:e})}})),!i&&b.a.createElement(b.a.Fragment,null,b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(bt,{label:"E-mail",disabled:!0,errors:Object(N.get)(g,"email",[]),value:Object(N.get)(r,"email",""),onChangeText:function(e){return C({email:e})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(bt,{label:"Nome",disabled:d,errors:Object(N.get)(g,"name",[]),value:Object(N.get)(r,"name",""),onChangeText:function(e){return C({name:e})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(bt,{label:"Sobrenome",disabled:d,errors:Object(N.get)(g,"lastname",[]),value:Object(N.get)(r,"lastname",""),onChangeText:function(e){return C({lastname:e})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(bt,{label:"Cargo",disabled:d,value:Object(N.get)(r,"jobRole",""),onChangeText:function(e){return C({jobRole:e})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(Ct,{label:"Telefone celular",disabled:d,value:Object(N.get)(r,"phone",""),onChange:function(e){return C({phone:(e.target.value||"").replace(/[\D]+/g,"").slice(0,15)})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(Ve.a,{variant:"h6",className:t.blockTitle},"Permiss\xe3o"),b.a.createElement(wt,{label:"N\xedvel de acesso",errors:Object(N.get)(g,"role",[]),value:Object(N.get)(r,"role",""),disabled:d,onChange:function(e){return C({role:e.target.value})},options:La})),b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(Ve.a,{variant:"h6",className:t.blockTitle},"Locais de acesso"),b.a.createElement(ut.a,{fullWidth:!0,error:!!g.location_ids},g.location_ids&&b.a.createElement(mt.a,null,g.location_ids),j.map((function(e){return b.a.createElement(Mt.a,{key:e.id,className:t.checkBox,classes:{label:t.checkboxLabel},control:b.a.createElement(It.a,{checked:e.checked,disabled:d,onChange:function(){return function(e){var t=[];t=Object(N.includes)(Object(N.get)(r,"locationIds",[]),e)?Object(N.pull)(r.locationIds,e):r.locationIds.concat([e]),l(Object(m.a)(Object(m.a)({},r),{},{locationIds:t}))}(e.id)},value:e.id}),label:e.name})}))))))),b.a.createElement(yr.a,{className:t.actions},b.a.createElement(se.a,{container:!0,justify:i?"flex-start":"space-between",spacing:2},!i&&b.a.createElement(se.a,{item:!0,xs:12,sm:8}),b.a.createElement(se.a,{item:!0,xs:6,sm:i?6:2},b.a.createElement(ue.a,{fullWidth:!0,color:"default",size:"large",variant:"contained",onClick:function(){a()},disabled:d},"CANCELAR")),b.a.createElement(se.a,{item:!0,xs:6,sm:i?6:2},b.a.createElement(ue.a,{fullWidth:!0,color:"primary",size:"large",variant:"contained",onClick:y,disabled:O},i?"PR\xd3XIMO":"SALVAR")))))})),fl=Xt(Pc.getLocations,{name:"locations",options:function(){return{variables:{listInactive:!1,listAll:!0}}}}),hl={role:Object(N.first)(La).value,locationIds:[]},El=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{actions:{margin:15,marginBottom:20},content:{marginTop:-20,overflowX:"hidden"},dialogMemberForm:{maxWidth:"50rem"},blockTitle:{marginTop:15},checkboxLabel:{fontSize:e.typography.caption.fontSize},gridSizeMedium:{width:400}})}),{withTheme:!0}),Object(X.h)("formData","setFormData",hl),Object(X.h)("loading","setLoading",!1),Object(X.h)("errors","setErrors",{}),Object(X.h)("checkEmailStep","setCheckEmailStep",!0),fl)(gl),vl=Object(d.memo)((function(e){var t=e.setLocationOptionChecked,a=e.isLoading,n=e.formData,r=e.setFormData,o=e.classes,c=e.isSubmiting;if(a)return b.a.createElement(be,null);var l=n.locationsOptions,i=n.validationErrors||{},s=F.getUserData(),u=s.role,m=s.id;return b.a.createElement(b.a.Fragment,null,b.a.createElement(se.a,{container:!0,direction:"row",spacing:1},b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(bt,{errors:Object(N.get)(i,"name",[]),label:"Nome",disabled:c,value:Object(N.get)(n,"name")||"",onChangeText:function(e){return r({name:e})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(bt,{errors:Object(N.get)(i,"lastname",[]),label:"Sobrenome",disabled:c,value:Object(N.get)(n,"lastname")||"",onChangeText:function(e){return r({lastname:e})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(bt,{errors:Object(N.get)(i,"email",[]),label:"E-mail",disabled:!0,value:Object(N.get)(n,"email")||"",onChangeText:function(e){return r({email:e})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(Ct,{errors:Object(N.get)(i,"phone",[]),label:"Telefone celular",disabled:c,value:Object(N.get)(n,"phone")||"",onChangeValue:function(e){return r({phone:e})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(bt,{label:"Cargo",value:Object(N.get)(n,"job_role")||"",onChangeText:function(e){return r({job_role:e})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6}),!("ADMIN"===u&&Object(N.get)(n,"id")===m)&&b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(Ve.a,{variant:"h6"},"Permiss\xe3o"),b.a.createElement(wt,{errors:Object(N.get)(i,"role",[]),label:"N\xedvel de acesso",value:Object(N.get)(n,"role")||"",disabled:c,onChange:function(e){return r({role:e.target.value})},options:La})),b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(Ve.a,{variant:"h6"},"Locais de acesso"),b.a.createElement(ut.a,{fullWidth:!0,error:!!i.location_ids},i.location_ids&&b.a.createElement(mt.a,null,i.location_ids),l.map((function(e){return b.a.createElement(Mt.a,{key:e.value,classes:{label:o.checkboxLabel},control:b.a.createElement(It.a,{checked:e.checked,disabled:c,onChange:function(a){t({locationId:e.value,checked:a.target.checked})},value:e.value}),label:e.label})}))))))})),Ol=Object(X.b)(le,Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{checkboxLabel:{fontSize:e.typography.caption.fontSize}})}),{withTheme:!0}),Wo,Object(X.e)({setLocationOptionChecked:function(e){var t=e.formData,a=e.setFormData;return function(e){var n=e.locationId,r=e.checked,o=t.locationsOptions;a({locationsOptions:Object(N.map)(o,(function(e){return e.value===n?Object(m.a)(Object(m.a)({},e),{},{checked:r}):e}))})}}}),Object(X.g)(["viewer","member"],(function(e){var t=e.member,a=e.viewer,n=e.setFormData;if(!a)return null;var r=Object(N.get)(t,"locations",[]),o=Object(N.get)(a,"locations",[]).map((function(e){return{label:e.name,value:e.id,checked:r.some((function(t){return e.id===t.id}))}})),c=Object(m.a)({locationsOptions:o},t);return n(Object(m.a)(Object(m.a)({},c),{},{previousValues:c})),!0})))(vl),jl=Object(d.memo)((function(e){var t=e.member,a=e.isLoading,n=e.open,r=e.classes,o=e.formData,c=e.setFormData,l=e.onClose,i=e.updateMemberFetch,s=e.updateMemberLoading,u=e.blockMemberFetch,m=e.blockMemberLoading,d=Object(Oa.a)(),p=Object(ja.a)(d.breakpoints.down("sm")),g=a,f=s||m;return b.a.createElement(vr.a,{fullScreen:p,keepMounted:!0,fullWidth:!0,maxWidth:"md",classes:{paper:r.dialogMemberForm},open:n,onClose:function(){return l({shouldRefetch:!1})}},b.a.createElement(Or.a,null,"Editar usu\xe1rio",b.a.createElement(Xe.a,{className:r.closeButton,onClick:function(){return l({shouldRefetch:!1})}},b.a.createElement(Ke.a,null))),b.a.createElement(Cr.a,{className:r.content},b.a.createElement(Ol,{member:t,formData:o,setFormData:c,isLoading:g,isSubmiting:f})),b.a.createElement(yr.a,{className:r.actions},b.a.createElement(se.a,{container:!0,justify:"space-between",spacing:2},b.a.createElement(se.a,{item:!0,xs:12,sm:8},b.a.createElement(ue.a,{fullWidth:p,color:"secondary",size:"large",variant:p?"outlined":"contained",onClick:function(){window.confirm("Tem certeza em bloquear esse usu\xe1rio?")&&u(!0,"",null,Object(N.get)(t,"id",""))},disabled:g||f},"DESATIVAR USU\xc1RIO")),b.a.createElement(se.a,{item:!0,xs:6,sm:2},b.a.createElement(ue.a,{fullWidth:!0,color:"default",size:"large",variant:"contained",onClick:function(){return l({shouldRefetch:!1})},disabled:g||f},"CANCELAR")),b.a.createElement(se.a,{item:!0,xs:6,sm:2},b.a.createElement(ue.a,{fullWidth:!0,color:"primary",size:"large",variant:"contained",onClick:function(){return i(!0).catch((function(){}))},disabled:g||f},"SALVAR")))))})),Cl=Xt(pl.updateMember,{name:"updateMember",init:!1,options:function(e){var t=e.formData,a=e.setFormData,n=e.member,r=e.setAlert,l=e.onClose,i=Object(N.pickBy)(t,(function(e,a){var n=t.previousValues[a];return!Object(N.isEqual)(n,e)})),s={};i.locationsOptions&&(s={locationIds:Object(N.map)(Object(N.pickBy)(i.locationsOptions,{checked:!0}),(function(e){return e.value}))});return{variables:Object(m.a)(Object(m.a)({id:n.id},i),s),onRequestFinished:function(){var e=Object(c.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=F.getUserData(),n.id!==t.id){e.next=6;break}return e.next=4,U.getViewer();case 4:a=e.sent,F.setUserData(Object(N.get)(a,"member"));case 6:r({alertMsg:"Usu\xe1rio alterado com sucesso",alertType:"success",showAlert:!0}),l({shouldRefetch:!0});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRequestError:function(e){var t=Object(N.get)(e,"error","");r({alertMsg:t||"Erro ao alterar este usu\xe1rio",alertType:"error",showAlert:!0});var n=Object(N.mapValues)(Object(N.get)(e,"errors",{}),(function(e){return e[0]}));a({validationErrors:n})}}}}),yl=Xt(pl.blockMember,{name:"blockMember",init:!1,options:function(e){var t=e.member,a=e.onClose,n=e.setAlert;return{variables:Object(N.get)(t,"id"),onRequestFinished:function(){n({alertMsg:"Usu\xe1rio bloqueado com sucesso",alertType:"success",showAlert:!0}),a({shouldRefetch:!0})},onRequestError:function(e){n({alertMsg:Object.values(e.errors).flat().join()||"Erro ao bloquear este usu\xe1rio",alertType:"error",showAlert:!0})}}}}),kl=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{actions:{margin:15,marginBottom:20},content:{marginTop:-20,overflowX:"hidden"},dialogMemberForm:{maxWidth:"50rem"}})}),{withTheme:!0}),Object(X.h)("formData","setFormDataRaw",{locationsOptions:[],previousValues:{},validationErrors:{}}),Object(X.e)({setFormData:function(e){var t=e.setFormDataRaw,a=e.formData;return function(e){t(Object(m.a)(Object(m.a)({},a),e))}}}),yl,Cl)(jl),Al=function(e){return Object(m.a)({},re(e))},wl=Xt(pl.unblockMember,{name:"unblockMember",init:!1,options:function(e){var t=e.memberId,a=e.setAlert,n=e.refetch;return{variables:t,onRequestFinished:function(){a({alertMsg:"Usu\xe1rio desbloqueado com sucesso",alertType:"success",showAlert:!0}),Y.hit("UnblockUser",{memberId:t}),n(!1)},onRequestError:function(){a({alertMsg:"Erro ao desbloquear usu\xe1rio",alertType:"error",showAlert:!0})}}}}),Tl=Object(X.b)(wl)((function(e){var t=e.unblockMemberFetch,a=e.unblockMember;return b.a.createElement(b.a.Fragment,null,b.a.createElement(ue.a,{variant:"outlined",size:"large",onClick:function(){return t(!0)},disabled:a},"Reativar conta"))})),xl=Object(X.b)(Object(X.h)("openModal","setOpenModal",!1),Object(X.h)("canResendInivitation","setCanResendInivitation",!0))((function(e){var t=e.classes,a=e.canResendInivitation,n=e.setCanResendInivitation,r=e.setAlert,l=e.member,i=function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(!1),e.next=4,pl.resendInvitationEmail(l.id);case 4:Y.hit("NewMemberInvitation - Resend"),r({alertMsg:"Convite enviado com sucesso",alertType:"success",showAlert:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r({alertMsg:"Erro ao enviar email",alertType:"error",showAlert:!0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return b.a.createElement(b.a.Fragment,null,b.a.createElement(ue.a,{className:t.smallScreenResendButton,variant:"outlined",size:"large",onClick:i,disabled:!a},a?"Reenviar convite":"Convite enviado"))})),Sl=Xt(pl.getMember,{name:"member",init:!1,options:function(e){return{variables:e.memberId}}}),Nl=Object(X.b)(Object(X.h)("openModal","setOpenModal",!1),Sl,Object(X.g)(["openModal"],(function(e){var t=e.openModal,a=e.memberFetch;t&&a(!0)})))((function(e){var t=e.memberData,a=e.memberLoading,n=e.refetch,r=e.openModal,l=e.setOpenModal,i=e.setAlert,s=Object(N.get)(t,"member"),u=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shouldRefetch){e.next=4;break}return e.next=4,n(!1);case 4:Y.hit("MembersFormModal - Closed"),l(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return b.a.createElement(b.a.Fragment,null,b.a.createElement(ue.a,{variant:"outlined",size:"large",onClick:function(){Y.hit("MembersFormModal - Opened"),l(!0)}},"Editar"),r&&b.a.createElement(kl,{isLoading:a,member:s,open:r,onClose:u,setAlert:i}))})),Dl=Object(d.memo)((function(e){var t=e.viewer,a=e.index,n=e.member,r=e.classes,o=e.refetch,c=e.setAlert;if(!t)return null;var l=Object(N.get)(F.getUserData(),"id"),i=Object(N.get)(Object(N.find)(La,(function(e){return e.value===Object(N.get)(n,"role")})),"label"),s=Object(N.get)(n,"id"),u="".concat(Object(N.get)(n,"name")," ").concat(Object(N.get)(n,"lastname")),m=Object(N.get)(n,"email"),d=Object(N.get)(n,"photo_url"),p=Object(N.get)(n,"must_change_password",!1),g=Object(N.get)(n,"blocked_at"),f=Object(N.get)(n,"locations"),h=Object(N.map)(f,(function(e){return e.name})).join(", "),E=Ba.includes(t.role),v=l!==s&&p;return b.a.createElement(fa.a,{className:a%2?r.bgWhite:r.bgGray},b.a.createElement(ha.a,{className:r.tableSmallCell},b.a.createElement("div",{className:r.avatarNameContainer},b.a.createElement(Ra,{name:u,photoUrl:d}),b.a.createElement("span",{className:"".concat(r.cellText," ").concat(r.userName)},u))),b.a.createElement(ha.a,{className:r.tableSmallCell},b.a.createElement("span",{className:r.cellText},m)),b.a.createElement(ha.a,{className:r.tableSmallCell},b.a.createElement("span",{className:r.cellText},i)),b.a.createElement(ha.a,{className:r.tableSmallCell},b.a.createElement("span",{className:r.cellText},h)),b.a.createElement(ha.a,{className:r.tableMediumCell},b.a.createElement(se.a,{container:!0,item:!0},b.a.createElement(se.a,{item:!0,xs:12},g&&b.a.createElement(Tl,{memberId:n.id,refetch:o,setAlert:c})),b.a.createElement(se.a,{item:!0,xs:12},E&&!g&&b.a.createElement(Nl,{memberId:n.id,refetch:o,setAlert:c})),b.a.createElement(se.a,{item:!0,xs:12},v&&!g&&b.a.createElement(xl,{member:n,refetch:o,setAlert:c,classes:r})))))})),Ml=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},Al(e)),{},{cellText:{color:"#313131",fontSize:14},userName:{marginRight:5,marginLeft:10},avatarNameContainer:{display:"flex",alignItems:"center"},smallScreenResendButton:{marginTop:10}})}),{withTheme:!0}),Wo)(Dl),Il=Object(d.memo)((function(e){var t=e.membersData,a=e.membersLoading,n=e.openCreateMemberModal,r=e.setOpenCreateMemberModal,o=e.classes,c=e.membersFetch,l=e.setAlert,i=e.onlyActive,s=e.setOnlyChecked,u=Object(N.get)(F.getUserData(),"id"),m=Object(N.get)(t,"members");return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:o.container},b.a.createElement("div",{className:o.headerView},b.a.createElement("aside",null,b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Usu\xe1rios (".concat(Object(N.size)(m),")")))),b.a.createElement("aside",null,b.a.createElement("div",{className:o.headerButtonAndActiveFilter},b.a.createElement(Dt.a,{row:!0},b.a.createElement(Mt.a,{control:b.a.createElement(It.a,{checked:i,onChange:function(e){s(e.target.checked),c(!0)},color:"primary",disabled:a}),label:"Usu\xe1rios ativos"})),b.a.createElement(ue.a,{size:"large",color:"primary",variant:"contained",onClick:function(){r(!0),Y.hit("NewMemberModal - Opened")}},"CONVIDAR USU\xc1RIO"))))),b.a.createElement("div",{className:o.container},b.a.createElement(Wa.a,{className:o.tablePaper},b.a.createElement(pa.a,null,b.a.createElement(ga.a,null,b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:o.tableCell},"NOME"),b.a.createElement(ha.a,{className:o.tableCell},"EMAIL"),b.a.createElement(ha.a,{className:o.tableCell},"PERMISS\xc3O DE ACESSO"),b.a.createElement(ha.a,{className:o.tableCell},"LOCAIS"))),b.a.createElement(va.a,null,a?b.a.createElement(fa.a,null,b.a.createElement(ha.a,{colSpan:5,align:"center"},b.a.createElement(be,null))):Object(N.size)(m)?m.map((function(e,t){return b.a.createElement(Ml,{loggedMemberId:u,refetch:c,setAlert:l,index:t,key:e.id,member:e,loading:a})})):b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:o.empty,colSpan:5,align:"center"},"Nenhum usu\xe1rio cadastrado")),n&&b.a.createElement(El,{onClose:function(){r(!1)},setAlert:l,refetch:c}))))))})),Fl=Xt(pl.getMembers,{name:"members",options:function(e){var t=e.setAlert;return{variables:{onlyActive:e.onlyActive},onRequestError:function(){t({alertMsg:"Erro ao carregar dados do servidor",alertType:"error",showAlert:!0})}}}}),Rl=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},Al(e)),{},{container:{marginBottom:30,marginTop:30},empty:{backgroundColor:"#EEE"},tableCell:{fontSize:14},titleTableCell:{fontSize:20},headerButtonAndActiveFilter:{display:"flex",flexDirection:"row",alignItems:"center"},activeFilter:{marginRight:10}})}),{withTheme:!0}),Object(X.h)("openCreateMemberModal","setOpenCreateMemberModal",!1),Object(X.h)("onlyActive","setOnlyChecked",!0),Ac({condition:function(e){return!Ba.includes(e.role)}}),Fl)(Il),Ll=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=t.showAlert,o=t.alertMsg,c=t.alertType,l=null;return r&&(l=b.a.createElement(at,{message:o,type:c,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}})),b.a.createElement("div",{className:n.root},b.a.createElement(hn,{alertBox:l}),b.a.createElement("section",null,b.a.createElement("div",{className:n.container},b.a.createElement("div",{className:n.headerView},b.a.createElement("aside",null,b.a.createElement(Ve.a,{variant:"h5"},b.a.createElement("b",null,"Configura\xe7\xf5es"))))),b.a.createElement("div",{className:n.container},b.a.createElement(wn,null)),b.a.createElement("div",{className:n.container},b.a.createElement(Rl,{setAlert:a}))))})),Bl=Object(X.b)(Object(Z.a)(Al,{withTheme:!0}),Object(X.h)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}))(Ll),Pl=Object(X.b)(xc,d.memo,Object(Z.a)((function(e){return Object(m.a)({},re(e))}),{withTheme:!0}))((function(e){var t=e.classes,a=e.setAlert,n=e.WrappedComponent,r=Object(st.a)(e,["classes","setAlert","WrappedComponent"]),o=le(n);return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:t.headerView},b.a.createElement("aside",null,b.a.createElement(Ve.a,{variant:"h5"},b.a.createElement("b",null,"Configura\xe7\xf5es")))),b.a.createElement(wn,null),b.a.createElement(o,Object.assign({setAlert:a},r)))})),_l=function(e){return function(t){return b.a.createElement(Pl,Object.assign({},t,{WrappedComponent:e}))}},ql=[{label:"AC",value:"AC"},{label:"AL",value:"AL"},{label:"AP",value:"AP"},{label:"AM",value:"AM"},{label:"BA",value:"BA"},{label:"CE",value:"CE"},{label:"DF",value:"DF"},{label:"ES",value:"ES"},{label:"GO",value:"GO"},{label:"MA",value:"MA"},{label:"MT",value:"MT"},{label:"MS",value:"MS"},{label:"MG",value:"MG"},{label:"PA",value:"PA"},{label:"PB",value:"PB"},{label:"PR",value:"PR"},{label:"PE",value:"PE"},{label:"PI",value:"PI"},{label:"RJ",value:"RJ"},{label:"RN",value:"RN"},{label:"RS",value:"RS"},{label:"RO",value:"RO"},{label:"RR",value:"RR"},{label:"SC",value:"SC"},{label:"SP",value:"SP"},{label:"SE",value:"SE"},{label:"TO",value:"TO"}],Ul=Object(d.memo)((function(e){var t=e.formData,a=e.setFormData,n=e.isLoading;if(n)return b.a.createElement(be,null);var r=t.validationErrors||{};return b.a.createElement(se.a,{container:!0,direction:"row",spacing:1},b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(bt,{errors:r.name,label:"Apelido",placeholder:"Endere\xe7o principal, Nome da sede, etc",disabled:n,value:t.name,onChange:function(e){return a({name:e.target.value})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(bt,{errors:r.address,label:"Endere\xe7o completo",placeholder:"Rua Monteiro Lobato, 555",disabled:n,value:t.address,onChange:function(e){return a({address:e.target.value})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(bt,{errors:r.complement,label:"Complemento",disabled:n,value:t.complement,onChange:function(e){return a({complement:e.target.value})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(bt,{errors:r.neighborhood,label:"Bairro",disabled:n,value:t.neighborhood,onChange:function(e){return a({neighborhood:e.target.value})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(bt,{errors:r.city,label:"Cidade",disabled:n,value:t.city,onChange:function(e){return a({city:e.target.value})}})),b.a.createElement(se.a,{item:!0,xs:6,sm:3},b.a.createElement(wt,{errors:r.state,label:"Estado",disabled:n,value:t.state,onChange:function(e){return a({state:e.target.value})},options:ql,emptyOptionLabel:"Estado"})),b.a.createElement(se.a,{item:!0,xs:6,sm:3},b.a.createElement(vt,{errors:r.zip_code,label:"CEP",disabled:n,value:t.zip_code,onChangeText:function(e){return a({zip_code:e})}})))})),Wl=Object(d.memo)((function(e){var t=e.classes,a=e.open,n=e.onClose,r=e.modalTitle,o=e.formData,c=e.setFormData,l=e.onSubmit,i=e.isLoading,s=Object(Oa.a)(),u=Object(ja.a)(s.breakpoints.down("sm"));return b.a.createElement(vr.a,{fullScreen:u,keepMounted:!0,fullWidth:!0,maxWidth:"md",classes:{paper:t.dialogMemberForm},open:a,onClose:n},b.a.createElement(Or.a,null,r,b.a.createElement(Xe.a,{className:t.closeButton,onClick:function(){return n({shouldRefetch:!1})}},b.a.createElement(Ke.a,null))),b.a.createElement(Cr.a,{className:t.content},b.a.createElement(Ul,{formData:o,setFormData:c,isLoading:i})),b.a.createElement(yr.a,{className:t.actions},b.a.createElement(se.a,{container:!0,justify:"flex-end",spacing:2},b.a.createElement(se.a,{item:!0,xs:6,sm:2},b.a.createElement(ue.a,{fullWidth:!0,color:"default",size:"large",variant:"contained",onClick:n,disabled:i},"CANCELAR")),b.a.createElement(se.a,{item:!0,xs:6,sm:2},b.a.createElement(ue.a,{fullWidth:!0,color:"primary",size:"large",variant:"contained",onClick:l,disabled:i},"SALVAR")))))})),zl=Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{actions:{margin:15,marginBottom:20},content:{marginTop:-20,overflowX:"hidden"},dialogMemberForm:{maxWidth:"50rem"}})}),{withTheme:!0})(Wl),Vl=Object(d.memo)((function(e){var t=e.isModalOpen,a=e.setIsModalOpen,n=e.onClose,r=e.formData,o=e.setFormData,c=e.updateLocationFetch,l=e.updateLocationLoading;return b.a.createElement(b.a.Fragment,null,b.a.createElement(ue.a,{variant:"outlined",size:"large",onClick:function(){Y.hit("EditLocationModal - Opened"),a(!0)}},"EDITAR"),t&&b.a.createElement(zl,{open:t,onClose:n,modalTitle:"Editar Local",formData:r,setFormData:o,onSubmit:function(){return c(!0).catch((function(){}))},isLoading:l}))})),Hl=Xt(Pc.updateLocation,{name:"updateLocation",init:!1,options:function(e){var t=e.location,a=e.formData.changedFields,n=e.setFormData,r=e.setAlert,o=e.onUpdated,c=e.onClose;return{variables:{id:t.id,changes:a},onRequestFinished:function(){r({alertMsg:"Local criado alterado sucesso",alertType:"success",showAlert:!0}),o(),c()},onRequestError:function(e){r({alertMsg:"Erro ao alterar este local",alertType:"error",showAlert:!0}),n({validationErrors:Object(N.get)(e,"errors",{})})}}}}),Yl=Object(X.b)(Object(X.h)("isModalOpen","setIsModalOpen",!1),Ao((function(e){return e.location})),Object(X.e)({onClose:function(e){var t=e.resetFormData,a=e.setIsModalOpen;return function(){Y.hit("EditLocationModal - Closed"),t(),a(!1)}}}),Hl)(Vl),Ql=Object(d.memo)((function(e){var t=e.classes,a=e.setAlert,n=e.refetch,r=e.index,o=e.location,c=e.toggleActiveFetch,l=e.toggleActiveLoading,i=e.isActive,s=e.setIsActive,u=o||{},m=u.name,d=u.complement,p=u.address,g=u.city,f=u.state,h=d?"".concat(p,", ").concat(d):p,E=g&&f?"".concat(g,"/").concat(f):"";return b.a.createElement(fa.a,{className:r%2?t.bgWhite:t.bgGray},b.a.createElement(ha.a,{className:t.tableSmallCell},b.a.createElement("span",{className:t.cellText},m)),b.a.createElement(ha.a,{className:t.tableSmallCell},b.a.createElement("span",{className:t.cellText},h)),b.a.createElement(ha.a,{className:t.tableSmallCell},b.a.createElement("span",{className:t.cellText},E)),b.a.createElement(ha.a,{className:t.tableSmallCell},b.a.createElement(kr.a,{color:"primary",disabled:l,checked:i,onChange:function(){s(!i),c(!0)}})),b.a.createElement(ha.a,{className:t.tableSmallCell},b.a.createElement(Yl,{setAlert:a,onUpdated:n,location:o})))})),Gl=Xt(Pc.toggleActive,{name:"toggleActive",init:!1,options:function(e){var t=e.location,a=e.refetch,n=e.setAlert,r=e.isActive,o=e.setIsActive;return{variables:t.id,onRequestFinished:function(){a()},onRequestError:function(e){n({alertMsg:Object(N.get)(e,"error","Erro ao desabilitar este local")}),o(!r)}}}}),Jl=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{cellText:{color:"#313131",fontSize:14}})}),{withTheme:!0}),Object(X.h)("isActive","setIsActive",(function(e){var t=e.location;return Object(N.isEmpty)(t.deleted_at)})),Gl)(Ql),Kl=Object(d.memo)((function(e){var t=e.locationsData,a=e.locationsLoading,n=e.locationsFetch,r=e.setAlert,o=e.classes,c=Object(N.get)(t,"locations",[]);return b.a.createElement(pa.a,null,b.a.createElement(ga.a,null,b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:o.tableCell},"NOME"),b.a.createElement(ha.a,{className:o.tableCell},"ENDERE\xc7O"),b.a.createElement(ha.a,{className:o.tableCell},"CIDADE"),b.a.createElement(ha.a,{className:o.tableCell},"HABILITAR"),b.a.createElement(ha.a,{className:o.tableCell}))),b.a.createElement(va.a,null,a?b.a.createElement(fa.a,null,b.a.createElement(ha.a,{colSpan:5,align:"center"},b.a.createElement(be,null))):Object(N.size)(c)?c.map((function(e,t){return b.a.createElement(Jl,{key:e.id,setAlert:r,index:t,location:e,refetch:n})})):b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:o.empty,colSpan:5,align:"center"},"Nenhum local cadastrado"))))})),Xl=Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{empty:{backgroundColor:"#EEE"},tableCell:{fontSize:14}})}),{withTheme:!0})(Kl),Zl={validationErrors:{},name:"",address:"",neighborhood:"",city:"",state:"",zip_code:"",complement:""},$l=Object(d.memo)((function(e){var t=e.isModalOpen,a=e.setIsModalOpen,n=e.onClose,r=e.formData,o=e.setFormData,c=e.createLocationFetch,l=e.createLocationLoading;return b.a.createElement(b.a.Fragment,null,b.a.createElement(ue.a,{color:"primary",size:"large",variant:"contained",onClick:function(){Y.hit("NewLocationModal - Opened"),a(!0)}},"NOVO LOCAL"),t&&b.a.createElement(zl,{open:t,onClose:n,modalTitle:"Novo Local",formData:r,setFormData:o,onSubmit:function(){return c(!0)},isLoading:l}))})),ei=Xt(Pc.createLocation,{name:"createLocation",init:!1,options:function(e){var t=e.formData,a=e.setFormData,n=e.setAlert,r=e.onCreated,o=e.onClose;t.validationErrors;return{variables:Object(st.a)(t,["validationErrors"]),onRequestFinished:function(){n({alertMsg:"Local criado com sucesso",alertType:"success",showAlert:!0}),r(),o()},onRequestError:function(e){n({alertMsg:"Erro ao criar local",alertType:"error",showAlert:!0}),a({validationErrors:Object(N.get)(e,"errors",{})})}}}}),ti=Object(X.b)(Object(X.h)("isModalOpen","setIsModalOpen",!1),Object(X.h)("formData","setFormDataRaw",Zl),Object(X.e)({setFormData:function(e){var t=e.setFormDataRaw,a=e.formData;return function(e){t(Object(m.a)(Object(m.a)({},a),e))}}}),Object(X.e)({onClose:function(e){var t=e.setFormData,a=e.setIsModalOpen;return function(){Y.hit("NewLocationModal - Closed"),t(Zl),a(!1)}}}),ei)($l),ai=Object(d.memo)((function(e){var t=e.locationsData,a=e.locationsLoading,n=e.locationsFetch,r=e.classes,o=e.setAlert;return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:r.headerContainer},b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Locais (".concat(Object(N.get)(t,"meta.totalCount",0),")"))),b.a.createElement(ti,{setAlert:o,onCreated:n})),b.a.createElement(Wa.a,{className:r.tablePaper},b.a.createElement(Xl,{setAlert:o,locationsData:t,locationsLoading:a,locationsFetch:n})))})),ni=Xt(Pc.getLocations,{name:"locations",options:function(e){var t=e.setAlert;return{variables:{listInactive:!0,listAll:!0},onRequestFinished:function(e){var t=Object(N.reject)(Object(N.get)(e,"locations",[]),(function(e){return Object(N.get)(e,"deleted_at")}));F.setUserData(Object(N.set)(F.getUserData(),"locations",t))},onRequestError:function(){t({alertMsg:"Erro ao carregar dados do servidor",alertType:"error",showAlert:!0})}}}}),ri=Object(X.b)(_l,Ac({condition:function(e){return!Ba.includes(e.role)}}),Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:30,marginBottom:30}})}),{withTheme:!0}),ni)(ai),oi=a(390),ci=a.n(oi),li={encryptCreditCard:function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n,r,c,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cardNumber,n=t.cardHolderName,r=t.cardExpirationDate,c=t.cardCvv,e.next=3,ci.a.client.connect({encryption_key:P.pagarmeEncryptionKey});case 3:return l=e.sent,e.next=6,l.security.encrypt({card_number:a.replace(/\D+/g,""),card_holder_name:n,card_expiration_date:r.replace(/\D+/g,""),card_cvv:c});case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ii={list:function(){return q.get("/plans").then((function(e){return Ko.a.toCamelCase(e)}))}},si={list:function(){return q.get("/credit_cards").then((function(e){return Ko.a.toCamelCase(e)}))}},ui=function(e){if(null===e)return null;var t=/(\d{1,4})(?:-(\d{0,4}))?(?:-(\d{0,4}))?(?:-(\d{0,4}))?/.exec(e);if(!t)return t;var a=Object(N.filter)(t.slice(1),(function(e){return e}));return a.length<4&&4===Object(N.last)(a).length?"".concat(a.join("-"),"-"):a.join("-")},mi=Object(X.b)(d.memo,Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{changeCard:{cursor:"pointer",display:"flex",justifyContent:"flex-end",alignItems:"flex-end",textDecoration:"underline"},changeCardIcon:{paddingTop:5,textDecoration:"none"}})}),{withTheme:!0}))((function(e){var t=e.isLoading,a=e.currentCreditCard,n=e.onSetNewCreditCard,r=e.classes,o=e.setFormData,c=e.formData,l=c.cardHolderName,i=c.cardNumber,s=c.cardCvv,u=c.cardExpirationDate;return a?b.a.createElement(b.a.Fragment,null,b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Dados do cart\xe3o de cr\xe9dito")),b.a.createElement(Ln.a,{pt:2},b.a.createElement(Ve.a,{variant:"body1"},b.a.createElement("b",null,"Titular: "),a.holderName),b.a.createElement(Ve.a,{variant:"body1"},b.a.createElement("b",null,"Cart\xe3o: "),"****-****-****-".concat(a.lastDigits," (").concat(Object(N.capitalize)(a.brand),")")),b.a.createElement(Ve.a,{variant:"body1"},b.a.createElement("b",null,"Data de expira\xe7\xe3o: "),A()(a.expiration,"MM/YY").format("MM/YY"))),b.a.createElement("span",{className:r.changeCard,onClick:n},b.a.createElement(wr.a,{className:r.changeCardIcon}),"Mudar de cart\xe3o")):b.a.createElement(b.a.Fragment,null,b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Dados do cart\xe3o de cr\xe9dito")),b.a.createElement(se.a,{container:!0,alignItems:"center"},b.a.createElement(se.a,{item:!0,xs:12,sm:12},b.a.createElement(bt,{label:"Titular",placeholder:"Nome do t\xedtular",disabled:t,value:l,onChangeText:function(e){return o({cardHolderName:e})}})),b.a.createElement(se.a,{container:!0,alignItems:"center",spacing:1},b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(bt,{label:"N\xfamero",placeholder:"N\xfamero do cart\xe3o",disabled:t,value:i||"",onChangeText:function(e){return o({cardNumber:e})},maskFunction:ui})),b.a.createElement(se.a,{item:!0,xs:5,sm:3},b.a.createElement(pt,{label:"CVV",disabled:t,value:s,onChangeText:function(e){return o({cardCvv:e})},isInteger:!0,max:999})),b.a.createElement(se.a,{item:!0,xs:7,sm:3},b.a.createElement(bt,{placeholder:"MM/AA",label:"Data de expira\xe7\xe3o",disabled:t,value:u||"",onChangeText:function(e){return o({cardExpirationDate:e})},maskFunction:function(e){return function(e){var t=e.oldValue,a=e.newValue;if(null===a)return null;var n=/(\d{1,2})(?:\/?(\d{0,2}))?/.exec(a);if(!n)return n;var r=Object(N.filter)(n.slice(1),(function(e){return e})),o=Object(Et.a)(r,2),c=o[0],l=o[1];return Number(c)>12?t:1===c.length&&Number(c)>1?"0".concat(c,"/"):2!==c.length?c:"".concat(c,"/").concat(l||"")}({newValue:e,oldValue:u})}})))))})),di=Object(X.b)(d.memo)((function(e){var t=e.isLoading,a=e.setFormData,n=e.formData,r=n.cnpj,o=n.addressZipcode,c=n.addressNumber,l=n.addressComplementary,i=n.phone;return b.a.createElement(b.a.Fragment,null,b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Dados do cliente")),b.a.createElement(se.a,{container:!0,alignItems:"center"},b.a.createElement(se.a,{container:!0,alignItems:"center",spacing:1},b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(pt,{label:"CNPJ",placeholder:"CNPJ da empresa (Somente n\xfameros)",disabled:t,value:r,onChangeText:function(e){return a({cnpj:e})},max:99999999999999})),b.a.createElement(se.a,{item:!0,xs:8,sm:6},b.a.createElement(Ct,{label:"Telefone",placeholder:"Contato da empresa",disabled:t,value:i,onChangeText:function(e){return a({phone:e})}}))),b.a.createElement(se.a,{container:!0,alignItems:"center",spacing:1},b.a.createElement(se.a,{item:!0,xs:8,sm:5},b.a.createElement(vt,{label:"CEP",placeholder:"CEP da empresa",disabled:t,value:o,onChangeText:function(e){return a({addressZipcode:e})}})),b.a.createElement(se.a,{item:!0,xs:6,sm:3},b.a.createElement(pt,{label:"N\xfamero",placeholder:"N\xfamero logradouro do CEP",disabled:t,value:c,onChangeText:function(e){return a({addressNumber:e})}})),b.a.createElement(se.a,{item:!0,xs:6,sm:4},b.a.createElement(bt,{label:"Complemento",placeholder:"Complemento do CEP",disabled:t,value:l,onChangeText:function(e){return a({addressComplementary:e})}})))))})),bi={toCurrency:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BRL",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pt-BR",n={style:"currency",currency:t};return new Intl.NumberFormat(a,n).format(e)}},pi=function(e){var t=e.item,a=e.classes;return b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:a.tableMediumCell},b.a.createElement(Ve.a,{variant:"body1"},t.title),Object(N.get)(t,"description","").split("\n").map((function(e){return b.a.createElement("div",{key:e},b.a.createElement(Ve.a,{variant:"body1"},b.a.createElement("small",null,e)))}))),b.a.createElement(ha.a,{className:a.priceCell},b.a.createElement(Ve.a,{variant:"h6",component:"span"},b.a.createElement("b",null,bi.toCurrency(t.value)))))},gi=function(e){var t=e.item,a=e.disabled,n=e.classes,r=e.onAmountChange;return b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:n.tableMediumCell},b.a.createElement(Ve.a,{variant:"body1"},t.title,"\xa0-\xa0",b.a.createElement("b",null,bi.toCurrency(t.unitPrice))),Object(N.get)(t,"description","").split("\n").map((function(e){return b.a.createElement("div",{key:e},b.a.createElement(Ve.a,{variant:"body1"},b.a.createElement("small",null,e)))}))),b.a.createElement(ha.a,{className:n.numberFieldCell},!t.disableAmount&&b.a.createElement(ht,{value:t.amount,disabled:a,onChangeText:r,min:1})))},fi=Object(X.b)(d.memo,Object(Z.a)((function(e){var t=re(e);return Object(m.a)(Object(m.a)({},t),{},{tableSmallCell:Object(m.a)(Object(m.a)({},t.tableSmallCell),{},{borderBottom:"none",padding:e.spacing(1),paddingLeft:0}),tableMediumCell:Object(m.a)(Object(m.a)({},t.tableMediumCell),{},{borderBottom:"none",padding:e.spacing(1),paddingLeft:0}),priceCell:Object(m.a)(Object(m.a)({},t.tableSmallCell),{},{borderBottom:"none",padding:e.spacing(1),paddingLeft:0,textAlign:"right"}),numberFieldCell:Object(m.a)(Object(m.a)({},t.tableSmallCell),{},{borderBottom:"none",padding:e.spacing(1),paddingLeft:0,verticalAlign:"text-top",textAlign:"right"})})}),{withTheme:!0}),Object(X.e)({setItemAmount:function(e){var t=e.formData.items,a=e.setFormData;return function(e,n){var r=t.slice(0,e),o=Object(m.a)(Object(m.a)({},t[e]),{},{amount:n}),c=t.slice(e+1,t.length-1);a({items:r.concat(o).concat(c)})}}}))((function(e){var t=e.classes,a=e.isDowngrade,n=e.formData,r=n.items,o=n.refundItems,c=e.nextCharge,l=e.disabled,i=e.setItemAmount,s=a?0:Object(N.max)([0,Object(N.sumBy)(r,(function(e){return e.unitPrice*e.amount}))-Object(N.sumBy)(o,(function(e){return e.value}))]);return b.a.createElement(b.a.Fragment,null,b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Sum\xe1rio")),b.a.createElement(pa.a,null,b.a.createElement(va.a,null,Object(N.map)(r,(function(e,a){return b.a.createElement(gi,{key:"#".concat(a).concat(e.title),item:e,disabled:l,classes:t,onAmountChange:function(e){return i(a,e)}})})),!Object(N.isEmpty)(c)&&b.a.createElement(pi,{item:c,classes:t}),!a&&Object(N.map)(o,(function(e,a){return b.a.createElement(pi,{key:"#".concat(a).concat(e.title),item:{title:e.title,value:-1*e.value||0},classes:t})})),b.a.createElement(pi,{item:{title:"Valor cobrado hoje",description:a?"* Ao reduzir lugares, o plano ser\xe1 atualizado na pr\xf3xima cobran\xe7a.":"",value:s},classes:t}))))})),hi=P.isProduction?30:1,Ei=function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.currentCreditCard,n=t.formFields,e.prev=1,!Object(N.isEmpty)(a)){e.next=8;break}return e.next=5,li.encryptCreditCard(n);case 5:r=e.sent,e.next=9;break;case 8:c=Object(N.get)(a,"id");case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),r=null;case 15:return e.abrupt("return",{creditCardHash:r,creditCardId:c});case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),vi=Xt((function(){return Promise.all([ii.list().catch((function(e){return e})),si.list().catch((function(e){return e})),ec.get().catch((function(e){return e}))])}),{name:"preload",props:function(e){var t=e.preloadData;return t?{plan:Object(N.first)(Object(N.get)(Object(N.find)(t,(function(e){return e.plans})),"plans")),currentSubscription:Object(N.get)(Object(N.find)(t,(function(e){return e.subscription})),"subscription")}:{}},options:function(e){var t=e.setAlert,a=e.setCurrentCreditCard;return{onRequestFinished:function(e){var t=Object(N.first)(Object(N.get)(Object(N.find)(e,(function(e){return e.creditCards})),"creditCards"));a(t)},onRequestError:function(e){console.error(e),t({alertMsg:"Erro ao carregar informa\xe7\xf5es sobre assinar plano",alertType:"error",showAlert:!0})}}}}),Oi=Xt(ec.create,{name:"create",init:!1,options:function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n,r,l,i,s,u,d,b,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.formData,n=t.setFormData,r=t.resetFormData,l=t.currentCreditCard,i=t.setAlert,s=t.plan,u=t.history,a.validationErrors,d=Object(st.a)(a,["validationErrors"]),b=Object(N.get)(Object(N.first)(d.items),"amount"),e.next=5,Ei({formFields:d,currentCreditCard:l});case 5:return p=e.sent,e.abrupt("return",{variables:Object(m.a)(Object(m.a)(Object(m.a)({},a),p),{},{planName:s.planName,planSeats:b}),onRequestFinished:function(){var e=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({alertMsg:"Assinatura de plano efetuada com sucesso.",alertType:"success",showAlert:!0}),r(),e.next=4,U.getViewer();case 4:t=e.sent,F.setUserData(Object(N.get)(t,"member")),setTimeout((function(){u.push("/configuracoes/meu-plano")}),2e3);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRequestError:function(e){i({alertMsg:Object(N.get)(e,"error","Erro ao assinar plano, fique tranquilo, nenhuma cobran\xe7a foi efetuada."),alertType:"error",showAlert:!0}),n({validationErrors:Object(N.get)(e,"errors",{})})}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),ji=Xt(ec.update,{name:"update",init:!1,options:function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n,r,l,i,s,u,d,b,p,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentSubscription,n=t.currentCreditCard,r=t.setAlert,l=t.formData,i=t.setFormData,s=t.resetFormData,u=t.plan,d=t.history,l.validationErrors,b=Object(st.a)(l,["validationErrors"]),p=Object(N.get)(Object(N.first)(b.items),"amount"),e.next=5,Ei({formFields:b,currentCreditCard:n});case 5:return g=e.sent,e.abrupt("return",{variables:Object(m.a)({id:a.id,planName:u.planName,planSeats:p},g),onRequestFinished:function(){var e=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({alertMsg:"Assinatura de plano atualizada com sucesso.",alertType:"success",showAlert:!0}),s(),e.next=4,U.getViewer();case 4:t=e.sent,F.setUserData(Object(N.get)(t,"member")),setTimeout((function(){d.push("/configuracoes/meu-plano")}),2e3);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRequestError:function(e){r({alertMsg:Object(N.get)(e,"error","Erro ao atualizar plano, fique tranquilo, nenhuma cobran\xe7a foi efetuada."),alertType:"error",showAlert:!0}),i({validationErrors:Object(N.get)(e,"errors",{})})}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Ci=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)({},re(e))}),{withTheme:!0}),xc,Ac({condition:function(e){return!Ba.includes(e.role)}}),h.g,d.memo,Object(X.h)("currentCreditCard","setCurrentCreditCard",null),vi,Object(X.f)((function(e){var t=e.currentSubscription,a=Object(N.get)(t,"periodEnd");return{hasActiveSubscription:a&&new Date(a)>new Date}})),Ao((function(e){var t=Object(N.get)(e,"viewer.company"),a=Object(N.get)(e,"plan"),n=Object(N.get)(e,"currentSubscription"),r=Object(N.get)(e,"hasActiveSubscription"),o=Object(N.get)(n,"plan.seats")||Object(N.get)(t,"total_paid_users")||1,c=r?function(e){var t=e.periodStart,a=e.periodEnd,n=e.currentPrice,r=A()(a).endOf("day"),o=A()(t).endOf("day"),c=r.diff(o,"days");return A()(r).diff(A()(),"days")/c*n}(n):0,l=c?[{title:"Valor de desconto do per\xedodo atual",value:c}]:[];return{cardHolderName:"",cardNumber:"",cardCvv:null,cardExpirationDate:"",cnpj:"",addressZipcode:"",addressNumber:"",addressComplementary:"",phone:"",items:[{title:Object(N.get)(a,"planName"),description:"Acesso a ferramenta de gest\xe3o das solicita\xe7\xf5es dos colaboradores de forma centralizada. Seus colaboradores podem abrir tickets para voc\xea e seu time facilmente, seja no computador, celular, QR code ou integrado ao Slack. Tenha mais visibilidade e produtividade na gest\xe3o das suas tarefas.",unitPrice:Object(N.get)(a,"planPrice"),amount:o}],refundItems:l}})),Object(X.f)((function(e){var t=e.currentSubscription,a=e.hasActiveSubscription,n=e.formData,r=Object(N.first)(n.items),o=Object(N.get)(t,"plan.seats"),c=Object(N.get)(r,"amount"),l=c<o,i=a?A()(t.periodEnd):A()().add(hi,"days");return{isDowngrade:l,nextCharge:a?{title:"Pr\xf3xima cobran\xe7a em ".concat(i.format("DD/MM/YYYY")),value:r.unitPrice*c}:null}})),Oi,ji,Object(X.e)({onSubmit:function(e){var t=e.createFetch,a=e.updateFetch,n=e.hasActiveSubscription;return function(){return n?a(!0):t(!0)}}}))((function(e){var t=e.formData,a=e.setFormData,n=e.onSubmit,r=e.createLoading,o=e.updateLoading,c=e.preloadError,l=e.preloadLoading,i=e.currentCreditCard,s=e.setCurrentCreditCard,u=e.nextCharge,m=e.isDowngrade,d=e.hasActiveSubscription,p=e.history,g=e.plan,f=e.classes;if(l)return b.a.createElement(be,null);var h=o||r,E=h||c;return Object(N.isEmpty)(g)?b.a.createElement("div",{className:f.centerHeaderView},b.a.createElement(ee.a,{className:f.emptyHeaderIcon}),b.a.createElement("b",{className:f.emptyHeaderTitle},"Sistema de assinatura esta temporariamente fora de servi\xe7o")):b.a.createElement(se.a,{item:!0,xs:12,sm:9},b.a.createElement(Ve.a,{variant:"h5"},b.a.createElement("b",null,"Assinar plano")),b.a.createElement(Ln.a,{mt:3,mb:2},b.a.createElement(mi,{currentCreditCard:i,formData:t,setFormData:a,isLoading:h,onSetNewCreditCard:function(){return s(null)}}),!d&&b.a.createElement(Ln.a,{mt:2},b.a.createElement(di,{formData:t,setFormData:a,disabled:h})),b.a.createElement(Ln.a,{mt:2},b.a.createElement(fi,{formData:t,setFormData:a,disabled:h,nextCharge:u,isDowngrade:m}))),b.a.createElement(se.a,{justify:"flex-end",container:!0,item:!0,xs:12},b.a.createElement(ue.a,{color:"default",size:"large",onClick:function(){return p.push("/configuracoes/meu-plano")}},"Voltar"),"\xa0\xa0\xa0",b.a.createElement(ue.a,{color:"primary",size:"large",variant:"contained",onClick:n,disabled:E},d?"Atualizar Plano":"Assinar Plano")))})),yi=Object(X.b)(d.memo,Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{boxItemText:{margin:e.spacing(2)},boxPad:{padding:e.spacing(2)},borderRight:{borderWidth:"thin",borderRight:"solid",borderRightColor:e.palette.grey[300]}})}),{withTheme:!0}),h.g)((function(e){var t=e.classes,a=e.history;return b.a.createElement(Wa.a,{className:t.tablePaper},b.a.createElement(se.a,{container:!0,justify:"center",alignItems:"flex-start"},b.a.createElement(se.a,{item:!0,xs:12,sm:!0,align:"center",className:t.boxPad},b.a.createElement(Ve.a,{variant:"h6"},"Plano atual"),b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Essencial (Gratuito)")),b.a.createElement(ue.a,{variant:"contained",color:"primary",size:"large",className:t.boxItemText,onClick:function(){return a.push("/assinar-plano")}},"ASSINAR PLANO PROFISSIONAL"))))})),ki=Xt(ec.cancel,{name:"cancel",init:!1,options:function(e){var t=e.setAlert,a=e.subscription,n=e.onCancelSuccess;return{variables:a.id,onRequestFinished:function(){t({alertMsg:"Cancelamento de assinatura foi agendado com sucesso",alertType:"success",showAlert:!0}),n&&n()},onRequestError:function(e){t({alertMsg:Object(N.get)(e,"error","N\xe3o foi poss\xedvel cancelar sua assinatura."),alertType:"error",showAlert:!0})}}}}),Ai=Object(X.b)(d.memo,ki,Object(X.e)({onClick:function(e){var t=e.cancelFetch;return function(){window.confirm("Deseja mesmo cancelar sua assinatura?")&&t(!0)}}}))((function(e){var t=e.className,a=e.onClick;return b.a.createElement(ue.a,{className:t,onClick:a},"CANCELAR PLANO")})),wi=Xt(ec.undoCancelation,{name:"undocancelation",init:!1,options:function(e){var t=e.setAlert,a=e.onSuccess;return{onRequestFinished:function(){t({alertMsg:"Sua assinatura foi reativada sucesso.",alertType:"success",showAlert:!0}),a&&a()},onRequestError:function(e){console.error(e),t({alertMsg:Object(N.get)(e,"error","N\xe3o foi poss\xedvel reativar sua assinatura."),alertType:"error",showAlert:!0})}}}}),Ti=Object(X.b)(d.memo,wi,Object(X.e)({onClick:function(e){var t=e.undocancelationFetch;return function(){return t(!0)}}}))((function(e){var t=e.className,a=e.onClick;return b.a.createElement(ue.a,{variant:"outlined",className:t,onClick:a},"REATIVAR PLANO")})),xi=Object(X.b)(d.memo,Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{boxItemText:{margin:e.spacing(2)},updateSeats:{marginTop:-3},centerBox:{borderWidth:"thin",borderLeft:"solid",borderLeftColor:e.palette.grey[300],borderRight:"solid",borderRightColor:e.palette.grey[300],marginBottom:20}})}),{withTheme:!0}),Wo,h.g)((function(e){var t=e.classes,a=e.setAlert,n=e.viewer,r=e.subscription,o=e.refetch,c=e.history;if(!n||!r)return null;var l=Object(N.get)(r,"plan",{}),i=Object(N.get)(n,"company.total_paid_users",0);return b.a.createElement(Wa.a,{className:t.tablePaper},b.a.createElement(se.a,{container:!0,justify:"center",alignItems:"flex-start"},b.a.createElement(se.a,{item:!0,xs:12,sm:!0,align:"center"},b.a.createElement(Ve.a,{variant:"h6",className:t.boxItemText},"Administradores"),b.a.createElement(Ve.a,{variant:"h5",className:t.boxItemText},b.a.createElement("b",null,"".concat(i,"/").concat(l.seats))),b.a.createElement(ue.a,{variant:"outlined",className:t.boxItemText,onClick:function(){return c.push("/configuracoes/usuarios")}},"GERENCIAR USU\xc1RIOS")),b.a.createElement(se.a,{item:!0,xs:12,sm:!0,align:"center",className:t.centerBox},b.a.createElement(Ve.a,{variant:"h6",className:t.boxItemText},"Valor da assinatura"),b.a.createElement("div",{className:t.boxItemText},b.a.createElement(Ve.a,{variant:"h5"},b.a.createElement("b",null,bi.toCurrency(r.currentPrice))),b.a.createElement("small",null,r.willCancelAt?"Termina em: ".concat(A()(r.willCancelAt).format("DD/MM/YYYY")):"Pr\xf3xima cobran\xe7a: ".concat(A()(r.periodEnd).format("DD/MM/YYYY")))),!r.willCancelAt&&b.a.createElement(ue.a,{variant:"outlined",className:t.updateSeats,onClick:function(){return c.push("/assinar-plano")}},"ADICIONAR LUGARES")),b.a.createElement(se.a,{item:!0,xs:12,sm:!0,align:"center"},b.a.createElement(Ve.a,{variant:"h6",className:t.boxItemText},"Plano atual"),b.a.createElement(Ve.a,{variant:"h5",className:t.boxItemText},b.a.createElement("b",null,l.name)),r.willCancelAt?b.a.createElement(Ti,{setAlert:a,className:t.boxItemText,subscription:r,onSuccess:o}):b.a.createElement(Ai,{setAlert:a,className:t.boxItemText,subscription:r,onCancelSuccess:o}))))})),Si={getInvoices:function(){return q.get("/invoices")}},Ni=[{label:"Boleto",key:"BOLETO"},{label:"Cart\xe3o de cr\xe9dito",key:"CREDIT_CARD"}],Di=[{label:"Processando",value:"PROCESSING"},{label:"Autorizado",value:"AUTHORIZED"},{label:"Estornado",value:"REFUNDED"},{label:"Aguardando Pagamento",value:"WAITING_PAYMENT"},{label:"Aguardando Estorno",value:"PENDING_REFUND"},{label:"Pago",value:"PAID"},{label:"Recusado",value:"REFUSED"}],Mi=Object(X.b)(d.memo,Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{cellText:{color:"#313131",fontSize:14},userName:{marginRight:5,marginLeft:10},avatarNameContainer:{display:"flex",alignItems:"center"},smallScreenResendButton:{marginTop:10}})}),{withTheme:!0}))((function(e){var t=e.index,a=e.classes,n=e.invoice,r=Object(N.get)(Object(N.find)(Ni,(function(e){return e.key===n.payment_type})),"label"),o=Object(N.get)(Object(N.find)(Di,(function(e){return e.value===n.status})),"label"),c=A()(n.created_at).format("DD/MM/YYYY");return b.a.createElement(fa.a,{className:t%2?a.bgWhite:a.bgGray},b.a.createElement(ha.a,{className:a.tableSmallCell},b.a.createElement("span",{className:a.cellText},n.description)),b.a.createElement(ha.a,{className:a.tableSmallCell},b.a.createElement("span",{className:a.cellText},bi.toCurrency(n.amount))),b.a.createElement(ha.a,{className:a.tableSmallCell},b.a.createElement("span",{className:"".concat(a.cellText)},r)),b.a.createElement(ha.a,{className:a.tableSmallCell},n.boleto_link&&b.a.createElement("a",{href:n.boleto_link,className:a.cellText,target:"_blank",rel:"noopener noreferrer"},"Ver boleto")),b.a.createElement(ha.a,{className:a.tableSmallCell},b.a.createElement("span",{className:a.cellText},o)),b.a.createElement(ha.a,{className:a.tableSmallCell},b.a.createElement("span",{className:a.cellText},c)))})),Ii=Object(d.memo)((function(e){var t=e.invoicesData,a=e.invoicesLoading,n=e.classes,r=e.setAlert,o=Object(N.get)(t,"invoices");return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:n.container},b.a.createElement("div",{className:n.headerView},b.a.createElement("aside",null,b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Pagamentos (".concat(Object(N.size)(o),")")))))),b.a.createElement("div",{className:n.container},b.a.createElement(Wa.a,{className:n.tablePaper},b.a.createElement(pa.a,null,b.a.createElement(ga.a,null,b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:n.tableSmallCell},"DESCRI\xc7\xc3O"),b.a.createElement(ha.a,{className:n.tableSmallCell},"VALOR"),b.a.createElement(ha.a,{className:n.tableSmallCell},"FORMA DE PGTO"),b.a.createElement(ha.a,{className:n.tableSmallCell},"LINK BOLETO"),b.a.createElement(ha.a,{className:n.tableSmallCell},"STATUS"),b.a.createElement(ha.a,{className:n.tableSmallCell},"DATA"))),b.a.createElement(va.a,null,a?b.a.createElement(fa.a,null,b.a.createElement(ha.a,{colSpan:6,align:"center"},b.a.createElement(be,null))):Object(N.size)(o)?o.map((function(e,t){return b.a.createElement(Mi,{setAlert:r,index:t,key:e.id,invoice:e,loading:a})})):b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:n.empty,colSpan:6,align:"center"},"Nenhum pagamento realizado")))))))})),Fi=Xt(Si.getInvoices,{name:"invoices",options:function(e){var t=e.setAlert;return{onRequestError:function(){t({alertMsg:"Erro ao carregar hist\xf3rico de pagamentos",alertType:"error",showAlert:!0})}}}}),Ri=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{container:{marginBottom:30,marginTop:30},empty:{backgroundColor:"#EEE"},tableCell:{fontSize:14},titleTableCell:{fontSize:20},headerButtonAndActiveFilter:{display:"flex",flexDirection:"row",alignItems:"center"},activeFilter:{marginRight:10}})}),{withTheme:!0}),Ac({condition:function(e){return!Ba.includes(e.role)}}),Fi)(Ii),Li=Xt(ec.get,{name:"subscription",options:function(e){var t=e.setAlert;return{onRequestError:function(){t({alertMsg:"Erro ao carregar dados do servidor",alertType:"error",showAlert:!0})}}}}),Bi=Object(X.b)(d.memo,Ac({condition:function(e){return!Ba.includes(e.role)}}),Wo,Object(X.h)("loading","setLoading",!0),_l,Li)((function(e){var t,a=e.viewer,n=e.setAlert,r=e.subscriptionData,o=e.subscriptionLoading,c=e.subscriptionError,l=e.subscriptionFetch,i=Object(N.get)(a,"company.trial_expiration"),s=Object(N.get)(r,"subscription");if(o)return b.a.createElement(be,null);Object(N.isEmpty)(c)&&(t=s&&new Date(s.periodEnd)>new Date?b.a.createElement(xi,{setAlert:n,subscription:s,refetch:function(){return l(!0)}}):b.a.createElement(yi,{setAlert:n}));return b.a.createElement(b.a.Fragment,null,b.a.createElement(mo,{trialExpiration:i,willDowngradeAt:Object(N.get)(s,"willDowngradeAt"),willCancelAt:Object(N.get)(s,"willCancelAt")}),b.a.createElement(Ln.a,{mb:4,mt:2},t,b.a.createElement(Ri,{setAlert:n})))})),Pi={toggleNewTicket:function(){return q.put("/notification_settings/toggle_new_ticket",{}).then((function(e){return Ko.a.toCamelCase(e)})).catch((function(e){throw e.errors&&(e.errors=Ko.a.toCamelCase(e.errors)),e}))},toggleTicketUpdates:function(){return q.put("/notification_settings/toggle_ticket_updates",{}).then((function(e){return Ko.a.toCamelCase(e)})).catch((function(e){throw e.errors&&(e.errors=Ko.a.toCamelCase(e.errors)),e}))}},_i=Xt(Pi.toggleNewTicket,{init:!1,props:function(e){return e.data||{}},options:function(e){var t=e.setAlert,a=e.viewer;return{onRequestFinished:function(){F.setUserData(Object(m.a)(Object(m.a)({},a),{},{notify_new_ticket:!a.notify_new_ticket}))},onRequestError:function(e){var a=e.errors?Object.values(e.errors).flat().join():"Erro ao comunicar com servidor";t({alertMsg:a,alertType:"error",showAlert:!0})}}}}),qi=Object(X.b)(d.memo,Wo,_i,Object(X.e)({onSubmit:function(e){var t=e.fetch;return function(){return t(!0)}}}))((function(e){var t=e.viewer,a=e.loading,n=e.onSubmit;return b.a.createElement("div",null,b.a.createElement(kr.a,{color:"primary",disabled:a,checked:t.notify_new_ticket,onChange:n}),b.a.createElement(Ve.a,{variant:"body1",component:"span"},"Receber notifica\xe7\xf5es de novos tickets abertos"))})),Ui=Xt(Pi.toggleTicketUpdates,{init:!1,props:function(e){return e.data||{}},options:function(e){var t=e.setAlert,a=e.viewer;return{onRequestFinished:function(){F.setUserData(Object(m.a)(Object(m.a)({},a),{},{notify_ticket_updates:!a.notify_ticket_updates}))},onRequestError:function(e){var a=e.errors?Object.values(e.errors).flat().join():"Erro ao comunicar com servidor";t({alertMsg:a,alertType:"error",showAlert:!0})}}}}),Wi=Object(X.b)(d.memo,Wo,Ui,Object(X.e)({onSubmit:function(e){var t=e.fetch;return function(){return t(!0)}}}))((function(e){var t=e.viewer,a=e.loading,n=e.onSubmit;return b.a.createElement("div",null,b.a.createElement(kr.a,{color:"primary",disabled:a,checked:t.notify_ticket_updates,onChange:n}),b.a.createElement(Ve.a,{variant:"body1",component:"span"},"Receber notifica\xe7\xf5es de atualiza\xe7\xf5es de tickets que fa\xe7o parte"))})),zi=Object(X.b)(d.memo,_l,Object(Z.a)(re,{withTheme:!0}),Wo)((function(e){var t=e.classes,a=e.setAlert,n=e.viewer;return b.a.createElement(Ln.a,{mt:5},b.a.createElement(Wa.a,{className:t.paper},"MEMBER"!==n.role&&b.a.createElement(qi,{setAlert:a}),b.a.createElement(Wi,{setAlert:a})))})),Vi=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=e.updateMemberFetch,o=e.updateMemberLoading,c=e.errors,l=e.email,i=e.name,s=e.lastname,u=e.setName,m=e.setLastname,d=e.jobRole,p=e.setJobRole,g=t.showAlert,f=t.alertMsg,h=t.alertType,E=null;g&&(E=b.a.createElement(at,{message:f,type:h,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var O=o;return b.a.createElement("div",{className:n.root},b.a.createElement(hn,{alertBox:E}),b.a.createElement("section",null,b.a.createElement("div",{className:n.container},b.a.createElement("div",{className:n.headerView},b.a.createElement("aside",null,b.a.createElement(Ve.a,{variant:"h5"},b.a.createElement("b",null,"Configura\xe7\xf5es"))))),b.a.createElement("div",{className:n.container},b.a.createElement(wn,null)),b.a.createElement("br",null),b.a.createElement("div",{className:n.container},b.a.createElement(Wa.a,{className:n.paper},b.a.createElement(se.a,{container:!0,item:!0,xs:12,sm:6,md:4},b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(bt,{errors:v()(c,"name",[]),label:"Nome",className:n.input,disabled:O,value:i,onChange:function(e){return u(e.target.value)}})),b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(bt,{errors:v()(c,"lastname",[]),label:"Sobrenome",className:n.input,disabled:O,value:s,onChange:function(e){return m(e.target.value)}})),b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(bt,{disabled:!0,label:"Email",className:n.input,value:l})),b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(bt,{errors:v()(c,"jobRole",[]),label:"Departamento",className:n.input,value:d,disabled:O,onChange:function(e){return p(e.target.value)}})),b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement("div",{className:n.actions},b.a.createElement(ue.a,{onClick:function(){return r(!0)},size:"large",color:"primary",variant:"contained",disabled:O},"Atualizar"))))))))})),Hi=Xt(U.updateMember,{name:"updateMember",init:!1,options:function(e){var t=e.name,a=e.lastname,n=e.jobRole,r=e.setAlert,l=e.setName,i=e.setLastname,s=e.setJobRole,u=e.setErrors;return{variables:{name:t,lastname:a,jobRole:n},onRequestFinished:function(){var e=Object(c.a)(o.a.mark((function e(){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.getViewer();case 3:c=e.sent,F.setUserData(v()(c,"member")),l(t),i(a),s(n),r({alertMsg:"Perfil atualizado com sucesso",alertType:"success",showAlert:!0}),u({}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r({alertMsg:"Erro ao atualizar perfil",alertType:"error",showAlert:!0});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),onRequestError:function(e){u(v()(e,"errors",{})),r({alertMsg:"Erro ao atualizar perfil",alertType:"error",showAlert:!0})}}}}),Yi=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{input:{marginBottom:0}})}),{withTheme:!0}),h.g,Object(X.h)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(X.h)("disabled","setDisabled",!1),Object(X.h)("name","setName",""),Object(X.h)("lastname","setLastname",""),Object(X.h)("email","setEmail",""),Object(X.h)("jobRole","setJobRole",""),Object(X.h)("errors","setErrors",{}),Hi,Object(X.c)({componentDidMount:function(){var e=this.props,t=e.setName,a=e.setLastname,n=e.setEmail,r=e.setJobRole,o=F.getUserData();t(v()(o,"name")),a(v()(o,"lastname")),n(v()(o,"email")),r(v()(o,"job_role"))}}))(Vi),Qi=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=e.password,o=e.errors,c=e.confirmPassword,l=e.setPassword,i=e.setConfirmPassword,s=e.updateMemberFetch,u=e.updateMemberLoading,m=t.showAlert,d=t.alertMsg,p=t.alertType,g=null;m&&(g=b.a.createElement(at,{message:d,type:p,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var f=u;return b.a.createElement("div",{className:n.root},b.a.createElement(hn,{alertBox:g}),b.a.createElement("section",null,b.a.createElement("div",{className:n.container},b.a.createElement("div",{className:n.headerView},b.a.createElement("aside",null,b.a.createElement(Ve.a,{variant:"h5"},b.a.createElement("b",null,"Configura\xe7\xf5es"))))),b.a.createElement("div",{className:n.container},b.a.createElement(wn,null)),b.a.createElement("br",null),b.a.createElement("div",{className:n.container},b.a.createElement(Wa.a,{className:n.paper},b.a.createElement(se.a,{container:!0,item:!0,xs:12,sm:6,md:4},b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(bt,{errors:v()(o,"password",[]),label:"Nova senha",type:"password",className:n.input,disabled:f,value:r,onChange:function(e){return l(e.target.value)}})),b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(bt,{label:"Confirmar nova senha",type:"password",className:n.input,disabled:f,value:c,onChange:function(e){return i(e.target.value)}})),b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement("div",{className:n.actions},b.a.createElement(ue.a,{onClick:function(){r===c?s(!0):a({alertMsg:"As senhas est\xe3o diferentes",alertType:"error",showAlert:!0})},size:"large",color:"primary",variant:"contained",disabled:f},"Atualizar"))))))))})),Gi=Xt(U.updateMemberPassword,{name:"updateMember",init:!1,options:function(e){var t=e.password,a=e.setAlert,n=e.setPassword,r=e.setConfirmPassword,o=e.setErrors;return{variables:{password:t},onRequestFinished:function(){a({alertMsg:"Perfil atualizado com sucesso",alertType:"success",showAlert:!0}),n(""),r(""),o({})},onRequestError:function(e){o(v()(e,"errors",{})),a({alertMsg:"Erro ao atualizar perfil",alertType:"error",showAlert:!0})}}}}),Ji=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{input:{marginBottom:0}})}),{withTheme:!0}),Object(X.h)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(X.h)("password","setPassword",""),Object(X.h)("confirmPassword","setConfirmPassword",""),Object(X.h)("errors","setErrors",{}),Gi)(Qi),Ki=function(e){return Object(m.a)({},re(e))},Xi=Xt(Tr.getAssignables,{name:"assignables",props:function(e){var t=e.assignablesData;return{assignables:Object(N.get)(t,"members",[])}}}),Zi=Xt(Xo.createCategory,{name:"create",init:!1,options:function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n,r,c,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.formData,n=t.setFormData,r=t.resetFormData,c=t.setAlert,l=t.onClose,i=t.refetch,e.abrupt("return",{variables:a.changedFields,onRequestFinished:function(){Y.hit("TicketCategory - Created"),r(),i(!0),c({alertMsg:"Categoria criada com sucesso",alertType:"success",showAlert:!0}),l()},onRequestError:function(e){n({validationErrors:Object(N.get)(e,"errors",{})}),c({alertMsg:"Erro ao criar categoria",alertType:"error",showAlert:!0})}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),$i=Xt(Xo.updateCategory,{name:"update",init:!1,options:function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n,r,c,l,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.formData,n=t.setFormData,r=t.resetFormData,c=t.setAlert,l=t.onClose,i=t.refetch,s=t.ticketCategory,e.abrupt("return",{variables:Object(m.a)(Object(m.a)({},a.changedFields),{},{ticketFormQuestions:a.ticketFormQuestions,id:s.id}),onRequestFinished:function(){Y.hit("TicketCategory - Updated"),r(),i(!0),c({alertMsg:"Categoria atualizada com sucesso",alertType:"success",showAlert:!0}),l()},onRequestError:function(e){n({validationErrors:Object(N.get)(e,"errors",{})}),c({alertMsg:"Erro ao atualizar categoria",alertType:"error",showAlert:!0})}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),es=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},Ki(e)),{},{actions:{margin:15,marginBottom:20},toggleRequired:{marginTop:20,marginLeft:20},content:{marginTop:-20,overflowX:"hidden"},dialogMemberForm:{maxWidth:"50rem"},deleteVisitorButton:{fontWeight:"bold",backgroundColor:"#EE3C3C",color:"#FFF","&:hover":{backgroundColor:"#EE3C3C"},maxWidth:"40px",maxHeight:"40px",minWidth:"40px",minHeight:"40px",marginTop:"5px",marginLeft:"10px"}})}),{withTheme:!0}),d.memo,Ao((function(e){return e.ticketCategory?e.ticketCategory:{title:"",assigneeIds:[],deadlineInDays:"",ticketFormQuestions:[]}})),Object(X.e)({onClose:function(e){var t=e.onClose,a=e.resetFormData;return function(){a(),t()}}}),Xi,Zi,$i,Object(X.f)((function(e){var t=e.formData,a=e.assignablesLoading,n=e.createLoading,r=e.updateLoading,o=e.ticketCategory,c=a||n||r;return{loading:c,disableNextButton:c||Object(N.isEmpty)(t.title),isNew:!o}})),Object(X.e)({onSubmit:function(e){var t=e.createFetch,a=e.updateFetch,n=e.ticketCategory;return function(){return n?a(!0):t(!0)}},onAddFormQuestion:function(e){var t=e.setFormData,a=e.formData.ticketFormQuestions;return function(){var e={question:"",fieldType:"TEXT_FIELD",options:"",required:!1};t({ticketFormQuestions:Object(N.concat)(a,e)})}},onRemoveFormQuestion:function(e){var t=e.setFormData,a=e.formData.ticketFormQuestions;return function(e){a.splice(e,1),t({ticketFormQuestions:Object(N.cloneDeep)(a)})}},onUpdateFormQuestion:function(e){var t=e.setFormData,a=e.formData.ticketFormQuestions;return function(e,n,r){a[r][e]=n,t({ticketFormQuestions:Object(N.cloneDeep)(a)})}}}))((function(e){var t=e.classes,a=e.openModal,n=e.formData,r=n.validationErrors,o=n.title,c=n.assigneeIds,l=n.deadlineInDays,i=n.ticketFormQuestions,s=e.setFormData,u=e.onSubmit,m=e.loading,d=e.assignables,p=e.onClose,g=e.disableNextButton,f=e.onAddFormQuestion,h=e.onRemoveFormQuestion,E=e.onUpdateFormQuestion,v=e.isNew;return b.a.createElement(wo,{onClose:p,modalTitle:v?"Nova categoria":"Editar categoria",content:b.a.createElement(se.a,{container:!0,direction:"row",spacing:1},b.a.createElement(se.a,{item:!0,xs:12},b.a.createElement(bt,{disabled:m,label:"T\xedtulo",errors:r.title,value:o||"",onChangeValue:function(e){return s({title:e})}})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(wt,{multiple:!0,label:"Respons\xe1veis",errors:r.assigneeIds,value:c,disabled:m,onChangeValue:function(e){return s({assigneeIds:e})},options:d.map((function(e){return{label:e.fullname,value:e.id}})),emptyOptionLabel:"Nenhum respons\xe1vel"})),b.a.createElement(se.a,{item:!0,xs:12,sm:6},b.a.createElement(pt,{label:"Prazo de resolu\xe7\xe3o (em dias)",disabled:m,errors:r.deadlineInDays,value:l||"",onChangeValue:function(e){return s({deadlineInDays:e})}})),b.a.createElement(se.a,{item:!0,xs:12},Object(N.map)(i,(function(e,a){return b.a.createElement(se.a,{container:!0,direction:"row",spacing:1,key:a.toString()},b.a.createElement(se.a,{item:!0,xs:2,sm:1},b.a.createElement(ut.a,{fullWidth:!0,margin:"normal"},b.a.createElement(ue.a,{onClick:function(){return h(a)},variant:"contained",disabled:m,className:t.deleteVisitorButton},"-"))),b.a.createElement(se.a,{item:!0,xs:10,sm:11},b.a.createElement(bt,{disabled:m,label:"T\xedtulo da pergunta",errors:Object(N.get)(r,"ticketFormQuestions[".concat(a,"].question")),value:e.question,onChangeValue:function(e){return E("question",e,a)}})),b.a.createElement(se.a,{item:!0,xs:2,sm:1}),b.a.createElement(se.a,{item:!0,xs:6,sm:8},b.a.createElement(wt,{disabled:m,label:"Tipo do campo resposta",errors:Object(N.get)(r,"ticketFormQuestions[".concat(a,"].fieldType")),value:e.fieldType,onChangeValue:function(e){return E("fieldType",e,a)},options:Rt,optionValueField:"key"})),b.a.createElement(se.a,{item:!0,xs:4,sm:3},b.a.createElement(Dt.a,{className:t.toggleRequired},b.a.createElement(Mt.a,{control:b.a.createElement(kr.a,{color:"primary",disabled:m,checked:!!Object(N.get)(e,"required"),value:"",onChange:function(){return E("required",!e.required,a)}}),label:b.a.createElement("small",null,"Obrigat\xf3rio")}))),b.a.createElement(se.a,{item:!0,xs:2,sm:1}),Lt.includes(e.fieldType)&&b.a.createElement(se.a,{item:!0,xs:10,sm:11},b.a.createElement(bt,{disabled:m,label:"Op\xe7\xf5es de respostas",placeholder:"Separe por v\xedrgula, ex: Item1,Item2,Item3",errors:Object(N.get)(r,"ticketFormQuestions[".concat(a,"].options")),value:e.options,onChangeValue:function(e){return E("options",e,a)}})))})))),actions:b.a.createElement(b.a.Fragment,null,b.a.createElement(Ln.a,{style:{width:"100%"},display:"flex",justifyContent:v?"flex-end":"space-between"},!v&&b.a.createElement(ue.a,{color:"primary",size:"large",variant:"outlined",disabled:m,onClick:f},"ADICIONAR PERGUNTA"),b.a.createElement(Ln.a,{display:"flex"},b.a.createElement(ue.a,{color:"default",size:"large",variant:"contained",onClick:p,disabled:m},"CANCELAR"),b.a.createElement(Ln.a,{ml:2},b.a.createElement(ue.a,{color:"primary",size:"large",variant:"contained",onClick:u,disabled:g},"SALVAR"))))),fullWidth:!0,open:a})})),ts=Object(X.b)(Object(X.h)("openModal","setOpenModal",!1))((function(e){var t=e.ticketCategory,a=e.refetch,n=e.openModal,r=e.setOpenModal,l=e.setAlert,i=function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y.hit("TicketCategoryModal - Closed"),r(!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return b.a.createElement(b.a.Fragment,null,b.a.createElement(ue.a,{variant:"outlined",size:"medium",onClick:function(){Y.hit("TicketCategoryModal - Opened"),r(!0)}},"Editar"),b.a.createElement(es,{ticketCategory:t,onClose:i,setAlert:l,refetch:a,openModal:n}))})),as=Object(d.memo)((function(e){var t=e.viewer,a=e.index,n=e.classes,r=e.setAlert,l=e.ticketCategory,i=e.loading,s=e.setLoading,u=e.refetch,m=e.isManager,d=function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Deseja realmente excluir essa categoria?")){e.next=13;break}return s(!0),e.prev=2,e.next=5,Xo.toggleCategory(l.id);case 5:r({alertMsg:"A categoria foi exclu\xedda",alertType:"success",showAlert:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),r({alertMsg:"Erro ao excluir categoria",alertType:"error",showAlert:!0});case 11:s(!1),u();case 13:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),p=l.deadlineInDays;return t?b.a.createElement(fa.a,{className:a%2?n.bgWhite:n.bgGray},b.a.createElement(ha.a,{className:n.tableSmallCell},b.a.createElement("span",{className:n.cellText},l.title)),b.a.createElement(ha.a,{className:n.tableSmallCell},Object(N.map)(l.assignees,(function(e){return b.a.createElement("div",{key:e.id,className:n.avatarNameContainer},b.a.createElement(Ra,{name:e.fullname,photoUrl:e.photoUrl}),b.a.createElement("span",{className:"".concat(n.cellText," ").concat(n.userName)},e.fullname))}))),b.a.createElement(ha.a,{className:n.tableSmallCell},b.a.createElement("span",{className:n.cellText},p?"".concat(p," ").concat(p>1?"dias \xfateis":"dia \xfatil"):"")),m&&b.a.createElement(ha.a,{className:n.tableSmallCell},b.a.createElement(ts,{ticketCategory:l,setAlert:r,refetch:u}),"\xa0\xa0\xa0",b.a.createElement(Xe.a,{disabled:i,onClick:d},b.a.createElement(Mr.a,null)))):null})),ns=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},Ki(e)),{},{cellText:{color:"#313131",fontSize:14},userName:{marginRight:5,marginLeft:10},avatarNameContainer:{display:"flex",alignItems:"center",marginTop:e.spacing(1)},smallScreenResendButton:{marginTop:e.spacing(2)}})}),{withTheme:!0}),Object(X.h)("loading","setLoading",!1),Wo)(as),rs=Object(d.memo)((function(e){var t=e.ticketCategories,a=e.ticketCategoriesLoading,n=e.openTicketCategoryModal,r=e.setOpenTicketCategoryModal,o=e.classes,c=e.setAlert,l=e.ticketCategoriesFetch,i=F.getUserData(),s=Ba.includes(Object(N.get)(i,"role")),u=a,m=s?4:3;return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:o.container},b.a.createElement("div",{className:o.headerView},b.a.createElement("aside",null,b.a.createElement(Ve.a,{variant:"h6"},b.a.createElement("b",null,"Categorias (".concat(Object(N.size)(t),")")))),b.a.createElement("aside",null,s&&b.a.createElement(ue.a,{size:"large",color:"primary",variant:"contained",onClick:function(){Y.hit("TicketCategory - Opened"),r(!0)}},"Nova Categoria")))),b.a.createElement("div",{className:o.container},b.a.createElement(Wa.a,{className:o.tablePaper},b.a.createElement(pa.a,null,b.a.createElement(ga.a,null,b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:o.tableCell},"T\xcdTULO"),b.a.createElement(ha.a,{className:o.tableCell},"RESPONS\xc1VEIS"),b.a.createElement(ha.a,{className:o.tableCell},"PRAZO DE RESOLU\xc7\xc3O"),s&&b.a.createElement(ha.a,{className:o.tableCell},"A\xc7\xd5ES"))),b.a.createElement(va.a,null,u?b.a.createElement(fa.a,null,b.a.createElement(ha.a,{colSpan:m,align:"center"},b.a.createElement(be,null))):Object(N.size)(t)?t.map((function(e,t){return b.a.createElement(ns,{isManager:s,setAlert:c,index:t,key:e.id,ticketCategory:e,isLoading:u,refetch:l})})):b.a.createElement(fa.a,null,b.a.createElement(ha.a,{className:o.empty,colSpan:m,align:"center"},"Nenhuma categoria cadastrada")),b.a.createElement(es,{onClose:function(){Y.hit("TicketCategory - Closed"),r(!1)},openModal:s&&n,setAlert:c,refetch:l}))))))})),os=Xt(Xo.getCategories,{name:"ticketCategories",props:function(e){var t=e.ticketCategoriesData;return{ticketCategories:Object(N.get)(t,"ticketCategories")}},options:function(e){var t=e.setAlert;return{variables:!1,onRequestError:function(){t({alertMsg:"Erro ao carregar categorias",alertType:"error",showAlert:!0})}}}}),cs=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},Ki(e)),{},{container:{marginBottom:30,marginTop:30},empty:{backgroundColor:"#EEE"},tableCell:{fontSize:14},titleTableCell:{fontSize:20}})}),{withTheme:!0}),Object(X.h)("openTicketCategoryModal","setOpenTicketCategoryModal",!1),Ac({condition:function(e){return!Ba.includes(e.role)}}),os)(rs),ls=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=t.showAlert,o=t.alertMsg,c=t.alertType,l=null;return r&&(l=b.a.createElement(at,{message:o,type:c,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}})),b.a.createElement("div",{className:n.root},b.a.createElement(hn,{alertBox:l}),b.a.createElement("section",null,b.a.createElement("div",{className:n.container},b.a.createElement("div",{className:n.headerView},b.a.createElement("aside",null,b.a.createElement(Ve.a,{variant:"h5"},b.a.createElement("b",null,"Configura\xe7\xf5es"))))),b.a.createElement("div",{className:n.container},b.a.createElement(wn,null)),b.a.createElement("div",{className:n.container},b.a.createElement(cs,{setAlert:a}))))})),is=Object(X.b)(Object(Z.a)(Ki,{withTheme:!0}),Object(X.h)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}))(ls),ss=a(188),us={avatarNameContainer:{display:"flex",alignItems:"center"},userName:{marginRight:5,marginLeft:10},image:{width:240,height:120,marginRight:30},container:{display:"flex",flexDirection:"row"},innerContainerTexts:{display:"flex",flexDirection:"column"},title:{marginTop:15,fontSize:20,marginBottom:10},subtitle:{color:"rgba(0, 0, 0, 0.54)"},buttonContainer:{display:"flex",justifyContent:"flex-end"},statusContainerCanceled:{color:"#FFFFFF",backgroundColor:ss.a[400],paddingTop:5,paddingBottom:5,paddingLeft:15,paddingRight:15,borderRadius:50},statusContainerInProgress:{color:"#FFFFFF",backgroundColor:Ta.a[900],paddingTop:5,paddingBottom:5,paddingLeft:15,paddingRight:15,borderRadius:50,wordWrap:"initial"},statusContainerDone:{color:"#FFFFFF",backgroundColor:Ze.a[500],paddingTop:5,paddingBottom:5,paddingLeft:15,paddingRight:15,borderRadius:50}},ms=Object(d.memo)((function(e){var t=e.viewer,a=e.classes,n=e.serviceRequest,r=e.isSmallScreen;if(!t)return null;var o=n.member,c=Object(N.get)(n,"service.title",""),l=Object(N.get)(n,"created_at",""),i=Object(N.get)(n,"service.image_url","");return r?b.a.createElement(fa.a,null,b.a.createElement(ha.a,null,b.a.createElement("img",{src:i,alt:c,className:a.image}),b.a.createElement("p",{className:a.title},b.a.createElement("b",null,c)),b.a.createElement("p",{className:a.subtitle},"Enviado em ".concat(A()(l).format("DD/MM/YYYY"))),b.a.createElement("p",null,b.a.createElement("div",{className:a.avatarNameContainer},b.a.createElement(Ra,{name:o.fullname,photoUrl:o.photo_url}),b.a.createElement("span",{className:"".concat(a.cellText," ").concat(a.userName)},o.fullname))),b.a.createElement("br",null),b.a.createElement(ue.a,{fullWidth:!0,variant:"outlined",component:f.b,to:"/meus-pedidos/".concat(n.id),color:"primary",size:"large"},"Ver Solicita\xe7\xe3o"))):b.a.createElement(fa.a,null,b.a.createElement(ha.a,null,b.a.createElement("div",{className:a.container},b.a.createElement("img",{src:i,alt:c,className:a.image}),b.a.createElement("div",{className:a.innerContainerTexts},b.a.createElement("p",{className:a.title},b.a.createElement("b",null,c)),b.a.createElement("p",{className:a.subtitle},"Enviado em ".concat(A()(l).format("DD/MM/YYYY")))))),b.a.createElement(ha.a,null,b.a.createElement("div",{className:a.avatarNameContainer},b.a.createElement(Ra,{name:o.fullname,photoUrl:o.photo_url}),b.a.createElement("span",{className:"".concat(a.cellText," ").concat(a.userName)},o.fullname))),b.a.createElement(ha.a,null,b.a.createElement("div",{className:a.buttonContainer},b.a.createElement(ue.a,{variant:"outlined",component:f.b,to:"/meus-pedidos/".concat(n.id),color:"primary",size:"large"},"Ver Solicita\xe7\xe3o"))))})),ds=Object(X.b)(Object(Z.a)(us,{withTheme:!0}),h.g,Wo)(ms),bs=Object(d.memo)((function(e){var t=e.classes,a=e.serviceRequests,n=e.serviceRequestsLoading,r=Object(Oa.a)(),o=Object(ja.a)(r.breakpoints.down("md")),c=o?1:3,l=n;return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",null,b.a.createElement(Wa.a,null,b.a.createElement(pa.a,null,b.a.createElement(ga.a,null,b.a.createElement(fa.a,null,b.a.createElement(ha.a,null,"SERVI\xc7O"),!o&&b.a.createElement(b.a.Fragment,null,b.a.createElement(ha.a,{className:t.tableLargeCell},"SOLICITANTE"),b.a.createElement(ha.a,{className:t.tableLargeCell})))),b.a.createElement(va.a,null,l?b.a.createElement(fa.a,null,b.a.createElement(ha.a,{colSpan:c,align:"center"},b.a.createElement(be,null))):Object(N.size)(a)?Object(N.map)(a,(function(e,t){return b.a.createElement(ds,{serviceRequest:e,index:t,isSmallScreen:o,key:e.id})})):b.a.createElement(fa.a,null,b.a.createElement(ha.a,{colSpan:c,align:"center"},"Nenhum servi\xe7o solicitado")))))))})),ps=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{statusColumn:{minWidth:400}})}),{withTheme:!0}))(bs),gs=Object(d.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.classes,r=e.serviceRequestsData,o=e.serviceRequestsLoading,c=e.status,l=Object(N.get)(r,"service_requests"),i=t.showAlert,s=t.alertMsg,u=t.alertType,m=null;i&&(m=b.a.createElement(at,{message:s,type:u,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var d=o?"":"(".concat(Object(N.size)(l),")");return b.a.createElement("div",{className:n.root},b.a.createElement(hn,{alertBox:m}),b.a.createElement("section",null,b.a.createElement("div",{className:n.container},b.a.createElement("div",{className:n.headerView},b.a.createElement(se.a,{container:!0},b.a.createElement(se.a,{item:!0,xs:12,md:12},b.a.createElement(Ve.a,{variant:"h5"},b.a.createElement("b",null,"Pedidos ".concat(d))))))),b.a.createElement("div",{className:n.container},o?b.a.createElement(be,null):b.a.createElement(ps,{filteredStatus:c,serviceRequests:l,serviceRequestsLoading:o}))))})),fs=Xt(cl.getServiceRequests,{name:"serviceRequests",options:function(e){var t=e.setAlert,a=e.status;return{variables:{status:void 0===a?null:a},onRequestError:function(){t({alertMsg:"Erro ao carregar lista de pedidos",alertType:"error",showAlert:!0})}}}}),hs=Object(X.b)(Object(Z.a)((function(e){return Object(m.a)({},re(e))}),{withTheme:!0}),Object(X.h)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(X.h)("status","setStatus",""),Ac({condition:function(e){return!Pa.includes(e.role)}}),fs)(gs),Es="CANCELED",vs=Xt(cl.getServiceRequest,{name:"serviceRequest",options:function(e){var t=e.match,a=e.setAlert;return{variables:Object(N.get)(t,"params.id"),onRequestError:function(){a({alertMsg:"Erro ao carregar solicita\xe7\xe3o",alertType:"error",showAlert:!0})}}}}),Os=Xt(cl.deleteServiceRequest,{name:"deleteServiceRequest",init:!1,options:function(e){var t=e.match,a=e.setAlert,n=e.serviceRequestFetch;return{variables:Object(N.get)(t,"params.id"),onRequestFinished:function(){a({alertMsg:"Solicita\xe7\xe3o cancelada com sucesso",alertType:"success",showAlert:!0}),n(!0)},onRequestError:function(){a({alertMsg:"Erro ao cancelar solicita\xe7\xe3o",alertType:"error",showAlert:!0})}}}}),js=Object(X.b)(xc,vs,Os,Ac({condition:function(e){return!Ba.includes(e.role)}}),Object(Z.a)((function(e){return Object(m.a)(Object(m.a)({},re(e)),{},{paperTitle:{marginLeft:20,fontSize:20,paddingTop:10},paperSubtitle:{paddingTop:10,marginLeft:20,color:"rgba(0, 0, 0, 0.54)"},paperDateInfo:{marginLeft:20,color:"rgba(0, 0, 0, 0.54)"},paperContainer:{paddingBottom:20,paddingTop:20,marginTop:20},serviceSubtitle:{fontSize:18},serviceDescription:{color:"rgba(0, 0, 0, 0.54)"},statusContainerCanceled:{color:"#FFFFFF",backgroundColor:ss.a[400],paddingTop:5,paddingBottom:5,paddingLeft:15,paddingRight:15,borderRadius:50},statusContainerInProgress:{color:"#FFFFFF",backgroundColor:Ta.a[900],paddingTop:5,paddingBottom:5,paddingLeft:15,paddingRight:15,borderRadius:50,wordWrap:"initial"},statusContainerDone:{color:"#FFFFFF",backgroundColor:Ze.a[500],paddingTop:5,paddingBottom:5,paddingLeft:15,paddingRight:15,borderRadius:50},mobileButton:{marginTop:25,justifyContent:"flex-end"}})}),{withTheme:!0}))((function(e){var t=e.classes,a=e.serviceRequestData,n=e.serviceRequestLoading,r=e.deleteServiceRequestFetch,o=e.deleteServiceRequestLoading,c=lt.isMobile(),l=Object(N.get)(a,"service_request",""),i=Object(N.get)(l,"service_data",""),s=Object(N.get)(l,"status","")===Es;return b.a.createElement(b.a.Fragment,null,n?b.a.createElement(be,null):b.a.createElement(b.a.Fragment,null,i?b.a.createElement(b.a.Fragment,null,b.a.createElement(se.a,{container:!0},b.a.createElement(se.a,{item:!0,xs:12,md:8},b.a.createElement(Ve.a,{variant:"h5"},b.a.createElement("b",null,i.title))),b.a.createElement(se.a,{item:!0,xs:12,md:4},!s&&b.a.createElement(ue.a,{className:c?t.mobileButton:"",variant:"outlined",color:"secondary",size:"large",onClick:function(){window.confirm("Deseja excluir o pedido?")&&r(!0)},disabled:o},"Cancelar"))),b.a.createElement(se.a,{container:!0},b.a.createElement(se.a,{item:!0,xs:12,md:5},b.a.createElement("p",{className:t.serviceSubtitle},b.a.createElement("b",null,i.subtitle)),b.a.createElement("p",{className:t.serviceDescription},i.description)),b.a.createElement(se.a,{item:!0,xs:12,md:3}),b.a.createElement(se.a,{item:!0,xs:12,md:9},b.a.createElement(Wa.a,{className:t.paperContainer},b.a.createElement("span",{className:t.paperDateInfo},"Enviado em ".concat(A()(l.created_at).format("DD/MM/YYYY"))),Object(N.map)(Object(N.get)(l,"details","").match(/(.+)\n.+/g),(function(e){var a=e.split("\n"),n=Object(Et.a)(a,2),r=n[0],o=n[1];return b.a.createElement("div",{key:r},b.a.createElement("p",{className:t.paperTitle},b.a.createElement("b",null,r)),b.a.createElement("p",{className:t.paperSubtitle},o))})))))):""))})),Cs=bl,ys=bl,ks=bl;K.setup(),A.a.locale(P.locale);var As=y()(j()(qe,(function(e,t){return e.submenus?j()(e.submenus,(function(t,a){return Object(m.a)(Object(m.a)({},t),{},{path:"".concat(e.path).concat(t.path),key:a,page:n[a]})})):Object(m.a)(Object(m.a)({},e),{},{key:t,page:n[t]})}))),ws=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setIOSManifest(),this.setState({loading:!0},Object(c.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!F.isLoggedIn()){t.next=6;break}return t.next=4,U.getViewer();case 4:a=t.sent,F.setUserData(v()(a,"member"));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),F.isUnauthorized(t.t0)&&F.clear();case 11:return t.prev=11,e.setState({loading:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])}))))}},{key:"setIOSManifest",value:function(){P.isiOS&&document.querySelector('link[rel="manifest"]').setAttribute("rel","no-on-ios")}},{key:"render",value:function(){var e=this.state.loading;return b.a.createElement(T.a,{theme:fe},b.a.createElement(w.a,null),b.a.createElement(d.Suspense,{fallback:b.a.createElement(be,{hasRefreshMsg:!0})},e?b.a.createElement(be,{hasRefreshMsg:!0}):b.a.createElement(f.a,null,b.a.createElement(h.d,null,j()(As,(function(e){return b.a.createElement(h.b,{key:e.path,exact:e.exact,path:e.path,render:function(t){try{if(e.private&&F.isLoggedIn()||!e.private){var a=Q(e.page,e.trackPage);return b.a.createElement(a,t)}var n="".concat(t.location.pathname).concat(t.location.search);return M.save("redirectUrl",n),b.a.createElement(h.a,{to:{pathname:"/",state:{from:t.location}}})}catch(r){return b.a.createElement(h.a,{to:{pathname:"/",state:{from:t.location}}})}}})}))))))}}]),a}(d.PureComponent),Ts=le(ws);g.a.render(b.a.createElement(Ts,null),document.querySelector("main"))}},[[423,1,2]]]);
//# sourceMappingURL=main.6641dbb5.chunk.js.map