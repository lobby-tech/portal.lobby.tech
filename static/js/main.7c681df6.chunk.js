(this["webpackJsonplobby-portal"]=this["webpackJsonplobby-portal"]||[]).push([[0],{241:function(e,t,a){e.exports=a(390)},366:function(e,t,a){e.exports=a.p+"static/media/logo.7f12e1c7.png"},388:function(e,t){e.exports="data:image/png;base64,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"},390:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"Signin",(function(){return be})),a.d(n,"Visitors",(function(){return Pt})),a.d(n,"Deliveries",(function(){return qt})),a.d(n,"Members",(function(){return ga}));var r=a(9),i=a.n(r),o=a(31),l=a(32),c=a(35),s=a(33),u=a(36),m=a(0),d=a.n(m),p=a(14),g=a.n(p),h=a(94),b=a(53),f=a(6),v=a.n(f),E=a(150),y=a.n(E),C=a(458),A=a(457),w=a(205),k=a.n(w),M={save:function(e,t){return localStorage.setItem(e,JSON.stringify(t))},get:function(e){try{var t=localStorage.getItem(e);return JSON.parse(t)}catch(a){return{}}},delete:function(e){return localStorage.removeItem(e)}},x={setUserToken:function(e){return M.save("userToken",e)},getUserToken:function(){return M.get("userToken")||""},setUserData:function(e){return M.save("userData",e)},getUserData:function(){return M.get("userData")||{}},clear:function(){M.delete("userToken"),M.delete("userData")},getAuthToken:function(){var e=M.get("userToken");if(e)return e;throw new Error("No authToken")},getBearerToken:function(){var e=M.get("userToken");return"Bearer: ".concat(e)},isLoggedIn:function(){var e=M.get("userToken");return!!e},isAuthorized:function(e){return e&&"unauthorized"!==e.error}},O=a(206),S={companyName:"Lobby",appName:"Lobby Portal",appNamespace:a.n(O)()("Lobby Portal"),apiURL:"https://api.lobby.tech",wsURL:"wss://api.lobby.tech",env:"production",apiRequestTimeout:1e4,mixpanelToken:"edc68e4e1788a9a91e92f329276c65f7",locale:"pt-br",isiOS:!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)},j=function(e){var t=v()(e,"response.data");return t||(t={error:v()(e,"message")}),t},N={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return new Promise((function(r,o){var l,c,s,u;return i.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,l=x.getBearerToken(),c=k.a.create({baseURL:"".concat(S.apiURL,"/").concat(S.appNamespace),timeout:S.apiRequestTimeout,headers:{"Content-Type":"application/json",Authorization:l},responseType:"json"}),m.next=5,i.a.awrap(c[e](t,a,n));case 5:return s=m.sent,u=s.data,m.abrupt("return",r(u));case 10:return m.prev=10,m.t0=m.catch(0),m.abrupt("return",o(j(m.t0)));case 13:case"end":return m.stop()}}),null,null,[[0,10]])}))},get:function(e,t){return this.request("get",e,{params:t})},post:function(e,t,a){return this.request("post",e,t,a)},put:function(e,t,a){return this.request("put",e,t,a)},delete:function(e,t,a){return this.request("delete",e,t,a)}},T={getEnterpriseUser:function(){return N.get("/enterprise_user")},setCurrentBuilding:function(e){return N.put("/enterprise_user",{building_id:e})}},B=a(95),I=a.n(B),D=a(207),F=a.n(D);I.a.init(S.mixpanelToken);var R={prepareTrackUser:function(){var e=x.getUserData();if(e&&v()(e,"member.id")){var t={app_id:S.appNamespace,app_name:S.appName,user_id:v()(e,"member.id"),email:v()(e,"member.email"),phone:v()(e,"member.phone"),name:"".concat(v()(e,"member.name")," ").concat(v()(e,"member.lastname")),company:v()(e,"member.company.name"),company_id:v()(e,"member.company.id"),building:v()(e,"building.name"),building_id:v()(e,"building.id"),created_at:v()(e,"member.created_at"),verified_at:v()(e,"member.verified_at")};return I.a.identify(t.user_id),I.a.people.set(t),t}return{}},hit:function(e,t){var a=this.prepareTrackUser(),n=F()(t,a);return I.a.track(e,n)},trackScreenView:function(e){this.hit("".concat(e," - Viewed"),{screen:e})}},W=function(e,t){return function(a){return Object(m.useEffect)((function(){return R.trackScreenView(t)})),d.a.createElement(e,a)}},Y=a(439),L=a(435),P=a(57),V=a(127),z=a(5),U=function(e){return{progress:{margin:e.spacing(2)},middle:{marginTop:20},center:{justifyContent:"center",textAlign:"center"}}},H=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={slowConnection:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.hasRefreshMsg&&(this.timeoutConnection=setTimeout((function(){e.setState({slowConnection:!0})}),S.apiRequestTimeout))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutConnection)}},{key:"render",value:function(){var e=this.props,t=e.hasRefreshMsg,a=e.classes,n=e.theme.mainColor,r=this.state.slowConnection;return d.a.createElement(L.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:a.middle},d.a.createElement(Y.a,{color:n,className:a.progress,variant:"indeterminate",disableShrink:!0,thickness:5}),d.a.createElement(P.a,{variant:"h6"},"Carregando..."),t&&r?d.a.createElement("div",{className:a.center},d.a.createElement("br",null),d.a.createElement(P.a,{variant:"h6"},"H\xe1 problemas de conex\xe3o com a internet"),d.a.createElement(V.a,{onClick:function(){return window.location.reload()},size:"large",color:"primary",variant:"contained"},d.a.createElement("b",null,"Recarregar"))):null)}}]),t}(m.PureComponent),_=Object(z.a)(U,{withTheme:!0})(H),Q=a(224),X=Object(Q.a)({palette:{primary:{main:"#1177FF"},secondary:{main:"#00F8C9"},background:{default:"#FFFFFF"}},typography:{useNextVariants:!0},containerWidth:1024,menuWidth:240}),J=a(212),G=a.n(J),q=a(209),Z=a.n(q),K=a(211),$=a.n(K),ee=a(210),te=a.n(ee),ae={Signin:{label:"Signin",trackPage:"Signin",path:"/",icon:d.a.createElement(Z.a,null),exact:!0,hideMenu:!0},Visitors:{label:"Visitantes",trackPage:"Visitors",path:"/visitantes",icon:d.a.createElement(te.a,null)},Deliveries:{label:"Entregas",trackPage:"Deliveries",path:"/entregas",icon:d.a.createElement($.a,null)},Members:{label:"Usu\xe1rios",trackPage:"Members",path:"/usuarios",icon:d.a.createElement(G.a,null)}},ne=a(442),re={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",width:350,marginTop:40,alignItems:"center",justifyContent:"center"},form:{width:"100%",marginTop:5},button:{marginTop:15,height:60},logo:{marginBottom:30}},ie={postSignin:function(e,t){var a={email:e,password:t};return N.post("/auth/signin",a)}},oe=a(461),le=a(441),ce=a(118),se=a.n(ce),ue=a(391),me=a(124),de=a(440),pe=function(e){return{success:{backgroundColor:me.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:"#1177FF"},warning:{backgroundColor:de.a[700]},closeIcon:{fontSize:20,opacity:.9,justifyContent:"center"},message:{fontSize:20,display:"flex",alignItems:"center"}}},ge=Object(m.memo)((function(e){var t=e.message,a=e.type,n=e.actionButton,r=e.onClickAction,i=e.onClose,o=e.classes,l=[];return n&&l.push(d.a.createElement(V.a,{key:"action",color:"inherit",variant:"outlined",className:o[a||"info"]||o.info,onClick:r},n)),i&&l.push(d.a.createElement(ue.a,{key:"action",color:"inherit",onClick:i},d.a.createElement(se.a,{className:o.closeIcon}))),d.a.createElement(oe.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!0,autoHideDuration:i?3e3:null,onClose:function(){return i&&i()}},d.a.createElement(le.a,{className:o[a||"info"]||o.info,message:d.a.createElement("span",{className:o.message},t),action:l}))})),he=Object(z.a)(pe,{withTheme:!0})(ge),be=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",errorMsg:"",submit:!1},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password,o=a.props.history;a.setState({submit:!0},(function(){var e,t,l,c;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,!n||!r){s.next=14;break}return s.next=4,i.a.awrap(ie.postSignin(n,r));case 4:return e=s.sent,t=e.token,x.setUserToken(t),s.next=9,i.a.awrap(T.getEnterpriseUser());case 9:return l=s.sent,c=v()(l,"enterprise_user"),x.setUserData(c),a.setState({submit:!1},(function(){return o.push("/visitantes")})),s.abrupt("return",!0);case 14:throw new Error("Blank fields");case 17:return s.prev=17,s.t0=s.catch(0),a.setState({submit:!1,errorMsg:"Credencial inv\xe1lida, tente novamente."}),s.abrupt("return",!0);case 21:case"end":return s.stop()}}),null,null,[[0,17]])}))},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.history;try{x.isLoggedIn()&&e.push("/visitantes")}catch(t){x.clear()}}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,r=t.password,i=t.submit,o=t.errorMsg;return d.a.createElement("div",{style:re.container},d.a.createElement("div",{style:re.content},o&&d.a.createElement(he,{message:o,type:"warning",onClose:function(){return e.setState({errorMsg:""})}}),d.a.createElement("img",{src:a(366),width:150,alt:S.appName,style:re.logo}),d.a.createElement(P.a,{component:"h1",variant:"h5"},"Portal da empresa"),d.a.createElement("form",{onSubmit:this.onSubmit,style:re.form},d.a.createElement(ne.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Email",type:"text",disabled:i,value:n,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({username:t.target.value.toLowerCase()})}}),d.a.createElement(ne.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Senha",type:"password",disabled:i,value:r,InputLabelProps:{shrink:!0},onChange:function(t){return e.setState({password:t.target.value})}}),d.a.createElement(V.a,{disabled:i,fullWidth:!0,variant:"contained",color:"primary",size:"large",style:re.button,type:"submit"},i?"Carregando...":"Entrar"))))}}]),t}(m.PureComponent),fe=(a(149),a(120)),ve=a.n(fe),Ee=a(26),ye=a.n(Ee),Ce=a(121),Ae=a.n(Ce),we=a(69),ke=a.n(we),Me=a(70),xe=a.n(Me),Oe=a(13),Se=a.n(Oe),je=a(404),Ne=a(447),Te=a(395),Be=a(10),Ie=a(444),De=a(445),Fe=a(463),Re=a(443),We=a(446),Ye=a(459),Le=a(215),Pe=a.n(Le),Ve=a(218),ze=a.n(Ve),Ue=a(216),He=a.n(Ue),_e=a(399),Qe=a(448),Xe=a(449),Je={isTablet:function(){return window.innerWidth<1280},isMobile:function(){return window.innerWidth<720}},Ge=Object.values(ae).filter((function(e){return!e.hideMenu})),qe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={companyName:"",userName:"",userDataError:!1,sideMenuOpen:!1,buildings:[],currentBuildingId:""},a.loadData=function(){var e,t,n,r,o;return i.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,e=x.getUserData(),t=v()(e,"buildings",[]),n=v()(e,"building_id",""),r=v()(e,"member.name",""),o=v()(e,"member.company.name",""),!ye()(t)||!n){i.next=10;break}a.setState({buildings:t,currentBuildingId:n,userName:r,companyName:o}),i.next=11;break;case 10:throw new Error("No buildings");case 11:i.next=16;break;case 13:i.prev=13,i.t0=i.catch(0),a.setState({userDataError:{error:"unauthorized"}});case 16:case"end":return i.stop()}}),null,null,[[0,13]])},a.onLogout=function(){if(window.confirm("Voc\xea deseja sair?")){var e=a.props.history;R.hit("Logout"),x.clear(),e.push("/")}},a.onToggleSideMenu=function(){var e=a.state.sideMenuOpen;a.setState({sideMenuOpen:!e})},a.onChangePage=function(e,t){a.props.history.push(Ge[t].path)},a.onSetCurrentBuilding=function(e,t){var n,r;return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.key,a.state.currentBuildingId===n){e.next=16;break}return e.prev=3,e.next=6,i.a.awrap(T.setCurrentBuilding(n));case 6:(r=x.getUserData()).building_id=n,x.setUserData(r),R.hit("Building - Changed"),window.location.href="/",e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),a.setState({userDataError:{error:"unauthorized"}});case 16:case"end":return e.stop()}}),null,null,[[3,13]])},a.renderErrorAlertBox=function(e){var t=a.props.history;return x.isAuthorized(e)?d.a.createElement(he,{type:"error",message:"Erro ao carregar dados do servidor",actionButton:d.a.createElement("b",null,"Recarregar"),onClickAction:function(){return window.location.reload()}}):d.a.createElement(he,{type:"error",message:"Sua sess\xe3o expirou, fa\xe7a login novamente",actionButton:d.a.createElement("b",null,"Fazer login"),onClickAction:function(){x.clear(),t.push("/")}})},a.renderWebappUpdateAlertBox=function(){return d.a.createElement(he,{type:"success",message:"Uma nova atualiza\xe7\xe3o foi instalada.",actionButton:d.a.createElement("b",null,"Continuar"),onClickAction:function(){return window.location.reload()}})},a.renderAlerts=function(){var e=a.props,t=e.alertBox,n=e.webappUpdated,r=e.error,i=a.state.userDataError,o=r||i;return n?a.renderWebappUpdateAlertBox():o?a.renderErrorAlertBox(o):t||null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.history,r=this.state,i=r.userName,o=r.sideMenuOpen,l=r.buildings,c=r.currentBuildingId,s=r.companyName;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:t.root},d.a.createElement(Ye.a,{lgUp:!0},d.a.createElement(Ie.a,{position:"fixed",className:t.appBar},d.a.createElement(De.a,null,d.a.createElement(ue.a,{color:"inherit","aria-label":"open drawer",onClick:this.onToggleSideMenu,edge:"start"},d.a.createElement(Pe.a,null)),d.a.createElement("div",{className:t.right},d.a.createElement("span",{className:t.userName},i),d.a.createElement(V.a,{className:t.logoutButton,onClick:this.onLogout},"Sair"))))),d.a.createElement(Fe.a,{classes:{paper:t.drawer},variant:Je.isTablet()?"persistent":"permanent",anchor:"left",open:o,ModalProps:{keepMounted:!0}},Je.isTablet()&&d.a.createElement("div",{className:t.closeMenuIcon},d.a.createElement(ue.a,{color:"inherit",size:"medium",onClick:this.onToggleSideMenu},d.a.createElement(He.a,null))),d.a.createElement("div",{className:t.logoContainer},d.a.createElement("img",{src:a(388),alt:S.appName,className:t.logo}),d.a.createElement("span",{className:t.companyName},s)),d.a.createElement(We.a,{className:t.divider}),d.a.createElement(Re.a,null,d.a.createElement(_e.a,null,d.a.createElement(Te.a,{variant:"outlined"},d.a.createElement(je.a,{className:t.towerSelect,value:c,onChange:this.onSetCurrentBuilding},l.map((function(e){return d.a.createElement(Ne.a,{key:e.id,value:e.id},e.name)})))))),d.a.createElement(Re.a,null,Ge.map((function(e,a){var r=Object.values(e.submenus||{}),i=Boolean(ye()(r)),o={};return i||(o={component:h.b,to:e.path,selected:e.path===n.location.pathname}),d.a.createElement("div",{key:a.toString()},d.a.createElement(_e.a,Object.assign({button:!0,key:e.path},o),e.icon&&d.a.createElement(Qe.a,{className:t.listItemIcon},e.icon),d.a.createElement(Xe.a,{className:i?t.listItemTextNoIcon:t.listItemText,primary:e.label})),i&&d.a.createElement(Re.a,{className:t.submenu},r.map((function(a){var r="".concat(e.path).concat(a.path);return d.a.createElement(_e.a,{button:!0,key:r,component:h.b,to:r,selected:r===n.location.pathname},d.a.createElement(Qe.a,{className:t.listItemIcon},a.icon),d.a.createElement(Xe.a,{className:t.listItemText,primary:a.label}))}))))}))),d.a.createElement(We.a,{className:t.divider}),!Je.isTablet()&&d.a.createElement(Re.a,null,d.a.createElement(_e.a,null,d.a.createElement(Xe.a,null,i),d.a.createElement(Qe.a,null,d.a.createElement(V.a,{onClick:this.onLogout,className:t.logoutItem},d.a.createElement(ze.a,null)))))),this.renderAlerts()))}}]),t}(m.PureComponent),Ze=Object(Be.a)(Object(z.a)((function(e){return{appBar:{backgroundColor:"#200085",marginLeft:e.menuWidth,width:"calc(100%-".concat(e.menuWidth,"px)")},root:{flexGrow:1,display:"flex",marginBottom:Je.isTablet()?90:40},right:{position:"absolute",right:5,top:15},userName:{color:"#fff",fontSize:16,marginRight:10},divider:{background:"#333"},towerSelect:{width:200,color:"#FFF",borderColor:"#2000AA",backgroundColor:"#2000AA",marginTop:10},logoutButton:{color:"red",fontSize:16,fontWeight:"bold",textTransform:"none"},logoutItem:{color:"red",fontSize:16,fontWeight:"bold",textTransform:"none",justifyContent:"flex-end",alignSelf:"flex-end"},tabItem:{fontWeight:"bold",fontSize:16},drawer:{width:e.menuWidth,flexShrink:0,background:"#200085",color:"#FFF"},logoContainer:{display:"flex",marginLeft:15,marginTop:15,marginBottom:10,color:"#FFF",wordBreak:"break-word"},logo:{width:48,height:48,marginRight:5},companyName:{fontSize:14,fontWeight:"bold",color:"#FFF",display:"flex",alignItems:"center"},checkIcon:{marginRight:10},closeMenuIcon:{marginTop:10,marginLeft:10},listItemIcon:{color:"#FFF"},listItemText:{marginLeft:-15,color:"#FFF"},listItemTextNoIcon:{marginTop:15,marginLeft:20,color:"#FFF"},submenu:{paddingLeft:20}}}),{withTheme:!0}),b.f,Object(Be.d)("webappUpdated","setWebappUpdated",!1))(qe),Ke=a(28),$e=a(87),et=function(e,t){var a=t.name,n=void 0===a?null:a,r=t.init,p=void 0===r||r,g=t.options,h=void 0===g?function(){return{}}:g;return function(t){return function(a){function r(){var t,a;Object(o.a)(this,r);for(var l=arguments.length,u=new Array(l),m=0;m<l;m++)u[m]=arguments[m];return(a=Object(c.a)(this,(t=Object(s.a)(r)).call.apply(t,[this].concat(u)))).state={loading:!0,reloadedMsg:"",error:null,data:null},a.loadingProperty=n?"".concat(n,"Loading"):"loading",a.reloadedMsgProperty=n?"".concat(n,"ReloadedMsg"):"reloadedMsg",a.errorProperty=n?"".concat(n,"Error"):"error",a.dataProperty=n?"".concat(n,"Data"):"data",a.clearProperty=n?"".concat(n,"Clear"):"clear",a.fetchProperty=n?"".concat(n,"Fetch"):"fetch",a.resolveOptions=function(e){return Object($e.a)({},h(a.props),{},e)},a.loadDataSource=function(t,n){var r,o,l,c,s;return i.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return r=a.resolveOptions(n),o=v()(r,"variables"),l=v()(r,"onRequestFinished"),c=v()(r,"onRequestError"),u.prev=4,u.next=7,i.a.awrap(e(o));case 7:if(s=u.sent,!l){u.next=11;break}return u.next=11,i.a.awrap(l(s));case 11:return u.abrupt("return",t(null,s));case 14:if(u.prev=14,u.t0=u.catch(4),!c){u.next=19;break}return u.next=19,i.a.awrap(c(u.t0));case 19:return u.abrupt("return",t(u.t0,null));case 20:case"end":return u.stop()}}),null,null,[[4,14]])},a.fetch=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(i,o){a.setState({loading:e},(function(){a.loadDataSource((function(e,r){a.setState({data:r,error:e,loading:!1,reloadedMsg:t},(function(){return e?o(e):i(r),n&&n()}))}),r)}))}))},a.clear=function(e){return a.setState({data:null},e)},a}return Object(u.a)(r,a),Object(l.a)(r,[{key:"componentDidMount",value:function(){p?this.fetch(!0):this.setState({loading:!1,data:{}})}},{key:"render",value:function(){var e,a=Object($e.a)({},this.props,(e={},Object(Ke.a)(e,this.errorProperty,this.state.error),Object(Ke.a)(e,this.dataProperty,this.state.data),Object(Ke.a)(e,this.loadingProperty,this.state.loading),Object(Ke.a)(e,this.reloadedMsgProperty,this.state.reloadedMsg),Object(Ke.a)(e,this.fetchProperty,this.fetch),Object(Ke.a)(e,this.clearProperty,this.clear),e));return d.a.createElement(t,a)}}]),r}(m.PureComponent)}},tt={getVisitors:function(e){var t=e.page,a=void 0===t?0:t,n=e.perPage,r=void 0===n?20:n,i=e.month,o=void 0===i?11:i,l=e.year;return N.get("/visitors",{page:a,per_page:r,month:o,year:l})},createVisitors:function(e){var t=e.name,a=e.email,n=e.companyId,r=e.visitorCompany,i=e.visitTime,o=e.visitDate,l=e.hostMemberId;return N.post("/visitors",{name:t,email:a,company_id:n,visitor_company:r,visit_hour:i,visit_date:o,host_member_id:l})},deleteVisitor:function(e){return N.put("/visitors/".concat(e,"/cancel"))}},at={getMembers:function(){return N.get("/members")},updateBuildingRole:function(e){var t=e.memberId,a=e.buildingId,n=e.role;return N.put("/enterprise_users/update_role",{member_id:t,building_id:a,role:n})}},nt={getHasFrontdesk:function(){return N.get("/building_company/has_frontdesk")}},rt=a(400),it=a(401),ot=a(402),lt=a(450),ct=a(405),st=a(154),ut=a(155),mt=a.n(ut),dt=a(19),pt=a(451),gt=a(460),ht=a(397),bt=a(221),ft=a.n(bt),vt=function(){return{actions:{textAlign:"center",justifyContent:"center",marginTop:10,marginBottom:15},submitButton:{fontWeight:"bold"},inputFieldFullWidth:{padding:"0 10px"},dialogContent:{minWidth:660,maxWidth:660},inputField:{padding:"0 10px",width:"50%"},selectInputLabel:{width:"50%",marginTop:10,marginBottom:5,fontSize:14,color:"rgba(0, 0, 0, 0.54)"},calendarInputField:{marginTop:10,flex:1,maxWidth:"100%"},selectLabel:{position:"relative",fontSize:14,paddingBottom:3},multiFieldContainer:{display:"flex"},labelRoot:{fontSize:60},inputLabel:{padding:"0 10px"}}},Et=x.getUserData(),yt={name:"",email:"",visitorCompany:"",visitTime:Se()(new Date).add(1,"hour").minute(0),visitDate:new Date,hostMemberId:v()(Et,"member.id","")},Ct=Object(m.memo)((function(e){var t=e.classes,a=e.open,n=e.setOpen,r=e.loading,o=e.setMemberState,l=e.resetMemberState,c=e.members,s=e.onCreateVisitor,u=e.companyHasFrontdesk,m=e.memberData,p=m.name,g=m.email,h=m.visitorCompany,b=m.visitTime,f=m.visitDate,E=m.hostMemberId,y=e.submitFetch,C=e.submitLoading,A=e.submitError,w=function(){R.hit("VisitorModal - Closed"),l(),n(!1)},k=ft()(v()(A,"errors",{}),(function(e){return e[0]}));return d.a.createElement("div",null,d.a.createElement(V.a,{onClick:function(){R.hit("VisitorModal - Viewed"),n(!0)},size:"large",variant:"contained",color:"primary"},"Novo visitante"),d.a.createElement(rt.a,{open:a,maxWidth:"md",onClose:w,keepMounted:!0},d.a.createElement(lt.a,null,"Novo visitante"),d.a.createElement(it.a,{className:t.dialogContent},u?r?d.a.createElement(_,null):d.a.createElement("div",null,d.a.createElement(Te.a,{className:t.inputFieldFullWidth,fullWidth:!0,error:!!k.host_member},d.a.createElement(ct.a,{className:t.inputLabel,id:"hostMemberId"},"Pessoa visitada"),d.a.createElement(je.a,{labelId:"hostMemberId",placeholder:v()(Et,"member.name",""),fullWidth:!0,className:t.button,value:E,onChange:function(e){return o({hostMemberId:e.target.value})}},c.map((function(e){return d.a.createElement(Ne.a,{key:Math.random(),value:e.id},"".concat(e.name," ").concat(e.lastname))}))),k.members&&d.a.createElement(ht.a,null,k.members)),d.a.createElement(Te.a,{className:t.inputFieldFullWidth,fullWidth:!0,error:!!k.name},d.a.createElement(ne.a,{error:!!k.name,fullWidth:!0,label:"Nome do visitante",margin:"normal",InputLabelProps:{shrink:!0},value:p,onChange:function(e){return o({name:e.target.value})}}),k.name&&d.a.createElement(ht.a,null,k.name)),d.a.createElement(Te.a,{className:t.inputField,error:!!k.email},d.a.createElement(ne.a,{error:!!k.email,fullWidth:!0,label:"E-mail do visitante",margin:"normal",InputLabelProps:{shrink:!0},value:g,onChange:function(e){return o({email:e.target.value})}}),k.email&&d.a.createElement(ht.a,null,k.email)),d.a.createElement(Te.a,{className:t.inputField,error:!!k.visitorCompany},d.a.createElement(ne.a,{error:!!k.visitorCompany,fullWidth:!0,label:"Empresa do visitante",margin:"normal",InputLabelProps:{shrink:!0},value:h,onChange:function(e){return o({visitorCompany:e.target.value})}}),k.visitorCompany&&d.a.createElement(ht.a,null,k.visitorCompany)),d.a.createElement(Te.a,{className:t.inputField,error:!!k.visitorCompany},d.a.createElement(dt.a,{utils:st.a,locale:mt.a},d.a.createElement(pt.a,{className:t.calendarInputField,style:vt.components,label:"Data da visita",invalidDateMessage:"Formato inv\xe1lido",variant:"dialog",value:f,onChange:function(e){return o({visitDate:e})},minDate:new Date,format:"DD/MM/YYYY"}))),d.a.createElement(Te.a,{className:t.inputField,error:!!k.visitorCompany},d.a.createElement(dt.a,{utils:st.a,locale:mt.a},d.a.createElement(gt.a,{className:t.calendarInputField,style:vt.components,ampm:!1,minutesStep:5,variant:"dialog",label:"Hor\xe1rio",value:b,onChange:function(e){return o({visitTime:e})}})))):d.a.createElement("div",null,"Fun\xe7\xe3o indispon\xedvel, contacte a administra\xe7\xe3o do pr\xe9dio para habilitar")),d.a.createElement(ot.a,{className:t.actions},d.a.createElement(V.a,{onClick:w,size:"large"},u?"Cancelar":"Fechar"),u&&d.a.createElement(V.a,{onClick:function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.awrap(y(!0));case 3:s(!0),e={visitor:p,visitor_company:h,visit_date:Se()(f).toISOString(),visit_hour:Se()(b).toISOString()},R.hit("NewVisitor - Added",e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),s(!1);case 11:case"end":return t.stop()}}),null,null,[[0,8]])},size:"large",color:"primary",variant:"contained",disabled:C,className:t.submitButton},C?"Autorizando...":"Autorizar"))))})),At=et(tt.createVisitors,{name:"submit",init:!1,options:function(e){var t=e.memberData,a=e.setOpen,n=e.resetMemberState,r=e.companyId;return{variables:Object($e.a)({},t,{companyId:r}),onRequestFinished:function(){n(),a(!1)}}}}),wt=Object(Be.a)(Object(z.a)(vt,{withTheme:!0}),Object(Be.d)("open","setOpen",!1),Object(Be.d)("memberData","setMemberData",yt),Object(Be.c)({setMemberState:function(e){var t=e.setMemberData,a=e.memberData;return function(e){t(Object($e.a)({},a,{},e))}},resetMemberState:function(e){var t=e.setMemberData;return function(){return t(yt)}}}),At)(Ct),kt=a(454),Mt=a(456),xt=a(453),Ot=a(455),St=a(452),jt=a(128),Nt=a(123),Tt={cancel:{marginRight:10},textField:{backgroundColor:"#fff"},saveButton:{paddingRight:25,paddingLeft:25,paddingTop:15,paddingBottom:15,color:"#FFF",backgroundColor:me.a[500],"&:hover":{backgroundColor:me.a[200]},"&:active":{backgroundColor:me.a[400]},"&:focus":{backgroundColor:me.a[500]},fontWeight:"bold",width:150},cancelButton:{paddingRight:25,paddingLeft:25,paddingTop:15,paddingBottom:15,color:"#FFF",backgroundColor:Nt.a[500],"&:hover":{backgroundColor:Nt.a[300]},"&:active":{backgroundColor:Nt.a[500]},"&:focus":{backgroundColor:Nt.a[800]},fontWeight:"bold",width:150},tableCell:{color:"#003f54",fontSize:16,width:140,maxWidth:140,minWidth:140,wordBreak:"break-word"},tableSmallCell:{color:"#003f54",fontSize:16,width:100,maxWidth:100,minWidth:100,wordBreak:"break-word"},tableLargeCell:{color:"#003f54",fontSize:16,width:300,maxWidth:300,minWidth:300,wordBreak:"break-word"},bgGray:{backgroundColor:"#EEE"},bgWhite:{backgroundColor:"#FFF"},containerButton:{display:"flex",justifyContent:"flex-start"},light:{color:"#999"},clearButton:{display:"flex",justifyContent:"center",alignItems:"center",padding:7,marginLeft:5,borderRadius:50,borderWidth:0,borderStyle:"none",borderImage:"none",backgroundColor:"#EE3C3C",cursor:"pointer",color:"#fff","&:hover":{color:"#fff",backgroundColor:"#EE2C3C"}}},Bt={ACCEPTED:"Autorizado",PENDING:"Pendente",CANCELED:"Cancelado"},It=Object(m.memo)((function(e){var t=e.index,a=e.visitor,n=e.CancelVisitor,r=v()(a,"id"),i="".concat(v()(a,"name")," ").concat(v()(a,"visitor_company")||""),o="".concat(v()(a,"host_member.name")," ").concat(v()(a,"host_member.lastname")),l=v()(a,"host_member.email"),c="".concat(v()(a,"inviter.name")," ").concat(v()(a,"inviter.lastname")),s=v()(a,"inviter.email"),u=v()(a,"visit_date"),m=Se()(v()(a,"visit_hour")),p=v()(a,"checkin_at"),g=Se()(u).hour(m.hour()).minute(m.minute());return d.a.createElement(St.a,{style:t%2?Tt.bgWhite:Tt.bgGray},d.a.createElement(xt.a,{style:Tt.tableCell},u?"".concat(Se()(u).format("DD/MM/YYYY")):"--",d.a.createElement("br",null),m?"".concat(Se()(m).format("HH:mm")):"--"),d.a.createElement(xt.a,{style:Tt.tableCell},Bt[a.status],d.a.createElement("br",null),p?Se()(p).format("DD/MM/YY HH:mm"):""),d.a.createElement(xt.a,{style:Tt.tableCell},i),d.a.createElement(xt.a,{style:Tt.tableCell},o,d.a.createElement("br",null),d.a.createElement("small",null,l)),d.a.createElement(xt.a,{style:Tt.tableCell},c,d.a.createElement("br",null),d.a.createElement("small",null,s)),d.a.createElement(xt.a,{style:Tt.tableCell},"ACCEPTED"!==a.status&&Se()(g).isAfter(Se()())&&d.a.createElement("button",{type:"button",style:Tt.clearButton,onClick:function(){return n(r)}},d.a.createElement(se.a,null))))})),Dt={container:{marginBottom:40,paddingTop:20},empty:{backgroundColor:"#EEE"},paper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},tableCell:{fontSize:18,width:140,maxWidth:140,minWidth:140}},Ft=Object(m.memo)((function(e){var t=e.visitors,a=e.loading,n=e.onCancelVisitor;return d.a.createElement("div",{style:Dt.container},d.a.createElement(jt.a,{style:Dt.paper},d.a.createElement(kt.a,null,d.a.createElement(Ot.a,null,d.a.createElement(St.a,null,d.a.createElement(xt.a,{style:Dt.tableCell},"DATA VISITA"),d.a.createElement(xt.a,{style:Dt.tableCell},"STATUS"),d.a.createElement(xt.a,{style:Dt.tableCell},"VISITANTE"),d.a.createElement(xt.a,{style:Dt.tableCell},"VISITA PARA"),d.a.createElement(xt.a,{style:Dt.tableCell},"CRIADO POR"),d.a.createElement(xt.a,{style:Dt.tableCell},"A\xc7\xc3O"))),d.a.createElement(Mt.a,null,a?d.a.createElement(St.a,null,d.a.createElement(xt.a,{colSpan:6,align:"center"},d.a.createElement(_,null))):ye()(t)?t.map((function(e,t){return d.a.createElement(It,{index:t,key:e.id,visitor:e,loading:a,CancelVisitor:n})})):d.a.createElement(St.a,null,d.a.createElement(xt.a,{style:Dt.empty,colSpan:6,align:"center"},"Nenhum visitante registrado"))))))})),Rt=Object(m.memo)((function(e){var t=e.alert,a=e.setAlert,n=e.setMonth,r=e.setYear,o=e.setVisitors,l=e.hasFrontdeskData,c=e.setDisableSeeMore,s=e.visitorsFetch,u=e.visitors,m=e.page,p=e.setPage,g=e.setHideSeeMore,h=e.membersData,b=e.visitorsError,f=e.visitorsLoading,E=e.disableSeeMore,y=e.classes,C=e.month,A=e.year,w=e.hideSeeMore,k=e.totalVisitors,M=Boolean(!f&&!((ye()(u)||1)===k)),O=v()(x.getUserData(),"member.company.id"),j=t.showAlert,N=t.alertMsg,T=t.alertType,B=null;j&&(B=d.a.createElement(he,{message:N,type:T,onClose:function(){return a({alertMsg:"",alertType:"",showAlert:!1})}}));var I=v()(h,"members",[]),D=v()(l,"has_frontdesk",!1);return d.a.createElement("div",{className:y.root},d.a.createElement(Ze,{alertBox:B,error:b}),d.a.createElement("section",null,d.a.createElement("div",{className:y.container},d.a.createElement("div",{className:y.headerView},d.a.createElement("aside",{className:y.headerTitle},d.a.createElement(P.a,{variant:"h4"},d.a.createElement("b",null,k?"Visitantes (".concat(k,")"):"Visitantes")),d.a.createElement(Te.a,{className:y.inputField,fullWidth:!0},d.a.createElement(je.a,{fullWidth:!0,className:y.button,value:Se()().month(C).year(A).format("YYYY-MM"),onChange:function(e){var t,a,l,u;return i.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,t=Se()(e.target.value,"YYYY-MM"),c(!0),p(0),n(t.month()),r(t.year()),m.next=8,i.a.awrap(s(!0));case 8:a=m.sent,l=xe()(v()(a,"visitors",[]),"id"),o(l),c(!1),g(ke()(l)),u={select_month:t.month()+1,select_year:t.year()},R.hit("Visitors - FilteredByMonth",u),m.next=21;break;case 17:m.prev=17,m.t0=m.catch(0),c(!1),g(!0);case 21:case"end":return m.stop()}}),null,null,[[0,17]])}},Ae()(6,(function(e){var t=Se()().locale(S.locale).subtract(e,"month");return d.a.createElement(Ne.a,{key:t.format("YYYY-MM"),value:t.format("YYYY-MM")},t.format("MMMM YYYY"))}))))),d.a.createElement("aside",{className:y.newMember},d.a.createElement(wt,{setAlert:a,members:I,companyId:O,onCreateVisitor:function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=12;break}return t.prev=1,t.next=4,i.a.awrap(s(!0));case 4:a({alertMsg:"Visitante autorizado com sucesso",alertType:"success",showAlert:!0}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a({alertMsg:"Ocorreu um erro ao autorizar visitante",alertType:"error",showAlert:!0});case 10:t.next=13;break;case 12:a({alertMsg:"Ocorreu um erro ao autorizar visitante",alertType:"error",showAlert:!0});case 13:case"end":return t.stop()}}),null,null,[[1,7]])},companyHasFrontdesk:D})))),d.a.createElement("div",{className:y.container},d.a.createElement(Ft,{visitors:u,loading:f,onCancelVisitor:function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Deseja cancelar a visita?")){t.next=12;break}return t.prev=1,t.next=4,i.a.awrap(tt.deleteVisitor(e));case 4:return t.next=6,i.a.awrap(s(!0));case 6:a({alertMsg:"Visitante cancelado com sucesso",alertType:"success",showAlert:!0}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({alertMsg:"Ocorreu um erro no cancelamento da visita",alertType:"error",showAlert:!0});case 12:case"end":return t.stop()}}),null,null,[[1,9]])}}),M&&!w&&d.a.createElement("div",{className:y.buttonContainer},d.a.createElement(V.a,{className:y.showMoreButton,onClick:function(){var e,t;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c(!0),p(m+1),a.next=5,i.a.awrap(s(!1));case 5:e=a.sent,t=v()(e,"visitors",[]),o(xe()(ve()(u,t),"id")),c(!1),g(ke()(t)),a.next=17;break;case 12:a.prev=12,a.t0=a.catch(0),c(!1),o(u),g(!0);case 17:case"end":return a.stop()}}),null,null,[[0,12]])},size:"large",variant:"contained",color:"primary",disabled:E},E?"Carregando":"Ver Mais")))))})),Wt=et(nt.getHasFrontdesk,{name:"hasFrontdesk"}),Yt=et(at.getMembers,{name:"members"}),Lt=et(tt.getVisitors,{name:"visitors",options:function(e){var t=e.page,a=e.month,n=e.year,r=e.setVisitors,i=e.setHideSeeMore,o=e.setTotalVisitors;return{variables:{page:t,perPage:20,month:a+1,year:n},onRequestFinished:function(e){var t=xe()(v()(e,"visitors",[]),"id"),a=v()(e,"meta.total",0);r(t),i(ke()(t)),o(a)}}}}),Pt=Object(Be.a)(Object(z.a)((function(e){return{root:{flexGrow:1,marginRight:20,marginLeft:20},container:Object(Ke.a)({width:"auto",height:"100%",maxHeight:"100%",paddingLeft:Je.isTablet()?10:e.menuWidth/2,paddingRight:10,marginBottom:40},e.breakpoints.up(e.containerWidth+2*e.spacing(3)),{width:e.containerWidth,marginLeft:"auto",marginRight:"auto"}),headerView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"flex-start"},headerTitle:{marginTop:10},createNotificationButton:{backgroundColor:"#1177FF",border:"none",width:200,height:50},button:{marginTop:20},buttonContainer:{display:"flex",justifyContent:"center"},showMoreButton:{width:220},newMember:{paddingTop:15}}}),{withTheme:!0}),Object(Be.d)("alert","setAlert",{alertMsg:"",alertType:"",showAlert:!1}),Object(Be.d)("totalVisitors","setTotalVisitors",0),Object(Be.d)("visitors","setVisitors",[]),Object(Be.d)("hideSeeMore","setHideSeeMore",!1),Object(Be.d)("disableSeeMore","setDisableSeeMore",!1),Object(Be.d)("page","setPage",0),Object(Be.d)("month","setMonth",Se()().month()),Object(Be.d)("year","setYear",Se()().year()),Wt,Yt,Lt)(Rt),Vt={getDeliveries:function(e){var t=e.page,a=void 0===t?0:t,n=e.perPage,r=void 0===n?10:n,i=e.month,o=void 0===i?1:i,l=e.year;return N.get("/deliveries",{page:a,per_page:r,month:o,year:l})}},zt={cancel:{marginRight:10},textField:{backgroundColor:"#fff"},tableCell:{color:"#003f54",fontSize:16},tableSmallCell:{color:"#003f54",fontSize:16,width:160,maxWidth:160,minWidth:160,wordBreak:"break-word"},tableMediumCell:{color:"#003f54",fontSize:16,width:200,maxWidth:200,minWidth:200,wordBreak:"break-word"},bgGray:{backgroundColor:"#EEE"},bgWhite:{backgroundColor:"#FFF"}},Ut={package:"Encomenda",food:"Comida"},Ht={member_receive:"Ocupante desceu",expedition_receive:"Expedi\xe7\xe3o recebeu",office_delivery:"Entregue no escrit\xf3rio",expedition_delivery:"Expedi\xe7\xe3o entregou"},_t=Object(m.memo)((function(e){var t=e.index,a=e.delivery,n="".concat(v()(a,"member.name")," ").concat(v()(a,"member.lastname")),r=v()(a,"member.email"),i=v()(a,"member.company.name"),o=Se()(v()(a,"created_at")).format("DD/MM/YY HH:mm"),l=v()(a,"delivery_method"),c=v()(a,"delivery_type");return d.a.createElement(St.a,{style:t%2?zt.bgWhite:zt.bgGray},d.a.createElement(xt.a,{style:zt.tableSmallCell},o),d.a.createElement(xt.a,{style:zt.tableSmallCell},Ht[l]),d.a.createElement(xt.a,{style:zt.tableSmallCell},Ut[c]),d.a.createElement(xt.a,{style:zt.tableMediumCell},n,d.a.createElement("br",null),i,d.a.createElement("br",null),d.a.createElement("small",null,r)))})),Qt={container:{marginBottom:40,paddingTop:20},empty:{backgroundColor:"#EEE"},paper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},tableCell:{fontSize:18}},Xt=Object(m.memo)((function(e){var t=e.deliveries,a=e.loading;return d.a.createElement("div",{style:Qt.container},d.a.createElement(jt.a,{style:Qt.paper},d.a.createElement(kt.a,null,d.a.createElement(Ot.a,null,d.a.createElement(St.a,null,d.a.createElement(xt.a,{style:Qt.tableCell},"DATA"),d.a.createElement(xt.a,{style:Qt.tableCell},"ENTREGA"),d.a.createElement(xt.a,{style:Qt.tableCell},"TIPO"),d.a.createElement(xt.a,{style:Qt.tableCell},"OCUPANTE"))),d.a.createElement(Mt.a,null,a?d.a.createElement(St.a,null,d.a.createElement(xt.a,{colSpan:4,align:"center"},d.a.createElement(_,null))):ye()(t)?t.map((function(e,t){return d.a.createElement(_t,{index:t,key:e.id,delivery:e,loading:a})})):d.a.createElement(St.a,null,d.a.createElement(xt.a,{style:Qt.empty,colSpan:4,align:"center"},"Nenhuma entrega registrada"))))))})),Jt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={alertMsg:"",alertType:"",showAlert:!1},a.clearAlert=function(){return a.setState({showAlert:!1,alertMsg:""})},a.renderAlertBox=function(){var e=a.state,t=e.alertMsg,n=e.alertType;return e.showAlert?d.a.createElement(he,{message:t,type:n,onClose:a.clearAlert}):null},a.onSelectMonth=function(e){var t,n,r,o,l,c,s,u,m,d,p,g;return i.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:return t=a.props,n=t.setMonth,r=t.setYear,o=t.setDeliveries,l=t.setPage,c=t.setDisableSeeMore,s=t.setHideSeeMore,u=t.deliveriesFetch,h.prev=1,m=Se()(e.target.value,"YYYY-MM"),c(!0),l(0),n(m.month()),r(m.year()),h.next=9,i.a.awrap(u(!0));case 9:d=h.sent,p=xe()(v()(d,"deliveries",[]),"id"),o(p),c(!1),s(ke()(p)),g={select_month:m.month()+1,select_year:m.year()},R.hit("Deliveries - FilteredByMonth",g),h.next=22;break;case 18:h.prev=18,h.t0=h.catch(1),c(!1),s(!0);case 22:case"end":return h.stop()}}),null,null,[[1,18]])},a.onSeeMore=function(){var e,t,n,r,o,l,c,s,u,m;return i.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return e=a.props,t=e.deliveries,n=e.setDeliveries,r=e.page,o=e.setPage,l=e.deliveriesFetch,c=e.setHideSeeMore,s=e.setDisableSeeMore,d.prev=1,s(!0),o(r+1),d.next=6,i.a.awrap(l(!1));case 6:u=d.sent,m=xe()(v()(u,"deliveries",[]),"id"),n(ve()(t,m)),s(!1),c(ke()(m)),d.next=18;break;case 13:d.prev=13,d.t0=d.catch(1),s(!1),n(t),c(!0);case 18:case"end":return d.stop()}}),null,null,[[1,13]])},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.deliveries,a=e.deliveriesLoading,n=e.deliveriesError,r=e.classes,i=e.month,o=e.year,l=e.hideSeeMore,c=e.disableSeeMore,s=e.totalDeliveries,u=n,m=Boolean(!a&&!((ye()(t)||1)===s));return d.a.createElement("div",{className:r.root},d.a.createElement(Ze,{alertBox:this.renderAlertBox(),error:u}),d.a.createElement("section",null,d.a.createElement("div",{className:r.container},d.a.createElement("div",{className:r.headerView},d.a.createElement("aside",{className:r.headerTitle},d.a.createElement(P.a,{variant:"h4"},d.a.createElement("b",null,s?"Entregas (".concat(s,")"):"Entregas")),d.a.createElement(Te.a,{className:r.inputField,fullWidth:!0},d.a.createElement(je.a,{fullWidth:!0,className:r.button,value:Se()().month(i).year(o).format("YYYY-MM"),onChange:this.onSelectMonth},Ae()(6,(function(e){var t=Se()().locale(S.locale).subtract(e,"month");return d.a.createElement(Ne.a,{key:t.format("YYYY-MM"),value:t.format("YYYY-MM")},t.format("MMMM YYYY"))}))))))),d.a.createElement("div",{className:r.container},d.a.createElement(Xt,{deliveries:t,loading:a}),m&&!l&&d.a.createElement("div",{className:r.buttonContainer},d.a.createElement(V.a,{className:r.showMoreButton,onClick:this.onSeeMore,size:"large",variant:"contained",color:"primary",disabled:c},c?"Carregando":"Ver Mais")))))}}]),t}(m.PureComponent),Gt=et(Vt.getDeliveries,{name:"deliveries",options:function(e){var t=e.page,a=e.month,n=e.year,r=e.setDeliveries,i=e.setHideSeeMore,o=e.setTotalDeliveries;return{variables:{page:t,perPage:20,month:a+1,year:n},onRequestFinished:function(e){var t=xe()(v()(e,"deliveries",[]),"id"),a=v()(e,"meta.total",0);r(t),i(ke()(t)),o(a)}}}}),qt=Object(Be.a)(Object(z.a)((function(e){return{root:{flexGrow:1,marginRight:20,marginLeft:20},container:Object(Ke.a)({width:"auto",height:"100%",maxHeight:"100%",paddingLeft:Je.isTablet()?10:e.menuWidth/2,paddingRight:10,marginBottom:40},e.breakpoints.up(e.containerWidth+2*e.spacing(3)),{width:e.containerWidth,marginLeft:"auto",marginRight:"auto"}),headerView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"flex-start"},headerTitle:{marginTop:10},createNotificationButton:{backgroundColor:"#1177FF",border:"none",width:200,height:50},button:{marginTop:20},buttonContainer:{display:"flex",justifyContent:"center"},showMoreButton:{width:220}}}),{withTheme:!0}),Object(Be.d)("totalDeliveries","setTotalDeliveries",0),Object(Be.d)("deliveries","setDeliveries",[]),Object(Be.d)("hideSeeMore","setHideSeeMore",!1),Object(Be.d)("disableSeeMore","setDisableSeeMore",!1),Object(Be.d)("page","setPage",0),Object(Be.d)("month","setMonth",Se()().month()),Object(Be.d)("year","setYear",Se()().year()),Gt)(Jt),Zt=a(4),Kt=a.n(Zt),$t=a(39),ea=Object(Be.a)(Object(Be.d)("viewer","setViewer",null),Object(Be.b)({componentDidMount:function(){var e=x.getUserData();this.props.setViewer(e)}})),ta={progress:{marginRight:10,marginTop:12}},aa=Object(m.memo)((function(e){var t=e.classes;return d.a.createElement(Y.a,{size:18,color:"primary",className:t.progress,variant:"indeterminate",disableShrink:!0,thickness:5})}));aa.propTypes={classes:Kt.a.object};var na=Object(Be.a)(Object(z.a)(ta,{withTheme:!0}))(aa),ra={cancel:{marginRight:10},textField:{backgroundColor:"#fff"},tableCell:{color:"#003f54",fontSize:16},tableSmallCell:{color:"#003f54",fontSize:16,height:30,width:160,maxWidth:160,minWidth:160,wordBreak:"break-word"},tableMediumCell:{color:"#003f54",fontSize:16,width:200,maxWidth:200,minWidth:200,wordBreak:"break-word"},bgGray:{backgroundColor:"#EEE"},bgWhite:{backgroundColor:"#FFF"}},ia=[{label:"Colaborador",value:"MEMBER"},{label:"Recepcionista",value:"COMPANY_RECEPTIONIST"},{label:"Facilities",value:"COMPANY_MANAGER"}],oa=Object(m.memo)((function(e){var t=e.updateBuildingRoleLoading,a=e.role,n=e.onChangeRole;return t?d.a.createElement("div",{className:ra.checkBoxView},d.a.createElement(na,null),d.a.createElement("span",{className:ra.roleLoadingLabel},"Atualizando...")):d.a.createElement("div",{className:ra.checkBoxView},d.a.createElement(je.a,{className:ra.towerSelect,value:a,onChange:n},ia.map((function(e){return d.a.createElement(Ne.a,{key:e.value,value:e.value},e.label)}))))}));oa.propTypes={role:Kt.a.string,onChangeRole:Kt.a.func,updateBuildingRoleLoading:Kt.a.bool};var la=Object(m.memo)((function(e){var t=e.viewer,a=e.index,n=e.member,r=e.updateBuildingRoleLoading,i=e.updateBuildingRoleFetch;if(!t)return null;var o=Object($t.get)(n,"enterprise_user.buildings_enterprise_users"),l=Object($t.find)(o,(function(e){return e.building_id===t.building_id})),c=Object($t.get)(l,"role","MEMBER"),s=Object($t.get)(t,"buildings_enterprise_users"),u=Object($t.find)(s,(function(e){return e.building_id===t.building_id})),m=Object($t.get)(u,"role"),p="".concat(Object($t.get)(n,"name")," ").concat(Object($t.get)(n,"lastname")),g=Object($t.get)(n,"email"),h=Object($t.get)(n,"phone");return d.a.createElement(St.a,{style:a%2?ra.bgWhite:ra.bgGray},d.a.createElement(xt.a,{style:ra.tableSmallCell},p),d.a.createElement(xt.a,{style:ra.tableSmallCell},"COMPANY_MANAGER"===m&&n.id!==t.member.id?d.a.createElement(oa,{updateBuildingRoleLoading:r,role:c,onChangeRole:function(e,a){var r=a.props.value,o={variables:{memberId:n.id,buildingId:t.building_id,role:r}};i(!0,"",null,o).catch((function(){}))}}):Object($t.get)(Object($t.find)(ia,(function(e){return e.value===c})),"label")),d.a.createElement(xt.a,{style:ra.tableSmallCell},g),d.a.createElement(xt.a,{style:ra.tableSmallCell},h))})),ca=et(at.updateBuildingRole,{name:"updateBuildingRole",init:!1,options:function(e){var t=e.refetch,a=e.setAlert;return{onRequestFinished:t,onRequestError:function(){a({alertMsg:"Ocorreu um erro na atualiza\xe7\xe3o desse papel",alertType:"error",showAlert:!0})}}}}),sa=Object(Be.a)(ca,ea)(la),ua={container:{marginBottom:40,paddingTop:20},empty:{backgroundColor:"#EEE"},paper:{overflowX:"auto",marginRight:"auto",marginLeft:"auto"},tableCell:{fontSize:18}},ma=Object(m.memo)((function(e){var t=e.members,a=e.loading,n=e.refetch,r=e.setAlert;return d.a.createElement("div",{style:ua.container},d.a.createElement(jt.a,{style:ua.paper},d.a.createElement(kt.a,null,d.a.createElement(Ot.a,null,d.a.createElement(St.a,null,d.a.createElement(xt.a,{style:ua.tableCell},"NOME"),d.a.createElement(xt.a,{style:ua.tableCell},"CARGO"),d.a.createElement(xt.a,{style:ua.tableCell},"EMAIL"),d.a.createElement(xt.a,{style:ua.tableCell},"CELULAR"))),d.a.createElement(Mt.a,null,a?d.a.createElement(St.a,null,d.a.createElement(xt.a,{colSpan:4,align:"center"},d.a.createElement(_,null))):ye()(t)?t.map((function(e,t){return d.a.createElement(sa,{refetch:n,setAlert:r,index:t,key:e.id,member:e,loading:a})})):d.a.createElement(St.a,null,d.a.createElement(xt.a,{style:ua.empty,colSpan:4,align:"center"},"Nenhum usu\xe1rio cadastrado"))))))})),da=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={alertMsg:"",alertType:"",showAlert:!1},a.clearAlert=function(){return a.setState({showAlert:!1,alertMsg:""})},a.setAlert=function(e){var t=e.alertMsg,n=e.alertType,r=e.showAlert;return a.setState({alertMsg:t,alertType:n,showAlert:r})},a.renderAlertBox=function(){var e=a.state,t=e.alertMsg,n=e.alertType;return e.showAlert?d.a.createElement(he,{message:t,type:n,onClose:a.clearAlert}):null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.membersData,a=e.membersLoading,n=e.membersError,r=e.membersFetch,i=e.classes,o=v()(t,"members"),l=n,c=ye()(o);return d.a.createElement("div",{className:i.root},d.a.createElement(Ze,{alertBox:this.renderAlertBox(),error:l}),d.a.createElement("section",null,d.a.createElement("div",{className:i.container},d.a.createElement("div",{className:i.headerView},d.a.createElement("aside",{className:i.headerTitle},d.a.createElement(P.a,{variant:"h4"},d.a.createElement("b",null,c?"Usu\xe1rios (".concat(c,")"):"Usu\xe1rios"))))),d.a.createElement("div",{className:i.container},d.a.createElement(ma,{refetch:function(){return r(!1)},setAlert:this.setAlert,members:o,loading:a}))))}}]),t}(m.PureComponent),pa=et(at.getMembers,{name:"members"}),ga=Object(Be.a)(Object(z.a)((function(e){return{root:{flexGrow:1,marginRight:20,marginLeft:20},container:Object(Ke.a)({width:"auto",height:"100%",maxHeight:"100%",paddingLeft:Je.isTablet()?10:e.menuWidth/2,paddingRight:10,marginBottom:40},e.breakpoints.up(e.containerWidth+2*e.spacing(3)),{width:e.containerWidth,marginLeft:"auto",marginRight:"auto"}),headerView:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"flex-start"},headerTitle:{marginTop:10}}}),{withTheme:!0}),pa)(da),ha=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0},(function(){var t,a;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return S.isiOS&&document.querySelector('link[rel="manifest"]').setAttribute("rel","no-on-ios"),n.prev=1,n.next=4,i.a.awrap(T.getEnterpriseUser());case 4:t=n.sent,a=v()(t,"enterprise_user"),x.setUserData(a),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),x.setUserData(null);case 12:return n.prev=12,e.setState({loading:!1}),n.finish(12);case 15:case"end":return n.stop()}}),null,null,[[1,9,12,15]])}))}},{key:"render",value:function(){var e=this.state.loading;return d.a.createElement(A.a,{theme:X},d.a.createElement(C.a,null),d.a.createElement(m.Suspense,{fallback:d.a.createElement(_,{hasRefreshMsg:!0})},e?d.a.createElement(_,{hasRefreshMsg:!0}):d.a.createElement(h.a,null,d.a.createElement(b.c,null,y()(ae,(function(e,t){return e.submenus?y()(e.submenus,(function(t,a){return d.a.createElement(b.a,{key:"".concat(e.path).concat(t.path),exact:t.exact,path:"".concat(e.path).concat(t.path),component:W(n[a],t.trackPage)})})):d.a.createElement(b.a,{key:e.path,exact:e.exact,path:e.path,component:W(n[t],e.trackPage)})}))))))}}]),t}(m.PureComponent);g.a.render(d.a.createElement(ha,null),document.querySelector("main"))}},[[241,1,2]]]);
//# sourceMappingURL=main.7c681df6.chunk.js.map